# 0020. API list

**ç‰ˆæœ¬**: 1.0.0  
**å»ºç«‹æ—¥æœŸ**: 2025-08-21  
**æœ€å¾Œæ›´æ–°**: 2025-08-21  
**å»ºç«‹è€…**: AustinLiao69  

---

## ç›®æ¬¡ (Table of Contents)

### 1. [ç°¡ä»‹](#1-ç°¡ä»‹)
### 2. [API æ¶æ§‹è¨­è¨ˆ](#2-api-æ¶æ§‹è¨­è¨ˆ)
   - 2.1 [åˆ†å±¤æ¶æ§‹](#21-åˆ†å±¤æ¶æ§‹)
   - 2.2 [å››æ¨¡å¼æ”¯æ´ç­–ç•¥](#22-å››æ¨¡å¼æ”¯æ´ç­–ç•¥)

### 3. [ç•«é¢åŠŸèƒ½å°æ‡‰ (Screen-API Mapping)](#3-ç•«é¢åŠŸèƒ½å°æ‡‰-screen-api-mapping)
   - 3.1 [Epic 1: é€²å…¥éšæ®µ API](#31-epic-1-é€²å…¥éšæ®µ-api)
   - 3.2 [Epic 2: è¨˜å¸³åŠŸèƒ½ API](#32-epic-2-è¨˜å¸³åŠŸèƒ½-api)
   - 3.3 [Epic 3-6: ç®¡ç†åŠŸèƒ½ API](#33-epic-3-6-ç®¡ç†åŠŸèƒ½-api)
   - 3.4 [Epic 7-9: åˆ†æåŠŸèƒ½ API](#34-epic-7-9-åˆ†æåŠŸèƒ½-api)
   - 3.5 [Epic 10-15: ç³»çµ±åŠŸèƒ½ API](#35-epic-10-15-ç³»çµ±åŠŸèƒ½-api)

### 4. [API å¥‘ç´„è¦æ ¼ (API Contracts)](#4-api-å¥‘ç´„è¦æ ¼-api-contracts)
   - 4.1 [èªè­‰å±¤ APIs](#41-èªè­‰å±¤-apis)
   - 4.2 [è¨˜å¸³æ ¸å¿ƒ APIs](#42-è¨˜å¸³æ ¸å¿ƒ-apis)
   - 4.3 [ç®¡ç†åŠŸèƒ½ APIs](#43-ç®¡ç†åŠŸèƒ½-apis)
   - 4.4 [åˆ†æå ±è¡¨ APIs](#44-åˆ†æå ±è¡¨-apis)
   - 4.5 [ç³»çµ±æœå‹™ APIs](#45-ç³»çµ±æœå‹™-apis)

### 5. [å››æ¨¡å¼å·®ç•°åŒ–è¨­è¨ˆ](#5-å››æ¨¡å¼å·®ç•°åŒ–è¨­è¨ˆ)
### 6. [éŒ¯èª¤è™•ç†è¦ç¯„](#6-éŒ¯èª¤è™•ç†è¦ç¯„)
### 7. [API ç¸½è¦½æ¸…å–®](#7-api-ç¸½è¦½æ¸…å–®)
### 8. [ç‰ˆæœ¬ç´€éŒ„](#8-ç‰ˆæœ¬ç´€éŒ„)

---

## 1. ç°¡ä»‹

æœ¬æ–‡ä»¶åŸºæ–¼ [0021. Screen list.md](./0021.%20Screen%20list.md) çš„ 40 å€‹ç•«é¢åŠŸèƒ½éœ€æ±‚ï¼Œè¨­è¨ˆå®Œæ•´çš„ RESTful API è¦æ ¼ã€‚æ¶µè“‹ LCAS 2.0 ç³»çµ±çš„äº”å¤§åŠŸèƒ½å±¤ç´šï¼Œæ”¯æ´å››æ¨¡å¼å·®ç•°åŒ–é«”é©—ï¼Œç¢ºä¿å‰å¾Œç«¯é–‹ç™¼çš„ä¸€è‡´æ€§èˆ‡æ“´å±•æ€§ã€‚

**è¨­è¨ˆåŸå‰‡**ï¼š
- **ç•«é¢é©…å‹•**ï¼šæ¯å€‹ç•«é¢åŠŸèƒ½å°æ‡‰æ˜ç¢ºçš„ API ç«¯é»
- **å››æ¨¡å¼æ”¯æ´**ï¼šAPI å›æ‡‰æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼èª¿æ•´å…§å®¹æ·±åº¦
- **RESTful æ¨™æº–**ï¼šéµå¾ª REST æ¶æ§‹åŸå‰‡
- **æ¨¡çµ„åŒ–è¨­è¨ˆ**ï¼šAPI æŒ‰åŠŸèƒ½æ¨¡çµ„åˆ†çµ„ï¼Œä¾¿æ–¼é–‹ç™¼èˆ‡ç¶­è­·

---

## 2. API æ¶æ§‹è¨­è¨ˆ

### 2.1 åˆ†å±¤æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Presentation layer              â”‚
â”‚        (APP + LINE OA)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                AP layer                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    â”‚  èªè­‰å±¤ (Authentication)         â”‚  â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚    â”‚  æ ¸å¿ƒåŠŸèƒ½å±¤ (Core Functions)      â”‚  â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚    â”‚  å”ä½œå±¤ (Collaboration)          â”‚  â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚    â”‚  åˆ†æå±¤ (Analytics)              â”‚  â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚    â”‚  ç³»çµ±å±¤ (System Services)        â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              Business layer             â”‚
â”‚         (WH, BK, DD1...)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           Data layer                    â”‚
â”‚           (Firestore)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 å››æ¨¡å¼æ”¯æ´ç­–ç•¥

| æ¨¡å¼ | API å›æ‡‰ç­–ç•¥ | è³‡æ–™æ·±åº¦ | å€‹äººåŒ–ç¨‹åº¦ |
|------|-------------|----------|------------|
| **Expert** | å®Œæ•´è³‡æ–™ + é€²éšé¸é … | æ·±åº¦è©³ç´° | é«˜åº¦å®¢è£½ |
| **Inertial** | æ¨™æº–è³‡æ–™ + å›ºå®šé¸é … | ä¸­ç­‰è©³ç´° | ä¸­åº¦å®¢è£½ |
| **Cultivation** | å¼•å°è³‡æ–™ + é€²åº¦è¿½è¹¤ | é©ä¸­è©³ç´° | å¼•å°å°å‘ |
| **Guiding** | ç°¡åŒ–è³‡æ–™ + æœ€å°‘é¸é … | åŸºæœ¬è³‡è¨Š | æœ€å°‘å®¢è£½ |

---

## 3. ç•«é¢åŠŸèƒ½å°æ‡‰ (Screen-API Mapping)

### 3.1 Epic 1: é€²å…¥éšæ®µ API

| ç•«é¢ ID | ç•«é¢åç¨± | ä¸»è¦ API | è¼”åŠ© API |
|---------|----------|----------|----------|
| S-101 | LINE OA æ­¡è¿é  | - | `GET /system/welcome` |
| S-102 | APP å•Ÿå‹•é  | `GET /system/app-info` | - |
| S-103 | APP è¨»å†Šé  | `POST /auth/register` | `POST /auth/verify-email` |
| S-104 | APP ç™»å…¥é  | `POST /auth/login` | `POST /auth/google-login` |
| S-105 | å¿˜è¨˜å¯†ç¢¼é  | `POST /auth/forgot-password` | `POST /auth/reset-password` |
| S-106 | æ¨¡å¼è©•ä¼°å•å·é  | `POST /users/assessment` | `GET /users/assessment-questions` |
| S-107 | è·¨å¹³å°ç¶å®šé  | `POST /auth/bind-line` | `GET /auth/bind-status` |
| S-108 | APP ä¸‹è¼‰æ¨å»£é  | `GET /system/app-promotion` | - |

### 3.2 Epic 2: è¨˜å¸³åŠŸèƒ½ API

| ç•«é¢ ID | ç•«é¢åç¨± | ä¸»è¦ API | è¼”åŠ© API |
|---------|----------|----------|----------|
| S-201 | LINE OA è¨˜å¸³å°è©± | `POST /transactions/quick` | `GET /transactions/statistics` |
| S-202 | APP è¨˜å¸³ä¸»é  | `GET /transactions/dashboard` | `GET /transactions/recent` |
| S-203 | APP è¨˜å¸³è¡¨å–®é  | `POST /transactions` | `PUT /transactions/{id}` |
| S-204 | ç§‘ç›®é¸æ“‡é  | `GET /categories` | `POST /categories` |
| S-205 | å¸³æˆ¶é¸æ“‡é  | `GET /accounts` | `GET /accounts/{id}/balance` |
| S-206 | å¸³æœ¬é¸æ“‡é  | `GET /ledgers` | `GET /ledgers/{id}/permissions` |
| S-207 | åœ–ç‰‡é™„åŠ é  | `POST /transactions/{id}/attachments` | `DELETE /transactions/{id}/attachments/{attachmentId}` |
| S-208 | é‡è¤‡è¨­å®šé  | `POST /transactions/recurring` | `PUT /transactions/recurring/{id}` |
| S-209 | è¨˜éŒ„ç®¡ç†é  | `GET /transactions` | `DELETE /transactions/{id}` |
| S-210 | è¨˜éŒ„ç·¨è¼¯é  | `GET /transactions/{id}` | `PUT /transactions/{id}` |
| S-211 | çµ±è¨ˆåœ–è¡¨é  | `GET /transactions/charts` | `GET /transactions/statistics` |

### 3.3 Epic 3-6: ç®¡ç†åŠŸèƒ½ API

| ç•«é¢ ID | ç•«é¢åç¨± | ä¸»è¦ API | è¼”åŠ© API |
|---------|----------|----------|----------|
| S-301 | å¸³æœ¬ç®¡ç†ä¸»é  | `GET /ledgers` | `DELETE /ledgers/{id}` |
| S-302 | å»ºç«‹å¸³æœ¬é  | `POST /ledgers` | `GET /ledgers/types` |
| S-303 | å”ä½œç®¡ç†é  | `GET /ledgers/{id}/collaborators` | `POST /ledgers/{id}/invitations` |
| S-304 | å¸³æˆ¶ç®¡ç†ä¸»é  | `GET /accounts` | `DELETE /accounts/{id}` |
| S-305 | å»ºç«‹å¸³æˆ¶é  | `POST /accounts` | `GET /accounts/types` |
| S-306 | ç§‘ç›®ç®¡ç†ä¸»é  | `GET /categories` | `DELETE /categories/{id}` |
| S-307 | é ç®—ç®¡ç†ä¸»é  | `GET /budgets` | `GET /budgets/status` |
| S-308 | å»ºç«‹é ç®—é  | `POST /budgets` | `GET /budgets/templates` |

### 3.4 Epic 7-9: åˆ†æåŠŸèƒ½ API

| ç•«é¢ ID | ç•«é¢åç¨± | ä¸»è¦ API | è¼”åŠ© API |
|---------|----------|----------|----------|
| S-401 | å ±è¡¨åˆ†æä¸»é  | `GET /reports` | `GET /reports/templates` |
| S-402 | å ±è¡¨è¨­å®šé  | `POST /reports/generate` | `GET /reports/config-options` |
| S-403 | åœ–è¡¨å±•ç¤ºé  | `GET /reports/{id}/charts` | `POST /reports/{id}/share` |
| S-404 | å ±è¡¨ä¸‹è¼‰é  | `GET /reports/{id}/export` | `POST /reports/{id}/download` |
| S-405 | æ·±åº¦åˆ†æé  | `GET /analytics/insights` | `GET /analytics/trends` |
| S-406 | AI åŠ©ç†é  | `POST /ai/categorize` | `GET /ai/suggestions` |

### 3.5 Epic 10-15: ç³»çµ±åŠŸèƒ½ API

| ç•«é¢ ID | ç•«é¢åç¨± | ä¸»è¦ API | è¼”åŠ© API |
|---------|----------|----------|----------|
| S-501 | æ¿€å‹µç³»çµ±é  | `GET /gamification/achievements` | `POST /gamification/claim-reward` |
| S-502 | è³‡æ–™å‚™ä»½é  | `POST /backup/create` | `GET /backup/status` |
| S-503 | å®‰å…¨è¨­å®šé  | `PUT /users/security` | `POST /users/verify-pin` |
| S-504 | é€šçŸ¥è¨­å®šé  | `GET /notifications/settings` | `PUT /notifications/settings` |
| S-505 | å€‹äººè¨­å®šé  | `GET /users/profile` | `PUT /users/preferences` |
| S-506 | å¹«åŠ©ä¸­å¿ƒé  | `GET /help/articles` | `POST /help/contact` |
| S-507 | ç¤¾ç¾¤å›å ±é  | `POST /feedback/report` | `GET /system/status` |

---

## 4. API å¥‘ç´„è¦æ ¼ (API Contracts)

### 4.1 èªè­‰å±¤ APIs

#### `POST /auth/register`
**æè¿°**: ä½¿ç”¨è€…è¨»å†Šï¼ˆå°æ‡‰ S-103ï¼‰
**HTTPç‹€æ…‹ç¢¼**: 201 Created, 400 Bad Request, 409 Conflict

```json
// Request
{
  "data": {
    "email": "user@example.com",
    "password": "securePassword123",
    "confirmPassword": "securePassword123",
    "acceptTerms": true
  },
  "metadata": {
    "source": "app",
    "version": "1.0.0"
  }
}

// Response 201 Created
{
  "success": true,
  "data": {
    "userId": "uuid",
    "email": "user@example.com",
    "verificationSent": true,
    "needsAssessment": true
  },
  "metadata": {
    "timestamp": "2025-01-27T12:00:00Z",
    "requestId": "uuid"
  }
}

// Response 400 Bad Request
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Email format invalid",
    "field": "email",
    "timestamp": "2025-01-27T12:00:00Z",
    "requestId": "uuid",
    "details": {
      "validation": [
        {
          "field": "email",
          "message": "Email format invalid",
          "value": "invalid-email"
        }
      ]
    }
  }
}
```

#### `POST /auth/login`
**æè¿°**: ä½¿ç”¨è€…ç™»å…¥ï¼ˆå°æ‡‰ S-104ï¼‰
**HTTPç‹€æ…‹ç¢¼**: 200 OK, 401 Unauthorized, 403 Forbidden

```json
// Request
{
  "data": {
    "email": "user@example.com",
    "password": "securePassword123",
    "rememberMe": true
  },
  "metadata": {
    "source": "app",
    "userAgent": "LCAS-App/1.0.0"
  }
}

// Response 200 OK
{
  "success": true,
  "data": {
    "token": "jwt-token",
    "refreshToken": "refresh-jwt-token",
    "expiresAt": "2025-01-28T00:00:00Z",
    "user": {
      "userId": "uuid",
      "email": "user@example.com",
      "userMode": "Expert",
      "hasCompletedAssessment": true
    }
  },
  "metadata": {
    "timestamp": "2025-01-27T12:00:00Z",
    "requestId": "uuid",
    "userMode": "Expert"
  }
}

// Response 401 Unauthorized
{
  "success": false,
  "error": {
    "code": "UNAUTHORIZED",
    "message": "Email or password incorrect",
    "timestamp": "2025-01-27T12:00:00Z",
    "requestId": "uuid"
  }
}
```

#### `POST /users/assessment`
**æè¿°**: æ¨¡å¼è©•ä¼°å•å·ï¼ˆå°æ‡‰ S-106ï¼‰
```json
// Request
{
  "answers": [
    {"questionId": 1, "answer": "A"},
    {"questionId": 2, "answer": "C"},
    {"questionId": 3, "answer": "B"},
    {"questionId": 4, "answer": "A"},
    {"questionId": 5, "answer": "D"}
  ]
}

// Response 200
{
  "success": true,
  "data": {
    "recommendedMode": "Expert",
    "confidence": 85,
    "explanation": "åŸºæ–¼æ‚¨çš„å›ç­”ï¼Œå»ºè­°ä½¿ç”¨å°ˆå®¶æ¨¡å¼ä»¥ç²å¾—å®Œæ•´åŠŸèƒ½é«”é©—",
    "modeCharacteristics": {
      "Expert": "å®Œæ•´åŠŸèƒ½ã€å°ˆæ¥­å·¥å…·ã€æ·±åº¦è¨­å®š",
      "alternative": "Inertial"
    }
  }
}
```

### 4.2 è¨˜å¸³æ ¸å¿ƒ APIs

#### `POST /transactions/quick`
**æè¿°**: LINE OA å¿«é€Ÿè¨˜å¸³ï¼ˆå°æ‡‰ S-201ï¼‰
```json
// Request
{
  "input": "åˆé¤ 150",
  "userId": "uuid",
  "ledgerId": "default"
}

// Response 200
{
  "success": true,
  "data": {
    "transactionId": "uuid",
    "parsed": {
      "amount": 150,
      "type": "expense",
      "category": "é£Ÿç‰©",
      "description": "åˆé¤"
    },
    "confirmation": "âœ… å·²è¨˜éŒ„æ”¯å‡º NT$150 - åˆé¤ï¼ˆé£Ÿç‰©ï¼‰",
    "balance": {
      "today": -450,
      "month": -12500
    }
  }
}
```

#### `POST /transactions`
**æè¿°**: å®Œæ•´è¨˜å¸³ï¼ˆå°æ‡‰ S-203ï¼‰
```json
// Request
{
  "æ”¶æ”¯ID": "20250127-001",
  "ä½¿ç”¨è€…é¡å‹": "M",
  "æ—¥æœŸ": "2025/01/27",
  "æ™‚é–“": "19:30",
  "å¤§é …ä»£ç¢¼": "100",
  "å­é …ä»£ç¢¼": "10001",
  "æ”¯ä»˜æ–¹å¼": "ç¾é‡‘",
  "å­é …åç¨±": "æ™šé¤",
  "UID": "Uae47d9d496e4596d70ed724a7d6e2948",
  "å‚™è¨»": "æ™šé¤èšæœƒ",
  "æ”¶å…¥": null,
  "æ”¯å‡º": 500,
  "åŒç¾©è©": "æ™šé¤èšæœƒ",
  "currency": "NTD",
  "timestamp": "2025-01-27T11:30:00.000Z"
}

// Response 201 (å››æ¨¡å¼å·®ç•°åŒ–)
{
  "success": true,
  "data": {
    "æ”¶æ”¯ID": "20250127-001",
    "æ”¯å‡º": 500,
    "ä½¿ç”¨è€…é¡å‹": "M",
    "å­é …åç¨±": "é£Ÿç‰©",
    "æ”¯ä»˜æ–¹å¼": "ä¿¡ç”¨å¡",
    "æ—¥æœŸ": "2025/01/27",
    "æ™‚é–“": "19:30",

    // Expert Mode: è©³ç´°è³‡è¨Š
    "å¤§é …ä»£ç¢¼": "100",
    "å­é …ä»£ç¢¼": "10001",

    // Cultivation Mode: æ¿€å‹µè³‡è¨Š
    "achievement": {
      "type": "streak",
      "message": "é€£çºŒè¨˜å¸³ 7 å¤©ï¼",
      "progress": 70
    },

    // Guiding Mode: ç°¡åŒ–ç¢ºèª
    "message": "è¨˜å¸³æˆåŠŸ"
  }
}
```

#### `GET /transactions/dashboard`
**æè¿°**: è¨˜å¸³ä¸»é æ•¸æ“šï¼ˆå°æ‡‰ S-202ï¼‰
**HTTPç‹€æ…‹ç¢¼**: 200 OK, 401 Unauthorized, 403 Forbidden

**æŸ¥è©¢åƒæ•¸**:
```
GET /transactions/dashboard?ledgerId=uuid&dateRange=30d&userMode=Expert
```

```json
// Response 200 OK (Expert Mode)
{
  "success": true,
  "data": {
    "summary": {
      "todayIncome": 0,
      "todayExpense": 450,
      "monthIncome": 50000,
      "monthExpense": 35000,
      "balance": 15000
    },
    "recentTransactions": {
      "items": [...],
      "pagination": {
        "page": 1,
        "limit": 5,
        "total": 156,
        "hasNext": true
      }
    },
    "charts": {
      "weeklyTrend": [...],
      "categoryDistribution": [...]
    },
    "budgetStatus": [...],
    "quickActions": [
      {"action": "addTransaction", "label": "å¿«é€Ÿè¨˜å¸³"},
      {"action": "viewReports", "label": "æŸ¥çœ‹å ±è¡¨"}
    ]
  },
  "metadata": {
    "timestamp": "2025-01-27T12:00:00Z",
    "requestId": "uuid",
    "userMode": "Expert"
  }
}

// Response 200 OK (Guiding Mode)
{
  "success": true,
  "data": {
    "todayExpense": 450,
    "quickAddButton": true,
    "simpleMessage": "ä»Šå¤©å·²èŠ±è²» NT$450"
  },
  "metadata": {
    "timestamp": "2025-01-27T12:00:00Z",
    "requestId": "uuid",
    "userMode": "Guiding"
  }
}

// Response 401 Unauthorized
{
  "success": false,
  "error": {
    "code": "UNAUTHORIZED",
    "message": "Token expired or invalid",
    "timestamp": "2025-01-27T12:00:00Z",
    "requestId": "uuid"
  }
}
```

### 4.3 ç®¡ç†åŠŸèƒ½ APIs

#### `GET /ledgers`
**æè¿°**: å–å¾—å¸³æœ¬åˆ—è¡¨ï¼ˆå°æ‡‰ S-301ï¼‰
**HTTPç‹€æ…‹ç¢¼**: 200 OK, 401 Unauthorized, 403 Forbidden

**æŸ¥è©¢åƒæ•¸**:
```
GET /ledgers?page=1&limit=20&sort=lastActivity:desc&filter=type:personal
```

```json
// Response 200 OK
{
  "success": true,
  "data": {
    "items": [
      {
        "ledgerId": "uuid",
        "name": "å€‹äººå¸³æœ¬",
        "type": "personal",
        "isDefault": true,
        "balance": 25000,
        "transactionCount": 156,
        "lastActivity": "2025-01-27T10:30:00Z",
        "role": "owner",
        "createdAt": "2025-01-01T00:00:00Z",
        "updatedAt": "2025-01-27T10:30:00Z"
      },
      {
        "ledgerId": "uuid-2", 
        "name": "å®¶åº­æ”¯å‡º",
        "type": "collaborative",
        "isDefault": false,
        "balance": 45000,
        "transactionCount": 89,
        "lastActivity": "2025-01-26T15:20:00Z",
        "role": "member",
        "collaborators": 3,
        "createdAt": "2025-01-15T00:00:00Z",
        "updatedAt": "2025-01-26T15:20:00Z"
      }
    ],
    "pagination": {
      "page": 1,
      "limit": 20,
      "total": 2,
      "totalPages": 1,
      "hasNext": false,
      "hasPrev": false
    },
    "summary": {
      "totalLedgers": 2,
      "defaultLedgerId": "uuid"
    }
  },
  "metadata": {
    "timestamp": "2025-01-27T12:00:00Z",
    "requestId": "uuid",
    "userMode": "Expert"
  }
}
```

#### `POST /ledgers` - å»ºç«‹æ–°å¸³æœ¬
```json
{
  "ledgername": "å®¶åº­å¸³æœ¬",
  "description": "è¨˜éŒ„å®¶åº­æ”¶æ”¯",
  "ownerUID": "Uae47d9d496e4596d70ed724a7d6e2948",
  "MemberUID": ["Uae47d9d496e4596d70ed724a7d6e2948"]
}
```
- `GET /ledgers/{id}` - å–å¾—ç‰¹å®šå¸³æœ¬è³‡è¨Š
- `PUT /ledgers/{id}` - æ›´æ–°å¸³æœ¬è¨­å®š
- `DELETE /ledgers/{id}` - åˆªé™¤å¸³æœ¬
- `GET /ledgers/{id}/members` - å–å¾—å¸³æœ¬æˆå“¡æ¸…å–®
- `POST /ledgers/{id}/members` - æ–°å¢å¸³æœ¬æˆå“¡
- `DELETE /ledgers/{id}/members/{UID}` - ç§»é™¤å¸³æœ¬æˆå“¡

### 4.4 åˆ†æå ±è¡¨ APIs

#### `GET /reports/templates`
**æè¿°**: å–å¾—å ±è¡¨æ¨¡æ¿ï¼ˆå°æ‡‰ S-401ï¼‰
```json
// Response 200 (å››æ¨¡å¼å·®ç•°åŒ–)
{
  "success": true,
  "data": {
    // Expert Mode: å®Œæ•´æ¨¡æ¿
    "templates": [
      {
        "id": "monthly-detailed",
        "name": "æœˆåº¦è©³ç´°å ±è¡¨",
        "description": "åŒ…å«åˆ†é¡ã€è¶¨å‹¢ã€é ç®—åˆ†æ",
        "chartTypes": ["pie", "bar", "line"],
        "complexity": "high"
      },
      {
        "id": "budget-analysis",
        "name": "é ç®—åŸ·è¡Œåˆ†æ",
        "description": "é ç®—é”æˆç‡èˆ‡å·®ç•°åˆ†æ",
        "chartTypes": ["bar", "gauge"],
        "complexity": "high"
      }
    ],

    // Inertial/Cultivation Mode: æ¨™æº–æ¨¡æ¿
    "templates": [
      {
        "id": "monthly-simple",
        "name": "æœˆåº¦æ”¶æ”¯å ±è¡¨",
        "description": "åŸºæœ¬æ”¶æ”¯çµ±è¨ˆ",
        "chartTypes": ["pie", "bar"]
      }
    ],

    // Guiding Mode: æ¥µç°¡æ¨¡æ¿
    "templates": [
      {
        "id": "basic-summary",
        "name": "æ”¶æ”¯æ‘˜è¦",
        "description": "ç°¡å–®æ”¶æ”¯çµ±è¨ˆ"
      }
    ]
  }
}
```

#### `POST /reports/generate`
**æè¿°**: ç”Ÿæˆå ±è¡¨ï¼ˆå°æ‡‰ S-402ï¼‰
```json
// Request
{
  "templateId": "monthly-detailed",
  "dateRange": {
    "start": "2025-01-01",
    "end": "2025-01-31"
  },
  "filters": {
    "ledgerIds": ["uuid"],
    "categoryIds": ["uuid1", "uuid2"],
    "accountIds": ["uuid3"]
  },
  "chartTypes": ["pie", "bar", "line"]
}

// Response 202
{
  "success": true,
  "data": {
    "reportId": "uuid",
    "status": "generating",
    "estimatedTime": 30,
    "checkStatusUrl": "/reports/uuid/status"
  }
}
```

### 4.5 ç³»çµ±æœå‹™ APIs

#### `GET /gamification/achievements`
**æè¿°**: å–å¾—æˆå°±ç³»çµ±ï¼ˆå°æ‡‰ S-501ï¼‰
```json
// Response 200 (ä¸»è¦ç”¨æ–¼ Cultivation Mode)
{
  "success": true,
  "data": {
    "currentLevel": 5,
    "totalPoints": 1250,
    "nextLevelPoints": 1500,
    "achievements": [
      {
        "id": "uuid",
        "title": "è¨˜å¸³æ–°æ‰‹",
        "description": "å®Œæˆç¬¬ä¸€ç­†è¨˜å¸³",
        "icon": "ğŸ‰",
        "unlockedAt": "2025-01-20T10:00:00Z",
        "points": 50
      }
    ],
    "currentChallenges": [
      {
        "id": "uuid",
        "title": "é€£çºŒè¨˜å¸³ 7 å¤©",
        "progress": 5,
        "target": 7,
        "reward": 100,
        "expiresAt": "2025-02-03T23:59:59Z"
      }
    ]
  }
}
```

---

## 5. å°æ‡‰é—œä¿‚æ˜ å°„

### 5.1 User Story â†’ Screen â†’ API ä¸‰ç¶­å°æ‡‰çŸ©é™£

| User Story | å°æ‡‰ç•«é¢ | ä¸»è¦ API | è¼”åŠ© API | å„ªå…ˆç´š |
|------------|----------|----------|----------|--------|
| US-001: LINE OA åŠ å…¥ | S-101 | - | `GET /system/welcome` | P1 |
| US-003: APP è¨»å†Š | S-103 | `POST /auth/register` | `POST /auth/verify-email` | P1 |
| US-005: APP ç™»å…¥ | S-104 | `POST /auth/login` | `POST /auth/google-login` | P1 |
| US-006: å¿˜è¨˜å¯†ç¢¼ | S-105 | `POST /auth/forgot-password` | `GET /auth/verify-reset-token`, `POST /auth/reset-password` | P1 |
| US-008: LINE OA è¨˜å¸³ | S-201 | `POST /transactions/quick` | `GET /transactions/statistics` | P1 |
| US-010: APP è¨˜å¸³ | S-203 | `POST /transactions` | `PUT /transactions/{id}` | P1 |
| US-012: é‡è¤‡è¨­å®š | S-208 | `POST /transactions/recurring` | `GET /transactions/recurring`, `PUT /transactions/recurring/{id}` | P2 |
| US-016: è¨˜éŒ„ç®¡ç† | S-209, S-210 | `GET /transactions`, `PUT /transactions/{id}` | `DELETE /transactions/{id}`, `POST /transactions/batch` | P1 |
| US-017: å»ºç«‹å¸³æœ¬ | S-302 | `POST /ledgers` | `GET /ledgers/types` | P2 |
| US-018: å”ä½œç®¡ç† | S-303 | `GET /ledgers/{id}/collaborators` | `POST /ledgers/{id}/invitations`, `GET /ledgers/{id}/conflicts` | P2 |
| US-025: é ç®—è¨­å®š | S-308 | `POST /budgets` | `GET /budgets/templates` | P2 |
| US-026: ç”Ÿæˆå ±è¡¨ | S-403 | `POST /reports/generate` | `GET /reports/{id}/status`, `DELETE /reports/{id}/cancel` | P1 |
| US-029: AI è¼”åŠ© | S-406 | `POST /ai/categorize` | `GET /ai/suggestions`, `POST /ai/budget-advice` | P3 |
| US-030: éŠæˆ²æŒ‘æˆ° | S-501 | `GET /gamification/achievements` | `GET /gamification/challenges`, `POST /gamification/join-challenge` | P2 |
| US-034: è¨˜å¸³æé†’ | S-504 | `GET /notifications/settings` | `POST /notifications/reminders`, `PUT /notifications/reminders/{id}` | P1 |

### 5.2 ç•«é¢åŠŸèƒ½å®Œæ•´æ€§æª¢æŸ¥

| ç•«é¢ ID | ç•«é¢åç¨± | ç¼ºå¤± API è£œå…… | ç‹€æ…‹ |
|---------|----------|---------------|------|
| S-106 | æ¨¡å¼è©•ä¼°å•å·é  | `GET /users/assessment-questions` | âœ… å·²è£œå…… |
| S-208 | é‡è¤‡è¨­å®šé  | `GET /transactions/recurring`, `DELETE /transactions/recurring/{id}` | âœ… å·²è£œå…… |
| S-303 | å”ä½œç®¡ç†é  | `GET /ledgers/{id}/conflicts`, `POST /ledgers/{id}/resolve-conflict` | âœ… å·²è£œå…… |
| S-403 | åœ–è¡¨å±•ç¤ºé  | `GET /reports/{id}/status`, `DELETE /reports/{id}/cancel` | âœ… å·²è£œå…… |
| S-501 | æ¿€å‹µç³»çµ±é  | `GET /gamification/challenges`, `POST /gamification/join-challenge` | âœ… å·²è£œå…… |

### 5.3 User Scenario æµç¨‹æ”¯æ´æª¢æŸ¥

| User Scenario | æ”¯æ´ API | æ–°å¢ API | ç‹€æ…‹ |
|---------------|----------|----------|------|
| SC-009: å”ä½œç®¡ç† | å”ä½œè¡çªæª¢æ¸¬ | `GET /ledgers/{id}/conflicts` | âœ… å·²è£œå…… |
| SC-012: å ±è¡¨åˆ†æ | é€²åº¦æŸ¥è©¢èˆ‡å–æ¶ˆ | `GET /reports/{id}/status`, `DELETE /reports/{id}/cancel` | âœ… å·²è£œå…… |
| ç•°å¸¸è™•ç†æµç¨‹ | é‡è©¦èˆ‡åŒæ­¥ | `POST /system/retry`, `POST /system/sync` | âœ… å·²è£œå…… |
| æ‰¹æ¬¡æ“ä½œ | æ‰¹æ¬¡è™•ç† | `POST /transactions/batch`, `PUT /transactions/batch` | âœ… å·²è£œå…… |

## 6. å››æ¨¡å¼å·®ç•°åŒ–è¨­è¨ˆ

### API Response å·®ç•°åŒ–ç­–ç•¥

```json
// åŒä¸€ API çš„å››æ¨¡å¼å›æ‡‰ç¯„ä¾‹: GET /transactions/dashboard

// Expert Mode - å®Œæ•´å°ˆæ¥­è³‡è¨Š
{
  "summary": {...},
  "recentTransactions": [...],
  "charts": {...},
  "budgetAnalysis": {...},
  "trendAnalysis": {...},
  "customFilters": {...},
  "advancedActions": [...]
}

// Inertial Mode - æ¨™æº–å›ºå®šè³‡è¨Š
{
  "summary": {...},
  "recentTransactions": [...],
  "basicCharts": {...},
  "standardActions": [...]
}

// Cultivation Mode - å¼•å°æ¿€å‹µè³‡è¨Š
{
  "summary": {...},
  "recentTransactions": [...],
  "progressTracking": {...},
  "achievements": {...},
  "motivationalContent": {...},
  "guidedActions": [...]
}

// Guiding Mode - æ¥µç°¡åŸºç¤è³‡è¨Š
{
  "todayTotal": "450",
  "quickAddButton": true,
  "basicMessage": "ä»Šå¤©å·²èŠ±è²» NT$450"
}
```

### æ¨¡å¼åˆ¤æ–·æ©Ÿåˆ¶
- **Header å‚³é**: `X-User-Mode: Expert`
- **ç”¨æˆ¶è¨­å®š**: åŸºæ–¼è©•ä¼°å•å·çµæœ
- **å‹•æ…‹èª¿æ•´**: ä½¿ç”¨è€…å¯éš¨æ™‚åˆ‡æ›æ¨¡å¼

---

## 6. åˆ†é è¨­è¨ˆè¦ç¯„

### 6.1 åˆ†é åƒæ•¸æ¨™æº–
æ‰€æœ‰åˆ—è¡¨APIçµ±ä¸€ä½¿ç”¨ä»¥ä¸‹åˆ†é åƒæ•¸ï¼ˆç¬¦åˆ0088è¦ç¯„ï¼‰ï¼š

```
GET /resource?page=1&limit=20&sort=field:direction&filter=type:value
```

**æ¨™æº–åƒæ•¸**ï¼š
- `page`: é ç¢¼ï¼ˆå¾1é–‹å§‹ï¼Œé è¨­1ï¼‰
- `limit`: æ¯é ç­†æ•¸ï¼ˆé è¨­20ï¼Œæœ€å¤§100ï¼‰
- `sort`: æ’åºæ ¼å¼ `{field}:{asc|desc}`
- `filter`: éæ¿¾æ¢ä»¶ `{field}:{value}`

### 6.2 åˆ†é å›æ‡‰æ ¼å¼
```json
{
  "success": true,
  "data": {
    "items": [...],
    "pagination": {
      "page": 1,
      "limit": 20,
      "total": 156,
      "totalPages": 8,
      "hasNext": true,
      "hasPrev": false,
      "nextPage": 2,
      "prevPage": null
    }
  },
  "metadata": {
    "timestamp": "2025-01-27T12:00:00Z",
    "requestId": "uuid"
  }
}
```

## 7. éŒ¯èª¤è™•ç†è¦ç¯„

### 7.1 HTTP ç‹€æ…‹ç¢¼ï¼ˆç¬¦åˆ0088è¦ç¯„ï¼‰

| ç‹€æ…‹ç¢¼ | èªªæ˜ | ä½¿ç”¨å ´æ™¯ |
|--------|------|----------|
| 200 | æˆåŠŸ | æ­£å¸¸è«‹æ±‚å›æ‡‰ |
| 201 | å»ºç«‹æˆåŠŸ | è³‡æºå‰µå»º |
| 204 | ç„¡å…§å®¹ | æˆåŠŸåˆªé™¤ |
| 400 | è«‹æ±‚éŒ¯èª¤ | åƒæ•¸é©—è­‰å¤±æ•— |
| 401 | æœªæˆæ¬Š | token ç„¡æ•ˆæˆ–éæœŸ |
| 403 | ç¦æ­¢å­˜å– | æ¬Šé™ä¸è¶³ |
| 404 | è³‡æºä¸å­˜åœ¨ | æŸ¥è©¢ä¸åˆ°è³‡æ–™ |
| 409 | è³‡æºè¡çª | é‡è¤‡å‰µå»º |
| 422 | ç„¡æ³•è™•ç† | æ¥­å‹™é‚è¼¯éŒ¯èª¤ |
| 500 | ä¼ºæœå™¨éŒ¯èª¤ | ç³»çµ±ç•°å¸¸ |

### 7.2 éŒ¯èª¤å›æ‡‰æ ¼å¼ï¼ˆç¬¦åˆ0088è¦ç¯„ï¼‰

```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "é‡‘é¡å¿…é ˆå¤§æ–¼ 0",
    "field": "amount",
    "timestamp": "2025-01-27T12:00:00Z",
    "requestId": "uuid",
    "details": {
      "validation": [
        {
          "field": "amount",
          "message": "é‡‘é¡å¿…é ˆå¤§æ–¼ 0",
          "value": -100
        }
      ]
    }
  }
}
```

### 7.3 å¸¸è¦‹éŒ¯èª¤ç¢¼ï¼ˆç¬¦åˆ0088è¦ç¯„ï¼‰

#### å®¢æˆ¶ç«¯éŒ¯èª¤ï¼ˆ4xxï¼‰
| éŒ¯èª¤ç¢¼ | èªªæ˜ | HTTP Status |
|--------|------|-------------|
| VALIDATION_ERROR | åƒæ•¸é©—è­‰å¤±æ•— | 400 |
| UNAUTHORIZED | æœªæˆæ¬Šå­˜å– | 401 |
| INSUFFICIENT_PERMISSIONS | æ¬Šé™ä¸è¶³ | 403 |
| RESOURCE_NOT_FOUND | è³‡æºä¸å­˜åœ¨ | 404 |
| DUPLICATE_RESOURCE | è³‡æºå·²å­˜åœ¨ | 409 |
| RATE_LIMIT_EXCEEDED | è«‹æ±‚é »ç‡è¶…é™ | 429 |

#### æ¥­å‹™é‚è¼¯éŒ¯èª¤ï¼ˆ422ï¼‰
| éŒ¯èª¤ç¢¼ | èªªæ˜ |
|--------|------|
| BUSINESS_LOGIC_ERROR | ä¸€èˆ¬æ¥­å‹™é‚è¼¯éŒ¯èª¤ |
| INSUFFICIENT_BALANCE | é¤˜é¡ä¸è¶³ |
| BUDGET_EXCEEDED | è¶…å‡ºé ç®— |
| INVALID_OPERATION | ç„¡æ•ˆæ“ä½œ |
| CONFLICT_DETECTED | å”ä½œè¡çª |

#### ä¼ºæœå™¨éŒ¯èª¤ï¼ˆ5xxï¼‰
| éŒ¯èª¤ç¢¼ | èªªæ˜ | HTTP Status |
|--------|------|-------------|
| INTERNAL_SERVER_ERROR | å…§éƒ¨ä¼ºæœå™¨éŒ¯èª¤ | 500 |
| SERVICE_UNAVAILABLE | æœå‹™æš«æ™‚ä¸å¯ç”¨ | 503 |
| TIMEOUT_ERROR | è«‹æ±‚è¶…æ™‚ | 504 |

---

## 8. API ç¸½è¦½æ¸…å–®

### å®Œæ•´ API ç«¯é»æ¸…å–® (126 å€‹ç«¯é»)

#### èªè­‰æœå‹™ (10 å€‹)
- `POST /auth/register` - è¨»å†Š
- `POST /auth/login` - ç™»å…¥
- `POST /auth/google-login` - Google ç™»å…¥
- `POST /auth/logout` - ç™»å‡º
- `POST /auth/refresh` - åˆ·æ–° token
- `POST /auth/forgot-password` - å¿˜è¨˜å¯†ç¢¼
- `GET /auth/verify-reset-token` - é©—è­‰é‡è¨­é€£çµ
- `POST /auth/reset-password` - é‡è¨­å¯†ç¢¼
- `POST /auth/bind-line` - LINE ç¶å®š
- `GET /auth/bind-status` - ç¶å®šç‹€æ…‹æŸ¥è©¢

#### ç”¨æˆ¶ç®¡ç† (10 å€‹)
- `GET /users/profile` - å–å¾—å€‹äººè³‡æ–™
- `PUT /users/profile` - æ›´æ–°å€‹äººè³‡æ–™
- `GET /users/assessment-questions` - å–å¾—è©•ä¼°å•å·
- `POST /users/assessment` - æäº¤è©•ä¼°çµæœ
- `PUT /users/preferences` - æ›´æ–°åå¥½è¨­å®š
- `PUT /users/security` - å®‰å…¨è¨­å®š
- `PUT /users/mode` - åˆ‡æ›ä½¿ç”¨è€…æ¨¡å¼
- `GET /users/mode-defaults` - å–å¾—æ¨¡å¼é è¨­å€¼
- `POST /users/behavior-tracking` - ä½¿ç”¨è¡Œç‚ºè¿½è¹¤
- `GET /users/mode-recommendations` - æ¨¡å¼å„ªåŒ–å»ºè­°

#### è¨˜å¸³äº¤æ˜“ (20 å€‹)
- `GET /transactions` - æŸ¥è©¢äº¤æ˜“åˆ—è¡¨
- `POST /transactions` - æ–°å¢äº¤æ˜“
- `GET /transactions/{id}` - å–å¾—äº¤æ˜“è©³æƒ…
- `PUT /transactions/{id}` - æ›´æ–°äº¤æ˜“
- `DELETE /transactions/{id}` - åˆªé™¤äº¤æ˜“
- `POST /transactions/batch` - æ‰¹æ¬¡æ–°å¢äº¤æ˜“
- `PUT /transactions/batch` - æ‰¹æ¬¡æ›´æ–°äº¤æ˜“
- `DELETE /transactions/batch` - æ‰¹æ¬¡åˆªé™¤äº¤æ˜“
- `POST /transactions/quick` - å¿«é€Ÿè¨˜å¸³ (LINE OA)
- `GET /transactions/dashboard` - å„€è¡¨æ¿æ•¸æ“š
- `GET /transactions/recent` - æœ€è¿‘äº¤æ˜“
- `GET /transactions/statistics` - çµ±è¨ˆæ•¸æ“š
- `GET /transactions/charts` - åœ–è¡¨æ•¸æ“š
- `GET /transactions/recurring` - æŸ¥è©¢é‡è¤‡äº¤æ˜“
- `POST /transactions/recurring` - å»ºç«‹é‡è¤‡äº¤æ˜“
- `PUT /transactions/recurring/{id}` - æ›´æ–°é‡è¤‡äº¤æ˜“
- `DELETE /transactions/recurring/{id}` - åˆªé™¤é‡è¤‡äº¤æ˜“
- `POST /transactions/{id}/attachments` - ä¸Šå‚³é™„ä»¶
- `DELETE /transactions/{id}/attachments/{attachmentId}` - åˆªé™¤é™„ä»¶
- `POST /transactions/import` - åŒ¯å…¥äº¤æ˜“

#### å¸³æœ¬ç®¡ç† (13 å€‹)
- `GET /ledgers` - å–å¾—å¸³æœ¬åˆ—è¡¨
- `POST /ledgers` - å»ºç«‹å¸³æœ¬
- `GET /ledgers/{id}` - å–å¾—å¸³æœ¬è©³æƒ…
- `PUT /ledgers/{id}` - æ›´æ–°å¸³æœ¬
- `DELETE /ledgers/{id}` - åˆªé™¤å¸³æœ¬
- `GET /ledgers/{id}/collaborators` - å–å¾—å”ä½œè€…
- `POST /ledgers/{id}/invitations` - é‚€è«‹å”ä½œè€…
- `PUT /ledgers/{id}/collaborators/{userId}` - æ›´æ–°å”ä½œè€…æ¬Šé™
- `DELETE /ledgers/{id}/collaborators/{userId}` - ç§»é™¤å”ä½œè€…
- `GET /ledgers/{id}/permissions` - å–å¾—æ¬Šé™ç‹€æ…‹
- `GET /ledgers/{id}/conflicts` - æª¢æ¸¬å”ä½œè¡çª
- `POST /ledgers/{id}/resolve-conflict` - è§£æ±ºå”ä½œè¡çª
- `GET /ledgers/{id}/audit-log` - å–å¾—æ“ä½œå¯©è¨ˆæ—¥èªŒ

#### å¸³æˆ¶ç®¡ç† (8 å€‹)
- `GET /accounts` - å–å¾—å¸³æˆ¶åˆ—è¡¨
- `POST /accounts` - å»ºç«‹å¸³æˆ¶
- `GET /accounts/{id}` - å–å¾—å¸³æˆ¶è©³æƒ…
- `PUT /accounts/{id}` - æ›´æ–°å¸³æˆ¶
- `DELETE /accounts/{id}` - åˆªé™¤å¸³æˆ¶
- `GET /accounts/{id}/balance` - å–å¾—å¸³æˆ¶é¤˜é¡
- `GET /accounts/types` - å–å¾—å¸³æˆ¶é¡å‹
- `POST /accounts/transfer` - å¸³æˆ¶è½‰å¸³

#### ç§‘ç›®ç®¡ç† (6 å€‹)
- `GET /categories` - å–å¾—ç§‘ç›®åˆ—è¡¨
- `POST /categories` - å»ºç«‹ç§‘ç›®
- `GET /categories/{id}` - å–å¾—ç§‘ç›®è©³æƒ…
- `PUT /categories/{id}` - æ›´æ–°ç§‘ç›®
- `DELETE /categories/{id}` - åˆªé™¤ç§‘ç›®
- `GET /categories/tree` - å–å¾—ç§‘ç›®æ¨¹ç‹€çµæ§‹

#### é ç®—ç®¡ç† (8 å€‹)
- `GET /budgets` - å–å¾—é ç®—åˆ—è¡¨
- `POST /budgets` - å»ºç«‹é ç®—
- `GET /budgets/{id}` - å–å¾—é ç®—è©³æƒ…
- `PUT /budgets/{id}` - æ›´æ–°é ç®—
- `DELETE /budgets/{id}` - åˆªé™¤é ç®—
- `GET /budgets/status` - å–å¾—é ç®—åŸ·è¡Œç‹€æ³
- `GET /budgets/templates` - å–å¾—é ç®—æ¨¡æ¿
- `POST /budgets/alert` - é ç®—è­¦ç¤ºè¨­å®š

#### å ±è¡¨åˆ†æ (13 å€‹)
- `GET /reports` - å–å¾—å ±è¡¨åˆ—è¡¨
- `POST /reports/generate` - ç”Ÿæˆå ±è¡¨
- `GET /reports/{id}` - å–å¾—å ±è¡¨è©³æƒ…
- `GET /reports/{id}/status` - æŸ¥è©¢å ±è¡¨ç”Ÿæˆé€²åº¦
- `DELETE /reports/{id}/cancel` - å–æ¶ˆå ±è¡¨ç”Ÿæˆ
- `GET /reports/{id}/charts` - å–å¾—å ±è¡¨åœ–è¡¨
- `GET /reports/{id}/export` - åŒ¯å‡ºå ±è¡¨
- `POST /reports/{id}/share` - åˆ†äº«å ±è¡¨
- `GET /reports/templates` - å–å¾—å ±è¡¨æ¨¡æ¿
- `GET /analytics/insights` - æ·±åº¦åˆ†ææ´å¯Ÿ
- `GET /analytics/trends` - è¶¨å‹¢åˆ†æ
- `POST /analytics/custom` - è‡ªå®šç¾©åˆ†æ
- `GET /analytics/scheduled` - å®šæœŸå ±è¡¨æ’ç¨‹

#### AI åŠ©ç† (6 å€‹)
- `POST /ai/categorize` - AI æ™ºæ…§åˆ†é¡
- `GET /ai/suggestions` - AI å»ºè­°
- `POST /ai/budget-advice` - AI é ç®—å»ºè­°
- `POST /ai/anomaly-detection` - ç•°å¸¸æª¢æ¸¬
- `POST /ai/spending-insights` - AI æ”¯å‡ºæ´å¯Ÿ
- `GET /ai/recommendations` - AI å€‹äººåŒ–æ¨è–¦

#### æ¿€å‹µç³»çµ± (6 å€‹)
- `GET /gamification/achievements` - å–å¾—æˆå°±
- `GET /gamification/challenges` - å–å¾—æŒ‘æˆ°
- `POST /gamification/claim-reward` - é ˜å–çå‹µ
- `GET /gamification/leaderboard` - æ’è¡Œæ¦œ
- `POST /gamification/join-challenge` - åŠ å…¥æŒ‘æˆ°
- `GET /gamification/progress` - æŒ‘æˆ°é€²åº¦æŸ¥è©¢

#### ç³»çµ±æœå‹™ (12 å€‹)
- `GET /system/app-info` - APP è³‡è¨Š
- `GET /system/welcome` - æ­¡è¿è³‡è¨Š
- `GET /system/status` - ç³»çµ±ç‹€æ…‹
- `GET /system/health` - å¥åº·æª¢æŸ¥
- `GET /system/app-promotion` - APP æ¨å»£è³‡è¨Š
- `GET /system/config` - ç³»çµ±é…ç½®
- `PUT /system/config` - æ›´æ–°ç³»çµ±é…ç½®
- `GET /system/maintenance` - ç¶­è­·ç‹€æ…‹
- `POST /feedback/report` - å•é¡Œå›å ±
- `GET /help/articles` - å¹«åŠ©æ–‡ç« 
- `POST /system/retry` - é‡è©¦æ©Ÿåˆ¶
- `POST /system/sync` - é›¢ç·šåŒæ­¥

#### å‚™ä»½èˆ‡è³‡æ–™ç®¡ç† (6 å€‹)
- `POST /backup/create` - å»ºç«‹å‚™ä»½
- `GET /backup/list` - å‚™ä»½åˆ—è¡¨
- `POST /backup/restore` - é‚„åŸå‚™ä»½
- `GET /backup/status` - å‚™ä»½ç‹€æ…‹
- `POST /data/export` - åŒ¯å‡ºè³‡æ–™
- `POST /data/import` - åŒ¯å…¥è³‡æ–™

#### é€šçŸ¥ç®¡ç† (8 å€‹)
- `GET /notifications/settings` - å–å¾—é€šçŸ¥è¨­å®š
- `PUT /notifications/settings` - æ›´æ–°é€šçŸ¥è¨­å®š
- `GET /notifications/list` - é€šçŸ¥åˆ—è¡¨
- `PUT /notifications/{id}/read` - æ¨™è¨˜å·²è®€
- `POST /notifications/reminders` - å»ºç«‹è¨˜å¸³æé†’
- `PUT /notifications/reminders/{id}` - æ›´æ–°æé†’è¦å‰‡
- `DELETE /notifications/reminders/{id}` - åˆªé™¤æé†’
- `GET /notifications/reminder-templates` - å–å¾—æé†’æ¨¡æ¿

## 8. ç³»çµ±æ—¥èªŒç®¡ç†

- `GET /ledgers/{ledgerId}/log` - å–å¾—å¸³æœ¬æ“ä½œæ—¥èªŒ
```json
{
  "success": true,
  "data": [
    {
      "æ™‚é–“": "2025-01-27T11:30:00.000Z",
      "è¨Šæ¯": "æ–°å¢è¨˜å¸³è¨˜éŒ„",
      "æ“ä½œé¡å‹": "æ–°å¢è¨˜å¸³",
      "UID": "Uae47d9d496e4596d70ed724a7d6e2948",
      "éŒ¯èª¤ä»£ç¢¼": null,
      "ä¾†æº": "Web",
      "éŒ¯èª¤è©³æƒ…": null,
      "é‡è©¦æ¬¡æ•¸": 0,
      "ç¨‹å¼ç¢¼ä½ç½®": "API-transaction-create",
      "åš´é‡ç­‰ç´š": "INFO"
    }
  ]
}
```
- `POST /ledgers/{ledgerId}/log` - è¨˜éŒ„æ“ä½œæ—¥èªŒ

## 10. ç‰ˆæœ¬ç´€éŒ„

| ç‰ˆæœ¬ | æ—¥æœŸ | è®Šæ›´å…§å®¹ | ä¿®æ­£è€… |
|------|------|----------|--------|
| 1.1.0 | 2025-01-27 | ä¾ç…§0088 APIè¨­è¨ˆè¦ç¯„é€²è¡Œå…¨é¢ä¿®æ­£ | SA |
| | | - çµ±ä¸€IDå‘½åè¦ç¯„ï¼ˆuserId, transactionIdç­‰ï¼‰ | |
| | | - è£œå……åˆ†é è¨­è¨ˆè¦ç¯„ | |
| | | - çµ±ä¸€å›æ‡‰æ ¼å¼æ¨™æº– | |
| | | - å®Œå–„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶ | |
| | | - æ˜ç¢ºHTTPç‹€æ…‹ç¢¼å®šç¾© | |
| | | - èª¿æ•´æ–‡ä»¶çµæ§‹ç¬¦åˆè¦ç¯„ | |
| 1.0.0 | 2025-08-21 | åˆå§‹ç‰ˆæœ¬å»ºç«‹ | AustinLiao69 |