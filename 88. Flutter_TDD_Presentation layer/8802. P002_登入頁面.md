# 8802. TDD_P002_ç™»å…¥é é¢_v1.0.0

## æ–‡ä»¶è³‡è¨Š
- **æ–‡ä»¶æ¨™é¡Œ**: P002 ç™»å…¥é é¢æŠ€è¡“è¨­è¨ˆæ–‡ä»¶
- **æ–‡ä»¶ç‰ˆæœ¬**: v1.0.0
- **å‰µå»ºæ—¥æœŸ**: 2025-08-06 18:00:00 +08:00 (å°ç£æ™‚é–“)
- **å‰µå»ºè€…**: LCAS SA Team
- **æœ€å¾Œæ›´æ–°**: 2025-08-06 18:00:00 +08:00 (å°ç£æ™‚é–“)
- **å°æ‡‰éœ€æ±‚æ–‡ä»¶**: 8702. ç™»å…¥é é¢_SRS.md
- **å°æ‡‰PRDæ–‡ä»¶**: 9005. Flutter_Presentation layer.md
- **é é¢ä»£ç¢¼**: P002 (Login Page)

---

## ğŸ“‘ ç›®æ¬¡ (Table of Contents)

1. [æŠ€è¡“æ¶æ§‹æ¦‚è¿°](#10-æŠ€è¡“æ¶æ§‹æ¦‚è¿°)
2. [Widgetæ¸…å–®](#20-widgetæ¸…å–®)
3. [æ ¸å¿ƒWidgetè¨­è¨ˆ](#30-æ ¸å¿ƒwidgetè¨­è¨ˆ)
4. [ç‹€æ…‹ç®¡ç†æ¶æ§‹](#40-ç‹€æ…‹ç®¡ç†æ¶æ§‹)
5. [APIæ•´åˆè¨­è¨ˆ](#50-apiæ•´åˆè¨­è¨ˆ)
6. [å°èˆªè·¯ç”±è¨­è¨ˆ](#60-å°èˆªè·¯ç”±è¨­è¨ˆ)
7. [éŸ¿æ‡‰å¼è¨­è¨ˆ](#70-éŸ¿æ‡‰å¼è¨­è¨ˆ)
8. [ç„¡éšœç¤™åŠŸèƒ½](#80-ç„¡éšœç¤™åŠŸèƒ½)
9. [æ•ˆèƒ½æœ€ä½³åŒ–](#90-æ•ˆèƒ½æœ€ä½³åŒ–)
10. [éŒ¯èª¤è™•ç†æ©Ÿåˆ¶](#100-éŒ¯èª¤è™•ç†æ©Ÿåˆ¶)

---

## 1.0 æŠ€è¡“æ¶æ§‹æ¦‚è¿°

### 1.1 æ¨¡çµ„å®šä½
P002ç™»å…¥é é¢ä½œç‚ºLCAS 2.0 Flutteræ‡‰ç”¨ç¨‹å¼çš„èº«ä»½é©—è­‰å…¥å£ï¼Œè² è²¬ä½¿ç”¨è€…ç™»å…¥é©—è­‰ã€å¤šç¨®ç™»å…¥æ–¹å¼æ”¯æ´ã€å››æ¨¡å¼å·®ç•°åŒ–ç™»å…¥é«”é©—åŠå®‰å…¨æ€§æ§åˆ¶ã€‚æœ¬é é¢æ¡ç”¨Clean Architectureè¨­è¨ˆï¼Œç¢ºä¿å®‰å…¨æ€§èˆ‡æ˜“ç”¨æ€§å¹³è¡¡ã€‚

### 1.2 æŠ€è¡“å †ç–Š
- **å‰ç«¯æ¡†æ¶**: Flutter 3.x
- **ç‹€æ…‹ç®¡ç†**: Provider + ChangeNotifier
- **è·¯ç”±ç®¡ç†**: GoRouter
- **HTTPå®¢æˆ¶ç«¯**: Dio
- **æœ¬åœ°å„²å­˜**: SharedPreferences + FlutterSecureStorage
- **ç¬¬ä¸‰æ–¹ç™»å…¥**: LINE Login SDK, Google Sign-In, Apple Sign-In
- **ç”Ÿç‰©è¾¨è­˜**: local_auth
- **è¡¨å–®é©—è­‰**: FormBuilderValidators

### 1.3 æ¨¡çµ„æ¶æ§‹
```dart
/**
 * P002_ç™»å…¥é é¢_1.0.0
 * @module P002ç™»å…¥é é¢
 * @description Flutter Presentation Layerèº«ä»½é©—è­‰é é¢ - å¤šæ–¹å¼ç™»å…¥ã€å®‰å…¨é©—è­‰ã€å››æ¨¡å¼å·®ç•°åŒ–
 * @update 2025-08-06: å‡ç´šè‡³v1.0ç‰ˆæœ¬ï¼Œæ–°å¢å®Œæ•´ç™»å…¥åŠŸèƒ½è¨­è¨ˆï¼Œæ”¯æ´LINE OAuthã€Emailç™»å…¥ã€ç¬¬ä¸‰æ–¹ç™»å…¥
 */
```

---

## 2.0 Widgetæ¸…å–®

### 2.1 å®Œæ•´Widgetç´¢å¼•è¡¨

| # | Widgetåç¨± | ç‰ˆæœ¬ | æ‰€å±¬å±¤ç´š | åŠŸèƒ½æè¿° | ç›¸ä¾çµ„ä»¶ |
|---|------------|------|----------|----------|----------|
| 01 | LoginPage | V1.0.0 | é é¢å®¹å™¨å±¤ | ä¸»ç™»å…¥é é¢å®¹å™¨åŠç”Ÿå‘½é€±æœŸç®¡ç† | LoginProviderã€Router |
| 02 | LoginScaffold | V1.0.0 | ä½ˆå±€çµæ§‹å±¤ | åŸºç¤é é¢çµæ§‹èˆ‡èƒŒæ™¯è¨­å®š | GradientBackground |
| 03 | BrandHeader | V1.0.0 | å“ç‰Œå±•ç¤ºå±¤ | Logoèˆ‡å“ç‰Œæ¨™é¡Œé¡¯ç¤º | BrandLogoã€BrandTitle |
| 04 | LoginMethodsSection | V1.0.0 | ç™»å…¥æ–¹å¼å±¤ | å¤šç¨®ç™»å…¥æ–¹å¼é¸æ“‡ä»‹é¢ | LineLoginButtonã€SocialLoginGroupã€EmailLoginForm |
| 05 | LineLoginButton | V1.0.0 | ä¸»è¦ç™»å…¥å±¤ | LINE OAuthç™»å…¥æŒ‰éˆ•ï¼ˆæ¨è–¦ï¼‰ | AnimatedContainerã€LINE SDK |
| 06 | SocialLoginGroup | V1.0.0 | ç¤¾äº¤ç™»å…¥å±¤ | Google/Appleç¬¬ä¸‰æ–¹ç™»å…¥ç¾¤çµ„ | GoogleLoginButtonã€AppleLoginButton |
| 07 | EmailLoginForm | V1.0.0 | å‚³çµ±ç™»å…¥å±¤ | Emailå¯†ç¢¼ç™»å…¥è¡¨å–® | EmailInputã€PasswordInputã€LoginButton |
| 08 | EmailInput | V1.0.0 | è¡¨å–®å…ƒä»¶å±¤ | Emailè¼¸å…¥æ¬„ä½èˆ‡é©—è­‰ | TextFormFieldã€EmailValidator |
| 09 | PasswordInput | V1.0.0 | è¡¨å–®å…ƒä»¶å±¤ | å¯†ç¢¼è¼¸å…¥æ¬„ä½èˆ‡å¯è¦‹æ€§æ§åˆ¶ | TextFormFieldã€PasswordValidator |
| 10 | LoginButton | V1.0.0 | äº’å‹•å…ƒä»¶å±¤ | ç™»å…¥åŸ·è¡ŒæŒ‰éˆ• | ElevatedButtonã€LoadingIndicator |
| 11 | GoogleLoginButton | V1.0.0 | ç¬¬ä¸‰æ–¹ç™»å…¥å±¤ | Google OAuthç™»å…¥æŒ‰éˆ• | InkWellã€Google SDK |
| 12 | AppleLoginButton | V1.0.0 | ç¬¬ä¸‰æ–¹ç™»å…¥å±¤ | Apple IDç™»å…¥æŒ‰éˆ• | InkWellã€Apple SDK |
| 13 | BiometricLoginOption | V1.0.0 | ç”Ÿç‰©è¾¨è­˜å±¤ | æŒ‡ç´‹/Face IDç™»å…¥é¸é … | LocalAuthã€AnimatedIcon |
| 14 | RememberMeCheckbox | V1.0.0 | åŠŸèƒ½é¸é …å±¤ | è¨˜ä½æˆ‘é¸é … | Checkboxã€Text |
| 15 | ForgotPasswordLink | V1.0.0 | è¼”åŠ©åŠŸèƒ½å±¤ | å¿˜è¨˜å¯†ç¢¼é€£çµ | TextButtonã€Router |
| 16 | RegisterLink | V1.0.0 | å°èˆªé€£çµå±¤ | è¨»å†Šå¸³è™Ÿé€£çµ | TextButtonã€Router |
| 17 | LoadingOverlay | V1.0.0 | è¼‰å…¥ç‹€æ…‹å±¤ | ç™»å…¥ä¸­è¼‰å…¥è¦†è“‹å±¤ | CircularProgressIndicatorã€Backdrop |
| 18 | ErrorDialog | V1.0.0 | éŒ¯èª¤è™•ç†å±¤ | ç™»å…¥éŒ¯èª¤å°è©±æ¡† | AlertDialogã€TextButton |
| 19 | SecurityWarning | V1.0.0 | å®‰å…¨æç¤ºå±¤ | å®‰å…¨ç™»å…¥æé†’ | Containerã€Icon |

---

## 3.0 æ ¸å¿ƒWidgetè¨­è¨ˆ

### 3.1 é é¢å®¹å™¨å±¤Widget

#### 3.1.1 LoginPage Widget
```dart
/**
 * 01. å°æ‡‰ 2.1ï¼šä¸»ç™»å…¥é é¢å®¹å™¨Widget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description ç™»å…¥é é¢çš„ä¸»å®¹å™¨ï¼Œæ”¯æ´å¤šç¨®ç™»å…¥æ–¹å¼èˆ‡å››æ¨¡å¼å·®ç•°åŒ–
 */
class LoginPage extends StatefulWidget {
  static const String routeName = '/login';
  final UserMode? userMode;

  const LoginPage({Key? key, this.userMode});

  @override
  State<LoginPage> createState();
}

/**
 * 02. å°æ‡‰ 2.1ï¼šç™»å…¥é é¢ç‹€æ…‹é¡åˆ¥
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description ç®¡ç†ç™»å…¥é é¢çš„ç‹€æ…‹å’Œå‹•ç•«æ§åˆ¶å™¨
 */
class _LoginPageState extends State<LoginPage> with TickerProviderStateMixin {
  late AnimationController _fadeController;
  late AnimationController _slideController;
  late Animation<double> _fadeAnimation;
  late Animation<Offset> _slideAnimation;

  @override
  void initState();

  /**
   * 03. å°æ‡‰ 2.1ï¼šåˆå§‹åŒ–å‹•ç•«æ§åˆ¶å™¨
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description è¨­å®šé é¢é€²å…¥å‹•ç•«æ•ˆæœ
   */
  void _initializeAnimations();

  /**
   * 04. å°æ‡‰ 2.1ï¼šåˆå§‹åŒ–é é¢ç‹€æ…‹
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description èª¿ç”¨Provideré€²è¡Œç™»å…¥é é¢åˆå§‹åŒ–
   */
  Future<void> _initializePage();

  @override
  Widget build(BuildContext context);

  @override
  void dispose();
}
```

### 3.2 ä½ˆå±€çµæ§‹å±¤Widget

#### 3.2.1 LoginScaffold Widget
```dart
/**
 * 05. å°æ‡‰ 2.2ï¼šç™»å…¥é é¢ä½ˆå±€çµæ§‹Widget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description æä¾›ç™»å…¥é é¢çš„åŸºç¤ä½ˆå±€çµæ§‹ï¼Œæ”¯æ´å››æ¨¡å¼å·®ç•°åŒ–èƒŒæ™¯
 */
class LoginScaffold extends StatelessWidget {
  final Animation<double> fadeAnimation;
  final Animation<Offset> slideAnimation;
  final LoginProvider provider;
  final UserMode? userMode;

  const LoginScaffold({
    Key? key,
    required this.fadeAnimation,
    required this.slideAnimation,
    required this.provider,
    this.userMode,
  });

  @override
  Widget build(BuildContext context);

  /**
   * 06. å°æ‡‰ 2.2ï¼šå»ºç«‹å®‰å…¨è¦†è“‹å±¤
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description é¡¯ç¤ºå®‰å…¨æç¤ºæˆ–éŒ¯èª¤å°è©±æ¡†çš„è¦†è“‹å±¤
   */
  Widget _buildSecurityOverlay(BuildContext context, LoginProvider provider);
}
```

### 3.3 å“ç‰Œå±•ç¤ºå±¤Widget

#### 3.3.1 BrandHeader Widget
```dart
/**
 * 07. å°æ‡‰ 3.1ï¼šå“ç‰Œæ¨™é ­å€å¡ŠWidget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description é¡¯ç¤ºå“ç‰ŒLogoå’Œæ¨™é¡Œï¼Œæ”¯æ´å››æ¨¡å¼å·®ç•°åŒ–æ¨£å¼
 */
class BrandHeader extends StatelessWidget {
  final UserMode? userMode;

  const BrandHeader({Key? key, this.userMode});

  @override
  Widget build(BuildContext context);

  /**
   * 08. å°æ‡‰ 3.1ï¼šå–å¾—æ¨¡å¼å°æ‡‰å“ç‰Œæ¨£å¼
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼è¿”å›å°æ‡‰çš„å“ç‰Œå±•ç¤ºæ¨£å¼
   */
  BrandStyle _getBrandStyleForMode(UserMode? mode);
}
```

### 3.4 ç™»å…¥æ–¹å¼å±¤Widget

#### 3.4.1 LoginMethodsSection Widget
```dart
/**
 * 09. å°æ‡‰ 3.2ï¼šç™»å…¥æ–¹å¼å€å¡ŠWidget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description æ•´åˆå¤šç¨®ç™»å…¥æ–¹å¼ï¼Œæ”¯æ´å››æ¨¡å¼å·®ç•°åŒ–é¡¯ç¤º
 */
class LoginMethodsSection extends StatelessWidget {
  final LoginProvider provider;
  final UserMode? userMode;

  const LoginMethodsSection({
    Key? key,
    required this.provider,
    this.userMode,
  });

  @override
  Widget build(BuildContext context);

  /**
   * 10. å°æ‡‰ 3.2ï¼šå–å¾—æ¨¡å¼å¯ç”¨ç™»å…¥æ–¹å¼
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼è¿”å›å¯ç”¨çš„ç™»å…¥æ–¹å¼åˆ—è¡¨
   */
  List<LoginMethod> _getAvailableMethodsForMode(UserMode? mode);
}
```

#### 3.4.2 LineLoginButton Widget
```dart
/**
 * 11. å°æ‡‰ 3.2.1ï¼šLINEç™»å…¥æŒ‰éˆ•Widget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description LINE OAuthç™»å…¥æŒ‰éˆ•ï¼Œä¸»è¦æ¨è–¦ç™»å…¥æ–¹å¼
 */
class LineLoginButton extends StatefulWidget {
  final VoidCallback onPressed;
  final bool isLoading;
  final UserMode? userMode;

  const LineLoginButton({
    Key? key,
    required this.onPressed,
    this.isLoading = false,
    this.userMode,
  });

  @override
  State<LineLoginButton> createState();
}

class _LineLoginButtonState extends State<LineLoginButton> 
    with SingleTickerProviderStateMixin {
  late AnimationController _pulseController;
  late Animation<double> _pulseAnimation;

  @override
  void initState();

  @override
  Widget build(BuildContext context);

  /**
   * 12. å°æ‡‰ 3.2.1ï¼šå–å¾—æ¨¡å¼å°æ‡‰æŒ‰éˆ•æ¨£å¼
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ ¹æ“šæ¨¡å¼é¡å‹è¿”å›å°æ‡‰çš„LINEæŒ‰éˆ•æ¨£å¼
   */
  LineButtonStyle _getButtonStyleForMode(UserMode? mode);

  @override
  void dispose();
}
```

### 3.5 ç¤¾äº¤ç™»å…¥å±¤Widget

#### 3.5.1 SocialLoginGroup Widget
```dart
/**
 * 13. å°æ‡‰ 3.2.2ï¼šç¤¾äº¤ç™»å…¥ç¾¤çµ„Widget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description Google/Appleç¬¬ä¸‰æ–¹ç™»å…¥æŒ‰éˆ•ç¾¤çµ„
 */
class SocialLoginGroup extends StatelessWidget {
  final LoginProvider provider;
  final UserMode? userMode;

  const SocialLoginGroup({
    Key? key,
    required this.provider,
    this.userMode,
  });

  @override
  Widget build(BuildContext context);
}

/**
 * 14. å°æ‡‰ 3.2.2ï¼šGoogleç™»å…¥æŒ‰éˆ•Widget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description Google OAuthç™»å…¥æŒ‰éˆ•
 */
class GoogleLoginButton extends StatelessWidget {
  final VoidCallback onPressed;
  final bool isLoading;

  const GoogleLoginButton({
    Key? key,
    required this.onPressed,
    this.isLoading = false,
  });

  @override
  Widget build(BuildContext context);
}

/**
 * 15. å°æ‡‰ 3.2.2ï¼šAppleç™»å…¥æŒ‰éˆ•Widget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description Apple IDç™»å…¥æŒ‰éˆ•
 */
class AppleLoginButton extends StatelessWidget {
  final VoidCallback onPressed;
  final bool isLoading;

  const AppleLoginButton({
    Key? key,
    required this.onPressed,
    this.isLoading = false,
  });

  @override
  Widget build(BuildContext context);
}
```

### 3.6 å‚³çµ±ç™»å…¥å±¤Widget

#### 3.6.1 EmailLoginForm Widget
```dart
/**
 * 16. å°æ‡‰ 3.2.3ï¼šEmailç™»å…¥è¡¨å–®Widget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description Emailå¯†ç¢¼ç™»å…¥è¡¨å–®ï¼Œæ”¯æ´é©—è­‰å’Œè¨˜ä½æˆ‘åŠŸèƒ½
 */
class EmailLoginForm extends StatefulWidget {
  final LoginProvider provider;
  final UserMode? userMode;

  const EmailLoginForm({
    Key? key,
    required this.provider,
    this.userMode,
  });

  @override
  State<EmailLoginForm> createState();
}

class _EmailLoginFormState extends State<EmailLoginForm> {
  final GlobalKey<FormState> _formKey = GlobalKey<FormState>();
  late TextEditingController _emailController;
  late TextEditingController _passwordController;

  @override
  void initState();

  @override
  Widget build(BuildContext context);

  /**
   * 17. å°æ‡‰ 3.2.3ï¼šé©—è­‰è¡¨å–®è¼¸å…¥
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description é©—è­‰Emailå’Œå¯†ç¢¼æ ¼å¼
   */
  bool _validateForm();

  /**
   * 18. å°æ‡‰ 3.2.3ï¼šæäº¤ç™»å…¥è¡¨å–®
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description åŸ·è¡ŒEmailç™»å…¥æµç¨‹
   */
  Future<void> _submitForm();

  @override
  void dispose();
}
```

#### 3.6.2 EmailInput & PasswordInput Widgets
```dart
/**
 * 19. å°æ‡‰ 3.2.3.1ï¼šEmailè¼¸å…¥æ¬„ä½Widget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description Emailè¼¸å…¥æ¬„ä½èˆ‡æ ¼å¼é©—è­‰
 */
class EmailInput extends StatelessWidget {
  final TextEditingController controller;
  final String? Function(String?)? validator;
  final bool enabled;

  const EmailInput({
    Key? key,
    required this.controller,
    this.validator,
    this.enabled = true,
  });

  @override
  Widget build(BuildContext context);
}

/**
 * 20. å°æ‡‰ 3.2.3.2ï¼šå¯†ç¢¼è¼¸å…¥æ¬„ä½Widget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description å¯†ç¢¼è¼¸å…¥æ¬„ä½èˆ‡å¯è¦‹æ€§æ§åˆ¶
 */
class PasswordInput extends StatefulWidget {
  final TextEditingController controller;
  final String? Function(String?)? validator;
  final bool enabled;

  const PasswordInput({
    Key? key,
    required this.controller,
    this.validator,
    this.enabled = true,
  });

  @override
  State<PasswordInput> createState();
}

class _PasswordInputState extends State<PasswordInput> {
  bool _isObscured = true;

  @override
  Widget build(BuildContext context);

  /**
   * 21. å°æ‡‰ 3.2.3.2ï¼šåˆ‡æ›å¯†ç¢¼å¯è¦‹æ€§
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ§åˆ¶å¯†ç¢¼æ¬„ä½é¡¯ç¤º/éš±è—
   */
  void _togglePasswordVisibility();
}
```

### 3.7 è¼”åŠ©åŠŸèƒ½å±¤Widget

#### 3.7.1 BiometricLoginOption Widget
```dart
/**
 * 22. å°æ‡‰ 3.3ï¼šç”Ÿç‰©è¾¨è­˜ç™»å…¥é¸é …Widget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description æŒ‡ç´‹/Face IDç™»å…¥é¸é …
 */
class BiometricLoginOption extends StatefulWidget {
  final VoidCallback? onPressed;
  final bool isAvailable;

  const BiometricLoginOption({
    Key? key,
    this.onPressed,
    this.isAvailable = false,
  });

  @override
  State<BiometricLoginOption> createState();
}

class _BiometricLoginOptionState extends State<BiometricLoginOption> 
    with SingleTickerProviderStateMixin {
  late AnimationController _animationController;
  late Animation<double> _scaleAnimation;

  @override
  void initState();

  @override
  Widget build(BuildContext context);

  /**
   * 23. å°æ‡‰ 3.3ï¼šæª¢æŸ¥ç”Ÿç‰©è¾¨è­˜å¯ç”¨æ€§
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æª¢æŸ¥è£ç½®ç”Ÿç‰©è¾¨è­˜åŠŸèƒ½å¯ç”¨æ€§
   */
  Future<bool> _checkBiometricAvailability();

  @override
  void dispose();
}
```

#### 3.7.2 RememberMeCheckbox & Links Widgets
```dart
/**
 * 24. å°æ‡‰ 3.4ï¼šè¨˜ä½æˆ‘é¸é …Widget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description è¨˜ä½ç™»å…¥ç‹€æ…‹é¸é …
 */
class RememberMeCheckbox extends StatelessWidget {
  final bool value;
  final ValueChanged<bool?> onChanged;
  final UserMode? userMode;

  const RememberMeCheckbox({
    Key? key,
    required this.value,
    required this.onChanged,
    this.userMode,
  });

  @override
  Widget build(BuildContext context);
}

/**
 * 25. å°æ‡‰ 3.5ï¼šå¿˜è¨˜å¯†ç¢¼é€£çµWidget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description å¿˜è¨˜å¯†ç¢¼åŠŸèƒ½é€£çµ
 */
class ForgotPasswordLink extends StatelessWidget {
  final VoidCallback onPressed;

  const ForgotPasswordLink({Key? key, required this.onPressed});

  @override
  Widget build(BuildContext context);
}

/**
 * 26. å°æ‡‰ 3.6ï¼šè¨»å†Šé€£çµWidget
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description è¨»å†Šå¸³è™Ÿé€£çµ
 */
class RegisterLink extends StatelessWidget {
  final VoidCallback onPressed;

  const RegisterLink({Key? key, required this.onPressed});

  @override
  Widget build(BuildContext context);
}
```

---

## 4.0 ç‹€æ…‹ç®¡ç†æ¶æ§‹

### 4.1 LoginProvider ç‹€æ…‹ç®¡ç†å™¨
```dart
/**
 * 27. å°æ‡‰ 4.1ï¼šç™»å…¥é é¢ç‹€æ…‹ç®¡ç†å™¨
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description ç®¡ç†ç™»å…¥é é¢çš„ç‹€æ…‹ï¼Œæ”¯æ´å¤šç¨®ç™»å…¥æ–¹å¼å’Œå››æ¨¡å¼å·®ç•°åŒ–
 */
class LoginProvider extends ChangeNotifier {
  // ç‹€æ…‹å±¬æ€§
  LoginPageState _pageState = LoginPageState.initial;
  LoginMethod? _selectedMethod;
  bool _isLoading = false;
  String? _errorMessage;
  LoginErrorType? _errorType;
  bool _rememberMe = false;
  bool _biometricAvailable = false;
  UserMode? _userMode;

  // è¡¨å–®ç‹€æ…‹
  final GlobalKey<FormState> emailFormKey = GlobalKey<FormState>();
  String _email = '';
  String _password = '';

  // Getters
  LoginPageState get pageState;
  LoginMethod? get selectedMethod;
  bool get isLoading;
  String? get errorMessage;
  LoginErrorType? get errorType;
  bool get rememberMe;
  bool get biometricAvailable;
  UserMode? get userMode;
  String get email;
  String get password;

  /**
   * 28. å°æ‡‰ 4.1ï¼šåˆå§‹åŒ–ç™»å…¥é é¢
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description åˆå§‹åŒ–ç™»å…¥é é¢ç‹€æ…‹å’Œæª¢æŸ¥ç”Ÿç‰©è¾¨è­˜
   */
  Future<void> initializePage(UserMode? mode);

  /**
   * 29. å°æ‡‰ 4.1ï¼šè¨­å®šä½¿ç”¨è€…æ¨¡å¼
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description è¨­å®šä½¿ç”¨è€…æ¨¡å¼ä¸¦æ›´æ–°å¯ç”¨ç™»å…¥æ–¹å¼
   */
  void setUserMode(UserMode mode);

  /**
   * 30. å°æ‡‰ 4.1ï¼šæª¢æŸ¥ç”Ÿç‰©è¾¨è­˜å¯ç”¨æ€§
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æª¢æŸ¥è£ç½®ç”Ÿç‰©è¾¨è­˜åŠŸèƒ½å¯ç”¨æ€§
   */
  Future<void> _checkBiometricAvailability();

  /**
   * 31. å°æ‡‰ 4.1ï¼šLINE OAuthç™»å…¥
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description åŸ·è¡ŒLINE OAuthç™»å…¥æµç¨‹
   */
  Future<void> loginWithLine();

  /**
   * 32. å°æ‡‰ 4.1ï¼šGoogle OAuthç™»å…¥
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description åŸ·è¡ŒGoogle OAuthç™»å…¥æµç¨‹
   */
  Future<void> loginWithGoogle();

  /**
   * 33. å°æ‡‰ 4.1ï¼šApple IDç™»å…¥
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description åŸ·è¡ŒApple IDç™»å…¥æµç¨‹
   */
  Future<void> loginWithApple();

  /**
   * 34. å°æ‡‰ 4.1ï¼šEmailå¯†ç¢¼ç™»å…¥
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description åŸ·è¡ŒEmailå¯†ç¢¼ç™»å…¥æµç¨‹
   */
  Future<void> loginWithEmail(String email, String password);

  /**
   * 35. å°æ‡‰ 4.1ï¼šç”Ÿç‰©è¾¨è­˜ç™»å…¥
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description åŸ·è¡Œç”Ÿç‰©è¾¨è­˜ç™»å…¥æµç¨‹
   */
  Future<void> loginWithBiometric();

  /**
   * 36. å°æ‡‰ 4.1ï¼šæ›´æ–°è¡¨å–®è³‡æ–™
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ›´æ–°ç™»å…¥è¡¨å–®çš„Emailå’Œå¯†ç¢¼
   */
  void updateFormData({String? email, String? password});

  /**
   * 37. å°æ‡‰ 4.1ï¼šåˆ‡æ›è¨˜ä½æˆ‘ç‹€æ…‹
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description åˆ‡æ›è¨˜ä½ç™»å…¥ç‹€æ…‹é¸é …
   */
  void toggleRememberMe(bool value);

  /**
   * 38. å°æ‡‰ 4.1ï¼šå–å¾—è£ç½®è³‡è¨Š
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ”¶é›†è£ç½®ç›¸é—œè³‡è¨Šç”¨æ–¼APIèª¿ç”¨
   */
  Future<Map<String, dynamic>> _getDeviceInfo();

  /**
   * 39. å°æ‡‰ 4.1ï¼šè¨­å®šè¼‰å…¥ç‹€æ…‹
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ›´æ–°è¼‰å…¥ç‹€æ…‹ä¸¦é€šçŸ¥ç›£è½è€…
   */
  void _setLoading(bool loading);

  /**
   * 40. å°æ‡‰ 4.1ï¼šè¨­å®šé é¢ç‹€æ…‹
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ›´æ–°é é¢ç‹€æ…‹ä¸¦é€šçŸ¥ç›£è½è€…
   */
  void _setPageState(LoginPageState state);

  /**
   * 41. å°æ‡‰ 4.1ï¼šè¨­å®šéŒ¯èª¤è¨Šæ¯
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description è¨­å®šéŒ¯èª¤è¨Šæ¯å’ŒéŒ¯èª¤é¡å‹
   */
  void _setError(String message, LoginErrorType type, dynamic error);

  /**
   * 42. å°æ‡‰ 4.1ï¼šæ¸…é™¤éŒ¯èª¤ç‹€æ…‹
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ¸…é™¤éŒ¯èª¤ç‹€æ…‹ä¸¦æ±ºå®šå¾ŒçºŒå‹•ä½œ
   */
  void clearError();

  /**
   * 43. å°æ‡‰ 4.1ï¼šé‡è©¦ç™»å…¥æ“ä½œ
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ ¹æ“šéŒ¯èª¤é¡å‹åŸ·è¡Œç›¸å°æ‡‰çš„é‡è©¦æ“ä½œ
   */
  Future<void> retryLogin();

  /**
   * 44. å°æ‡‰ 4.1ï¼šå°èˆªåˆ°å¿˜è¨˜å¯†ç¢¼
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description å°èˆªåˆ°å¯†ç¢¼é‡è¨­é é¢
   */
  void navigateToForgotPassword();

  /**
   * 45. å°æ‡‰ 4.1ï¼šå°èˆªåˆ°è¨»å†Šé é¢
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description å°èˆªåˆ°è¨»å†Šé é¢
   */
  void navigateToRegister();
}
```

### 4.2 ç‹€æ…‹æšèˆ‰å®šç¾©
```dart
/**
 * 46. å°æ‡‰ 4.2ï¼šç™»å…¥é é¢ç‹€æ…‹æšèˆ‰
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description å®šç¾©ç™»å…¥é é¢çš„å„ç¨®ç‹€æ…‹
 */
enum LoginPageState {
  initial,        // åˆå§‹ç‹€æ…‹
  authenticating, // é©—è­‰ä¸­
  success,        // ç™»å…¥æˆåŠŸ
  error,          // éŒ¯èª¤ç‹€æ…‹
}

/**
 * 47. å°æ‡‰ 4.2ï¼šç™»å…¥æ–¹å¼æšèˆ‰
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description æ”¯æ´çš„ç™»å…¥æ–¹å¼
 */
enum LoginMethod {
  line,       // LINE OAuth
  google,     // Google OAuth
  apple,      // Apple ID
  email,      // Emailå¯†ç¢¼
  biometric,  // ç”Ÿç‰©è¾¨è­˜
}

/**
 * 48. å°æ‡‰ 4.2ï¼šç™»å…¥éŒ¯èª¤é¡å‹æšèˆ‰
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description ç™»å…¥éŒ¯èª¤é¡å‹åˆ†é¡
 */
enum LoginErrorType {
  networkError,       // ç¶²è·¯éŒ¯èª¤
  invalidCredentials, // èªè­‰å¤±æ•—
  accountNotFound,    // å¸³è™Ÿä¸å­˜åœ¨
  accountDisabled,    // å¸³è™Ÿåœç”¨
  tooManyAttempts,    // å˜—è©¦æ¬¡æ•¸éå¤š
  biometricUnavailable, // ç”Ÿç‰©è¾¨è­˜ä¸å¯ç”¨
  oauthError,         // OAuthéŒ¯èª¤
  validation,         // è¼¸å…¥é©—è­‰éŒ¯èª¤
  unknown,           // æœªçŸ¥éŒ¯èª¤
}
```

---

## 5.0 APIæ•´åˆè¨­è¨ˆ

### 5.1 LoginApiService APIæœå‹™
```dart
/**
 * 49. å°æ‡‰ 5.1ï¼šç™»å…¥é é¢APIæœå‹™
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description è™•ç†ç™»å…¥é é¢ç›¸é—œçš„APIèª¿ç”¨ï¼Œæ”¯æ´F002ä½¿ç”¨è€…ç™»å…¥åŠŸèƒ½
 */
class LoginApiService {
  final ApiClient _apiClient = ApiClient();

  /**
   * 50. å°æ‡‰ 5.1ï¼šLINE OAuthç™»å…¥
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description LINE OAuthç™»å…¥APIèª¿ç”¨ï¼ˆå°æ‡‰F002ç«¯é»ï¼‰
   */
  Future<ApiResponse<LoginResponse>> loginWithLine(LineLoginRequest request);

  /**
   * 51. å°æ‡‰ 5.1ï¼šGoogle OAuthç™»å…¥
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description Google OAuthç™»å…¥APIèª¿ç”¨ï¼ˆå°æ‡‰F002ç«¯é»ï¼‰
   */
  Future<ApiResponse<LoginResponse>> loginWithGoogle(GoogleLoginRequest request);

  /**
   * 52. å°æ‡‰ 5.1ï¼šApple IDç™»å…¥
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description Apple IDç™»å…¥APIèª¿ç”¨ï¼ˆå°æ‡‰F002ç«¯é»ï¼‰
   */
  Future<ApiResponse<LoginResponse>> loginWithApple(AppleLoginRequest request);

  /**
   * 53. å°æ‡‰ 5.1ï¼šEmailå¯†ç¢¼ç™»å…¥
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description Emailå¯†ç¢¼ç™»å…¥APIèª¿ç”¨ï¼ˆå°æ‡‰F002ç«¯é»ï¼‰
   */
  Future<ApiResponse<LoginResponse>> loginWithEmail(EmailLoginRequest request);

  /**
   * 54. å°æ‡‰ 5.1ï¼šè™•ç†DioéŒ¯èª¤
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description è™•ç†DioéŒ¯èª¤ä¸¦è½‰æ›ç‚ºä½¿ç”¨è€…å‹å–„è¨Šæ¯
   */
  String _handleDioError(DioError error);

  /**
   * 55. å°æ‡‰ 5.1ï¼šå–å¾—è£ç½®è³‡è¨Š
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ”¶é›†è£ç½®è³‡è¨Šç”¨æ–¼APIèª¿ç”¨
   */
  Future<Map<String, dynamic>> _getDeviceInfo();
}
```

### 5.2 è³‡æ–™æ¨¡å‹å®šç¾©
```dart
/**
 * 56. å°æ‡‰ 5.2ï¼šLINEç™»å…¥è«‹æ±‚æ¨¡å‹
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description LINE OAuthç™»å…¥è«‹æ±‚è³‡æ–™çµæ§‹
 */
class LineLoginRequest {
  final String authorizationCode;
  final String redirectUri;
  final String clientId;
  final Map<String, dynamic> deviceInfo;

  LineLoginRequest({
    required this.authorizationCode,
    required this.redirectUri,
    required this.clientId,
    required this.deviceInfo,
  });

  Map<String, dynamic> toJson();
}

/**
 * 57. å°æ‡‰ 5.2ï¼šEmailç™»å…¥è«‹æ±‚æ¨¡å‹
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description Emailå¯†ç¢¼ç™»å…¥è«‹æ±‚è³‡æ–™çµæ§‹
 */
class EmailLoginRequest {
  final String email;
  final String password;
  final bool rememberMe;
  final Map<String, dynamic> deviceInfo;

  EmailLoginRequest({
    required this.email,
    required this.password,
    required this.rememberMe,
    required this.deviceInfo,
  });

  Map<String, dynamic> toJson();
}

/**
 * 58. å°æ‡‰ 5.2ï¼šç™»å…¥å›æ‡‰æ¨¡å‹
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description çµ±ä¸€çš„ç™»å…¥å›æ‡‰è³‡æ–™çµæ§‹
 */
class LoginResponse {
  final bool success;
  final String accessToken;
  final String refreshToken;
  final UserModel user;
  final int expiresIn;

  LoginResponse({
    required this.success,
    required this.accessToken,
    required this.refreshToken,
    required this.user,
    required this.expiresIn,
  });

  factory LoginResponse.fromJson(Map<String, dynamic> json);
  Map<String, dynamic> toJson();
}
```

---

## 6.0 å°èˆªè·¯ç”±è¨­è¨ˆ

### 6.1 è·¯ç”±é…ç½®
```dart
/**
 * 59. å°æ‡‰ 6.1ï¼šç™»å…¥é é¢è·¯ç”±é…ç½®
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description å®šç¾©ç™»å…¥é é¢çš„è·¯ç”±è¦å‰‡èˆ‡å°èˆªé‚è¼¯
 */
class LoginRoutes {
  static const String login = '/login';
  static const String forgotPassword = '/forgot-password';
  static const String register = '/register';
  static const String home = '/home';

  /**
   * 60. å°æ‡‰ 6.1ï¼šå–å¾—ç™»å…¥é é¢è·¯ç”±
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description å»ºç«‹ç™»å…¥é é¢çš„GoRouteé…ç½®
   */
  static GoRoute getLoginRoute();
}

/**
 * 61. å°æ‡‰ 6.1ï¼šç™»å…¥å°èˆªæœå‹™
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description è™•ç†ç™»å…¥ç›¸é—œçš„å°èˆªé‚è¼¯
 */
class LoginNavigationService {
  static final GoRouter _router;
  static GoRouter get router;

  /**
   * 62. å°æ‡‰ 6.1ï¼šå°èˆªåˆ°é¦–é 
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description ç™»å…¥æˆåŠŸå¾Œå°èˆªåˆ°é¦–é 
   */
  Future<void> navigateToHome();

  /**
   * 63. å°æ‡‰ 6.1ï¼šå°èˆªåˆ°å¿˜è¨˜å¯†ç¢¼
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description å°èˆªåˆ°å¯†ç¢¼é‡è¨­é é¢
   */
  Future<void> navigateToForgotPassword();

  /**
   * 64. å°æ‡‰ 6.1ï¼šå°èˆªåˆ°è¨»å†Šé é¢
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description å°èˆªåˆ°è¨»å†Šé é¢
   */
  Future<void> navigateToRegister();

  /**
   * 65. å°æ‡‰ 6.1ï¼šè¿”å›æ­¡è¿é é¢
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description è¿”å›åˆ°æ­¡è¿é é¢
   */
  void navigateToWelcome();
}
```

---

## 7.0 éŸ¿æ‡‰å¼è¨­è¨ˆ

### 7.1 éŸ¿æ‡‰å¼è¼”åŠ©å·¥å…·
```dart
/**
 * 66. å°æ‡‰ 7.1ï¼šç™»å…¥é é¢éŸ¿æ‡‰å¼è¨­è¨ˆè¼”åŠ©å·¥å…·
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description éµå¾ª9005æ–‡ä»¶çš„éŸ¿æ‡‰å¼è¨­è¨ˆè¦ç¯„ï¼Œæä¾›ç™»å…¥é é¢å°ˆç”¨çš„ä½ˆå±€ç®¡ç†
 */
class LoginResponsiveHelper {
  final BuildContext context;
  late final MediaQueryData _mediaQuery;
  late final Size _screenSize;

  LoginResponsiveHelper.of(BuildContext context);

  // æ–·é»åˆ¤æ–·å±¬æ€§ï¼ˆ9005è¦ç¯„ï¼‰
  bool get isMobile;
  bool get isTablet;
  bool get isSmallDesktop;
  bool get isLargeDesktop;
  DeviceType get deviceType;

  // ç™»å…¥é é¢å°ˆç”¨å°ºå¯¸å±¬æ€§
  double get loginCardWidth;
  double get loginCardMaxWidth;
  EdgeInsets get loginCardPadding;
  double get buttonHeight;
  double get inputFieldHeight;
  double get socialButtonSize;
  double get brandLogoSize;

  /**
   * 67. å°æ‡‰ 7.1ï¼šå–å¾—å››æ¨¡å¼æŒ‰éˆ•é«˜åº¦
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼å’Œè£ç½®é¡å‹è¿”å›é©ç•¶æŒ‰éˆ•é«˜åº¦
   */
  double getButtonHeightForMode(UserMode? mode);

  /**
   * 68. å°æ‡‰ 7.1ï¼šå–å¾—æ¨¡å¼å°æ‡‰å­—å‹å¤§å°
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼è¿”å›é©ç•¶å­—å‹å¤§å°
   */
  double getFontSizeForMode(UserMode? mode, TextStyle baseStyle);
}
```

---

## 8.0 ç„¡éšœç¤™åŠŸèƒ½

### 8.1 èªæ„åŒ–æ”¯æ´
```dart
/**
 * 69. å°æ‡‰ 8.1ï¼šç™»å…¥é é¢ç„¡éšœç¤™èªæ„åŒ–WidgetåŒ…è£å™¨
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description æä¾›WCAG 2.1 AAæ¨™æº–çš„å®Œæ•´ç„¡éšœç¤™æ”¯æ´ï¼ˆ9005è¦ç¯„ï¼‰
 */
class LoginAccessibilityWrapper {

  /**
   * 70. å°æ‡‰ 8.1ï¼šç‚ºç™»å…¥æŒ‰éˆ•æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description ç‚ºå„ç¨®ç™»å…¥æŒ‰éˆ•æ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapLoginButton(Widget child, LoginMethod method, bool isLoading);

  /**
   * 71. å°æ‡‰ 8.1ï¼šç‚ºè¼¸å…¥æ¬„ä½æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description ç‚ºEmailå’Œå¯†ç¢¼è¼¸å…¥æ¬„ä½æ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapInputField(Widget child, String fieldType, {String? error});

  /**
   * 72. å°æ‡‰ 8.1ï¼šç‚ºå“ç‰Œæ¨™é ­æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description ç‚ºå“ç‰ŒLogoå’Œæ¨™é¡Œæ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapBrandHeader(Widget child);

  /**
   * 73. å°æ‡‰ 8.1ï¼šç‚ºéŒ¯èª¤æç¤ºæä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description ç‚ºéŒ¯èª¤è¨Šæ¯æ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapErrorMessage(Widget child, String errorMessage, LoginErrorType errorType);

  /**
   * 74. å°æ‡‰ 8.1ï¼šç‚ºç”Ÿç‰©è¾¨è­˜é¸é …æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description ç‚ºç”Ÿç‰©è¾¨è­˜ç™»å…¥é¸é …æ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapBiometricOption(Widget child, bool isAvailable);
}
```

---

## 9.0 æ•ˆèƒ½æœ€ä½³åŒ–

### 9.1 Widgetå¿«å–ç­–ç•¥
```dart
/**
 * 75. å°æ‡‰ 9.1ï¼šç™»å…¥é é¢Widgetå¿«å–ç®¡ç†å™¨
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description å„ªåŒ–ç™»å…¥é é¢Widgeté‡å»ºæ•ˆèƒ½ï¼Œæ¸›å°‘ä¸å¿…è¦çš„é‡å»º
 */
class LoginWidgetCache {
  static final Map<String, Widget> _cache = {};
  static final Map<String, DateTime> _cacheTimestamps = {};
  static const Duration _cacheValidDuration = Duration(minutes: 10);

  /**
   * 76. å°æ‡‰ 9.1ï¼šå–å¾—å¿«å–çš„å“ç‰Œæ¨™é ­æˆ–å»ºç«‹æ–°çš„
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description å¾å¿«å–ä¸­ç²å–å“ç‰Œæ¨™é ­Widgetæˆ–å‰µå»ºæ–°çš„
   */
  static Widget getBrandHeaderOrCreate(UserMode? mode, Widget Function() creator);

  /**
   * 77. å°æ‡‰ 9.1ï¼šå–å¾—å¿«å–çš„ç¤¾äº¤ç™»å…¥æŒ‰éˆ•æˆ–å»ºç«‹æ–°çš„
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description å¾å¿«å–ä¸­ç²å–ç¤¾äº¤ç™»å…¥æŒ‰éˆ•Widgetæˆ–å‰µå»ºæ–°çš„
   */
  static Widget getSocialLoginButtonsOrCreate(Widget Function() creator);

  /**
   * 78. å°æ‡‰ 9.1ï¼šæ¸…é™¤ç™»å…¥é é¢å¿«å–
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ¸…é™¤ç™»å…¥é é¢ç›¸é—œçš„Widgetå¿«å–
   */
  static void clearLoginCache();
}
```

### 9.2 ç™»å…¥æµç¨‹å„ªåŒ–
```dart
/**
 * 79. å°æ‡‰ 9.2ï¼šç™»å…¥æµç¨‹æ•ˆèƒ½å„ªåŒ–å™¨
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description å„ªåŒ–ç™»å…¥æµç¨‹æ•ˆèƒ½ï¼Œæå‡ä½¿ç”¨è€…é«”é©—
 */
class LoginPerformanceOptimizer {
  static final Map<String, Timer> _debounceTimers = {};
  static const Duration _debounceDelay = Duration(milliseconds: 500);

  /**
   * 80. å°æ‡‰ 9.2ï¼šé˜²æŠ–å‹•ç™»å…¥è«‹æ±‚
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description é˜²æ­¢ä½¿ç”¨è€…å¿«é€Ÿé»æ“Šé€ æˆé‡è¤‡ç™»å…¥è«‹æ±‚
   */
  static Future<void> debounceLogin(String key, Future<void> Function() loginFunction);

  /**
   * 81. å°æ‡‰ 9.2ï¼šé è¼‰å…¥ç™»å…¥ç›¸é—œè³‡æº
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description é è¼‰å…¥ç™»å…¥é é¢ç›¸é—œçš„åœ–ç‰‡å’Œè³‡æº
   */
  static Future<void> preloadLoginAssets(BuildContext context);

  /**
   * 82. å°æ‡‰ 9.2ï¼šå„ªåŒ–è¡¨å–®é©—è­‰
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description å„ªåŒ–è¡¨å–®é©—è­‰æ•ˆèƒ½ï¼Œé¿å…é »ç¹é‡æ–°é©—è­‰
   */
  static String? optimizedValidation(String? value, List<String? Function(String?)> validators);
}
```

---

## 10.0 éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

### 10.1 çµ±ä¸€éŒ¯èª¤è™•ç†
```dart
/**
 * 83. å°æ‡‰ 10.1ï¼šç™»å…¥é é¢éŒ¯èª¤è™•ç†å™¨
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description æ ¹æ“š8702è¦ç¯„çš„å…·é«”éŒ¯èª¤æƒ…å¢ƒé€²è¡Œè©³ç´°è™•ç†
 */
class LoginErrorHandler {

  /**
   * 84. å°æ‡‰ 10.1ï¼šè™•ç†LINE OAuthéŒ¯èª¤
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description è™•ç†LINE OAuthç™»å…¥éŒ¯èª¤ï¼ˆ8702è¦ç¯„ï¼‰
   */
  static String handleLineOAuthError(dynamic error);

  /**
   * 85. å°æ‡‰ 10.1ï¼šè™•ç†Emailç™»å…¥éŒ¯èª¤
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description è™•ç†Emailç™»å…¥éŒ¯èª¤ï¼ˆ8702è¦ç¯„ï¼‰
   */
  static String handleEmailLoginError(dynamic error);

  /**
   * 86. å°æ‡‰ 10.1ï¼šè™•ç†ç¬¬ä¸‰æ–¹OAuthéŒ¯èª¤
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description è™•ç†Google/Apple OAuthéŒ¯èª¤ï¼ˆ8702è¦ç¯„ï¼‰
   */
  static String handleOAuthError(dynamic error, LoginMethod method);

  /**
   * 87. å°æ‡‰ 10.1ï¼šè™•ç†ç”Ÿç‰©è¾¨è­˜éŒ¯èª¤
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description è™•ç†ç”Ÿç‰©è¾¨è­˜ç™»å…¥éŒ¯èª¤ï¼ˆ8702è¦ç¯„ï¼‰
   */
  static String handleBiometricError(dynamic error);

  /**
   * 88. å°æ‡‰ 10.1ï¼šè™•ç†ç¶²è·¯é€£ç·šéŒ¯èª¤
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description è™•ç†ç¶²è·¯é€£ç·šéŒ¯èª¤ï¼ˆ8702è¦ç¯„ï¼‰
   */
  static String handleNetworkError(DioError error);

  /**
   * 89. å°æ‡‰ 10.1ï¼šè™•ç†è¡¨å–®é©—è­‰éŒ¯èª¤
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description è™•ç†è¡¨å–®è¼¸å…¥é©—è­‰éŒ¯èª¤ï¼ˆ8702è¦ç¯„ï¼‰
   */
  static String handleValidationError(String field, dynamic value);

  /**
   * 90. å°æ‡‰ 10.1ï¼šé¡¯ç¤ºéŒ¯èª¤å°è©±æ¡†
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯å°è©±æ¡†ï¼ˆ8702è¦ç¯„ï¼‰
   */
  static Future<void> showErrorDialog(
    BuildContext context, 
    String message, 
    LoginErrorType errorType,
    {VoidCallback? onRetry, VoidCallback? onDismiss}
  );

  /**
   * 91. å°æ‡‰ 10.1ï¼šå–å¾—éŒ¯èª¤æ¨™é¡Œ
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ ¹æ“šéŒ¯èª¤é¡å‹å–å¾—å°æ‡‰çš„éŒ¯èª¤æ¨™é¡Œ
   */
  static String _getErrorTitle(LoginErrorType errorType);

  /**
   * 92. å°æ‡‰ 10.1ï¼šåˆ¤æ–·æ˜¯å¦æ‡‰é¡¯ç¤ºé‡è©¦æŒ‰éˆ•
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ ¹æ“šéŒ¯èª¤é¡å‹åˆ¤æ–·æ˜¯å¦æ‡‰é¡¯ç¤ºé‡è©¦æŒ‰éˆ•
   */
  static bool _shouldShowRetryButton(LoginErrorType errorType);

  /**
   * 93. å°æ‡‰ 10.1ï¼šè™•ç†ç™»å…¥å˜—è©¦æ¬¡æ•¸é™åˆ¶
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description è™•ç†ç™»å…¥å˜—è©¦æ¬¡æ•¸éå¤šçš„æƒ…æ³
   */
  static String handleTooManyAttemptsError(int waitTime);

  /**
   * 94. å°æ‡‰ 10.1ï¼šè™•ç†å¸³è™Ÿç‹€æ…‹éŒ¯èª¤
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description è™•ç†å¸³è™Ÿä¸å­˜åœ¨æˆ–åœç”¨éŒ¯èª¤
   */
  static String handleAccountStatusError(String accountStatus);
}
```

### 10.2 éŒ¯èª¤å¾©åŸæ©Ÿåˆ¶
```dart
/**
 * 95. å°æ‡‰ 10.2ï¼šç™»å…¥éŒ¯èª¤å¾©åŸç­–ç•¥
 * @version 2025-08-06-V1.0.0
 * @date 2025-08-06 18:00:00
 * @description æä¾›ç™»å…¥å„ç¨®éŒ¯èª¤å¾©åŸæ©Ÿåˆ¶
 */
class LoginErrorRecovery {

  /**
   * 96. å°æ‡‰ 10.2ï¼šè‡ªå‹•é‡è©¦ç™»å…¥æ©Ÿåˆ¶
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description é‡å°ç¶²è·¯éŒ¯èª¤ç­‰è‡¨æ™‚æ€§å•é¡Œçš„è‡ªå‹•é‡è©¦æ©Ÿåˆ¶
   */
  static Future<T> retryLogin<T>(
    Future<T> Function() loginOperation,
    LoginMethod method, {
    int maxRetries = 3,
    Duration initialDelay = const Duration(seconds: 1),
  });

  /**
   * 97. å°æ‡‰ 10.2ï¼šæä¾›æ›¿ä»£ç™»å…¥æ–¹å¼
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description ç•¶æŸç¨®ç™»å…¥æ–¹å¼å¤±æ•—æ™‚ï¼Œæä¾›æ›¿ä»£æ–¹å¼å»ºè­°
   */
  static List<LoginMethod> suggestAlternativeLoginMethods(
    LoginMethod failedMethod,
    LoginErrorType errorType,
  );

  /**
   * 98. å°æ‡‰ 10.2ï¼šé›¢ç·šç‹€æ…‹è™•ç†
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description è™•ç†é›¢ç·šç‹€æ…‹çš„ç™»å…¥ç•Œé¢
   */
  static Widget buildOfflineLoginWidget({
    VoidCallback? onRetry,
    String? message,
  });

  /**
   * 99. å°æ‡‰ 10.2ï¼šç™»å…¥æœƒè©±æ¢å¾©
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description å˜—è©¦æ¢å¾©å·²å„²å­˜çš„ç™»å…¥æœƒè©±
   */
  static Future<bool> attemptSessionRecovery();

  /**
   * 100. å°æ‡‰ 10.2ï¼šæ¸…é™¤ç™»å…¥å¿«å–
   * @version 2025-08-06-V1.0.0
   * @date 2025-08-06 18:00:00
   * @description æ¸…é™¤å¯èƒ½å°è‡´ç™»å…¥å•é¡Œçš„æœ¬åœ°å¿«å–
   */
  static Future<void> clearLoginCache();
}
```

---

## éµå¾ª0055è¨­è¨ˆåŸå‰‡

### éšå±¤æ¶æ§‹å°æ‡‰
- æœ¬TDDæ–‡ä»¶åŸºæ–¼8702. ç™»å…¥é é¢_SRS.mdçš„éœ€æ±‚è¦æ ¼
- èˆ‡9005. Flutter_Presentation layer.mdçš„ç”¢å“è¦æ ¼ä¿æŒä¸€è‡´
- æ‰€æœ‰å‡½æ•¸ç¯€é»ç·¨è™Ÿå°æ‡‰ä¸Šå±¤æ–‡ä»¶çš„åŠŸèƒ½æ¢ç›®

### è¨­è¨ˆåŸå‰‡éµå¾ª
1. **éšå±¤æ¶æ§‹é‚è¼¯**: åš´æ ¼åŸºæ–¼SRSæ–‡ä»¶å®šç¾©çš„åŠŸèƒ½æ¢ç›®è¨­è¨ˆ
2. **åŒå±¤ç´šä¾è³´é—œä¿‚**: è€ƒé‡èˆ‡æ­¡è¿é é¢å’Œè¨»å†Šé é¢çš„ä¾è³´é—œä¿‚
3. **ä»£ç¢¼ç¯€é»ç·¨è™Ÿ**: æ¡ç”¨ä¸åŠ å‰ç¶´çš„ç¯€é»ç·¨è™Ÿæ ¼å¼ï¼ˆå¦‚2.1ã€3.2ï¼‰
4. **å‘½åä¸€è‡´æ€§**: ä¿æŒèˆ‡ä½¿ç”¨è€…ä»‹é¢æ“ä½œæµç¨‹çš„åç¨±åŒæ­¥
5. **å¯è®€æ€§è¨­è¨ˆ**: æ¡ç”¨æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œéµå¾ªä½è€¦åˆã€é«˜å…§èšåŸå‰‡

## æ–‡ä»¶ç¶­è­·è¨˜éŒ„

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹è€… | ä¿®æ”¹å…§å®¹ |
|------|------|--------|----------|
| **v1.0.0** | **2025-08-06 18:00:00 +08:00** | **LCAS SA Team** | **åˆç‰ˆå»ºç«‹ï¼šå®Œæ•´P002ç™»å…¥é é¢TDDè¦æ ¼ï¼Œæ”¯æ´å¤šç¨®ç™»å…¥æ–¹å¼ï¼ˆLINE OAuthã€Emailã€Googleã€Appleã€ç”Ÿç‰©è¾¨è­˜ï¼‰ï¼Œå¯¦ä½œå››æ¨¡å¼å·®ç•°åŒ–è¨­è¨ˆï¼Œå®Œæ•´éŒ¯èª¤è™•ç†æ©Ÿåˆ¶ï¼Œéµå¾ª0055è¨­è¨ˆåŸå‰‡ï¼Œå°æ‡‰8702 SRSè¦æ ¼** |

---

## å‚™è¨»

- **ç´”å‡½æ•¸å®£å‘Š**: å®Œå…¨ç§»é™¤æ‰€æœ‰å¯¦ä½œä»£ç¢¼ï¼Œåƒ…ä¿ç•™å‡½æ•¸åç¨±ã€åƒæ•¸å®šç¾©å’Œè¨»è§£
- **å¤šæ–¹å¼ç™»å…¥æ”¯æ´**: æ”¯æ´LINE OAuthï¼ˆä¸»æ¨ï¼‰ã€Emailã€Googleã€Appleã€ç”Ÿç‰©è¾¨è­˜ç­‰å¤šç¨®ç™»å…¥æ–¹å¼
- **å››æ¨¡å¼å·®ç•°åŒ–**: æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼æä¾›ä¸åŒçš„ç™»å…¥ç•Œé¢è¤‡é›œåº¦å’Œé¸é …
- **å®‰å…¨æ€§å„ªå…ˆ**: å®Œæ•´çš„è¡¨å–®é©—è­‰ã€éŒ¯èª¤è™•ç†ã€ç™»å…¥å˜—è©¦é™åˆ¶æ©Ÿåˆ¶
- **å®Œæ•´æŠ€è¡“æ¶æ§‹**: Widgetåˆ†å±¤ã€ç‹€æ…‹ç®¡ç†ã€APIæ•´åˆã€éŸ¿æ‡‰å¼è¨­è¨ˆã€ç„¡éšœç¤™æ”¯æ´ã€æ•ˆèƒ½æœ€ä½³åŒ–
- **è¦ç¯„å®Œå…¨å°é½Š**: èˆ‡0055ã€8702ã€9005æ–‡ä»¶å®Œå…¨ä¸€è‡´
- **ç¯€é»ç·¨è™Ÿæ¨™æº–åŒ–**: çµ±ä¸€ç·¨è™Ÿ01-100ï¼Œéµå¾ª0055è¦ç¯„æ ¼å¼
- **ç‰ˆæœ¬çµ±ä¸€å‡ç´š**: æ‰€æœ‰çµ„ä»¶ç‰ˆæœ¬çµ±ä¸€ç‚ºv1.0.0