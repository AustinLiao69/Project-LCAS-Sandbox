
# 8805. TDD_P005_ç™»å‡ºç¢ºèªé é¢_v1.0.0

## æ–‡ä»¶è³‡è¨Š
- **æ–‡ä»¶æ¨™é¡Œ**: P005 ç™»å‡ºç¢ºèªé é¢æŠ€è¡“è¨­è¨ˆæ–‡ä»¶
- **æ–‡ä»¶ç‰ˆæœ¬**: v1.0.0
- **å‰µå»ºæ—¥æœŸ**: 2025-01-27 09:00:00 +08:00 (å°ç£æ™‚é–“)
- **å‰µå»ºè€…**: LCAS SA Team
- **æœ€å¾Œæ›´æ–°**: 2025-01-27 09:00:00 +08:00 (å°ç£æ™‚é–“)
- **å°æ‡‰éœ€æ±‚æ–‡ä»¶**: 8705. ç™»å‡ºç¢ºèªé é¢_SRS.md
- **å°æ‡‰PRDæ–‡ä»¶**: 9005. Flutter_Presentation layer.md
- **é é¢ä»£ç¢¼**: P005 (Logout Confirmation Page)

---

## ğŸ“‘ ç›®æ¬¡ (Table of Contents)

1. [æŠ€è¡“æ¶æ§‹æ¦‚è¿°](#10-æŠ€è¡“æ¶æ§‹æ¦‚è¿°)
2. [Widgetæ¸…å–®](#20-widgetæ¸…å–®)
3. [æ ¸å¿ƒWidgetè¨­è¨ˆ](#30-æ ¸å¿ƒwidgetè¨­è¨ˆ)
4. [ç‹€æ…‹ç®¡ç†æ¶æ§‹](#40-ç‹€æ…‹ç®¡ç†æ¶æ§‹)
5. [APIæ•´åˆè¨­è¨ˆ](#50-apiæ•´åˆè¨­è¨ˆ)
6. [å°èˆªè·¯ç”±è¨­è¨ˆ](#60-å°èˆªè·¯ç”±è¨­è¨ˆ)
7. [éŸ¿æ‡‰å¼è¨­è¨ˆ](#70-éŸ¿æ‡‰å¼è¨­è¨ˆ)
8. [ç„¡éšœç¤™åŠŸèƒ½](#80-ç„¡éšœç¤™åŠŸèƒ½)
9. [æ•ˆèƒ½æœ€ä½³åŒ–](#90-æ•ˆèƒ½æœ€ä½³åŒ–)
10. [éŒ¯èª¤è™•ç†æ©Ÿåˆ¶](#100-éŒ¯èª¤è™•ç†æ©Ÿåˆ¶)

---

## 1.0 æŠ€è¡“æ¶æ§‹æ¦‚è¿°

### 1.1 æ¨¡çµ„å®šä½
P005ç™»å‡ºç¢ºèªé é¢ä½œç‚ºLCAS 2.0 Flutteræ‡‰ç”¨ç¨‹å¼çš„å®‰å…¨ç™»å‡ºæ§åˆ¶æ¨¡çµ„ï¼Œè² è²¬äºŒæ¬¡ç¢ºèªç™»å‡ºæ“ä½œã€æœ¬åœ°è³‡æ–™æ¸…ç†ç®¡ç†ã€ä½¿ç”¨è€…æœƒè©±å®‰å…¨æ§åˆ¶åŠå››æ¨¡å¼å·®ç•°åŒ–ç™»å‡ºé«”é©—ã€‚æœ¬é é¢æ¡ç”¨Clean Architectureè¨­è¨ˆï¼Œç¢ºä¿è³‡æ–™å®‰å…¨èˆ‡ä½¿ç”¨è€…é«”é©—å¹³è¡¡ã€‚

### 1.2 æŠ€è¡“å †ç–Š
- **å‰ç«¯æ¡†æ¶**: Flutter 3.x
- **ç‹€æ…‹ç®¡ç†**: Provider + ChangeNotifier
- **è·¯ç”±ç®¡ç†**: GoRouter
- **HTTPå®¢æˆ¶ç«¯**: Dio
- **æœ¬åœ°å„²å­˜**: SharedPreferences + FlutterSecureStorage
- **æœƒè©±ç®¡ç†**: JWT Token Management
- **è³‡æ–™æ¸…ç†**: Secure Storage Clear
- **åŒæ­¥æœå‹™**: Background Sync Service

### 1.3 æ¨¡çµ„æ¶æ§‹
```dart
/**
 * P005_ç™»å‡ºç¢ºèªé é¢_1.0.0
 * @module P005ç™»å‡ºç¢ºèªé é¢
 * @description Flutter Presentation Layerç™»å‡ºç¢ºèªé é¢ - å®‰å…¨ç™»å‡ºã€è³‡æ–™æ¸…ç†ã€æœƒè©±ç®¡ç†ã€å››æ¨¡å¼å·®ç•°åŒ–
 * @update 2025-01-27: å‡ç´šè‡³v1.0ç‰ˆæœ¬ï¼Œæ–°å¢å®Œæ•´ç™»å‡ºç¢ºèªåŠŸèƒ½è¨­è¨ˆï¼Œæ”¯æ´å¿«é€Ÿ/å®Œå…¨ç™»å‡ºã€æœ¬åœ°è³‡æ–™æ¸…ç†ã€æœªåŒæ­¥è³‡æ–™è™•ç†
 */
```

---

## 2.0 Widgetæ¸…å–®

### 2.1 å®Œæ•´Widgetç´¢å¼•è¡¨

| # | Widgetåç¨± | ç‰ˆæœ¬ | æ‰€å±¬å±¤ç´š | åŠŸèƒ½æè¿° | ç›¸ä¾çµ„ä»¶ |
|---|------------|------|----------|----------|----------|
| 01 | LogoutConfirmPage | V1.0.0 | é é¢å®¹å™¨å±¤ | ä¸»ç™»å‡ºç¢ºèªé é¢å®¹å™¨åŠç”Ÿå‘½é€±æœŸç®¡ç† | LogoutProviderã€Router |
| 02 | LogoutScaffold | V1.0.0 | ä½ˆå±€çµæ§‹å±¤ | åŸºç¤é é¢çµæ§‹èˆ‡èƒŒæ™¯è¨­å®š | GradientBackground |
| 03 | LogoutIconHeader | V1.0.0 | åœ–ç¤ºå±•ç¤ºå±¤ | ç™»å‡ºåœ–ç¤ºèˆ‡ç¢ºèªæ¨™é¡Œ | AnimatedIconã€LogoutIcon |
| 04 | LogoutConfirmSection | V1.0.0 | ç¢ºèªé¸é …å±¤ | ç™»å‡ºç¢ºèªé¸é …èˆ‡é¡å‹é¸æ“‡ | LogoutOptionsGroupã€UnsyncDataWarning |
| 05 | LogoutOptionsGroup | V1.0.0 | é¸é …ç¾¤çµ„å±¤ | å¿«é€Ÿ/å®Œå…¨ç™»å‡ºé¸é …ç¾¤çµ„ | QuickLogoutOptionã€CompleteLogoutOption |
| 06 | QuickLogoutOption | V1.0.0 | å¿«é€Ÿç™»å‡ºå±¤ | å¿«é€Ÿç™»å‡ºé¸é …æŒ‰éˆ•ï¼ˆä¿ç•™ç™»å…¥è³‡è¨Šï¼‰ | AnimatedContainerã€RadioButton |
| 07 | CompleteLogoutOption | V1.0.0 | å®Œå…¨ç™»å‡ºå±¤ | å®Œå…¨ç™»å‡ºé¸é …æŒ‰éˆ•ï¼ˆæ¸…ç†æ‰€æœ‰è³‡æ–™ï¼‰ | AnimatedContainerã€RadioButton |
| 08 | UnsyncDataWarning | V1.0.0 | è­¦å‘Šæç¤ºå±¤ | æœªåŒæ­¥è³‡æ–™è­¦å‘Šæç¤º | WarningIconã€UnsyncItemsList |
| 09 | UnsyncItemsList | V1.0.0 | è³‡æ–™æ¸…å–®å±¤ | æœªåŒæ­¥è³‡æ–™é …ç›®æ¸…å–® | ListTileã€SyncStatusIcon |
| 10 | DataCleanupSection | V1.0.0 | æ¸…ç†é¸é …å±¤ | æœ¬åœ°è³‡æ–™æ¸…ç†é¸é …è¨­å®š | CheckboxGroupã€CleanupOptions |
| 11 | CleanupCheckboxGroup | V1.0.0 | æ¸…ç†é¸é …ç¾¤çµ„å±¤ | å„é …æ¸…ç†é¸é …æ ¸å–æ–¹å¡Šç¾¤çµ„ | CustomCheckboxã€CleanupDescription |
| 12 | SyncDataOption | V1.0.0 | åŒæ­¥é¸é …å±¤ | åŒæ­¥æœªä¸Šå‚³è³‡æ–™é¸é … | Checkboxã€SyncProgressIndicator |
| 13 | RememberChoiceOption | V1.0.0 | è¨˜æ†¶é¸é …å±¤ | è¨˜ä½é¸æ“‡åå¥½è¨­å®š | Checkboxã€Text |
| 14 | LogoutActionButtons | V1.0.0 | å‹•ä½œæŒ‰éˆ•å±¤ | ç¢ºèª/å–æ¶ˆç™»å‡ºæŒ‰éˆ•ç¾¤çµ„ | ConfirmLogoutButtonã€CancelButton |
| 15 | ConfirmLogoutButton | V1.0.0 | ç¢ºèªæŒ‰éˆ•å±¤ | ç¢ºèªç™»å‡ºåŸ·è¡ŒæŒ‰éˆ• | ElevatedButtonã€LoadingIndicator |
| 16 | CancelButton | V1.0.0 | å–æ¶ˆæŒ‰éˆ•å±¤ | å–æ¶ˆç™»å‡ºè¿”å›æŒ‰éˆ• | OutlinedButtonã€Router |
| 17 | LogoutProgressOverlay | V1.0.0 | é€²åº¦è¦†è“‹å±¤ | ç™»å‡ºè™•ç†ä¸­é€²åº¦é¡¯ç¤º | CircularProgressIndicatorã€ProgressText |
| 18 | SyncProgressIndicator | V1.0.0 | åŒæ­¥é€²åº¦å±¤ | è³‡æ–™åŒæ­¥é€²åº¦æŒ‡ç¤ºå™¨ | LinearProgressIndicatorã€ProgressBar |
| 19 | LogoutErrorDialog | V1.0.0 | éŒ¯èª¤å°è©±æ¡†å±¤ | ç™»å‡ºéŒ¯èª¤æç¤ºå°è©±æ¡† | AlertDialogã€ErrorMessage |
| 20 | EncouragementMessage | V1.0.0 | é¼“å‹µè¨Šæ¯å±¤ | å››æ¨¡å¼å·®ç•°åŒ–é¼“å‹µè¨Šæ¯ | Containerã€Text |

---

## 3.0 æ ¸å¿ƒWidgetè¨­è¨ˆ

### 3.1 é é¢å®¹å™¨å±¤Widget

#### 3.1.1 LogoutConfirmPage Widget
```dart
/**
 * 01. å°æ‡‰ 2.1ï¼šä¸»ç™»å‡ºç¢ºèªé é¢å®¹å™¨Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description ç™»å‡ºç¢ºèªé é¢çš„ä¸»å®¹å™¨ï¼Œæ”¯æ´å¿«é€Ÿ/å®Œå…¨ç™»å‡ºèˆ‡å››æ¨¡å¼å·®ç•°åŒ–
 */
class LogoutConfirmPage extends StatefulWidget {
  static const String routeName = '/logout-confirm';
  final UserMode? userMode;
  final String? previousRoute;

  const LogoutConfirmPage({Key? key, this.userMode, this.previousRoute});

  @override
  State<LogoutConfirmPage> createState();
}

/**
 * 02. å°æ‡‰ 2.1ï¼šç™»å‡ºç¢ºèªé é¢ç‹€æ…‹é¡åˆ¥
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description ç®¡ç†ç™»å‡ºç¢ºèªé é¢çš„ç‹€æ…‹å’Œå‹•ç•«æ§åˆ¶å™¨
 */
class _LogoutConfirmPageState extends State<LogoutConfirmPage> with TickerProviderStateMixin {
  late AnimationController _fadeController;
  late AnimationController _scaleController;
  late Animation<double> _fadeAnimation;
  late Animation<double> _scaleAnimation;

  @override
  void initState();

  /**
   * 03. å°æ‡‰ 2.1ï¼šåˆå§‹åŒ–å‹•ç•«æ§åˆ¶å™¨
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description è¨­å®šé é¢å‹•ç•«æ•ˆæœ
   */
  void _initializeAnimations();

  /**
   * 04. å°æ‡‰ 2.1ï¼šåˆå§‹åŒ–é é¢ç‹€æ…‹
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description èª¿ç”¨Provideré€²è¡Œç™»å‡ºç¢ºèªé é¢åˆå§‹åŒ–
   */
  Future<void> _initializePage();

  @override
  Widget build(BuildContext context);

  @override
  void dispose();
}
```

### 3.2 ä½ˆå±€çµæ§‹å±¤Widget

#### 3.2.1 LogoutScaffold Widget
```dart
/**
 * 05. å°æ‡‰ 2.2ï¼šç™»å‡ºç¢ºèªé é¢ä½ˆå±€çµæ§‹Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description æä¾›ç™»å‡ºç¢ºèªé é¢çš„åŸºç¤ä½ˆå±€çµæ§‹ï¼Œæ”¯æ´å››æ¨¡å¼å·®ç•°åŒ–èƒŒæ™¯
 */
class LogoutScaffold extends StatelessWidget {
  final Animation<double> fadeAnimation;
  final Animation<double> scaleAnimation;
  final LogoutProvider provider;
  final UserMode? userMode;

  const LogoutScaffold({
    Key? key,
    required this.fadeAnimation,
    required this.scaleAnimation,
    required this.provider,
    this.userMode,
  });

  @override
  Widget build(BuildContext context);

  /**
   * 06. å°æ‡‰ 2.2ï¼šå»ºç«‹é€²åº¦è¦†è“‹å±¤
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description é¡¯ç¤ºç™»å‡ºè™•ç†é€²åº¦æˆ–éŒ¯èª¤å°è©±æ¡†çš„è¦†è“‹å±¤
   */
  Widget _buildProgressOverlay(BuildContext context, LogoutProvider provider);
}
```

### 3.3 åœ–ç¤ºå±•ç¤ºå±¤Widget

#### 3.3.1 LogoutIconHeader Widget
```dart
/**
 * 07. å°æ‡‰ 3.1ï¼šç™»å‡ºåœ–ç¤ºæ¨™é ­å€å¡ŠWidget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description é¡¯ç¤ºç™»å‡ºåœ–ç¤ºå’Œç¢ºèªæ¨™é¡Œï¼Œæ”¯æ´å››æ¨¡å¼å·®ç•°åŒ–æ¨£å¼
 */
class LogoutIconHeader extends StatefulWidget {
  final UserMode? userMode;

  const LogoutIconHeader({Key? key, this.userMode});

  @override
  State<LogoutIconHeader> createState();
}

class _LogoutIconHeaderState extends State<LogoutIconHeader> with SingleTickerProviderStateMixin {
  late AnimationController _iconController;
  late Animation<double> _iconAnimation;

  @override
  void initState();

  @override
  Widget build(BuildContext context);

  /**
   * 08. å°æ‡‰ 3.1ï¼šå–å¾—æ¨¡å¼å°æ‡‰åœ–ç¤ºæ¨£å¼
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼è¿”å›å°æ‡‰çš„ç™»å‡ºåœ–ç¤ºæ¨£å¼
   */
  IconStyle _getIconStyleForMode(UserMode? mode);

  @override
  void dispose();
}
```

### 3.4 ç¢ºèªé¸é …å±¤Widget

#### 3.4.1 LogoutConfirmSection Widget
```dart
/**
 * 09. å°æ‡‰ 3.2ï¼šç™»å‡ºç¢ºèªå€å¡ŠWidget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description æ•´åˆç™»å‡ºç¢ºèªé¸é …ï¼Œæ”¯æ´å››æ¨¡å¼å·®ç•°åŒ–é¡¯ç¤º
 */
class LogoutConfirmSection extends StatelessWidget {
  final LogoutProvider provider;
  final UserMode? userMode;

  const LogoutConfirmSection({
    Key? key,
    required this.provider,
    this.userMode,
  });

  @override
  Widget build(BuildContext context);

  /**
   * 10. å°æ‡‰ 3.2ï¼šå–å¾—æ¨¡å¼å¯ç”¨ç™»å‡ºé¸é …
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼è¿”å›å¯ç”¨çš„ç™»å‡ºé¸é …åˆ—è¡¨
   */
  List<LogoutOption> _getAvailableOptionsForMode(UserMode? mode);
}
```

#### 3.4.2 LogoutOptionsGroup Widget
```dart
/**
 * 11. å°æ‡‰ 3.2.1ï¼šç™»å‡ºé¸é …ç¾¤çµ„Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description å¿«é€Ÿ/å®Œå…¨ç™»å‡ºé¸é …ç¾¤çµ„
 */
class LogoutOptionsGroup extends StatelessWidget {
  final LogoutProvider provider;
  final UserMode? userMode;

  const LogoutOptionsGroup({
    Key? key,
    required this.provider,
    this.userMode,
  });

  @override
  Widget build(BuildContext context);
}

/**
 * 12. å°æ‡‰ 3.2.1ï¼šå¿«é€Ÿç™»å‡ºé¸é …Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description å¿«é€Ÿç™»å‡ºé¸é …æŒ‰éˆ•ï¼ˆä¿ç•™ç™»å…¥è³‡è¨Šï¼‰
 */
class QuickLogoutOption extends StatelessWidget {
  final bool isSelected;
  final ValueChanged<bool> onChanged;
  final UserMode? userMode;

  const QuickLogoutOption({
    Key? key,
    required this.isSelected,
    required this.onChanged,
    this.userMode,
  });

  @override
  Widget build(BuildContext context);

  /**
   * 13. å°æ‡‰ 3.2.1ï¼šå–å¾—å¿«é€Ÿç™»å‡ºæè¿°æ–‡å­—
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šæ¨¡å¼é¡å‹è¿”å›å°æ‡‰çš„å¿«é€Ÿç™»å‡ºæè¿°
   */
  String _getQuickLogoutDescription(UserMode? mode);
}

/**
 * 14. å°æ‡‰ 3.2.1ï¼šå®Œå…¨ç™»å‡ºé¸é …Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description å®Œå…¨ç™»å‡ºé¸é …æŒ‰éˆ•ï¼ˆæ¸…ç†æ‰€æœ‰è³‡æ–™ï¼‰
 */
class CompleteLogoutOption extends StatelessWidget {
  final bool isSelected;
  final ValueChanged<bool> onChanged;
  final UserMode? userMode;

  const CompleteLogoutOption({
    Key? key,
    required this.isSelected,
    required this.onChanged,
    this.userMode,
  });

  @override
  Widget build(BuildContext context);

  /**
   * 15. å°æ‡‰ 3.2.1ï¼šå–å¾—å®Œå…¨ç™»å‡ºæè¿°æ–‡å­—
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šæ¨¡å¼é¡å‹è¿”å›å°æ‡‰çš„å®Œå…¨ç™»å‡ºæè¿°
   */
  String _getCompleteLogoutDescription(UserMode? mode);
}
```

### 3.5 è­¦å‘Šæç¤ºå±¤Widget

#### 3.5.1 UnsyncDataWarning Widget
```dart
/**
 * 16. å°æ‡‰ 3.3ï¼šæœªåŒæ­¥è³‡æ–™è­¦å‘ŠWidget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description é¡¯ç¤ºæœªåŒæ­¥è³‡æ–™è­¦å‘Šæç¤º
 */
class UnsyncDataWarning extends StatefulWidget {
  final List<UnsyncDataItem> unsyncItems;
  final UserMode? userMode;

  const UnsyncDataWarning({
    Key? key,
    required this.unsyncItems,
    this.userMode,
  });

  @override
  State<UnsyncDataWarning> createState();
}

class _UnsyncDataWarningState extends State<UnsyncDataWarning> 
    with SingleTickerProviderStateMixin {
  late AnimationController _warningController;
  late Animation<double> _warningAnimation;

  @override
  void initState();

  @override
  Widget build(BuildContext context);

  /**
   * 17. å°æ‡‰ 3.3ï¼šå–å¾—è­¦å‘Šåš´é‡ç¨‹åº¦é¡è‰²
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šæœªåŒæ­¥è³‡æ–™æ•¸é‡è¿”å›è­¦å‘Šé¡è‰²
   */
  Color _getWarningSeverityColor(int itemCount);

  @override
  void dispose();
}

/**
 * 18. å°æ‡‰ 3.3ï¼šæœªåŒæ­¥è³‡æ–™æ¸…å–®Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description é¡¯ç¤ºæœªåŒæ­¥è³‡æ–™é …ç›®è©³ç´°æ¸…å–®
 */
class UnsyncItemsList extends StatelessWidget {
  final List<UnsyncDataItem> items;

  const UnsyncItemsList({Key? key, required this.items});

  @override
  Widget build(BuildContext context);

  /**
   * 19. å°æ‡‰ 3.3ï¼šå»ºç«‹æœªåŒæ­¥é …ç›®Widget
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description å»ºç«‹å–®å€‹æœªåŒæ­¥è³‡æ–™é …ç›®é¡¯ç¤ºWidget
   */
  Widget _buildUnsyncItem(UnsyncDataItem item);
}
```

### 3.6 æ¸…ç†é¸é …å±¤Widget

#### 3.6.1 DataCleanupSection Widget
```dart
/**
 * 20. å°æ‡‰ 3.4ï¼šè³‡æ–™æ¸…ç†å€å¡ŠWidget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description æœ¬åœ°è³‡æ–™æ¸…ç†é¸é …è¨­å®šï¼Œæ”¯æ´å››æ¨¡å¼å·®ç•°åŒ–
 */
class DataCleanupSection extends StatelessWidget {
  final LogoutProvider provider;
  final UserMode? userMode;

  const DataCleanupSection({
    Key? key,
    required this.provider,
    this.userMode,
  });

  @override
  Widget build(BuildContext context);

  /**
   * 21. å°æ‡‰ 3.4ï¼šåˆ¤æ–·æ˜¯å¦é¡¯ç¤ºæ¸…ç†é¸é …
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼åˆ¤æ–·æ˜¯å¦é¡¯ç¤ºè©³ç´°æ¸…ç†é¸é …
   */
  bool _shouldShowCleanupOptions(UserMode? mode);
}

/**
 * 22. å°æ‡‰ 3.4ï¼šæ¸…ç†é¸é …æ ¸å–æ–¹å¡Šç¾¤çµ„Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description å„é …æ¸…ç†é¸é …æ ¸å–æ–¹å¡Šç¾¤çµ„
 */
class CleanupCheckboxGroup extends StatelessWidget {
  final LogoutState logoutState;
  final ValueChanged<String> onCleanupOptionChanged;

  const CleanupCheckboxGroup({
    Key? key,
    required this.logoutState,
    required this.onCleanupOptionChanged,
  });

  @override
  Widget build(BuildContext context);

  /**
   * 23. å°æ‡‰ 3.4ï¼šå»ºç«‹æ¸…ç†é¸é …æ ¸å–æ–¹å¡Š
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description å»ºç«‹å–®å€‹æ¸…ç†é¸é …æ ¸å–æ–¹å¡Š
   */
  Widget _buildCleanupCheckbox({
    required String optionKey,
    required String title,
    required String description,
    required bool value,
  });
}
```

### 3.7 è¼”åŠ©åŠŸèƒ½å±¤Widget

#### 3.7.1 SyncDataOption & RememberChoiceOption Widgets
```dart
/**
 * 24. å°æ‡‰ 3.5ï¼šåŒæ­¥è³‡æ–™é¸é …Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description åŒæ­¥æœªä¸Šå‚³è³‡æ–™é¸é …
 */
class SyncDataOption extends StatelessWidget {
  final bool value;
  final ValueChanged<bool?> onChanged;
  final bool hasUnsyncData;

  const SyncDataOption({
    Key? key,
    required this.value,
    required this.onChanged,
    this.hasUnsyncData = false,
  });

  @override
  Widget build(BuildContext context);
}

/**
 * 25. å°æ‡‰ 3.5ï¼šè¨˜ä½é¸æ“‡é¸é …Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description è¨˜ä½ç™»å‡ºé¸æ“‡åå¥½è¨­å®š
 */
class RememberChoiceOption extends StatelessWidget {
  final bool value;
  final ValueChanged<bool?> onChanged;
  final UserMode? userMode;

  const RememberChoiceOption({
    Key? key,
    required this.value,
    required this.onChanged,
    this.userMode,
  });

  @override
  Widget build(BuildContext context);
}
```

### 3.8 å‹•ä½œæŒ‰éˆ•å±¤Widget

#### 3.8.1 LogoutActionButtons Widget
```dart
/**
 * 26. å°æ‡‰ 3.6ï¼šç™»å‡ºå‹•ä½œæŒ‰éˆ•ç¾¤çµ„Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description ç¢ºèª/å–æ¶ˆç™»å‡ºæŒ‰éˆ•ç¾¤çµ„
 */
class LogoutActionButtons extends StatelessWidget {
  final LogoutProvider provider;
  final UserMode? userMode;

  const LogoutActionButtons({
    Key? key,
    required this.provider,
    this.userMode,
  });

  @override
  Widget build(BuildContext context);
}

/**
 * 27. å°æ‡‰ 3.6ï¼šç¢ºèªç™»å‡ºæŒ‰éˆ•Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description ç¢ºèªç™»å‡ºåŸ·è¡ŒæŒ‰éˆ•
 */
class ConfirmLogoutButton extends StatefulWidget {
  final VoidCallback onPressed;
  final bool isLoading;
  final LogoutType logoutType;
  final UserMode? userMode;

  const ConfirmLogoutButton({
    Key? key,
    required this.onPressed,
    this.isLoading = false,
    required this.logoutType,
    this.userMode,
  });

  @override
  State<ConfirmLogoutButton> createState();
}

class _ConfirmLogoutButtonState extends State<ConfirmLogoutButton> 
    with SingleTickerProviderStateMixin {
  late AnimationController _buttonController;
  late Animation<double> _buttonAnimation;

  @override
  void initState();

  @override
  Widget build(BuildContext context);

  /**
   * 28. å°æ‡‰ 3.6ï¼šå–å¾—ç¢ºèªæŒ‰éˆ•æ–‡å­—
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šç™»å‡ºé¡å‹å’Œæ¨¡å¼è¿”å›é©ç•¶çš„æŒ‰éˆ•æ–‡å­—
   */
  String _getConfirmButtonText(LogoutType type, UserMode? mode);

  @override
  void dispose();
}

/**
 * 29. å°æ‡‰ 3.6ï¼šå–æ¶ˆæŒ‰éˆ•Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description å–æ¶ˆç™»å‡ºè¿”å›æŒ‰éˆ•
 */
class CancelButton extends StatelessWidget {
  final VoidCallback onPressed;

  const CancelButton({Key? key, required this.onPressed});

  @override
  Widget build(BuildContext context);
}
```

### 3.9 é€²åº¦æŒ‡ç¤ºå±¤Widget

#### 3.9.1 Progress Indicators Widgets
```dart
/**
 * 30. å°æ‡‰ 3.7ï¼šç™»å‡ºé€²åº¦è¦†è“‹å±¤Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description ç™»å‡ºè™•ç†ä¸­é€²åº¦é¡¯ç¤ºè¦†è“‹å±¤
 */
class LogoutProgressOverlay extends StatefulWidget {
  final LogoutPageState pageState;
  final String? progressMessage;
  final double? progress;

  const LogoutProgressOverlay({
    Key? key,
    required this.pageState,
    this.progressMessage,
    this.progress,
  });

  @override
  State<LogoutProgressOverlay> createState();
}

class _LogoutProgressOverlayState extends State<LogoutProgressOverlay> 
    with TickerProviderStateMixin {
  late AnimationController _spinController;
  late AnimationController _fadeController;
  late Animation<double> _spinAnimation;
  late Animation<double> _fadeAnimation;

  @override
  void initState();

  @override
  Widget build(BuildContext context);

  /**
   * 31. å°æ‡‰ 3.7ï¼šå–å¾—é€²åº¦è¨Šæ¯
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šé é¢ç‹€æ…‹è¿”å›é©ç•¶çš„é€²åº¦è¨Šæ¯
   */
  String _getProgressMessage(LogoutPageState state);

  @override
  void dispose();
}

/**
 * 32. å°æ‡‰ 3.7ï¼šåŒæ­¥é€²åº¦æŒ‡ç¤ºå™¨Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description è³‡æ–™åŒæ­¥é€²åº¦æŒ‡ç¤ºå™¨
 */
class SyncProgressIndicator extends StatelessWidget {
  final double progress;
  final String? message;
  final int totalItems;
  final int syncedItems;

  const SyncProgressIndicator({
    Key? key,
    required this.progress,
    this.message,
    required this.totalItems,
    required this.syncedItems,
  });

  @override
  Widget build(BuildContext context);

  /**
   * 33. å°æ‡‰ 3.7ï¼šæ ¼å¼åŒ–åŒæ­¥é€²åº¦æ–‡å­—
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¼å¼åŒ–åŒæ­¥é€²åº¦é¡¯ç¤ºæ–‡å­—
   */
  String _formatSyncProgressText();
}
```

### 3.10 å››æ¨¡å¼å·®ç•°åŒ–Widget

#### 3.10.1 EncouragementMessage Widget
```dart
/**
 * 34. å°æ‡‰ 3.8ï¼šé¼“å‹µè¨Šæ¯Widget
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description å››æ¨¡å¼å·®ç•°åŒ–é¼“å‹µè¨Šæ¯
 */
class EncouragementMessage extends StatelessWidget {
  final UserMode? userMode;
  final LogoutType selectedType;

  const EncouragementMessage({
    Key? key,
    this.userMode,
    required this.selectedType,
  });

  @override
  Widget build(BuildContext context);

  /**
   * 35. å°æ‡‰ 3.8ï¼šå–å¾—æ¨¡å¼å°æ‡‰é¼“å‹µè¨Šæ¯
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼å’Œç™»å‡ºé¡å‹è¿”å›å°æ‡‰çš„é¼“å‹µè¨Šæ¯
   */
  String _getEncouragementMessage(UserMode? mode, LogoutType type);

  /**
   * 36. å°æ‡‰ 3.8ï¼šå–å¾—æ¨¡å¼å°æ‡‰æ¨£å¼
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼è¿”å›å°æ‡‰çš„é¼“å‹µè¨Šæ¯æ¨£å¼
   */
  MessageStyle _getMessageStyleForMode(UserMode? mode);
}
```

---

## 4.0 ç‹€æ…‹ç®¡ç†æ¶æ§‹

### 4.1 LogoutProvider ç‹€æ…‹ç®¡ç†å™¨
```dart
/**
 * 37. å°æ‡‰ 4.1ï¼šç™»å‡ºç¢ºèªé é¢ç‹€æ…‹ç®¡ç†å™¨
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description ç®¡ç†ç™»å‡ºç¢ºèªé é¢çš„ç‹€æ…‹ï¼Œæ”¯æ´å¿«é€Ÿ/å®Œå…¨ç™»å‡ºå’Œå››æ¨¡å¼å·®ç•°åŒ–
 */
class LogoutProvider extends ChangeNotifier {
  // ç‹€æ…‹å±¬æ€§
  LogoutPageState _pageState = LogoutPageState.initial;
  LogoutType _selectedType = LogoutType.quick;
  bool _isLoading = false;
  String? _errorMessage;
  LogoutErrorType? _errorType;
  bool _syncUnsyncData = true;
  bool _clearLocalData = false;
  bool _clearCache = true;
  bool _rememberChoice = false;
  UserMode? _userMode;

  // æœªåŒæ­¥è³‡æ–™
  List<UnsyncDataItem> _unsyncItems = [];
  bool _isSyncing = false;
  double _syncProgress = 0.0;

  // æ¸…ç†é¸é …
  Map<String, bool> _cleanupOptions = {
    'localData': false,
    'cache': true,
    'credentials': true,
    'biometricData': false,
    'preferences': false,
  };

  // Getters
  LogoutPageState get pageState;
  LogoutType get selectedType;
  bool get isLoading;
  String? get errorMessage;
  LogoutErrorType? get errorType;
  bool get syncUnsyncData;
  bool get clearLocalData;
  bool get clearCache;
  bool get rememberChoice;
  UserMode? get userMode;
  List<UnsyncDataItem> get unsyncItems;
  bool get isSyncing;
  double get syncProgress;
  Map<String, bool> get cleanupOptions;
  bool get hasUnsyncData;

  /**
   * 38. å°æ‡‰ 4.1ï¼šåˆå§‹åŒ–ç™»å‡ºç¢ºèªé é¢
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description åˆå§‹åŒ–ç™»å‡ºç¢ºèªé é¢ç‹€æ…‹å’Œæª¢æŸ¥æœªåŒæ­¥è³‡æ–™
   */
  Future<void> initializePage(UserMode? mode);

  /**
   * 39. å°æ‡‰ 4.1ï¼šè¨­å®šä½¿ç”¨è€…æ¨¡å¼
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description è¨­å®šä½¿ç”¨è€…æ¨¡å¼ä¸¦æ›´æ–°å¯ç”¨ç™»å‡ºé¸é …
   */
  void setUserMode(UserMode mode);

  /**
   * 40. å°æ‡‰ 4.1ï¼šæª¢æŸ¥æœªåŒæ­¥è³‡æ–™
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æª¢æŸ¥æ˜¯å¦æœ‰æœªåŒæ­¥çš„è¨˜å¸³è¨˜éŒ„æˆ–å…¶ä»–è³‡æ–™
   */
  Future<void> _checkUnsyncData();

  /**
   * 41. å°æ‡‰ 4.1ï¼šè¨­å®šç™»å‡ºé¡å‹
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description è¨­å®šå¿«é€Ÿæˆ–å®Œå…¨ç™»å‡ºé¡å‹
   */
  void setLogoutType(LogoutType type);

  /**
   * 42. å°æ‡‰ 4.1ï¼šåˆ‡æ›åŒæ­¥æœªä¸Šå‚³è³‡æ–™
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description åˆ‡æ›æ˜¯å¦åœ¨ç™»å‡ºå‰åŒæ­¥æœªä¸Šå‚³è³‡æ–™
   */
  void toggleSyncUnsyncData(bool value);

  /**
   * 43. å°æ‡‰ 4.1ï¼šæ›´æ–°æ¸…ç†é¸é …
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ›´æ–°è³‡æ–™æ¸…ç†é¸é …è¨­å®š
   */
  void updateCleanupOption(String optionKey, bool value);

  /**
   * 44. å°æ‡‰ 4.1ï¼šåˆ‡æ›è¨˜ä½é¸æ“‡
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description åˆ‡æ›è¨˜ä½ç™»å‡ºé¸æ“‡åå¥½
   */
  void toggleRememberChoice(bool value);

  /**
   * 45. å°æ‡‰ 4.1ï¼šåŸ·è¡Œç™»å‡ºæ“ä½œ
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šé¸æ“‡çš„é¡å‹åŸ·è¡Œç™»å‡ºæ“ä½œ
   */
  Future<void> performLogout();

  /**
   * 46. å°æ‡‰ 4.1ï¼šåŸ·è¡Œå¿«é€Ÿç™»å‡º
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description åŸ·è¡Œå¿«é€Ÿç™»å‡ºï¼ˆä¿ç•™ç™»å…¥è³‡è¨Šï¼‰
   */
  Future<void> _performQuickLogout();

  /**
   * 47. å°æ‡‰ 4.1ï¼šåŸ·è¡Œå®Œå…¨ç™»å‡º
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description åŸ·è¡Œå®Œå…¨ç™»å‡ºï¼ˆæ¸…ç†æ‰€æœ‰è³‡æ–™ï¼‰
   */
  Future<void> _performCompleteLogout();

  /**
   * 48. å°æ‡‰ 4.1ï¼šåŒæ­¥æœªä¸Šå‚³è³‡æ–™
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description åœ¨ç™»å‡ºå‰åŒæ­¥æœªä¸Šå‚³çš„è³‡æ–™
   */
  Future<void> _syncUnsyncDataBeforeLogout();

  /**
   * 49. å°æ‡‰ 4.1ï¼šæ¸…ç†æœ¬åœ°è³‡æ–™
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šæ¸…ç†é¸é …æ¸…ç†æœ¬åœ°è³‡æ–™
   */
  Future<void> _cleanupLocalData();

  /**
   * 50. å°æ‡‰ 4.1ï¼šæ¸…ç†ä½¿ç”¨è€…æœƒè©±
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ¸…ç†ä½¿ç”¨è€…æœƒè©±å’Œèªè­‰ä»¤ç‰Œ
   */
  Future<void> _cleanupUserSession();

  /**
   * 51. å°æ‡‰ 4.1ï¼šå„²å­˜ä½¿ç”¨è€…åå¥½
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description å„²å­˜ä½¿ç”¨è€…çš„ç™»å‡ºåå¥½è¨­å®š
   */
  Future<void> _saveUserPreferences();

  /**
   * 52. å°æ‡‰ 4.1ï¼šå–å¾—è£ç½®è³‡è¨Š
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ”¶é›†è£ç½®ç›¸é—œè³‡è¨Šç”¨æ–¼APIèª¿ç”¨
   */
  Future<Map<String, dynamic>> _getDeviceInfo();

  /**
   * 53. å°æ‡‰ 4.1ï¼šè¨­å®šè¼‰å…¥ç‹€æ…‹
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ›´æ–°è¼‰å…¥ç‹€æ…‹ä¸¦é€šçŸ¥ç›£è½è€…
   */
  void _setLoading(bool loading);

  /**
   * 54. å°æ‡‰ 4.1ï¼šè¨­å®šé é¢ç‹€æ…‹
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ›´æ–°é é¢ç‹€æ…‹ä¸¦é€šçŸ¥ç›£è½è€…
   */
  void _setPageState(LogoutPageState state);

  /**
   * 55. å°æ‡‰ 4.1ï¼šè¨­å®šåŒæ­¥é€²åº¦
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ›´æ–°è³‡æ–™åŒæ­¥é€²åº¦
   */
  void _setSyncProgress(double progress);

  /**
   * 56. å°æ‡‰ 4.1ï¼šè¨­å®šéŒ¯èª¤è¨Šæ¯
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description è¨­å®šéŒ¯èª¤è¨Šæ¯å’ŒéŒ¯èª¤é¡å‹
   */
  void _setError(String message, LogoutErrorType type, dynamic error);

  /**
   * 57. å°æ‡‰ 4.1ï¼šæ¸…é™¤éŒ¯èª¤ç‹€æ…‹
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ¸…é™¤éŒ¯èª¤ç‹€æ…‹ä¸¦æ±ºå®šå¾ŒçºŒå‹•ä½œ
   */
  void clearError();

  /**
   * 58. å°æ‡‰ 4.1ï¼šå–æ¶ˆç™»å‡ºæ“ä½œ
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description å–æ¶ˆç™»å‡ºæ“ä½œä¸¦è¿”å›åŸé é¢
   */
  void cancelLogout();

  /**
   * 59. å°æ‡‰ 4.1ï¼šé‡è©¦ç™»å‡ºæ“ä½œ
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šéŒ¯èª¤é¡å‹åŸ·è¡Œç›¸å°æ‡‰çš„é‡è©¦æ“ä½œ
   */
  Future<void> retryLogout();
}
```

### 4.2 ç‹€æ…‹æšèˆ‰å®šç¾©
```dart
/**
 * 60. å°æ‡‰ 4.2ï¼šç™»å‡ºç¢ºèªé é¢ç‹€æ…‹æšèˆ‰
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description å®šç¾©ç™»å‡ºç¢ºèªé é¢çš„å„ç¨®ç‹€æ…‹
 */
enum LogoutPageState {
  initial,        // åˆå§‹ç‹€æ…‹
  checkingData,   // æª¢æŸ¥æœªåŒæ­¥è³‡æ–™
  syncingData,    // åŒæ­¥è³‡æ–™ä¸­
  loggingOut,     // ç™»å‡ºè™•ç†ä¸­
  success,        // ç™»å‡ºæˆåŠŸ
  error,          // éŒ¯èª¤ç‹€æ…‹
  cancelled,      // å–æ¶ˆç™»å‡º
}

/**
 * 61. å°æ‡‰ 4.2ï¼šç™»å‡ºé¡å‹æšèˆ‰
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description æ”¯æ´çš„ç™»å‡ºé¡å‹
 */
enum LogoutType {
  quick,    // å¿«é€Ÿç™»å‡ºï¼ˆä¿ç•™ç™»å…¥è³‡è¨Šï¼‰
  complete, // å®Œå…¨ç™»å‡ºï¼ˆæ¸…ç†æ‰€æœ‰è³‡æ–™ï¼‰
}

/**
 * 62. å°æ‡‰ 4.2ï¼šç™»å‡ºéŒ¯èª¤é¡å‹æšèˆ‰
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description ç™»å‡ºéŒ¯èª¤é¡å‹åˆ†é¡
 */
enum LogoutErrorType {
  networkError,       // ç¶²è·¯éŒ¯èª¤
  syncFailure,        // åŒæ­¥å¤±æ•—
  cleanupFailure,     // æ¸…ç†å¤±æ•—
  sessionExpired,     // æœƒè©±éæœŸ
  serverError,        // ä¼ºæœå™¨éŒ¯èª¤
  unknown,           // æœªçŸ¥éŒ¯èª¤
}

/**
 * 63. å°æ‡‰ 4.2ï¼šæœªåŒæ­¥è³‡æ–™é …ç›®æ¨¡å‹
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description æœªåŒæ­¥è³‡æ–™é …ç›®è³‡æ–™çµæ§‹
 */
class UnsyncDataItem {
  final String id;
  final String type;
  final String description;
  final DateTime createdAt;
  final Map<String, dynamic> data;

  UnsyncDataItem({
    required this.id,
    required this.type,
    required this.description,
    required this.createdAt,
    required this.data,
  });

  factory UnsyncDataItem.fromJson(Map<String, dynamic> json);
  Map<String, dynamic> toJson();
}
```

---

## 5.0 APIæ•´åˆè¨­è¨ˆ

### 5.1 LogoutApiService APIæœå‹™
```dart
/**
 * 64. å°æ‡‰ 5.1ï¼šç™»å‡ºç¢ºèªé é¢APIæœå‹™
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description è™•ç†ç™»å‡ºç¢ºèªé é¢ç›¸é—œçš„APIèª¿ç”¨ï¼Œæ”¯æ´F003ä½¿ç”¨è€…ç™»å‡ºåŠŸèƒ½
 */
class LogoutApiService {
  final ApiClient _apiClient = ApiClient();

  /**
   * 65. å°æ‡‰ 5.1ï¼šåŸ·è¡Œä½¿ç”¨è€…ç™»å‡º
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description åŸ·è¡Œä½¿ç”¨è€…ç™»å‡ºAPIèª¿ç”¨ï¼ˆå°æ‡‰F003ç«¯é»ï¼‰
   */
  Future<ApiResponse<LogoutResponse>> performLogout(LogoutRequest request);

  /**
   * 66. å°æ‡‰ 5.1ï¼šæª¢æŸ¥æœªåŒæ­¥è³‡æ–™
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æª¢æŸ¥ä½¿ç”¨è€…æœªåŒæ­¥è³‡æ–™APIèª¿ç”¨
   */
  Future<ApiResponse<UnsyncDataResponse>> checkUnsyncData(String userId);

  /**
   * 67. å°æ‡‰ 5.1ï¼šåŒæ­¥æœªä¸Šå‚³è³‡æ–™
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description åŒæ­¥æœªä¸Šå‚³è³‡æ–™APIèª¿ç”¨
   */
  Future<ApiResponse<SyncResponse>> syncUnsyncData(SyncRequest request);

  /**
   * 68. å°æ‡‰ 5.1ï¼šæ’¤éŠ·ä½¿ç”¨è€…ä»¤ç‰Œ
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ’¤éŠ·ä½¿ç”¨è€…èªè­‰ä»¤ç‰ŒAPIèª¿ç”¨
   */
  Future<ApiResponse<RevokeTokenResponse>> revokeTokens(RevokeTokenRequest request);

  /**
   * 69. å°æ‡‰ 5.1ï¼šè™•ç†DioéŒ¯èª¤
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description è™•ç†DioéŒ¯èª¤ä¸¦è½‰æ›ç‚ºä½¿ç”¨è€…å‹å–„è¨Šæ¯
   */
  String _handleDioError(DioError error);

  /**
   * 70. å°æ‡‰ 5.1ï¼šå–å¾—è£ç½®è³‡è¨Š
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ”¶é›†è£ç½®è³‡è¨Šç”¨æ–¼APIèª¿ç”¨
   */
  Future<Map<String, dynamic>> _getDeviceInfo();
}
```

### 5.2 è³‡æ–™æ¨¡å‹å®šç¾©
```dart
/**
 * 71. å°æ‡‰ 5.2ï¼šç™»å‡ºè«‹æ±‚æ¨¡å‹
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description ç™»å‡ºè«‹æ±‚è³‡æ–™çµæ§‹
 */
class LogoutRequest {
  final String userId;
  final LogoutType logoutType;
  final Map<String, dynamic> deviceInfo;

  LogoutRequest({
    required this.userId,
    required this.logoutType,
    required this.deviceInfo,
  });

  Map<String, dynamic> toJson();
}

/**
 * 72. å°æ‡‰ 5.2ï¼šç™»å‡ºå›æ‡‰æ¨¡å‹
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description çµ±ä¸€çš„ç™»å‡ºå›æ‡‰è³‡æ–™çµæ§‹
 */
class LogoutResponse {
  final bool success;
  final String message;
  final bool tokenRevoked;

  LogoutResponse({
    required this.success,
    required this.message,
    required this.tokenRevoked,
  });

  factory LogoutResponse.fromJson(Map<String, dynamic> json);
  Map<String, dynamic> toJson();
}

/**
 * 73. å°æ‡‰ 5.2ï¼šæœªåŒæ­¥è³‡æ–™å›æ‡‰æ¨¡å‹
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description æœªåŒæ­¥è³‡æ–™æª¢æŸ¥å›æ‡‰è³‡æ–™çµæ§‹
 */
class UnsyncDataResponse {
  final bool hasUnsyncData;
  final List<UnsyncDataItem> items;
  final int totalCount;

  UnsyncDataResponse({
    required this.hasUnsyncData,
    required this.items,
    required this.totalCount,
  });

  factory UnsyncDataResponse.fromJson(Map<String, dynamic> json);
}

/**
 * 74. å°æ‡‰ 5.2ï¼šåŒæ­¥è«‹æ±‚æ¨¡å‹
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description è³‡æ–™åŒæ­¥è«‹æ±‚è³‡æ–™çµæ§‹
 */
class SyncRequest {
  final String userId;
  final List<String> itemIds;

  SyncRequest({
    required this.userId,
    required this.itemIds,
  });

  Map<String, dynamic> toJson();
}

/**
 * 75. å°æ‡‰ 5.2ï¼šåŒæ­¥å›æ‡‰æ¨¡å‹
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description è³‡æ–™åŒæ­¥å›æ‡‰è³‡æ–™çµæ§‹
 */
class SyncResponse {
  final bool success;
  final int syncedCount;
  final int failedCount;
  final List<String> failedItems;

  SyncResponse({
    required this.success,
    required this.syncedCount,
    required this.failedCount,
    required this.failedItems,
  });

  factory SyncResponse.fromJson(Map<String, dynamic> json);
}
```

---

## 6.0 å°èˆªè·¯ç”±è¨­è¨ˆ

### 6.1 è·¯ç”±é…ç½®
```dart
/**
 * 76. å°æ‡‰ 6.1ï¼šç™»å‡ºç¢ºèªé é¢è·¯ç”±é…ç½®
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description å®šç¾©ç™»å‡ºç¢ºèªé é¢çš„è·¯ç”±è¦å‰‡èˆ‡å°èˆªé‚è¼¯
 */
class LogoutRoutes {
  static const String logoutConfirm = '/logout-confirm';
  static const String welcome = '/welcome';
  static const String login = '/login';

  /**
   * 77. å°æ‡‰ 6.1ï¼šå–å¾—ç™»å‡ºç¢ºèªé é¢è·¯ç”±
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description å»ºç«‹ç™»å‡ºç¢ºèªé é¢çš„GoRouteé…ç½®
   */
  static GoRoute getLogoutConfirmRoute();
}

/**
 * 78. å°æ‡‰ 6.1ï¼šç™»å‡ºå°èˆªæœå‹™
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description è™•ç†ç™»å‡ºç›¸é—œçš„å°èˆªé‚è¼¯
 */
class LogoutNavigationService {
  static final GoRouter _router;
  static GoRouter get router;

  /**
   * 79. å°æ‡‰ 6.1ï¼šå°èˆªåˆ°æ­¡è¿é é¢
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description å®Œå…¨ç™»å‡ºæˆåŠŸå¾Œå°èˆªåˆ°æ­¡è¿é é¢
   */
  Future<void> navigateToWelcome();

  /**
   * 80. å°æ‡‰ 6.1ï¼šå°èˆªåˆ°ç™»å…¥é é¢
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description å¿«é€Ÿç™»å‡ºæˆåŠŸå¾Œå°èˆªåˆ°ç™»å…¥é é¢ï¼ˆè‡ªå‹•å¡«å…¥ï¼‰
   */
  Future<void> navigateToLogin({bool autoFill = false});

  /**
   * 81. å°æ‡‰ 6.1ï¼šè¿”å›åŸé é¢
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description å–æ¶ˆç™»å‡ºæ™‚è¿”å›åˆ°åŸä¾†é é¢
   */
  void navigateBack();

  /**
   * 82. å°æ‡‰ 6.1ï¼šæ¸…é™¤å°èˆªå †ç–Š
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ¸…é™¤å°èˆªå †ç–Šä¸¦å°èˆªåˆ°æŒ‡å®šé é¢
   */
  void clearStackAndNavigateTo(String routeName);
}
```

---

## 7.0 éŸ¿æ‡‰å¼è¨­è¨ˆ

### 7.1 éŸ¿æ‡‰å¼è¼”åŠ©å·¥å…·
```dart
/**
 * 83. å°æ‡‰ 7.1ï¼šç™»å‡ºç¢ºèªé é¢éŸ¿æ‡‰å¼è¨­è¨ˆè¼”åŠ©å·¥å…·
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description éµå¾ª9005æ–‡ä»¶çš„éŸ¿æ‡‰å¼è¨­è¨ˆè¦ç¯„ï¼Œæä¾›ç™»å‡ºç¢ºèªé é¢å°ˆç”¨çš„ä½ˆå±€ç®¡ç†
 */
class LogoutResponsiveHelper {
  final BuildContext context;
  late final MediaQueryData _mediaQuery;
  late final Size _screenSize;

  LogoutResponsiveHelper.of(BuildContext context);

  // æ–·é»åˆ¤æ–·å±¬æ€§ï¼ˆ9005è¦ç¯„ï¼‰
  bool get isMobile;
  bool get isTablet;
  bool get isSmallDesktop;
  bool get isLargeDesktop;
  DeviceType get deviceType;

  // ç™»å‡ºç¢ºèªé é¢å°ˆç”¨å°ºå¯¸å±¬æ€§
  double get logoutCardWidth;
  double get logoutCardMaxWidth;
  EdgeInsets get logoutCardPadding;
  double get buttonHeight;
  double get iconSize;
  double get optionButtonHeight;
  double get warningBoxHeight;

  /**
   * 84. å°æ‡‰ 7.1ï¼šå–å¾—å››æ¨¡å¼æŒ‰éˆ•é«˜åº¦
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼å’Œè£ç½®é¡å‹è¿”å›é©ç•¶æŒ‰éˆ•é«˜åº¦
   */
  double getButtonHeightForMode(UserMode? mode);

  /**
   * 85. å°æ‡‰ 7.1ï¼šå–å¾—æ¨¡å¼å°æ‡‰å­—å‹å¤§å°
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼è¿”å›é©ç•¶å­—å‹å¤§å°
   */
  double getFontSizeForMode(UserMode? mode, TextStyle baseStyle);

  /**
   * 86. å°æ‡‰ 7.1ï¼šå–å¾—è­¦å‘Šå€å¡Šé«˜åº¦
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šæœªåŒæ­¥è³‡æ–™æ•¸é‡èª¿æ•´è­¦å‘Šå€å¡Šé«˜åº¦
   */
  double getWarningBoxHeight(int itemCount);
}
```

---

## 8.0 ç„¡éšœç¤™åŠŸèƒ½

### 8.1 èªæ„åŒ–æ”¯æ´
```dart
/**
 * 87. å°æ‡‰ 8.1ï¼šç™»å‡ºç¢ºèªé é¢ç„¡éšœç¤™èªæ„åŒ–WidgetåŒ…è£å™¨
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description æä¾›WCAG 2.1 AAæ¨™æº–çš„å®Œæ•´ç„¡éšœç¤™æ”¯æ´ï¼ˆ9005è¦ç¯„ï¼‰
 */
class LogoutAccessibilityWrapper {

  /**
   * 88. å°æ‡‰ 8.1ï¼šç‚ºç™»å‡ºé¸é …æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description ç‚ºç™»å‡ºé¡å‹é¸é …æ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapLogoutOption(Widget child, LogoutType type, bool isSelected);

  /**
   * 89. å°æ‡‰ 8.1ï¼šç‚ºç¢ºèªæŒ‰éˆ•æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description ç‚ºç¢ºèªç™»å‡ºæŒ‰éˆ•æ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapConfirmButton(Widget child, LogoutType type, bool isLoading);

  /**
   * 90. å°æ‡‰ 8.1ï¼šç‚ºè­¦å‘Šè¨Šæ¯æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description ç‚ºæœªåŒæ­¥è³‡æ–™è­¦å‘Šæ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapWarningMessage(Widget child, int unsyncCount);

  /**
   * 91. å°æ‡‰ 8.1ï¼šç‚ºæ¸…ç†é¸é …æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description ç‚ºè³‡æ–™æ¸…ç†é¸é …æ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapCleanupOption(Widget child, String optionName, bool isSelected);

  /**
   * 92. å°æ‡‰ 8.1ï¼šç‚ºé€²åº¦æŒ‡ç¤ºå™¨æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description ç‚ºç™»å‡ºé€²åº¦æŒ‡ç¤ºå™¨æ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapProgressIndicator(Widget child, LogoutPageState state, double? progress);
}
```

---

## 9.0 æ•ˆèƒ½æœ€ä½³åŒ–

### 9.1 Widgetå¿«å–ç­–ç•¥
```dart
/**
 * 93. å°æ‡‰ 9.1ï¼šç™»å‡ºç¢ºèªé é¢Widgetå¿«å–ç®¡ç†å™¨
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description å„ªåŒ–ç™»å‡ºç¢ºèªé é¢Widgeté‡å»ºæ•ˆèƒ½ï¼Œæ¸›å°‘ä¸å¿…è¦çš„é‡å»º
 */
class LogoutWidgetCache {
  static final Map<String, Widget> _cache = {};
  static final Map<String, DateTime> _cacheTimestamps = {};
  static const Duration _cacheValidDuration = Duration(minutes: 5);

  /**
   * 94. å°æ‡‰ 9.1ï¼šå–å¾—å¿«å–çš„åœ–ç¤ºæ¨™é ­æˆ–å»ºç«‹æ–°çš„
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description å¾å¿«å–ä¸­ç²å–åœ–ç¤ºæ¨™é ­Widgetæˆ–å‰µå»ºæ–°çš„
   */
  static Widget getIconHeaderOrCreate(UserMode? mode, Widget Function() creator);

  /**
   * 95. å°æ‡‰ 9.1ï¼šå–å¾—å¿«å–çš„é¸é …ç¾¤çµ„æˆ–å»ºç«‹æ–°çš„
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description å¾å¿«å–ä¸­ç²å–é¸é …ç¾¤çµ„Widgetæˆ–å‰µå»ºæ–°çš„
   */
  static Widget getOptionsGroupOrCreate(UserMode? mode, Widget Function() creator);

  /**
   * 96. å°æ‡‰ 9.1ï¼šæ¸…é™¤ç™»å‡ºç¢ºèªé é¢å¿«å–
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ¸…é™¤ç™»å‡ºç¢ºèªé é¢ç›¸é—œçš„Widgetå¿«å–
   */
  static void clearLogoutCache();
}
```

### 9.2 ç™»å‡ºæµç¨‹å„ªåŒ–
```dart
/**
 * 97. å°æ‡‰ 9.2ï¼šç™»å‡ºæµç¨‹æ•ˆèƒ½å„ªåŒ–å™¨
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description å„ªåŒ–ç™»å‡ºæµç¨‹æ•ˆèƒ½ï¼Œæå‡ä½¿ç”¨è€…é«”é©—
 */
class LogoutPerformanceOptimizer {
  static final Map<String, Timer> _debounceTimers = {};
  static const Duration _debounceDelay = Duration(milliseconds: 300);

  /**
   * 98. å°æ‡‰ 9.2ï¼šé˜²æŠ–å‹•ç™»å‡ºè«‹æ±‚
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description é˜²æ­¢ä½¿ç”¨è€…å¿«é€Ÿé»æ“Šé€ æˆé‡è¤‡ç™»å‡ºè«‹æ±‚
   */
  static Future<void> debounceLogout(String key, Future<void> Function() logoutFunction);

  /**
   * 99. å°æ‡‰ 9.2ï¼šå„ªåŒ–åŒæ­¥æ“ä½œ
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description å„ªåŒ–è³‡æ–™åŒæ­¥æ“ä½œæ•ˆèƒ½
   */
  static Future<void> optimizedSync(List<UnsyncDataItem> items, Function(double) onProgress);

  /**
   * 100. å°æ‡‰ 9.2ï¼šæ‰¹æ¬¡æ¸…ç†è³‡æ–™
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ‰¹æ¬¡æ¸…ç†æœ¬åœ°è³‡æ–™ä»¥æå‡æ¸…ç†æ•ˆèƒ½
   */
  static Future<void> batchCleanupData(Map<String, bool> cleanupOptions);
}
```

---

## 10.0 éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

### 10.1 çµ±ä¸€éŒ¯èª¤è™•ç†
```dart
/**
 * 101. å°æ‡‰ 10.1ï¼šç™»å‡ºç¢ºèªé é¢éŒ¯èª¤è™•ç†å™¨
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description æ ¹æ“š8705è¦ç¯„çš„å…·é«”éŒ¯èª¤æƒ…å¢ƒé€²è¡Œè©³ç´°è™•ç†
 */
class LogoutErrorHandler {

  /**
   * 102. å°æ‡‰ 10.1ï¼šè™•ç†ç¶²è·¯é€£ç·šéŒ¯èª¤
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description è™•ç†ç¶²è·¯é€£ç·šä¸ç©©å®šéŒ¯èª¤ï¼ˆ8705è¦ç¯„ï¼‰
   */
  static String handleNetworkError(dynamic error);

  /**
   * 103. å°æ‡‰ 10.1ï¼šè™•ç†è³‡æ–™åŒæ­¥éŒ¯èª¤
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description è™•ç†è³‡æ–™åŒæ­¥å¤±æ•—éŒ¯èª¤ï¼ˆ8705è¦ç¯„ï¼‰
   */
  static String handleSyncError(dynamic error);

  /**
   * 104. å°æ‡‰ 10.1ï¼šè™•ç†æœƒè©±éæœŸéŒ¯èª¤
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description è™•ç†æœƒè©±å·²éæœŸéŒ¯èª¤ï¼ˆ8705è¦ç¯„ï¼‰
   */
  static String handleSessionExpiredError();

  /**
   * 105. å°æ‡‰ 10.1ï¼šè™•ç†æ¸…ç†æ“ä½œéŒ¯èª¤
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description è™•ç†æœ¬åœ°è³‡æ–™æ¸…ç†å¤±æ•—éŒ¯èª¤ï¼ˆ8705è¦ç¯„ï¼‰
   */
  static String handleCleanupError(dynamic error);

  /**
   * 106. å°æ‡‰ 10.1ï¼šè™•ç†ä¼ºæœå™¨éŒ¯èª¤
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description è™•ç†ä¼ºæœå™¨æš«æ™‚ç„¡æ³•å›æ‡‰éŒ¯èª¤ï¼ˆ8705è¦ç¯„ï¼‰
   */
  static String handleServerError(DioError error);

  /**
   * 107. å°æ‡‰ 10.1ï¼šé¡¯ç¤ºéŒ¯èª¤å°è©±æ¡†
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯å°è©±æ¡†ï¼ˆ8705è¦ç¯„ï¼‰
   */
  static Future<void> showErrorDialog(
    BuildContext context, 
    String message, 
    LogoutErrorType errorType,
    {VoidCallback? onRetry, VoidCallback? onDismiss, VoidCallback? onForceLogout}
  );

  /**
   * 108. å°æ‡‰ 10.1ï¼šå–å¾—éŒ¯èª¤æ¨™é¡Œ
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šéŒ¯èª¤é¡å‹å–å¾—å°æ‡‰çš„éŒ¯èª¤æ¨™é¡Œ
   */
  static String _getErrorTitle(LogoutErrorType errorType);

  /**
   * 109. å°æ‡‰ 10.1ï¼šåˆ¤æ–·æ˜¯å¦æ‡‰é¡¯ç¤ºé‡è©¦æŒ‰éˆ•
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šéŒ¯èª¤é¡å‹åˆ¤æ–·æ˜¯å¦æ‡‰é¡¯ç¤ºé‡è©¦æŒ‰éˆ•
   */
  static bool _shouldShowRetryButton(LogoutErrorType errorType);

  /**
   * 110. å°æ‡‰ 10.1ï¼šåˆ¤æ–·æ˜¯å¦æ‡‰é¡¯ç¤ºå¼·åˆ¶ç™»å‡ºé¸é …
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ ¹æ“šéŒ¯èª¤é¡å‹åˆ¤æ–·æ˜¯å¦æ‡‰æä¾›å¼·åˆ¶ç™»å‡ºé¸é …
   */
  static bool _shouldShowForceLogoutOption(LogoutErrorType errorType);
}
```

### 10.2 éŒ¯èª¤å¾©åŸæ©Ÿåˆ¶
```dart
/**
 * 111. å°æ‡‰ 10.2ï¼šç™»å‡ºéŒ¯èª¤å¾©åŸç­–ç•¥
 * @version 2025-01-27-V1.0.0
 * @date 2025-01-27 09:00:00
 * @description æä¾›ç™»å‡ºå„ç¨®éŒ¯èª¤å¾©åŸæ©Ÿåˆ¶
 */
class LogoutErrorRecovery {

  /**
   * 112. å°æ‡‰ 10.2ï¼šè‡ªå‹•é‡è©¦ç™»å‡ºæ©Ÿåˆ¶
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description é‡å°ç¶²è·¯éŒ¯èª¤ç­‰è‡¨æ™‚æ€§å•é¡Œçš„è‡ªå‹•é‡è©¦æ©Ÿåˆ¶
   */
  static Future<T> retryLogout<T>(
    Future<T> Function() logoutOperation,
    LogoutType type, {
    int maxRetries = 2,
    Duration initialDelay = const Duration(seconds: 2),
  });

  /**
   * 113. å°æ‡‰ 10.2ï¼šæä¾›é›¢ç·šç™»å‡ºé¸é …
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description ç•¶ç¶²è·¯ä¸å¯ç”¨æ™‚ï¼Œæä¾›é›¢ç·šç™»å‡ºé¸é …
   */
  static Future<void> performOfflineLogout(LogoutType type);

  /**
   * 114. å°æ‡‰ 10.2ï¼šéƒ¨åˆ†æ¸…ç†æ¢å¾©
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description ç•¶æŸäº›æ¸…ç†æ“ä½œå¤±æ•—æ™‚ï¼Œå˜—è©¦éƒ¨åˆ†æ¸…ç†
   */
  static Future<Map<String, bool>> attemptPartialCleanup(Map<String, bool> cleanupOptions);

  /**
   * 115. å°æ‡‰ 10.2ï¼šå¼·åˆ¶ç™»å‡ºæ©Ÿåˆ¶
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description ç•¶æ­£å¸¸ç™»å‡ºå¤±æ•—æ™‚ï¼ŒåŸ·è¡Œå¼·åˆ¶æœ¬åœ°ç™»å‡º
   */
  static Future<void> forceLocalLogout();

  /**
   * 116. å°æ‡‰ 10.2ï¼šæ¸…é™¤å•é¡Œæœƒè©±
   * @version 2025-01-27-V1.0.0
   * @date 2025-01-27 09:00:00
   * @description æ¸…é™¤å¯èƒ½å°è‡´ç™»å‡ºå•é¡Œçš„æœƒè©±è³‡æ–™
   */
  static Future<void> clearProblemSession();
}
```

---

## éµå¾ª0055è¨­è¨ˆåŸå‰‡

### éšå±¤æ¶æ§‹å°æ‡‰
- æœ¬TDDæ–‡ä»¶åŸºæ–¼8705. ç™»å‡ºç¢ºèªé é¢_SRS.mdçš„éœ€æ±‚è¦æ ¼
- èˆ‡9005. Flutter_Presentation layer.mdçš„ç”¢å“è¦æ ¼ä¿æŒä¸€è‡´
- æ‰€æœ‰å‡½æ•¸ç¯€é»ç·¨è™Ÿå°æ‡‰ä¸Šå±¤æ–‡ä»¶çš„åŠŸèƒ½æ¢ç›®

### è¨­è¨ˆåŸå‰‡éµå¾ª
1. **éšå±¤æ¶æ§‹é‚è¼¯**: åš´æ ¼åŸºæ–¼SRSæ–‡ä»¶å®šç¾©çš„åŠŸèƒ½æ¢ç›®è¨­è¨ˆ
2. **åŒå±¤ç´šä¾è³´é—œä¿‚**: è€ƒé‡èˆ‡ç™»å…¥é é¢å’Œå…¶ä»–èªè­‰é é¢çš„ä¾è³´é—œä¿‚
3. **ä»£ç¢¼ç¯€é»ç·¨è™Ÿ**: æ¡ç”¨ä¸åŠ å‰ç¶´çš„ç¯€é»ç·¨è™Ÿæ ¼å¼ï¼ˆå¦‚2.1ã€3.2ï¼‰
4. **å‘½åä¸€è‡´æ€§**: ä¿æŒèˆ‡ä½¿ç”¨è€…ä»‹é¢æ“ä½œæµç¨‹çš„åç¨±åŒæ­¥
5. **å¯è®€æ€§è¨­è¨ˆ**: æ¡ç”¨æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œéµå¾ªä½è€¦åˆã€é«˜å…§èšåŸå‰‡

## æ–‡ä»¶ç¶­è­·è¨˜éŒ„

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹è€… | ä¿®æ”¹å…§å®¹ |
|------|------|--------|----------|
| **v1.0.0** | **2025-01-27 09:00:00 +08:00** | **LCAS SA Team** | **åˆç‰ˆå»ºç«‹ï¼šå®Œæ•´P005ç™»å‡ºç¢ºèªé é¢TDDè¦æ ¼ï¼Œæ”¯æ´å¿«é€Ÿ/å®Œå…¨ç™»å‡ºç¢ºèªã€æœ¬åœ°è³‡æ–™æ¸…ç†ç®¡ç†ã€æœªåŒæ­¥è³‡æ–™è™•ç†ã€å››æ¨¡å¼å·®ç•°åŒ–è¨­è¨ˆï¼Œå®Œæ•´éŒ¯èª¤è™•ç†æ©Ÿåˆ¶ï¼Œéµå¾ª0055è¨­è¨ˆåŸå‰‡ï¼Œå°æ‡‰8705 SRSè¦æ ¼** |

---

## å‚™è¨»

- **ç´”å‡½æ•¸å®£å‘Š**: å®Œå…¨ç§»é™¤æ‰€æœ‰å¯¦ä½œä»£ç¢¼ï¼Œåƒ…ä¿ç•™å‡½æ•¸åç¨±ã€åƒæ•¸å®šç¾©å’Œè¨»è§£
- **é›™é‡ç™»å‡ºé¸é …**: æ”¯æ´å¿«é€Ÿç™»å‡ºï¼ˆä¿ç•™ç™»å…¥è³‡è¨Šï¼‰å’Œå®Œå…¨ç™»å‡ºï¼ˆæ¸…ç†æ‰€æœ‰è³‡æ–™ï¼‰
- **å››æ¨¡å¼å·®ç•°åŒ–**: æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼æä¾›ä¸åŒçš„ç™»å‡ºç•Œé¢è¤‡é›œåº¦å’Œé¼“å‹µè¨Šæ¯
- **è³‡æ–™å®‰å…¨å„ªå…ˆ**: å®Œæ•´çš„è³‡æ–™æ¸…ç†é¸é …ã€æœªåŒæ­¥è³‡æ–™è­¦å‘Šã€æœƒè©±å®‰å…¨æ§åˆ¶æ©Ÿåˆ¶
- **å®Œæ•´æŠ€è¡“æ¶æ§‹**: Widgetåˆ†å±¤ã€ç‹€æ…‹ç®¡ç†ã€APIæ•´åˆã€éŸ¿æ‡‰å¼è¨­è¨ˆã€ç„¡éšœç¤™æ”¯æ´ã€æ•ˆèƒ½æœ€ä½³åŒ–
- **è¦ç¯„å®Œå…¨å°é½Š**: èˆ‡0055ã€8705ã€9005æ–‡ä»¶å®Œå…¨ä¸€è‡´
- **ç¯€é»ç·¨è™Ÿæ¨™æº–åŒ–**: çµ±ä¸€ç·¨è™Ÿ01-116ï¼Œéµå¾ª0055è¦ç¯„æ ¼å¼
- **ç‰ˆæœ¬çµ±ä¸€å‡ç´š**: æ‰€æœ‰çµ„ä»¶ç‰ˆæœ¬çµ±ä¸€ç‚ºv1.0.0
