


# 8801. TDD_P001_æ­¡è¿é é¢_v2.2.0

## æ–‡ä»¶è³‡è¨Š
- **æ–‡ä»¶æ¨™é¡Œ**: P001 æ­¡è¿é é¢æŠ€è¡“è¨­è¨ˆæ–‡ä»¶
- **æ–‡ä»¶ç‰ˆæœ¬**: v2.2.0
- **å‰µå»ºæ—¥æœŸ**: 2025-08-06 12:00:00 +08:00 (å°ç£æ™‚é–“)
- **å‰µå»ºè€…**: LCAS SA Team
- **æœ€å¾Œæ›´æ–°**: 2025-08-06 15:00:00 +08:00 (å°ç£æ™‚é–“)
- **å°æ‡‰éœ€æ±‚æ–‡ä»¶**: 8701. æ­¡è¿é é¢_SRS.md
- **å°æ‡‰PRDæ–‡ä»¶**: 9005. Flutter_Presentation layer.md
- **é é¢ä»£ç¢¼**: P001 (Welcome Page)

---

## ğŸ“‘ ç›®æ¬¡ (Table of Contents)

1. [æŠ€è¡“æ¶æ§‹æ¦‚è¿°](#10-æŠ€è¡“æ¶æ§‹æ¦‚è¿°)
2. [Widgetæ¸…å–®](#20-widgetæ¸…å–®)
3. [æ ¸å¿ƒWidgetè¨­è¨ˆ](#30-æ ¸å¿ƒwidgetè¨­è¨ˆ)
4. [ç‹€æ…‹ç®¡ç†æ¶æ§‹](#40-ç‹€æ…‹ç®¡ç†æ¶æ§‹)
5. [APIæ•´åˆè¨­è¨ˆ](#50-apiæ•´åˆè¨­è¨ˆ)
6. [å°èˆªè·¯ç”±è¨­è¨ˆ](#60-å°èˆªè·¯ç”±è¨­è¨ˆ)
7. [éŸ¿æ‡‰å¼è¨­è¨ˆ](#70-éŸ¿æ‡‰å¼è¨­è¨ˆ)
8. [ç„¡éšœç¤™åŠŸèƒ½](#80-ç„¡éšœç¤™åŠŸèƒ½)
9. [æ•ˆèƒ½æœ€ä½³åŒ–](#90-æ•ˆèƒ½æœ€ä½³åŒ–)
10. [éŒ¯èª¤è™•ç†æ©Ÿåˆ¶](#100-éŒ¯èª¤è™•ç†æ©Ÿåˆ¶)

---

## 1.0 æŠ€è¡“æ¶æ§‹æ¦‚è¿°

### 1.1 æ¨¡çµ„å®šä½
P001æ­¡è¿é é¢ä½œç‚ºLCAS 2.0 Flutteræ‡‰ç”¨ç¨‹å¼çš„å…¥å£é é¢ï¼Œè² è²¬ä½¿ç”¨è€…é¦–æ¬¡é«”é©—ã€æ¨¡å¼é¸æ“‡ã€å“ç‰Œå±•ç¤ºåŠå°èˆªè·¯ç”±åˆ†ç™¼ã€‚æœ¬é é¢æ¡ç”¨MVPåŸå‰‡è¨­è¨ˆï¼Œèšç„¦æ ¸å¿ƒåŠŸèƒ½å¯¦ç¾ã€‚

### 1.2 æŠ€è¡“å †ç–Š
- **å‰ç«¯æ¡†æ¶**: Flutter 3.x
- **ç‹€æ…‹ç®¡ç†**: Provider + ChangeNotifier
- **è·¯ç”±ç®¡ç†**: GoRouter
- **HTTPå®¢æˆ¶ç«¯**: Dio
- **æœ¬åœ°å„²å­˜**: SharedPreferences
- **å‹•ç•«è™•ç†**: Flutterå…§å»ºAnimation API
- **ç„¡éšœç¤™æ”¯æ´**: Flutter Semantics API

### 1.3 æ¨¡çµ„æ¶æ§‹
```dart
/**
 * P001_æ­¡è¿é é¢_2.2.0
 * @module P001æ­¡è¿é é¢
 * @description Flutter Presentation Layerå…¥å£é é¢ - å››æ¨¡å¼é¸æ“‡ã€å“ç‰Œå±•ç¤ºã€å°èˆªåˆ†ç™¼
 * @update 2025-08-06: å‡ç´šè‡³v2.2ç‰ˆæœ¬ï¼Œå°ˆæ³¨æŠ€è¡“è¨­è¨ˆå¯¦ä½œï¼Œç§»é™¤æ¸¬è©¦æ¡ˆä¾‹ç›¸é—œå…§å®¹
 */
```

---

## 2.0 Widgetæ¸…å–®

### 2.1 å®Œæ•´Widgetç´¢å¼•è¡¨

| # | Widgetåç¨± | ç‰ˆæœ¬ | æ‰€å±¬å±¤ç´š | åŠŸèƒ½æè¿° | ç›¸ä¾çµ„ä»¶ |
|---|------------|------|----------|----------|----------|
| 01 | WelcomePage | V2.2.0 | é é¢å®¹å™¨å±¤ | ä¸»é é¢å®¹å™¨åŠç”Ÿå‘½é€±æœŸç®¡ç† | WelcomeProviderã€Router |
| 02 | WelcomeScaffold | V2.2.0 | ä½ˆå±€çµæ§‹å±¤ | åŸºç¤é é¢çµæ§‹èˆ‡èƒŒæ™¯è¨­å®š | GradientBackground |
| 03 | BrandSection | V2.2.0 | å“ç‰Œå±•ç¤ºå±¤ | Logoèˆ‡å“ç‰Œæ¨™é¡Œé¡¯ç¤º | BrandLogoã€BrandTitle |
| 04 | ModeSelectionSection | V2.2.0 | æ¨¡å¼é¸æ“‡å±¤ | å››æ¨¡å¼é¸æ“‡ä»‹é¢ | ModeGridã€ModeCard |
| 05 | NavigationSection | V2.2.0 | å°èˆªæ“ä½œå±¤ | é–‹å§‹ä½¿ç”¨æŒ‰éˆ•èˆ‡å°èˆªæ§åˆ¶ | ActionButtonã€LoadingIndicator |
| 06 | BrandLogo | V2.2.0 | è¦–è¦ºå…ƒä»¶å±¤ | æ‡‰ç”¨ç¨‹å¼å“ç‰ŒLogo | Imageã€AnimatedContainer |
| 07 | BrandTitle | V2.2.0 | è¦–è¦ºå…ƒä»¶å±¤ | å“ç‰Œæ¨™é¡Œèˆ‡å‰¯æ¨™é¡Œæ–‡å­— | Textã€AnimatedOpacity |
| 08 | ModeGrid | V2.2.0 | ä½ˆå±€å…ƒä»¶å±¤ | å››æ¨¡å¼å¡ç‰‡ç¶²æ ¼ä½ˆå±€ | GridViewã€ResponsiveWrapper |
| 09 | ModeCard | V2.2.0 | äº’å‹•å…ƒä»¶å±¤ | å–®ä¸€æ¨¡å¼é¸æ“‡å¡ç‰‡ | InkWellã€AnimatedScale |
| 10 | ActionButton | V2.2.0 | äº’å‹•å…ƒä»¶å±¤ | ä¸»è¦æ“ä½œæŒ‰éˆ•ï¼ˆé–‹å§‹ä½¿ç”¨ï¼‰ | ElevatedButtonã€AnimatedContainer |
| 11 | GradientBackground | V2.2.0 | è£é£¾å…ƒä»¶å±¤ | é é¢æ¼¸å±¤èƒŒæ™¯æ•ˆæœ | Containerã€LinearGradient |
| 12 | LoadingIndicator | V2.2.0 | ç‹€æ…‹å…ƒä»¶å±¤ | è¼‰å…¥ä¸­æŒ‡ç¤ºå™¨ | CircularProgressIndicator |
| 13 | ErrorDialog | V2.2.0 | éŒ¯èª¤è™•ç†å±¤ | éŒ¯èª¤è¨Šæ¯å°è©±æ¡† | AlertDialogã€TextButton |

---

## 3.0 æ ¸å¿ƒWidgetè¨­è¨ˆ

### 3.1 é é¢å®¹å™¨å±¤Widget

#### 3.1.1 WelcomePage Widget
```dart
/**
 * 01. å°æ‡‰ 3.1.1ï¼šä¸»é é¢å®¹å™¨Widget
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description æ­¡è¿é é¢çš„ä¸»å®¹å™¨ï¼Œæ”¯æ´é¦–æ¬¡å•Ÿå‹•èˆ‡å†æ¬¡å•Ÿå‹•æµç¨‹
 */
class WelcomePage extends StatefulWidget {
  static const String routeName = '/welcome';
  const WelcomePage({Key? key});
  
  @override
  State<WelcomePage> createState();
}

/**
 * 02. å°æ‡‰ 3.1.1ï¼šæ­¡è¿é é¢ç‹€æ…‹é¡åˆ¥
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description ç®¡ç†æ­¡è¿é é¢çš„ç‹€æ…‹å’Œå‹•ç•«æ§åˆ¶å™¨
 */
class _WelcomePageState extends State<WelcomePage> with SingleTickerProviderStateMixin {
  late AnimationController _animationController;
  late Animation<double> _fadeAnimation;
  
  @override
  void initState();
  
  /**
   * 03. å°æ‡‰ 3.1.1ï¼šåˆå§‹åŒ–å‹•ç•«æ§åˆ¶å™¨
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è¨­å®šé é¢æ·¡å…¥å‹•ç•«æ•ˆæœ
   */
  void _initializeAnimations();
  
  /**
   * 04. å°æ‡‰ 3.1.1ï¼šåˆå§‹åŒ–é é¢ç‹€æ…‹
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description èª¿ç”¨Provideré€²è¡Œé é¢åˆå§‹åŒ–
   */
  Future<void> _initializePage();
  
  @override
  Widget build(BuildContext context);
  
  @override
  void dispose();
}
```

### 3.2 ä½ˆå±€çµæ§‹å±¤Widget

#### 3.2.1 WelcomeScaffold Widget
```dart
/**
 * 05. å°æ‡‰ 3.2.1ï¼šé é¢ä½ˆå±€çµæ§‹Widget
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description æä¾›æ­¡è¿é é¢çš„åŸºç¤ä½ˆå±€çµæ§‹ï¼Œéµå¾ª9005æ–‡ä»¶éŸ¿æ‡‰å¼è¨­è¨ˆè¦ç¯„
 */
class WelcomeScaffold extends StatelessWidget {
  final Animation<double> fadeAnimation;
  final WelcomeProvider provider;
  
  const WelcomeScaffold({
    Key? key,
    required this.fadeAnimation,
    required this.provider,
  });

  @override
  Widget build(BuildContext context);
  
  /**
   * 06. å°æ‡‰ 3.2.1ï¼šå»ºç«‹éŒ¯èª¤è¦†è“‹å±¤
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description é¡¯ç¤ºéŒ¯èª¤å°è©±æ¡†çš„è¦†è“‹å±¤
   */
  Widget _buildErrorOverlay(BuildContext context, WelcomeProvider provider);
}
```

### 3.3 åŠŸèƒ½å€å¡Šå±¤Widget

#### 3.3.1 BrandSection Widget
```dart
/**
 * 07. å°æ‡‰ 3.3.1ï¼šå“ç‰Œå±•ç¤ºå€å¡ŠWidget
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description é¡¯ç¤ºå“ç‰ŒLogoå’Œæ¨™é¡Œï¼Œæ”¯æ´å‹•ç•«æ•ˆæœ
 */
class BrandSection extends StatelessWidget {
  const BrandSection({Key? key});

  @override
  Widget build(BuildContext context);
}
```

#### 3.3.2 ModeSelectionSection Widget
```dart
/**
 * 08. å°æ‡‰ 3.3.2ï¼šæ¨¡å¼é¸æ“‡å€å¡ŠWidget
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description å››æ¨¡å¼é¸æ“‡ä»‹é¢ï¼Œæ”¯æ´ç²¾æº–æ§åˆ¶è€…/ç´€éŒ„ç¿’æ…£è€…/è½‰å‹æŒ‘æˆ°è€…/æ½›åœ¨è¦ºé†’è€…
 */
class ModeSelectionSection extends StatelessWidget {
  final WelcomeProvider provider;
  
  const ModeSelectionSection({
    Key? key,
    required this.provider,
  });

  @override
  Widget build(BuildContext context);
}
```

#### 3.3.3 NavigationSection Widget
```dart
/**
 * 09. å°æ‡‰ 3.3.3ï¼šå°èˆªæ“ä½œå€å¡ŠWidget
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description é¡¯ç¤ºé–‹å§‹ä½¿ç”¨æŒ‰éˆ•å’Œå°èˆªæ§åˆ¶
 */
class NavigationSection extends StatelessWidget {
  final WelcomeProvider provider;
  
  const NavigationSection({Key? key, required this.provider});

  @override
  Widget build(BuildContext context);
}
```

### 3.4 è¦–è¦ºå…ƒä»¶å±¤Widget

#### 3.4.1 BrandLogo Widget
```dart
/**
 * 10. å°æ‡‰ 3.4.1ï¼šå“ç‰ŒLogo Widget
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description é¡¯ç¤ºæ‡‰ç”¨ç¨‹å¼å“ç‰Œæ¨™èªŒï¼Œæ”¯æ´éŸ¿æ‡‰å¼å°ºå¯¸
 */
class BrandLogo extends StatelessWidget {
  final double? size;
  
  const BrandLogo({Key? key, this.size});

  @override
  Widget build(BuildContext context);
}
```

#### 3.4.2 BrandTitle Widget
```dart
/**
 * 11. å°æ‡‰ 3.4.2ï¼šå“ç‰Œæ¨™é¡ŒWidget
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description é¡¯ç¤ºå“ç‰Œæ¨™é¡Œå’Œå‰¯æ¨™é¡Œæ–‡å­—
 */
class BrandTitle extends StatelessWidget {
  const BrandTitle({Key? key});

  @override
  Widget build(BuildContext context);
}
```

### 3.5 ä½ˆå±€å…ƒä»¶å±¤Widget

#### 3.5.1 ModeGrid Widget
```dart
/**
 * 12. å°æ‡‰ 3.5.1ï¼šæ¨¡å¼ç¶²æ ¼Widget
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description ç®¡ç†å››å€‹æ¨¡å¼å¡ç‰‡çš„ç¶²æ ¼ä½ˆå±€
 */
class ModeGrid extends StatelessWidget {
  final UserMode? selectedMode;
  final Function(UserMode) onModeSelected;
  
  const ModeGrid({
    Key? key,
    this.selectedMode,
    required this.onModeSelected,
  });

  @override
  Widget build(BuildContext context);
}
```

### 3.6 äº’å‹•å…ƒä»¶å±¤Widget

#### 3.6.1 ModeCard Widget
```dart
/**
 * 13. å°æ‡‰ 3.6.1ï¼šæ¨¡å¼é¸æ“‡å¡ç‰‡Widget
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description å–®ä¸€æ¨¡å¼é¸æ“‡å¡ç‰‡ï¼Œéµå¾ª0015æ–‡ä»¶å››æ¨¡å¼å‘½åèˆ‡9005è‰²å½©è¦ç¯„
 */
class ModeCard extends StatefulWidget {
  final UserMode mode;
  final bool isSelected;
  final VoidCallback onTap;
  
  const ModeCard({
    Key? key,
    required this.mode,
    required this.isSelected,
    required this.onTap,
  });

  @override
  State<ModeCard> createState();
}

class _ModeCardState extends State<ModeCard> with SingleTickerProviderStateMixin {
  late AnimationController _scaleController;
  late Animation<double> _scaleAnimation;
  
  @override
  void initState();

  @override
  Widget build(BuildContext context);
  
  /**
   * 14. å°æ‡‰ 3.6.1ï¼šå–å¾—æ¨¡å¼é…ç½®è³‡æ–™
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ ¹æ“šæ¨¡å¼é¡å‹è¿”å›å°æ‡‰çš„é¡¯ç¤ºé…ç½®
   */
  ModeConfig _getModeConfig(UserMode mode);
  
  @override
  void dispose();
}
```

#### 3.6.2 ActionButton Widget
```dart
/**
 * 15. å°æ‡‰ 3.6.2ï¼šä¸»è¦æ“ä½œæŒ‰éˆ•Widget
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description é–‹å§‹ä½¿ç”¨çš„ä¸»è¦æ“ä½œæŒ‰éˆ•
 */
class ActionButton extends StatelessWidget {
  final String text;
  final VoidCallback? onPressed;
  final bool isLoading;
  
  const ActionButton({
    Key? key,
    required this.text,
    this.onPressed,
    this.isLoading = false,
  });

  @override
  Widget build(BuildContext context);
}
```

### 3.7 åŸºç¤å…ƒä»¶å±¤Widget

#### 3.7.1 GradientBackground Widget
```dart
/**
 * 16. å°æ‡‰ 3.7.1ï¼šæ¼¸å±¤èƒŒæ™¯Widget
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description æ ¹æ“š9005è¦ç¯„çš„å››æ¨¡å¼å·®ç•°åŒ–èƒŒæ™¯
 */
class GradientBackground extends StatelessWidget {
  final UserMode? mode;
  
  const GradientBackground({Key? key, this.mode});

  @override
  Widget build(BuildContext context);
  
  /**
   * 17. å°æ‡‰ 3.7.1ï¼šå–å¾—æ¨¡å¼å°æ‡‰æ¼¸å±¤è‰²å½©
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ ¹æ“šæ¨¡å¼è¿”å›å°æ‡‰çš„èƒŒæ™¯æ¼¸å±¤è‰²å½©
   */
  LinearGradient _getGradientForMode(UserMode? mode);
}
```

#### 3.7.2 LoadingIndicator Widget
```dart
/**
 * 18. å°æ‡‰ 3.7.2ï¼šè¼‰å…¥æŒ‡ç¤ºå™¨Widget
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description é¡¯ç¤ºè¼‰å…¥ä¸­ç‹€æ…‹çš„æŒ‡ç¤ºå™¨
 */
class LoadingIndicator extends StatelessWidget {
  final String? message;
  
  const LoadingIndicator({Key? key, this.message});

  @override
  Widget build(BuildContext context);
}
```

#### 3.7.3 ErrorDialog Widget
```dart
/**
 * 19. å°æ‡‰ 3.7.3ï¼šéŒ¯èª¤å°è©±æ¡†Widget
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯çš„å°è©±æ¡†
 */
class ErrorDialog extends StatelessWidget {
  final String message;
  final VoidCallback? onRetry;
  final VoidCallback onDismiss;
  
  const ErrorDialog({
    Key? key,
    required this.message,
    this.onRetry,
    required this.onDismiss,
  });

  @override
  Widget build(BuildContext context);
}
```

---

## 4.0 ç‹€æ…‹ç®¡ç†æ¶æ§‹

### 4.1 WelcomeProvider ç‹€æ…‹ç®¡ç†å™¨
```dart
/**
 * 20. å°æ‡‰ 4.1ï¼šæ­¡è¿é é¢ç‹€æ…‹ç®¡ç†å™¨
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description ç®¡ç†æ­¡è¿é é¢çš„ç‹€æ…‹ï¼Œæ”¯æ´8701è¦ç¯„çš„å®Œæ•´åŠŸèƒ½æµç¨‹
 */
class WelcomeProvider extends ChangeNotifier {
  // ç‹€æ…‹å±¬æ€§
  WelcomePageState _pageState = WelcomePageState.loading;
  UserMode? _selectedMode;
  bool _isLoading = false;
  String? _errorMessage;
  WelcomeErrorType? _errorType;
  bool _isFirstLaunch = true;
  bool _isUserAuthenticated = false;
  
  // Getters
  WelcomePageState get pageState;
  UserMode? get selectedMode;
  bool get isLoading;
  String? get errorMessage;
  WelcomeErrorType? get errorType;
  bool get isFirstLaunch;
  bool get isUserAuthenticated;

  /**
   * 21. å°æ‡‰ 4.1ï¼šåˆå§‹åŒ–é é¢
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ”¯æ´é¦–æ¬¡å•Ÿå‹•èˆ‡å†æ¬¡å•Ÿå‹•æµç¨‹ï¼ˆ8701è¦ç¯„ï¼‰
   */
  Future<void> initializePage();
  
  /**
   * 22. å°æ‡‰ 4.1ï¼šè™•ç†é¦–æ¬¡å•Ÿå‹•æµç¨‹
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è™•ç†é¦–æ¬¡å•Ÿå‹•æµç¨‹ï¼ˆ8701è¦ç¯„ï¼‰
   */
  Future<void> _handleFirstLaunchFlow();
  
  /**
   * 23. å°æ‡‰ 4.1ï¼šè™•ç†å†æ¬¡å•Ÿå‹•æµç¨‹
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è™•ç†å†æ¬¡å•Ÿå‹•æµç¨‹ï¼ˆ8701è¦ç¯„ï¼‰
   */
  Future<void> _handleReturnUserFlow();

  /**
   * 24. å°æ‡‰ 4.1ï¼šæª¢æŸ¥å¸³è™Ÿåˆªé™¤ç‹€æ…‹
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æª¢æŸ¥å¸³è™Ÿåˆªé™¤ç‹€æ…‹ï¼ˆ8701è¦ç¯„ - F004ç«¯é»ï¼‰
   */
  Future<void> _checkAccountDeletionStatus();

  /**
   * 25. å°æ‡‰ 4.1ï¼šé¸æ“‡æ¨¡å¼
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è™•ç†ä½¿ç”¨è€…æ¨¡å¼é¸æ“‡
   */
  void selectMode(UserMode mode);

  /**
   * 26. å°æ‡‰ 4.1ï¼šé–‹å§‹ä½¿ç”¨æ‡‰ç”¨ç¨‹å¼
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ¨¡å¼è¨­å®šèˆ‡å°èˆªï¼ˆ8701è¦ç¯„ï¼‰
   */
  Future<void> startApp();

  /**
   * 27. å°æ‡‰ 4.1ï¼šè¨­å®šä½¿ç”¨è€…æ¨¡å¼
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è¨­å®šä½¿ç”¨è€…æ¨¡å¼ï¼ˆä¿®æ­£ç‚ºF009å­åŠŸèƒ½ï¼‰
   */
  Future<void> _setUserMode(UserMode mode);

  /**
   * 28. å°æ‡‰ 4.1ï¼šå–å¾—è£ç½®è³‡è¨Š
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ”¶é›†è£ç½®ç›¸é—œè³‡è¨Šç”¨æ–¼APIèª¿ç”¨
   */
  Future<Map<String, dynamic>> _getDeviceInfo();

  /**
   * 29. å°æ‡‰ 4.1ï¼šè¨­å®šè¼‰å…¥ç‹€æ…‹
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ›´æ–°è¼‰å…¥ç‹€æ…‹ä¸¦é€šçŸ¥ç›£è½è€…
   */
  void _setLoading(bool loading);

  /**
   * 30. å°æ‡‰ 4.1ï¼šè¨­å®šé é¢ç‹€æ…‹
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ›´æ–°é é¢ç‹€æ…‹ä¸¦é€šçŸ¥ç›£è½è€…
   */
  void _setPageState(WelcomePageState state);

  /**
   * 31. å°æ‡‰ 4.1ï¼šè¨­å®šéŒ¯èª¤è¨Šæ¯
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è¨­å®šéŒ¯èª¤è¨Šæ¯ï¼ˆ8701è¦ç¯„ - è©³ç´°éŒ¯èª¤è™•ç†ï¼‰
   */
  void _setError(String message, WelcomeErrorType type, dynamic error);

  /**
   * 32. å°æ‡‰ 4.1ï¼šæ¸…é™¤éŒ¯èª¤ç‹€æ…‹
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ¸…é™¤éŒ¯èª¤ç‹€æ…‹ä¸¦æ±ºå®šå¾ŒçºŒå‹•ä½œ
   */
  void clearError();
  
  /**
   * 33. å°æ‡‰ 4.1ï¼šé‡è©¦æ“ä½œ
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ ¹æ“šéŒ¯èª¤é¡å‹åŸ·è¡Œç›¸å°æ‡‰çš„é‡è©¦æ“ä½œ
   */
  Future<void> retryOperation();
}
```

### 4.2 ç‹€æ…‹æšèˆ‰å®šç¾©
```dart
/**
 * 34. å°æ‡‰ 4.2ï¼šæ­¡è¿é é¢ç‹€æ…‹æšèˆ‰
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description å®šç¾©æ­¡è¿é é¢çš„å„ç¨®ç‹€æ…‹ï¼ˆ8701è¦ç¯„ï¼‰
 */
enum WelcomePageState {
  loading,        // è¼‰å…¥ä¸­
  modeSelection,  // æ¨¡å¼é¸æ“‡
  loginRedirect,  // ç™»å…¥é‡å°å‘
  error,          // éŒ¯èª¤ç‹€æ…‹
}

/**
 * 35. å°æ‡‰ 4.2ï¼šä½¿ç”¨è€…æ¨¡å¼æšèˆ‰
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description ä½¿ç”¨è€…æ¨¡å¼æšèˆ‰ï¼ˆ0015è¦ç¯„å‘½åï¼‰
 */
enum UserMode {
  controller,  // ç²¾æº–æ§åˆ¶è€…
  logger,      // ç´€éŒ„ç¿’æ…£è€…
  struggler,   // è½‰å‹æŒ‘æˆ°è€…
  sleeper,     // æ½›åœ¨è¦ºé†’è€…
}

/**
 * 36. å°æ‡‰ 4.2ï¼šéŒ¯èª¤é¡å‹æšèˆ‰
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description éŒ¯èª¤é¡å‹æšèˆ‰ï¼ˆ8701è¦ç¯„è©³ç´°éŒ¯èª¤åˆ†é¡ï¼‰
 */
enum WelcomeErrorType {
  initialization,    // åˆå§‹åŒ–éŒ¯èª¤
  networkConnection, // ç¶²è·¯é€£ç·šéŒ¯èª¤
  modeSelection,     // æ¨¡å¼é¸æ“‡éŒ¯èª¤
  accountDeletion,   // å¸³è™Ÿåˆªé™¤ç›¸é—œéŒ¯èª¤
  validation,        // è¼¸å…¥é©—è­‰éŒ¯èª¤
  unknown,          // æœªçŸ¥éŒ¯èª¤
}
```

---

## 5.0 APIæ•´åˆè¨­è¨ˆ

### 5.1 WelcomeApiService APIæœå‹™
```dart
/**
 * 37. å°æ‡‰ 5.1ï¼šæ­¡è¿é é¢APIæœå‹™
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description è™•ç†æ­¡è¿é é¢ç›¸é—œçš„APIèª¿ç”¨ï¼Œæ”¯æ´F004ã€F009ç«¯é»ï¼ˆ8701è¦ç¯„ï¼‰
 */
class WelcomeApiService {
  final ApiClient _apiClient = ApiClient();

  /**
   * 38. å°æ‡‰ 5.1ï¼šæª¢æŸ¥æ‡‰ç”¨ç¨‹å¼åˆå§‹åŒ–ç‹€æ…‹
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æª¢æŸ¥æ‡‰ç”¨ç¨‹å¼åˆå§‹åŒ–ç‹€æ…‹ï¼ˆå°æ‡‰F004 - 8701è¦ç¯„ï¼‰
   */
  Future<ApiResponse<Map<String, dynamic>>> checkInitialization();

  /**
   * 39. å°æ‡‰ 5.1ï¼šæ›´æ–°ä½¿ç”¨è€…è¨­å®š
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ›´æ–°ä½¿ç”¨è€…è¨­å®šï¼ˆå°æ‡‰F009 - ä¿®æ­£ç‚ºè¨­å®šç®¡ç†çš„å­åŠŸèƒ½ï¼‰
   */
  Future<ApiResponse<Map<String, dynamic>>> updateUserSettings(UserSettingsRequest request);

  /**
   * 40. å°æ‡‰ 5.1ï¼šè™•ç†DioéŒ¯èª¤
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è™•ç†DioéŒ¯èª¤ï¼ˆ8701è¦ç¯„è©³ç´°éŒ¯èª¤è™•ç†ï¼‰
   */
  String _handleDioError(DioError error);

  /**
   * 41. å°æ‡‰ 5.1ï¼šå–å¾—è£ç½®è³‡è¨Š
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ”¶é›†è£ç½®è³‡è¨Šç”¨æ–¼APIèª¿ç”¨
   */
  Future<Map<String, dynamic>> _getDeviceInfo();
}
```

### 5.2 è³‡æ–™æ¨¡å‹å®šç¾©
```dart
/**
 * 42. å°æ‡‰ 5.2ï¼šä½¿ç”¨è€…è¨­å®šè«‹æ±‚æ¨¡å‹
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description ä½¿ç”¨è€…è¨­å®šè«‹æ±‚æ¨¡å‹ï¼ˆä¿®æ­£ç‚ºF009å­åŠŸèƒ½ï¼‰
 */
class UserSettingsRequest {
  final String settingType;
  final ModeSelectionData? modeSettings;

  UserSettingsRequest({
    required this.settingType,
    this.modeSettings,
  });

  Map<String, dynamic> toJson();
}

/**
 * 43. å°æ‡‰ 5.2ï¼šæ¨¡å¼é¸æ“‡è³‡æ–™æ¨¡å‹
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description æ¨¡å¼é¸æ“‡çš„è³‡æ–™çµæ§‹
 */
class ModeSelectionData {
  final String selectedMode;
  final Map<String, dynamic> deviceInfo;

  ModeSelectionData({
    required this.selectedMode,
    required this.deviceInfo,
  });

  Map<String, dynamic> toJson();
}

/**
 * 44. å°æ‡‰ 5.2ï¼šAPIå›æ‡‰çµ±ä¸€æ ¼å¼
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description APIå›æ‡‰çš„çµ±ä¸€æ ¼å¼å®šç¾©
 */
class ApiResponse<T> {
  final bool success;
  final T? data;
  final String? error;

  ApiResponse.success(this.data);
  ApiResponse.error(this.error);
}
```

---

## 6.0 å°èˆªè·¯ç”±è¨­è¨ˆ

### 6.1 è·¯ç”±é…ç½®
```dart
/**
 * 45. å°æ‡‰ 6.1ï¼šæ­¡è¿é é¢è·¯ç”±é…ç½®
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description å®šç¾©æ­¡è¿é é¢çš„è·¯ç”±è¦å‰‡èˆ‡å°èˆªé‚è¼¯
 */
class WelcomeRoutes {
  static const String welcome = '/welcome';
  static const String login = '/login';
  static const String register = '/register';
  static const String home = '/home';

  /**
   * 46. å°æ‡‰ 6.1ï¼šå–å¾—æ­¡è¿é é¢è·¯ç”±
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description å»ºç«‹æ­¡è¿é é¢çš„GoRouteé…ç½®
   */
  static GoRoute getWelcomeRoute();
}

/**
 * 47. å°æ‡‰ 6.1ï¼šå°èˆªæœå‹™
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description è™•ç†æ‡‰ç”¨ç¨‹å¼å…§çš„å°èˆªé‚è¼¯
 */
class NavigationService {
  static final GoRouter _router;
  static GoRouter get router;

  /**
   * 48. å°æ‡‰ 6.1ï¼šå°èˆªåˆ°ç™»å…¥é é¢
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description å°èˆªåˆ°ç™»å…¥é é¢ä¸¦æ›¿æ›ç•¶å‰é é¢
   */
  Future<void> navigateToLogin();

  /**
   * 49. å°æ‡‰ 6.1ï¼šå°èˆªåˆ°è¨»å†Šé é¢
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description å°èˆªåˆ°è¨»å†Šé é¢ä¸¦æ›¿æ›ç•¶å‰é é¢
   */
  Future<void> navigateToRegister();

  /**
   * 50. å°æ‡‰ 6.1ï¼šå°èˆªåˆ°é¦–é 
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description å°èˆªåˆ°é¦–é ä¸¦æ›¿æ›ç•¶å‰é é¢
   */
  Future<void> navigateToHome();

  /**
   * 51. å°æ‡‰ 6.1ï¼šè¿”å›ä¸Šä¸€é 
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è¿”å›åˆ°ä¸Šä¸€å€‹é é¢
   */
  void goBack();
}
```

---

## 7.0 éŸ¿æ‡‰å¼è¨­è¨ˆ

### 7.1 éŸ¿æ‡‰å¼è¼”åŠ©å·¥å…·
```dart
/**
 * 52. å°æ‡‰ 7.1ï¼šéŸ¿æ‡‰å¼è¨­è¨ˆè¼”åŠ©å·¥å…·
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description éµå¾ª9005æ–‡ä»¶çš„éŸ¿æ‡‰å¼è¨­è¨ˆè¦ç¯„ï¼Œæä¾›å®Œæ•´çš„æ–·é»ç®¡ç†
 */
class ResponsiveHelper {
  final BuildContext context;
  late final MediaQueryData _mediaQuery;
  late final Size _screenSize;

  ResponsiveHelper.of(BuildContext context);

  // æ–·é»åˆ¤æ–·å±¬æ€§ï¼ˆ9005è¦ç¯„ï¼‰
  bool get isMobile;
  bool get isTablet;
  bool get isSmallDesktop;
  bool get isLargeDesktop;
  DeviceType get deviceType;

  // å°ºå¯¸ç›¸é—œå±¬æ€§ï¼ˆ9005è¦ç¯„ï¼‰
  double get horizontalPadding;
  double get verticalPadding;
  int get modeGridCrossAxisCount;
  double get modeCardHeight;
  double get buttonHeight;
  double get fontSizeScale;
}
```

### 7.2 æ–·é»ç®¡ç†
```dart
/**
 * 53. å°æ‡‰ 7.2ï¼šéŸ¿æ‡‰å¼æ–·é»å¸¸æ•¸
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description éŸ¿æ‡‰å¼æ–·é»å¸¸æ•¸ï¼ˆ9005è¦ç¯„ï¼‰
 */
class Breakpoints {
  static const double mobileMax = 480;
  static const double tabletMin = 481;
  static const double tabletMax = 768;
  static const double smallDesktopMin = 769;
  static const double smallDesktopMax = 1024;
  static const double largeDesktopMin = 1025;

  /**
   * 54. å°æ‡‰ 7.2ï¼šå–å¾—ç›®å‰è£ç½®é¡å‹
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ ¹æ“šè¢å¹•å¯¬åº¦åˆ¤æ–·è£ç½®é¡å‹
   */
  static DeviceType getDeviceType(double width);
}

enum DeviceType { 
  mobile, 
  tablet, 
  smallDesktop, 
  largeDesktop 
}
```

---

## 8.0 ç„¡éšœç¤™åŠŸèƒ½

### 8.1 èªæ„åŒ–æ”¯æ´
```dart
/**
 * 55. å°æ‡‰ 8.1ï¼šç„¡éšœç¤™èªæ„åŒ–WidgetåŒ…è£å™¨
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description æä¾›WCAG 2.1 AAæ¨™æº–çš„å®Œæ•´ç„¡éšœç¤™æ”¯æ´ï¼ˆ9005è¦ç¯„ï¼‰
 */
class AccessibilityWrapper {
  
  /**
   * 56. å°æ‡‰ 8.1ï¼šç‚ºæ¨¡å¼å¡ç‰‡æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description ç‚ºæ¨¡å¼é¸æ“‡å¡ç‰‡æ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapModeCard(Widget child, UserMode mode, bool isSelected);

  /**
   * 57. å°æ‡‰ 8.1ï¼šç‚ºå“ç‰ŒLogoæä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description ç‚ºå“ç‰ŒLogoæ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapBrandLogo(Widget child);

  /**
   * 58. å°æ‡‰ 8.1ï¼šç‚ºé–‹å§‹æŒ‰éˆ•æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description ç‚ºé–‹å§‹ä½¿ç”¨æŒ‰éˆ•æ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapStartButton(Widget child, {required bool enabled, UserMode? selectedMode});

  /**
   * 59. å°æ‡‰ 8.1ï¼šç‚ºè¼‰å…¥æŒ‡ç¤ºå™¨æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description ç‚ºè¼‰å…¥æŒ‡ç¤ºå™¨æ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapLoadingIndicator(Widget child, String? loadingMessage);

  /**
   * 60. å°æ‡‰ 8.1ï¼šç‚ºéŒ¯èª¤å°è©±æ¡†æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description ç‚ºéŒ¯èª¤å°è©±æ¡†æ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapErrorDialog(Widget child, String errorMessage, WelcomeErrorType errorType);
}
```

### 8.2 è‰²å½©å°æ¯”åº¦æ”¯æ´
```dart
/**
 * 61. å°æ‡‰ 8.2ï¼šé«˜å°æ¯”åº¦ä¸»é¡Œæ”¯æ´
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description é«˜å°æ¯”åº¦ä¸»é¡Œæ”¯æ´ï¼ˆWCAG 2.1 AAæ¨™æº–ï¼‰
 */
class HighContrastTheme {
  
  /**
   * 62. å°æ‡‰ 8.2ï¼šæª¢æŸ¥æ˜¯å¦å•Ÿç”¨é«˜å°æ¯”åº¦æ¨¡å¼
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æª¢æŸ¥ç³»çµ±æ˜¯å¦å•Ÿç”¨é«˜å°æ¯”åº¦æ¨¡å¼
   */
  static bool isHighContrastEnabled(BuildContext context);

  /**
   * 63. å°æ‡‰ 8.2ï¼šæª¢æŸ¥æ˜¯å¦å•Ÿç”¨å¤§å­—å‹æ¨¡å¼
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æª¢æŸ¥ç³»çµ±æ˜¯å¦å•Ÿç”¨å¤§å­—å‹æ¨¡å¼
   */
  static bool isLargeTextEnabled(BuildContext context);

  /**
   * 64. å°æ‡‰ 8.2ï¼šæª¢æŸ¥æ˜¯å¦å•Ÿç”¨å‹•ç•«æ¸›å°‘æ¨¡å¼
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æª¢æŸ¥ç³»çµ±æ˜¯å¦å•Ÿç”¨å‹•ç•«æ¸›å°‘æ¨¡å¼
   */
  static bool isReduceMotionEnabled(BuildContext context);

  /**
   * 65. å°æ‡‰ 8.2ï¼šå–å¾—é«˜å°æ¯”åº¦æ–‡å­—è‰²å½©
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description å–å¾—é«˜å°æ¯”åº¦æ–‡å­—è‰²å½©ï¼ˆå°æ¯”åº¦è‡³å°‘4.5:1ï¼‰
   */
  static Color getContrastTextColor(BuildContext context, Color backgroundColor);

  /**
   * 66. å°æ‡‰ 8.2ï¼šå–å¾—é«˜å°æ¯”åº¦æŒ‰éˆ•è‰²å½©
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description å–å¾—é©åˆé«˜å°æ¯”åº¦æ¨¡å¼çš„æŒ‰éˆ•è‰²å½©
   */
  static Color getContrastButtonColor(BuildContext context, Color normalColor);

  /**
   * 67. å°æ‡‰ 8.2ï¼šå–å¾—é«˜å°æ¯”åº¦é‚Šæ¡†è‰²å½©
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description å–å¾—é©åˆé«˜å°æ¯”åº¦æ¨¡å¼çš„é‚Šæ¡†è‰²å½©
   */
  static Color getContrastBorderColor(BuildContext context);

  /**
   * 68. å°æ‡‰ 8.2ï¼šå–å¾—é©é…çš„å­—å‹å¤§å°
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ ¹æ“šç³»çµ±å­—å‹ç¸®æ”¾æ¯”ä¾‹èª¿æ•´å­—å‹å¤§å°
   */
  static double getScaledFontSize(BuildContext context, double baseFontSize);

  /**
   * 69. å°æ‡‰ 8.2ï¼šå–å¾—é©é…çš„å‹•ç•«æ™‚é•·
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ ¹æ“šç³»çµ±å‹•ç•«åå¥½èª¿æ•´å‹•ç•«æ™‚é•·
   */
  static Duration getScaledAnimationDuration(BuildContext context, Duration baseDuration);
}
```

### 8.3 è§¸æ§ç›®æ¨™å¤§å°
```dart
/**
 * 70. å°æ‡‰ 8.3ï¼šè§¸æ§ç›®æ¨™å¤§å°è¼”åŠ©å·¥å…·
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description è§¸æ§ç›®æ¨™å¤§å°è¼”åŠ©å·¥å…·ï¼ˆWCAG 2.1 AAæ¨™æº–ï¼‰
 */
class TouchTargetHelper {
  static const double minTouchTargetSize = 44.0;
  
  /**
   * 71. å°æ‡‰ 8.3ï¼šç¢ºä¿Widgetç¬¦åˆæœ€å°è§¸æ§ç›®æ¨™å¤§å°
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description ç¢ºä¿Widgetç¬¦åˆWCAGæœ€å°è§¸æ§ç›®æ¨™å¤§å°
   */
  static Widget ensureMinTouchTarget(Widget child, {double? width, double? height});

  /**
   * 72. å°æ‡‰ 8.3ï¼šç‚ºå°æ–¼æ¨™æº–çš„æŒ‰éˆ•å¢åŠ é€æ˜è§¸æ§å€åŸŸ
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description ç‚ºå°æ–¼æ¨™æº–çš„æŒ‰éˆ•å¢åŠ é€æ˜è§¸æ§å€åŸŸ
   */
  static Widget expandTouchTarget(Widget child, {required double currentWidth, required double currentHeight});
}
```

---

## 9.0 æ•ˆèƒ½æœ€ä½³åŒ–

### 9.1 Widgetå¿«å–ç­–ç•¥
```dart
/**
 * 73. å°æ‡‰ 9.1ï¼šWidgetå¿«å–ç®¡ç†å™¨
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description å„ªåŒ–Widgeté‡å»ºæ•ˆèƒ½ï¼Œæ¸›å°‘ä¸å¿…è¦çš„é‡å»º
 */
class WidgetCache {
  static final Map<String, Widget> _cache = {};
  static final Map<String, DateTime> _cacheTimestamps = {};
  static const Duration _cacheValidDuration = Duration(minutes: 5);

  /**
   * 74. å°æ‡‰ 9.1ï¼šå–å¾—å¿«å–çš„Widgetæˆ–å»ºç«‹æ–°çš„
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description å¾å¿«å–ä¸­ç²å–Widgetæˆ–å‰µå»ºæ–°çš„
   */
  static Widget getOrCreate(String key, Widget Function() creator);

  /**
   * 75. å°æ‡‰ 9.1ï¼šæ¸…é™¤éæœŸå¿«å–
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ¸…é™¤å·²éæœŸçš„Widgetå¿«å–
   */
  static void clearExpiredCache();

  /**
   * 76. å°æ‡‰ 9.1ï¼šæ¸…é™¤æ‰€æœ‰å¿«å–
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ¸…é™¤æ‰€æœ‰Widgetå¿«å–
   */
  static void clearAllCache();

  /**
   * 77. å°æ‡‰ 9.1ï¼šå–å¾—å¿«å–çµ±è¨ˆè³‡è¨Š
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description ç²å–å¿«å–ä½¿ç”¨çµ±è¨ˆè³‡è¨Š
   */
  static Map<String, dynamic> getCacheStats();
}
```

### 9.2 åœ–ç‰‡é è¼‰å…¥èˆ‡æœ€ä½³åŒ–
```dart
/**
 * 78. å°æ‡‰ 9.2ï¼šåœ–ç‰‡é è¼‰å…¥ç®¡ç†å™¨
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description ç®¡ç†åœ–ç‰‡è³‡æºçš„é è¼‰å…¥
 */
class ImagePreloader {
  static final Set<String> _preloadedImages = {};
  static final Map<String, Completer<void>> _loadingImages = {};

  /**
   * 79. å°æ‡‰ 9.2ï¼šé è¼‰å…¥å“ç‰Œç›¸é—œåœ–ç‰‡è³‡æº
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description é è¼‰å…¥å“ç‰Œç›¸é—œçš„åœ–ç‰‡è³‡æº
   */
  static Future<void> preloadBrandAssets(BuildContext context);

  /**
   * 80. å°æ‡‰ 9.2ï¼šé è¼‰å…¥å–®ä¸€åœ–ç‰‡
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description é è¼‰å…¥æŒ‡å®šçš„å–®ä¸€åœ–ç‰‡
   */
  static Future<void> _preloadSingleImage(BuildContext context, String asset);

  /**
   * 81. å°æ‡‰ 9.2ï¼šæª¢æŸ¥åœ–ç‰‡æ˜¯å¦å·²é è¼‰å…¥
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æª¢æŸ¥æŒ‡å®šåœ–ç‰‡æ˜¯å¦å·²å®Œæˆé è¼‰å…¥
   */
  static bool isImagePreloaded(String asset);

  /**
   * 82. å°æ‡‰ 9.2ï¼šæ¸…é™¤é è¼‰å…¥è¨˜éŒ„
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ¸…é™¤åœ–ç‰‡é è¼‰å…¥çš„è¨˜éŒ„
   */
  static void clearPreloadedImages();
}
```

### 9.3 è¨˜æ†¶é«”ç®¡ç†èˆ‡æ•ˆèƒ½ç›£æ§
```dart
/**
 * 83. å°æ‡‰ 9.3ï¼šè¨˜æ†¶é«”ä½¿ç”¨ç›£æ§
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description ç›£æ§æ‡‰ç”¨ç¨‹å¼è¨˜æ†¶é«”ä½¿ç”¨æƒ…æ³
 */
class MemoryMonitor {
  static Timer? _monitorTimer;
  static final List<int> _memoryUsageHistory = [];
  static const int _maxHistoryLength = 60;
  static const int _warningThresholdMB = 150;
  static const int _criticalThresholdMB = 200;

  /**
   * 84. å°æ‡‰ 9.3ï¼šé–‹å§‹è¨˜æ†¶é«”ç›£æ§
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description é–‹å§‹å®šæœŸç›£æ§è¨˜æ†¶é«”ä½¿ç”¨é‡
   */
  static void startMonitoring();

  /**
   * 85. å°æ‡‰ 9.3ï¼šåœæ­¢è¨˜æ†¶é«”ç›£æ§
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description åœæ­¢è¨˜æ†¶é«”ä½¿ç”¨é‡ç›£æ§
   */
  static void stopMonitoring();

  /**
   * 86. å°æ‡‰ 9.3ï¼šæª¢æŸ¥è¨˜æ†¶é«”ä½¿ç”¨ç‹€æ³
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æª¢æŸ¥ç•¶å‰è¨˜æ†¶é«”ä½¿ç”¨ç‹€æ³ä¸¦æ¡å–ç›¸æ‡‰æªæ–½
   */
  static void _checkMemoryUsage();

  /**
   * 87. å°æ‡‰ 9.3ï¼šå–å¾—ç›®å‰è¨˜æ†¶é«”ä½¿ç”¨é‡
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description ç²å–ç•¶å‰è¨˜æ†¶é«”ä½¿ç”¨é‡ï¼ˆMBï¼‰
   */
  static int _getCurrentMemoryUsageMB();

  /**
   * 88. å°æ‡‰ 9.3ï¼šåŸ·è¡Œä¸€èˆ¬æ¸…ç†
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description åŸ·è¡Œä¸€èˆ¬æ€§çš„è¨˜æ†¶é«”æ¸…ç†
   */
  static void _performRegularCleanup();

  /**
   * 89. å°æ‡‰ 9.3ï¼šåŸ·è¡Œç·Šæ€¥æ¸…ç†
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description åŸ·è¡Œç·Šæ€¥è¨˜æ†¶é«”æ¸…ç†
   */
  static void _performEmergencyCleanup();

  /**
   * 90. å°æ‡‰ 9.3ï¼šå–å¾—è¨˜æ†¶é«”ä½¿ç”¨çµ±è¨ˆ
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description ç²å–è¨˜æ†¶é«”ä½¿ç”¨çµ±è¨ˆè³‡è¨Š
   */
  static Map<String, dynamic> getMemoryStats();
}
```

---

## 10.0 éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

### 10.1 çµ±ä¸€éŒ¯èª¤è™•ç†
```dart
/**
 * 91. å°æ‡‰ 10.1ï¼šæ­¡è¿é é¢éŒ¯èª¤è™•ç†å™¨
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description æ ¹æ“š8701è¦ç¯„çš„å…·é«”éŒ¯èª¤æƒ…å¢ƒé€²è¡Œè©³ç´°è™•ç†
 */
class WelcomeErrorHandler {
  
  /**
   * 92. å°æ‡‰ 10.1ï¼šè™•ç†åˆå§‹åŒ–éŒ¯èª¤
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è™•ç†åˆå§‹åŒ–éŒ¯èª¤ï¼ˆ8701è¦ç¯„ï¼‰
   */
  static String handleInitializationError(dynamic error);

  /**
   * 93. å°æ‡‰ 10.1ï¼šè™•ç†æ¨¡å¼é¸æ“‡éŒ¯èª¤
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è™•ç†æ¨¡å¼é¸æ“‡éŒ¯èª¤ï¼ˆ8701è¦ç¯„ï¼‰
   */
  static String handleModeSelectionError(dynamic error);

  /**
   * 94. å°æ‡‰ 10.1ï¼šè™•ç†ç¶²è·¯éŒ¯èª¤
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è™•ç†ç¶²è·¯éŒ¯èª¤ï¼ˆ8701è¦ç¯„ï¼‰
   */
  static String _handleNetworkError(DioError error);

  /**
   * 95. å°æ‡‰ 10.1ï¼šè™•ç†HTTPç‹€æ…‹ç¢¼éŒ¯èª¤
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è™•ç†HTTPç‹€æ…‹ç¢¼éŒ¯èª¤ï¼ˆ8701è¦ç¯„ï¼‰
   */
  static String _handleHttpStatusError(int? statusCode);

  /**
   * 96. å°æ‡‰ 10.1ï¼šè™•ç†å¸³è™Ÿåˆªé™¤ç›¸é—œéŒ¯èª¤
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è™•ç†å¸³è™Ÿåˆªé™¤ç›¸é—œéŒ¯èª¤ï¼ˆ8701è¦ç¯„ï¼‰
   */
  static String handleAccountDeletionError(Map<String, dynamic>? deletionInfo);

  /**
   * 97. å°æ‡‰ 10.1ï¼šè™•ç†é©—è­‰éŒ¯èª¤
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è™•ç†é©—è­‰éŒ¯èª¤ï¼ˆ8701è¦ç¯„ï¼‰
   */
  static String handleValidationError(String field, dynamic value);

  /**
   * 98. å°æ‡‰ 10.1ï¼šé¡¯ç¤ºéŒ¯èª¤å°è©±æ¡†
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description é¡¯ç¤ºéŒ¯èª¤å°è©±æ¡†ï¼ˆ8701è¦ç¯„ï¼‰
   */
  static Future<void> showErrorDialog(
    BuildContext context, 
    String message, 
    WelcomeErrorType errorType,
    {VoidCallback? onRetry, VoidCallback? onDismiss}
  );

  /**
   * 99. å°æ‡‰ 10.1ï¼šå–å¾—éŒ¯èª¤æ¨™é¡Œ
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ ¹æ“šéŒ¯èª¤é¡å‹å–å¾—å°æ‡‰çš„éŒ¯èª¤æ¨™é¡Œ
   */
  static String _getErrorTitle(WelcomeErrorType errorType);

  /**
   * 100. å°æ‡‰ 10.1ï¼šåˆ¤æ–·æ˜¯å¦æ‡‰é¡¯ç¤ºé‡è©¦æŒ‰éˆ•
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ ¹æ“šéŒ¯èª¤é¡å‹åˆ¤æ–·æ˜¯å¦æ‡‰é¡¯ç¤ºé‡è©¦æŒ‰éˆ•
   */
  static bool _shouldShowRetryButton(WelcomeErrorType errorType);
}
```

### 10.2 éŒ¯èª¤å¾©åŸæ©Ÿåˆ¶
```dart
/**
 * 101. å°æ‡‰ 10.2ï¼šéŒ¯èª¤å¾©åŸç­–ç•¥
 * @version 2025-08-06-V2.2.0
 * @date 2025-08-06 15:00:00
 * @description æä¾›å„ç¨®éŒ¯èª¤å¾©åŸæ©Ÿåˆ¶
 */
class ErrorRecovery {
  
  /**
   * 102. å°æ‡‰ 10.2ï¼šè‡ªå‹•é‡è©¦æ©Ÿåˆ¶ï¼ˆæŒ‡æ•¸é€€é¿ï¼‰
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description ä½¿ç”¨æŒ‡æ•¸é€€é¿ç­–ç•¥çš„è‡ªå‹•é‡è©¦æ©Ÿåˆ¶
   */
  static Future<T> retryWithBackoff<T>(
    Future<T> Function() operation, {
    int maxRetries = 3,
    Duration initialDelay = const Duration(seconds: 1),
    double backoffMultiplier = 2.0,
    Duration maxDelay = const Duration(seconds: 30),
  });

  /**
   * 103. å°æ‡‰ 10.2ï¼šè¨ˆç®—é€€é¿å»¶é²æ™‚é–“
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description è¨ˆç®—æŒ‡æ•¸é€€é¿çš„å»¶é²æ™‚é–“
   */
  static Duration _calculateDelay(
    Duration initialDelay,
    int attempt,
    double multiplier,
    Duration maxDelay,
  );

  /**
   * 104. å°æ‡‰ 10.2ï¼šæ™ºæ…§é‡è©¦
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ ¹æ“šéŒ¯èª¤é¡å‹æ±ºå®šæ˜¯å¦é‡è©¦çš„æ™ºæ…§é‡è©¦æ©Ÿåˆ¶
   */
  static Future<T> smartRetry<T>(
    Future<T> Function() operation,
    bool Function(dynamic error) shouldRetry, {
    int maxRetries = 3,
  });

  /**
   * 105. å°æ‡‰ 10.2ï¼šåˆ¤æ–·æ˜¯å¦æ‡‰è©²é‡è©¦
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æ ¹æ“šéŒ¯èª¤é¡å‹åˆ¤æ–·æ˜¯å¦æ‡‰è©²é€²è¡Œé‡è©¦
   */
  static bool shouldRetryForError(dynamic error);

  /**
   * 106. å°æ‡‰ 10.2ï¼šé›¢ç·šæ¨¡å¼è™•ç†
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description å»ºç«‹é›¢ç·šç‹€æ…‹çš„UI Widget
   */
  static Widget buildOfflineWidget({
    VoidCallback? onRetry,
    String? message,
  });

  /**
   * 107. å°æ‡‰ 10.2ï¼šéŒ¯èª¤é‚Šç•ŒWidget
   * @version 2025-08-06-V2.2.0
   * @date 2025-08-06 15:00:00
   * @description æä¾›éŒ¯èª¤é‚Šç•Œä¿è­·çš„WidgetåŒ…è£å™¨
   */
  static Widget buildErrorBoundary({
    required Widget child,
    Widget Function(String error)? errorBuilder,
  });
}
```

---

## æ–‡ä»¶ç¶­è­·è¨˜éŒ„

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹è€… | ä¿®æ”¹å…§å®¹ |
|------|------|--------|----------|
| **v2.2.0** | **2025-08-06 15:00:00 +08:00** | **LCAS SA Team** | **å®Œå…¨ç§»é™¤å¯¦ä½œä»£ç¢¼ï¼š1.å¾¹åº•æ¸…ç†æ‰€æœ‰å¯¦ä½œä»£ç¢¼ï¼Œæ”¹ç‚ºç´”å‡½æ•¸å®£å‘Šæ ¼å¼ 2.ä¿ç•™å®Œæ•´çš„å‡½æ•¸åç¨±ã€åƒæ•¸å®šç¾©å’Œè¨»è§£ 3.çµ±ä¸€ä»£ç¢¼ç¯€é»ç·¨è™Ÿæ ¼å¼ï¼ˆ01-107ï¼‰ï¼Œéµå¾ª0055æ–‡ä»¶è¦ç¯„ 4.å‡ç´šæ‰€æœ‰Widgetã€æ¨¡çµ„ã€å‡½æ•¸ç‰ˆæœ¬è‡³v2.2.0 5.ç¶­æŒå®Œæ•´çš„æŠ€è¡“æ¶æ§‹è¨­è¨ˆæ–‡ä»¶çµæ§‹** |

---

## å‚™è¨»

- **ç´”å‡½æ•¸å®£å‘Š**ï¼šå®Œå…¨ç§»é™¤æ‰€æœ‰å¯¦ä½œä»£ç¢¼ï¼Œåƒ…ä¿ç•™å‡½æ•¸åç¨±ã€åƒæ•¸å®šç¾©å’Œè¨»è§£
- **æŠ€è¡“è¨­è¨ˆå°ˆç”¨**ï¼šå°ˆæ³¨æ–¼æŠ€è¡“æ¶æ§‹è¨­è¨ˆï¼Œä¸åŒ…å«å…·é«”å¯¦ä½œç´°ç¯€
- **ä»£ç¢¼ç¯€é»æ¨™æº–åŒ–**ï¼šçµ±ä¸€ç·¨è™Ÿ01-107ï¼Œéµå¾ª0055è¦ç¯„æ ¼å¼
- **ç‰ˆæœ¬çµ±ä¸€å‡ç´š**ï¼šæ‰€æœ‰çµ„ä»¶ç‰ˆæœ¬çµ±ä¸€ç‚ºv2.2.0
- **è¦ç¯„å®Œå…¨å°é½Š**ï¼šèˆ‡0015ã€9005ã€8701æ–‡ä»¶å®Œå…¨ä¸€è‡´
- **å®Œæ•´æ¶æ§‹ä¿ç•™**ï¼šç¶­æŒWidgetåˆ†å±¤ã€ç‹€æ…‹ç®¡ç†ã€APIæ•´åˆã€éŸ¿æ‡‰å¼è¨­è¨ˆã€ç„¡éšœç¤™æ”¯æ´ã€æ•ˆèƒ½æœ€ä½³åŒ–åŠéŒ¯èª¤è™•ç†çš„å®Œæ•´æ¶æ§‹


