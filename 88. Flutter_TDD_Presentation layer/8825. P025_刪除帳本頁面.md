
# 8825. TDD_P025_åˆªé™¤å¸³æœ¬é é¢_v1.0.0

## æ–‡ä»¶è³‡è¨Š
- **æ–‡ä»¶æ¨™é¡Œ**: P025 åˆªé™¤å¸³æœ¬é é¢æŠ€è¡“è¨­è¨ˆæ–‡ä»¶
- **æ–‡ä»¶ç‰ˆæœ¬**: v1.0.0
- **å‰µå»ºæ—¥æœŸ**: 2025-01-26 19:00:00 +08:00 (å°ç£æ™‚é–“)
- **å‰µå»ºè€…**: LCAS SA Team
- **æœ€å¾Œæ›´æ–°**: 2025-01-26 19:00:00 +08:00 (å°ç£æ™‚é–“)
- **å°æ‡‰éœ€æ±‚æ–‡ä»¶**: P025_åˆªé™¤å¸³æœ¬é é¢_SRS.md
- **å°æ‡‰PRDæ–‡ä»¶**: 9005. Flutter_Presentation layer.md
- **é é¢ä»£ç¢¼**: P025 (Delete Ledger Page)

---

## ğŸ“‘ ç›®æ¬¡ (Table of Contents)

1. [æŠ€è¡“æ¶æ§‹æ¦‚è¿°](#10-æŠ€è¡“æ¶æ§‹æ¦‚è¿°)
2. [Widgetæ¸…å–®](#20-widgetæ¸…å–®)
3. [æ ¸å¿ƒWidgetè¨­è¨ˆ](#30-æ ¸å¿ƒwidgetè¨­è¨ˆ)
4. [ç‹€æ…‹ç®¡ç†æ¶æ§‹](#40-ç‹€æ…‹ç®¡ç†æ¶æ§‹)
5. [APIæ•´åˆè¨­è¨ˆ](#50-apiæ•´åˆè¨­è¨ˆ)
6. [å°èˆªè·¯ç”±è¨­è¨ˆ](#60-å°èˆªè·¯ç”±è¨­è¨ˆ)
7. [éŸ¿æ‡‰å¼è¨­è¨ˆ](#70-éŸ¿æ‡‰å¼è¨­è¨ˆ)
8. [ç„¡éšœç¤™åŠŸèƒ½](#80-ç„¡éšœç¤™åŠŸèƒ½)
9. [æ•ˆèƒ½æœ€ä½³åŒ–](#90-æ•ˆèƒ½æœ€ä½³åŒ–)
10. [éŒ¯èª¤è™•ç†æ©Ÿåˆ¶](#100-éŒ¯èª¤è™•ç†æ©Ÿåˆ¶)

---

## 1.0 æŠ€è¡“æ¶æ§‹æ¦‚è¿°

### 1.1 æ¨¡çµ„å®šä½
P025åˆªé™¤å¸³æœ¬é é¢ä½œç‚ºLCAS 2.0 Flutteræ‡‰ç”¨ç¨‹å¼çš„å±éšªæ“ä½œç®¡ç†ä¸­å¿ƒï¼Œè² è²¬å®‰å…¨å¸³æœ¬åˆªé™¤ã€è³‡æ–™å‚™ä»½ã€æˆå“¡é€šçŸ¥ã€ä¾è³´æª¢æŸ¥ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚æœ¬é é¢æ¡ç”¨Clean Architectureè¨­è¨ˆï¼Œç¢ºä¿åˆªé™¤æ“ä½œçš„å®‰å…¨æ€§èˆ‡å¯è¿½è¹¤æ€§ã€‚

### 1.2 æŠ€è¡“å †ç–Š
- **å‰ç«¯æ¡†æ¶**: Flutter 3.x
- **ç‹€æ…‹ç®¡ç†**: Provider + ChangeNotifier
- **è·¯ç”±ç®¡ç†**: GoRouter
- **HTTPå®¢æˆ¶ç«¯**: Dio
- **æœ¬åœ°å„²å­˜**: SharedPreferences + FlutterSecureStorage
- **å®‰å…¨é©—è­‰**: local_auth (ç”Ÿç‰©è­˜åˆ¥)
- **æª”æ¡ˆè™•ç†**: path_provider, file_picker
- **åŠ å¯†è™•ç†**: encrypt, crypto

### 1.3 æ¨¡çµ„æ¶æ§‹
```dart
/**
 * P025_åˆªé™¤å¸³æœ¬é é¢_1.0.0
 * @module P025åˆªé™¤å¸³æœ¬é é¢
 * @description Flutter Presentation Layerå¸³æœ¬å®‰å…¨åˆªé™¤é é¢ - å¤šé‡ç¢ºèªã€è³‡æ–™å‚™ä»½ã€æˆå“¡é€šçŸ¥
 * @update 2025-01-26: å‡ç´šè‡³v1.0ç‰ˆæœ¬ï¼Œæ–°å¢å®Œæ•´å®‰å…¨åˆªé™¤åŠŸèƒ½è¨­è¨ˆï¼Œæ”¯æ´è»Ÿåˆªé™¤ã€ç¡¬åˆªé™¤ã€æ¢å¾©æ©Ÿåˆ¶
 */
```

---

## 2.0 Widgetæ¸…å–®

### 2.1 å®Œæ•´Widgetç´¢å¼•è¡¨

| # | Widgetåç¨± | ç‰ˆæœ¬ | æ‰€å±¬å±¤ç´š | åŠŸèƒ½æè¿° | ç›¸ä¾çµ„ä»¶ |
|---|------------|------|----------|----------|----------|
| 01 | DeleteLedgerPage | V1.0.0 | é é¢å®¹å™¨å±¤ | ä¸»åˆªé™¤é é¢å®¹å™¨åŠç”Ÿå‘½é€±æœŸç®¡ç† | DeleteLedgerProviderã€Router |
| 02 | DeleteScaffold | V1.0.0 | ä½ˆå±€çµæ§‹å±¤ | åŸºç¤é é¢çµæ§‹èˆ‡å±éšªè­¦å‘ŠèƒŒæ™¯ | DeleteAppBarã€SafeArea |
| 03 | DeleteAppBar | V1.0.0 | é ‚éƒ¨å°èˆªå±¤ | åˆªé™¤é é¢é ‚éƒ¨å°èˆªåŠå–æ¶ˆæŒ‰éˆ• | IconButtonã€AlertDialog |
| 04 | DangerWarningBanner | V1.0.0 | è­¦å‘Šæ©«å¹…å±¤ | å±éšªæ“ä½œè­¦å‘Šæ©«å¹…é¡¯ç¤º | WarningIconã€AlertText |
| 05 | LedgerInfoSection | V1.0.0 | å¸³æœ¬è³‡è¨Šå±¤ | å¾…åˆªé™¤å¸³æœ¬åŸºæœ¬è³‡è¨Šå±•ç¤º | LedgerCardã€InfoRow |
| 06 | LedgerCard | V1.0.0 | å¸³æœ¬å¡ç‰‡å±¤ | å¸³æœ¬è©³ç´°è³‡è¨Šå¡ç‰‡ | Avatarã€StatusIndicator |
| 07 | InfoRow | V1.0.0 | è³‡è¨Šè¡Œå±¤ | å–®è¡Œå¸³æœ¬è³‡è¨Šé¡¯ç¤º | IconWidgetã€TextWidget |
| 08 | ImpactAnalysisSection | V1.0.0 | å½±éŸ¿åˆ†æå±¤ | åˆªé™¤å½±éŸ¿ç¯„åœåˆ†æé¡¯ç¤º | ImpactCardã€RiskIndicator |
| 09 | ImpactCard | V1.0.0 | å½±éŸ¿å¡ç‰‡å±¤ | å–®é …å½±éŸ¿åˆ†æå¡ç‰‡ | CountWidgetã€DescriptionText |
| 10 | RiskIndicator | V1.0.0 | é¢¨éšªæŒ‡æ¨™å±¤ | é¢¨éšªç­‰ç´šæŒ‡æ¨™é¡¯ç¤º | RiskIconã€RiskText |
| 11 | BackupOptionsSection | V1.0.0 | å‚™ä»½é¸é …å±¤ | è³‡æ–™å‚™ä»½é¸é …è¨­å®šå€åŸŸ | CheckboxListTileã€DropdownButton |
| 12 | BackupFormatSelector | V1.0.0 | å‚™ä»½æ ¼å¼å±¤ | å‚™ä»½æ ¼å¼é¸æ“‡å™¨ | RadioListTileã€FormatIcon |
| 13 | BackupProgressIndicator | V1.0.0 | å‚™ä»½é€²åº¦å±¤ | å‚™ä»½é€²åº¦é¡¯ç¤ºå™¨ | LinearProgressIndicatorã€StatusText |
| 14 | MemberNotificationSection | V1.0.0 | æˆå“¡é€šçŸ¥å±¤ | æˆå“¡é€šçŸ¥è¨­å®šå€åŸŸ | MemberListTileã€NotificationSettings |
| 15 | MemberListTile | V1.0.0 | æˆå“¡é …ç›®å±¤ | å–®ä¸€æˆå“¡é€šçŸ¥é …ç›® | MemberAvatarã€NotificationToggle |
| 16 | NotificationSettings | V1.0.0 | é€šçŸ¥è¨­å®šå±¤ | é€šçŸ¥è©³ç´°è¨­å®šé¢æ¿ | TextFormFieldã€DatePicker |
| 17 | ConfirmationSection | V1.0.0 | ç¢ºèªè¼¸å…¥å±¤ | åˆªé™¤ç¢ºèªè¼¸å…¥å€åŸŸ | ConfirmationTextFieldã€PasswordField |
| 18 | ConfirmationTextField | V1.0.0 | ç¢ºèªè¼¸å…¥æ¡†å±¤ | å¸³æœ¬åç¨±ç¢ºèªè¼¸å…¥æ¡† | TextFormFieldã€ValidationText |
| 19 | PasswordField | V1.0.0 | å¯†ç¢¼è¼¸å…¥å±¤ | å¯†ç¢¼ç¢ºèªè¼¸å…¥æ¡† | TextFormFieldã€VisibilityToggle |
| 20 | BiometricAuthButton | V1.0.0 | ç”Ÿç‰©è­˜åˆ¥å±¤ | ç”Ÿç‰©è­˜åˆ¥é©—è­‰æŒ‰éˆ• | IconButtonã€AuthDialog |
| 21 | DeleteActionsSection | V1.0.0 | æ“ä½œæŒ‰éˆ•å±¤ | åˆªé™¤æ“ä½œæŒ‰éˆ•å€åŸŸ | CancelButtonã€DeleteButton |
| 22 | CancelButton | V1.0.0 | å–æ¶ˆæŒ‰éˆ•å±¤ | å–æ¶ˆåˆªé™¤æ“ä½œæŒ‰éˆ• | ElevatedButtonã€NavigationService |
| 23 | DeleteButton | V1.0.0 | åˆªé™¤æŒ‰éˆ•å±¤ | åŸ·è¡Œåˆªé™¤æ“ä½œæŒ‰éˆ• | ElevatedButtonã€ConfirmationDialog |
| 24 | DeletionProgressDialog | V1.0.0 | åˆªé™¤é€²åº¦å±¤ | åˆªé™¤é€²åº¦å°è©±æ¡† | ProgressIndicatorã€StepIndicator |
| 25 | StepIndicator | V1.0.0 | æ­¥é©ŸæŒ‡ç¤ºå±¤ | åˆªé™¤æ­¥é©Ÿé€²åº¦æŒ‡ç¤ºå™¨ | StepperWidgetã€StatusIcon |
| 26 | DeletionResultDialog | V1.0.0 | åˆªé™¤çµæœå±¤ | åˆªé™¤çµæœé¡¯ç¤ºå°è©±æ¡† | ResultIconã€ResultText |
| 27 | RecoveryInstructions | V1.0.0 | æ¢å¾©èªªæ˜å±¤ | å¸³æœ¬æ¢å¾©èªªæ˜é¡¯ç¤º | InstructionTextã€RecoveryButton |
| 28 | ErrorDialog | V1.0.0 | éŒ¯èª¤å°è©±æ¡†å±¤ | åˆªé™¤éŒ¯èª¤é¡¯ç¤ºå°è©±æ¡† | ErrorIconã€ErrorMessage |
| 29 | LoadingIndicator | V1.0.0 | è¼‰å…¥ç‹€æ…‹å±¤ | åˆªé™¤è¼‰å…¥æŒ‡ç¤ºå™¨ | CircularProgressIndicatorã€LoadingText |
| 30 | EmptyStateWidget | V1.0.0 | ç©ºç‹€æ…‹å±¤ | ç„¡åˆªé™¤æ¬Šé™ç‹€æ…‹é¡¯ç¤º | EmptyIllustrationã€GuideText |

---

## 3.0 æ ¸å¿ƒWidgetè¨­è¨ˆ

### 3.1 é é¢å®¹å™¨å±¤Widget

#### 3.1.1 DeleteLedgerPage Widget
```dart
/**
 * 01. å°æ‡‰ 2.1ï¼šä¸»åˆªé™¤å¸³æœ¬é é¢å®¹å™¨Widget
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description åˆªé™¤å¸³æœ¬é é¢çš„ä¸»å®¹å™¨ï¼Œæ”¯æ´å¤šé‡å®‰å…¨é©—è­‰èˆ‡è³‡æ–™å‚™ä»½
 */
class DeleteLedgerPage extends StatefulWidget {
  static const String routeName = '/delete-ledger';
  final String ledgerId;
  final UserMode? userMode;
  final bool requireBackup;

  const DeleteLedgerPage({
    Key? key,
    required this.ledgerId,
    this.userMode,
    this.requireBackup = true,
  });

  @override
  State<DeleteLedgerPage> createState();
}

/**
 * 02. å°æ‡‰ 2.1ï¼šåˆªé™¤å¸³æœ¬é é¢ç‹€æ…‹é¡åˆ¥
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description ç®¡ç†åˆªé™¤å¸³æœ¬é é¢çš„ç‹€æ…‹å’Œå®‰å…¨é©—è­‰æ§åˆ¶å™¨
 */
class _DeleteLedgerPageState extends State<DeleteLedgerPage> 
    with TickerProviderStateMixin {
  late AnimationController _fadeController;
  late AnimationController _shakeController;
  late Animation<double> _fadeAnimation;
  late Animation<double> _shakeAnimation;

  @override
  void initState();

  /**
   * 03. å°æ‡‰ 2.1ï¼šåˆå§‹åŒ–å®‰å…¨é©—è­‰æ§åˆ¶å™¨
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description è¨­å®šé é¢å®‰å…¨é©—è­‰å’Œè­¦å‘Šå‹•ç•«æ•ˆæœ
   */
  void _initializeSecurityAnimations();

  /**
   * 04. å°æ‡‰ 2.1ï¼šåˆå§‹åŒ–åˆªé™¤é é¢ç‹€æ…‹
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description èª¿ç”¨Provideré€²è¡Œåˆªé™¤é é¢åˆå§‹åŒ–
   */
  Future<void> _initializeDeletePage();

  @override
  Widget build(BuildContext context);

  @override
  void dispose();
}
```

### 3.2 è­¦å‘Šæ©«å¹…å±¤Widget

#### 3.2.1 DangerWarningBanner Widget
```dart
/**
 * 05. å°æ‡‰ 2.2ï¼šå±éšªæ“ä½œè­¦å‘Šæ©«å¹…Widget
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description é¡¯ç¤ºå±éšªæ“ä½œè­¦å‘Šï¼Œæ”¯æ´å››æ¨¡å¼å·®ç•°åŒ–è­¦å‘Šæ¨£å¼
 */
class DangerWarningBanner extends StatefulWidget {
  final DangerLevel dangerLevel;
  final String warningMessage;
  final UserMode? userMode;

  const DangerWarningBanner({
    Key? key,
    required this.dangerLevel,
    required this.warningMessage,
    this.userMode,
  });

  @override
  State<DangerWarningBanner> createState();
}

class _DangerWarningBannerState extends State<DangerWarningBanner> 
    with SingleTickerProviderStateMixin {
  late AnimationController _blinkController;
  late Animation<double> _blinkAnimation;

  @override
  void initState();

  @override
  Widget build(BuildContext context);

  /**
   * 06. å°æ‡‰ 2.2ï¼šå–å¾—å±éšªç­‰ç´šå°æ‡‰è‰²å½©
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ ¹æ“šå±éšªç­‰ç´šè¿”å›å°æ‡‰çš„è­¦å‘Šè‰²å½©
   */
  Color _getDangerLevelColor(DangerLevel level);

  @override
  void dispose();
}
```

### 3.3 å½±éŸ¿åˆ†æå±¤Widget

#### 3.3.1 ImpactAnalysisSection Widget
```dart
/**
 * 07. å°æ‡‰ 3.1ï¼šåˆªé™¤å½±éŸ¿åˆ†æå€å¡ŠWidget
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description é¡¯ç¤ºåˆªé™¤å½±éŸ¿åˆ†æï¼Œæ”¯æ´å››æ¨¡å¼å·®ç•°åŒ–åˆ†ææ·±åº¦
 */
class ImpactAnalysisSection extends StatelessWidget {
  final DeletionImpact impact;
  final UserMode? userMode;

  const ImpactAnalysisSection({
    Key? key,
    required this.impact,
    this.userMode,
  });

  @override
  Widget build(BuildContext context);

  /**
   * 08. å°æ‡‰ 3.1ï¼šå–å¾—æ¨¡å¼å°æ‡‰å½±éŸ¿åˆ†æ
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼è¿”å›å°æ‡‰çš„å½±éŸ¿åˆ†ææ·±åº¦
   */
  List<ImpactData> _getImpactAnalysisForMode(UserMode? mode);
}
```

#### 3.3.2 ImpactCard Widget
```dart
/**
 * 09. å°æ‡‰ 3.1.1ï¼šå½±éŸ¿åˆ†æå¡ç‰‡Widget
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description å–®é …å½±éŸ¿åˆ†æå¡ç‰‡ï¼Œæ”¯æ´å‹•ç•«æ•ˆæœ
 */
class ImpactCard extends StatefulWidget {
  final String title;
  final int affectedCount;
  final String description;
  final IconData icon;
  final Color? color;
  final ImpactSeverity severity;
  final VoidCallback? onTap;

  const ImpactCard({
    Key? key,
    required this.title,
    required this.affectedCount,
    required this.description,
    required this.icon,
    this.color,
    required this.severity,
    this.onTap,
  });

  @override
  State<ImpactCard> createState();
}

class _ImpactCardState extends State<ImpactCard> 
    with SingleTickerProviderStateMixin {
  late AnimationController _animationController;
  late Animation<double> _scaleAnimation;
  late Animation<double> _fadeAnimation;

  @override
  void initState();

  @override
  Widget build(BuildContext context);

  /**
   * 10. å°æ‡‰ 3.1.1ï¼šæ ¼å¼åŒ–å½±éŸ¿æ•¸é‡é¡¯ç¤º
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ ¹æ“šæ•¸é‡ç¯„åœæ ¼å¼åŒ–é¡¯ç¤º
   */
  String _formatImpactCount(int count);

  @override
  void dispose();
}
```

### 3.4 å‚™ä»½é¸é …å±¤Widget

#### 3.4.1 BackupOptionsSection Widget
```dart
/**
 * 11. å°æ‡‰ 3.2ï¼šè³‡æ–™å‚™ä»½é¸é …å€å¡ŠWidget
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description æä¾›è³‡æ–™å‚™ä»½é¸é …è¨­å®šï¼Œæ”¯æ´å››æ¨¡å¼å·®ç•°åŒ–
 */
class BackupOptionsSection extends StatelessWidget {
  final BackupSettings settings;
  final UserMode? userMode;
  final Function(BackupSettings) onSettingsChanged;

  const BackupOptionsSection({
    Key? key,
    required this.settings,
    this.userMode,
    required this.onSettingsChanged,
  });

  @override
  Widget build(BuildContext context);

  /**
   * 12. å°æ‡‰ 3.2ï¼šå–å¾—æ¨¡å¼å¯ç”¨å‚™ä»½é¸é …
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼è¿”å›å¯ç”¨çš„å‚™ä»½é¸é …åˆ—è¡¨
   */
  List<BackupOption> _getAvailableOptionsForMode(UserMode? mode);
}
```

#### 3.4.2 BackupFormatSelector Widget
```dart
/**
 * 13. å°æ‡‰ 3.2.1ï¼šå‚™ä»½æ ¼å¼é¸æ“‡å™¨Widget
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description å‚™ä»½æ ¼å¼é¸æ“‡å™¨ï¼Œæ”¯æ´å¤šç¨®åŒ¯å‡ºæ ¼å¼
 */
class BackupFormatSelector extends StatefulWidget {
  final BackupFormat selectedFormat;
  final List<BackupFormat> availableFormats;
  final Function(BackupFormat) onFormatChanged;

  const BackupFormatSelector({
    Key? key,
    required this.selectedFormat,
    required this.availableFormats,
    required this.onFormatChanged,
  });

  @override
  State<BackupFormatSelector> createState();
}

class _BackupFormatSelectorState extends State<BackupFormatSelector> {

  @override
  Widget build(BuildContext context);

  /**
   * 14. å°æ‡‰ 3.2.1ï¼šå–å¾—æ ¼å¼å°æ‡‰åœ–ç¤º
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ ¹æ“šå‚™ä»½æ ¼å¼è¿”å›å°æ‡‰åœ–ç¤º
   */
  IconData _getFormatIcon(BackupFormat format);

  /**
   * 15. å°æ‡‰ 3.2.1ï¼šå–å¾—æ ¼å¼æè¿°
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ ¹æ“šå‚™ä»½æ ¼å¼è¿”å›æè¿°æ–‡å­—
   */
  String _getFormatDescription(BackupFormat format);
}
```

### 3.5 ç¢ºèªè¼¸å…¥å±¤Widget

#### 3.5.1 ConfirmationSection Widget
```dart
/**
 * 16. å°æ‡‰ 3.3ï¼šåˆªé™¤ç¢ºèªè¼¸å…¥å€å¡ŠWidget
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description å¤šé‡ç¢ºèªè¼¸å…¥å€å¡Šï¼Œæ”¯æ´å¸³æœ¬åç¨±å’Œå¯†ç¢¼ç¢ºèª
 */
class ConfirmationSection extends StatefulWidget {
  final String expectedLedgerName;
  final Function(ConfirmationData) onConfirmationChanged;

  const ConfirmationSection({
    Key? key,
    required this.expectedLedgerName,
    required this.onConfirmationChanged,
  });

  @override
  State<ConfirmationSection> createState();
}

class _ConfirmationSectionState extends State<ConfirmationSection> {
  final TextEditingController _ledgerNameController = TextEditingController();
  final TextEditingController _passwordController = TextEditingController();
  final TextEditingController _confirmPhraseController = TextEditingController();
  bool _understandConsequences = false;

  @override
  Widget build(BuildContext context);

  /**
   * 17. å°æ‡‰ 3.3ï¼šé©—è­‰ç¢ºèªè¼¸å…¥
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description é©—è­‰æ‰€æœ‰ç¢ºèªè¼¸å…¥çš„æ­£ç¢ºæ€§
   */
  void _validateConfirmation();

  /**
   * 18. å°æ‡‰ 3.3ï¼šæ›´æ–°ç¢ºèªç‹€æ…‹
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ›´æ–°ç¢ºèªè³‡æ–™ä¸¦é€šçŸ¥ä¸Šå±¤
   */
  void _updateConfirmationData();

  @override
  void dispose();
}
```

#### 3.5.2 BiometricAuthButton Widget
```dart
/**
 * 19. å°æ‡‰ 3.3.1ï¼šç”Ÿç‰©è­˜åˆ¥é©—è­‰æŒ‰éˆ•Widget
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description ç”Ÿç‰©è­˜åˆ¥é©—è­‰æŒ‰éˆ•ï¼Œæ”¯æ´æŒ‡ç´‹å’Œè‡‰éƒ¨è­˜åˆ¥
 */
class BiometricAuthButton extends StatefulWidget {
  final Function(BiometricAuthResult) onAuthCompleted;
  final bool isEnabled;

  const BiometricAuthButton({
    Key? key,
    required this.onAuthCompleted,
    this.isEnabled = true,
  });

  @override
  State<BiometricAuthButton> createState();
}

class _BiometricAuthButtonState extends State<BiometricAuthButton> 
    with SingleTickerProviderStateMixin {
  late AnimationController _animationController;
  late Animation<double> _pulseAnimation;
  bool _isAuthenticating = false;

  @override
  void initState();

  @override
  Widget build(BuildContext context);

  /**
   * 20. å°æ‡‰ 3.3.1ï¼šåŸ·è¡Œç”Ÿç‰©è­˜åˆ¥é©—è­‰
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description åŸ·è¡Œç”Ÿç‰©è­˜åˆ¥é©—è­‰æµç¨‹
   */
  Future<void> _performBiometricAuth();

  /**
   * 21. å°æ‡‰ 3.3.1ï¼šæª¢æŸ¥ç”Ÿç‰©è­˜åˆ¥å¯ç”¨æ€§
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æª¢æŸ¥è£ç½®æ˜¯å¦æ”¯æ´ç”Ÿç‰©è­˜åˆ¥
   */
  Future<bool> _checkBiometricAvailability();

  @override
  void dispose();
}
```

### 3.6 åˆªé™¤é€²åº¦å±¤Widget

#### 3.6.1 DeletionProgressDialog Widget
```dart
/**
 * 22. å°æ‡‰ 3.4ï¼šåˆªé™¤é€²åº¦å°è©±æ¡†Widget
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description åˆªé™¤é€²åº¦é¡¯ç¤ºå°è©±æ¡†ï¼Œæ”¯æ´æ­¥é©ŸåŒ–é€²åº¦å±•ç¤º
 */
class DeletionProgressDialog extends StatefulWidget {
  final DeletionProgress progress;
  final VoidCallback? onCancel;

  const DeletionProgressDialog({
    Key? key,
    required this.progress,
    this.onCancel,
  });

  @override
  State<DeletionProgressDialog> createState();
}

class _DeletionProgressDialogState extends State<DeletionProgressDialog> 
    with SingleTickerProviderStateMixin {
  late AnimationController _animationController;
  late Animation<double> _progressAnimation;

  @override
  void initState();

  @override
  Widget build(BuildContext context);

  /**
   * 23. å°æ‡‰ 3.4ï¼šå»ºç«‹é€²åº¦æ­¥é©Ÿæ¸…å–®
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ ¹æ“šåˆªé™¤é€²åº¦å»ºç«‹æ­¥é©Ÿæ¸…å–®
   */
  List<Widget> _buildProgressSteps();

  /**
   * 24. å°æ‡‰ 3.4ï¼šå–å¾—æ­¥é©Ÿç‹€æ…‹åœ–ç¤º
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ ¹æ“šæ­¥é©Ÿç‹€æ…‹è¿”å›å°æ‡‰åœ–ç¤º
   */
  Widget _getStepStatusIcon(StepStatus status);

  @override
  void dispose();
}
```

---

## 4.0 ç‹€æ…‹ç®¡ç†æ¶æ§‹

### 4.1 DeleteLedgerProvider ç‹€æ…‹ç®¡ç†å™¨
```dart
/**
 * 25. å°æ‡‰ 4.1ï¼šåˆªé™¤å¸³æœ¬ç‹€æ…‹ç®¡ç†å™¨
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description ç®¡ç†åˆªé™¤å¸³æœ¬é é¢çš„ç‹€æ…‹ï¼Œæ”¯æ´å®‰å…¨åˆªé™¤æµç¨‹å’Œå››æ¨¡å¼å·®ç•°åŒ–
 */
class DeleteLedgerProvider extends ChangeNotifier {
  // ç‹€æ…‹å±¬æ€§
  DeletePageState _pageState = DeletePageState.initial;
  bool _isLoading = false;
  bool _isDeleting = false;
  bool _isBackingUp = false;
  String? _errorMessage;
  DeleteErrorType? _errorType;
  UserMode? _userMode;

  // å¸³æœ¬è³‡æ–™
  LedgerModel? _ledger;
  DeletionImpact? _impact;
  List<DependencyData> _dependencies = [];

  // å‚™ä»½è¨­å®š
  BackupSettings _backupSettings = BackupSettings.default();
  BackupProgress? _backupProgress;
  BackupResult? _backupResult;

  // ç¢ºèªè¼¸å…¥
  ConfirmationData _confirmationData = ConfirmationData.empty();
  bool _isConfirmationValid = false;

  // åˆªé™¤é€²åº¦
  DeletionProgress _deletionProgress = DeletionProgress.initial();
  DeletionResult? _deletionResult;

  // Getters
  DeletePageState get pageState;
  bool get isLoading;
  bool get isDeleting;
  bool get isBackingUp;
  String? get errorMessage;
  DeleteErrorType? get errorType;
  UserMode? get userMode;
  LedgerModel? get ledger;
  DeletionImpact? get impact;
  List<DependencyData> get dependencies;
  BackupSettings get backupSettings;
  BackupProgress? get backupProgress;
  BackupResult? get backupResult;
  ConfirmationData get confirmationData;
  bool get isConfirmationValid;
  DeletionProgress get deletionProgress;
  DeletionResult? get deletionResult;

  /**
   * 26. å°æ‡‰ 4.1ï¼šåˆå§‹åŒ–åˆªé™¤é é¢
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description åˆå§‹åŒ–åˆªé™¤é é¢ç‹€æ…‹å’Œè¼‰å…¥å¸³æœ¬è³‡è¨Š
   */
  Future<void> initializeDeletePage(String ledgerId, UserMode? mode);

  /**
   * 27. å°æ‡‰ 4.1ï¼šè¨­å®šä½¿ç”¨è€…æ¨¡å¼
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description è¨­å®šä½¿ç”¨è€…æ¨¡å¼ä¸¦æ›´æ–°å¯ç”¨åˆªé™¤åŠŸèƒ½
   */
  void setUserMode(UserMode mode);

  /**
   * 28. å°æ‡‰ 4.1ï¼šè¼‰å…¥å¸³æœ¬è³‡è¨Š
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description è¼‰å…¥å¾…åˆªé™¤å¸³æœ¬çš„è©³ç´°è³‡è¨Š
   */
  Future<void> loadLedgerInfo(String ledgerId);

  /**
   * 29. å°æ‡‰ 4.1ï¼šåˆ†æåˆªé™¤å½±éŸ¿
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description åˆ†æåˆªé™¤å¸³æœ¬çš„å½±éŸ¿ç¯„åœå’Œé¢¨éšª
   */
  Future<void> analyzeDeletionImpact(String ledgerId);

  /**
   * 30. å°æ‡‰ 4.1ï¼šæª¢æŸ¥ä¾è³´é—œä¿‚
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æª¢æŸ¥å¸³æœ¬ç›¸é—œä¾è³´é—œä¿‚
   */
  Future<void> checkDependencies(String ledgerId);

  /**
   * 31. å°æ‡‰ 4.1ï¼šæ›´æ–°å‚™ä»½è¨­å®š
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ›´æ–°è³‡æ–™å‚™ä»½è¨­å®š
   */
  void updateBackupSettings(BackupSettings settings);

  /**
   * 32. å°æ‡‰ 4.1ï¼šåŸ·è¡Œè³‡æ–™å‚™ä»½
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description åŸ·è¡Œè³‡æ–™å‚™ä»½æ“ä½œ
   */
  Future<void> createBackup(String ledgerId);

  /**
   * 33. å°æ‡‰ 4.1ï¼šæ›´æ–°ç¢ºèªè¼¸å…¥
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ›´æ–°åˆªé™¤ç¢ºèªè¼¸å…¥è³‡æ–™
   */
  void updateConfirmationData(ConfirmationData data);

  /**
   * 34. å°æ‡‰ 4.1ï¼šé©—è­‰åˆªé™¤æ¬Šé™
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description é©—è­‰ä½¿ç”¨è€…åˆªé™¤æ¬Šé™
   */
  Future<bool> validateDeletionPermission(String ledgerId);

  /**
   * 35. å°æ‡‰ 4.1ï¼šåŸ·è¡Œå¸³æœ¬åˆªé™¤
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description åŸ·è¡Œå¸³æœ¬åˆªé™¤æ“ä½œ
   */
  Future<void> deleteLedger(String ledgerId);

  /**
   * 36. å°æ‡‰ 4.1ï¼šå–æ¶ˆåˆªé™¤æ“ä½œ
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description å–æ¶ˆé€²è¡Œä¸­çš„åˆªé™¤æ“ä½œ
   */
  Future<void> cancelDeletion();

  /**
   * 37. å°æ‡‰ 4.1ï¼šè™•ç†åˆªé™¤å®Œæˆ
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description è™•ç†åˆªé™¤å®Œæˆå¾Œçš„æ¸…ç†å·¥ä½œ
   */
  void handleDeletionComplete(DeletionResult result);

  /**
   * 38. å°æ‡‰ 4.1ï¼šè¨­å®šè¼‰å…¥ç‹€æ…‹
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ›´æ–°è¼‰å…¥ç‹€æ…‹ä¸¦é€šçŸ¥ç›£è½è€…
   */
  void _setLoading(bool loading);

  /**
   * 39. å°æ‡‰ 4.1ï¼šè¨­å®šé é¢ç‹€æ…‹
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ›´æ–°é é¢ç‹€æ…‹ä¸¦é€šçŸ¥ç›£è½è€…
   */
  void _setPageState(DeletePageState state);

  /**
   * 40. å°æ‡‰ 4.1ï¼šè¨­å®šéŒ¯èª¤è¨Šæ¯
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description è¨­å®šéŒ¯èª¤è¨Šæ¯å’ŒéŒ¯èª¤é¡å‹
   */
  void _setError(String message, DeleteErrorType type, dynamic error);

  /**
   * 41. å°æ‡‰ 4.1ï¼šæ¸…é™¤éŒ¯èª¤ç‹€æ…‹
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ¸…é™¤éŒ¯èª¤ç‹€æ…‹ä¸¦æ±ºå®šå¾ŒçºŒå‹•ä½œ
   */
  void clearError();
}
```

### 4.2 ç‹€æ…‹æšèˆ‰å®šç¾©
```dart
/**
 * 42. å°æ‡‰ 4.2ï¼šåˆªé™¤é é¢ç‹€æ…‹æšèˆ‰
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description å®šç¾©åˆªé™¤é é¢çš„å„ç¨®ç‹€æ…‹
 */
enum DeletePageState {
  initial,         // åˆå§‹ç‹€æ…‹
  loading,         // è¼‰å…¥ä¸­
  analyzing,       // åˆ†æä¸­
  ready,          // æº–å‚™å°±ç·’
  backingUp,      // å‚™ä»½ä¸­
  confirming,     // ç¢ºèªä¸­
  deleting,       // åˆªé™¤ä¸­
  completed,      // å®Œæˆ
  error,          // éŒ¯èª¤ç‹€æ…‹
}

/**
 * 43. å°æ‡‰ 4.2ï¼šå±éšªç­‰ç´šæšèˆ‰
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description åˆªé™¤æ“ä½œå±éšªç­‰ç´š
 */
enum DangerLevel {
  low,            // ä½é¢¨éšª
  medium,         // ä¸­é¢¨éšª
  high,           // é«˜é¢¨éšª
  critical,       // å±éšª
}

/**
 * 44. å°æ‡‰ 4.2ï¼šå‚™ä»½æ ¼å¼æšèˆ‰
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description æ”¯æ´çš„å‚™ä»½æ ¼å¼
 */
enum BackupFormat {
  json,           // JSONæ ¼å¼
  csv,            // CSVæ ¼å¼
  excel,          // Excelæ ¼å¼
  pdf,            // PDFæ ¼å¼
  encrypted,      // åŠ å¯†æ ¼å¼
}

/**
 * 45. å°æ‡‰ 4.2ï¼šåˆªé™¤éŒ¯èª¤é¡å‹æšèˆ‰
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description åˆªé™¤éŒ¯èª¤é¡å‹åˆ†é¡
 */
enum DeleteErrorType {
  networkError,        // ç¶²è·¯éŒ¯èª¤
  permissionDenied,    // æ¬Šé™è¢«æ‹’
  dependencyExists,    // å­˜åœ¨ä¾è³´
  backupFailed,        // å‚™ä»½å¤±æ•—
  confirmationFailed,  // ç¢ºèªå¤±æ•—
  deletionFailed,      // åˆªé™¤å¤±æ•—
  unknown,            // æœªçŸ¥éŒ¯èª¤
}
```

---

## 5.0 APIæ•´åˆè¨­è¨ˆ

### 5.1 DeleteLedgerApiService APIæœå‹™
```dart
/**
 * 46. å°æ‡‰ 5.1ï¼šåˆªé™¤å¸³æœ¬APIæœå‹™
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description è™•ç†åˆªé™¤å¸³æœ¬ç›¸é—œçš„APIèª¿ç”¨ï¼Œæ”¯æ´å®‰å…¨åˆªé™¤æµç¨‹
 */
class DeleteLedgerApiService {
  final ApiClient _apiClient = ApiClient();

  /**
   * 47. å°æ‡‰ 5.1ï¼šæª¢æŸ¥åˆªé™¤è³‡æ ¼
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æª¢æŸ¥ä½¿ç”¨è€…æ˜¯å¦æœ‰æ¬Šé™åˆªé™¤å¸³æœ¬
   */
  Future<ApiResponse<DeletionEligibility>> checkDeletionEligibility(
    String ledgerId
  );

  /**
   * 48. å°æ‡‰ 5.1ï¼šåˆ†æåˆªé™¤å½±éŸ¿
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description åˆ†æåˆªé™¤å¸³æœ¬çš„å½±éŸ¿ç¯„åœ
   */
  Future<ApiResponse<DeletionImpact>> analyzeDeletionImpact(
    String ledgerId,
    DeletionAnalysisRequest request
  );

  /**
   * 49. å°æ‡‰ 5.1ï¼šå»ºç«‹åˆªé™¤å‚™ä»½
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description å»ºç«‹å¸³æœ¬è³‡æ–™å‚™ä»½
   */
  Future<ApiResponse<BackupResult>> createDeletionBackup(
    String ledgerId,
    BackupRequest request
  );

  /**
   * 50. å°æ‡‰ 5.1ï¼šåŸ·è¡Œå¸³æœ¬åˆªé™¤
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description åŸ·è¡Œå¸³æœ¬åˆªé™¤æ“ä½œ
   */
  Future<ApiResponse<DeletionResult>> deleteLedger(
    String ledgerId,
    DeletionRequest request
  );

  /**
   * 51. å°æ‡‰ 5.1ï¼šæ¢å¾©å·²åˆªé™¤å¸³æœ¬
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ¢å¾©å·²åˆªé™¤çš„å¸³æœ¬
   */
  Future<ApiResponse<RecoveryResult>> recoverLedger(
    String ledgerId,
    RecoveryRequest request
  );

  /**
   * 52. å°æ‡‰ 5.1ï¼šè™•ç†DioéŒ¯èª¤
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description è™•ç†DioéŒ¯èª¤ä¸¦è½‰æ›ç‚ºä½¿ç”¨è€…å‹å–„è¨Šæ¯
   */
  String _handleDioError(DioError error);
}
```

### 5.2 è³‡æ–™æ¨¡å‹å®šç¾©
```dart
/**
 * 53. å°æ‡‰ 5.2ï¼šåˆªé™¤è«‹æ±‚æ¨¡å‹
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description åˆªé™¤å¸³æœ¬è«‹æ±‚è³‡æ–™çµæ§‹
 */
class DeletionRequest {
  final String ledgerId;
  final ConfirmationData confirmation;
  final BackupSettings? backupSettings;
  final NotificationSettings? notificationSettings;
  final bool forceDeletion;

  DeletionRequest({
    required this.ledgerId,
    required this.confirmation,
    this.backupSettings,
    this.notificationSettings,
    this.forceDeletion = false,
  });

  Map<String, dynamic> toJson();
}

/**
 * 54. å°æ‡‰ 5.2ï¼šç¢ºèªè³‡æ–™æ¨¡å‹
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description åˆªé™¤ç¢ºèªè³‡æ–™çµæ§‹
 */
class ConfirmationData {
  final String ledgerNameConfirm;
  final String passwordConfirm;
  final String confirmPhrase;
  final bool understandConsequences;
  final BiometricAuthResult? biometricAuth;

  ConfirmationData({
    required this.ledgerNameConfirm,
    required this.passwordConfirm,
    required this.confirmPhrase,
    required this.understandConsequences,
    this.biometricAuth,
  });

  factory ConfirmationData.empty();
  Map<String, dynamic> toJson();
  bool get isValid;
}

/**
 * 55. å°æ‡‰ 5.2ï¼šåˆªé™¤å½±éŸ¿æ¨¡å‹
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description åˆªé™¤å½±éŸ¿åˆ†æè³‡æ–™çµæ§‹
 */
class DeletionImpact {
  final DangerLevel riskLevel;
  final int affectedMembers;
  final int totalEntries;
  final int attachmentCount;
  final double dataSize;
  final List<String> warnings;
  final List<DependencyData> dependencies;
  final bool canRecover;
  final DateTime? recoveryDeadline;

  DeletionImpact({
    required this.riskLevel,
    required this.affectedMembers,
    required this.totalEntries,
    required this.attachmentCount,
    required this.dataSize,
    required this.warnings,
    required this.dependencies,
    required this.canRecover,
    this.recoveryDeadline,
  });

  factory DeletionImpact.fromJson(Map<String, dynamic> json);
  Map<String, dynamic> toJson();
}
```

---

## 6.0 å°èˆªè·¯ç”±è¨­è¨ˆ

### 6.1 è·¯ç”±é…ç½®
```dart
/**
 * 56. å°æ‡‰ 6.1ï¼šåˆªé™¤å¸³æœ¬é é¢è·¯ç”±é…ç½®
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description å®šç¾©åˆªé™¤å¸³æœ¬é é¢çš„è·¯ç”±è¦å‰‡èˆ‡å°èˆªé‚è¼¯
 */
class DeleteLedgerRoutes {
  static const String deleteLedger = '/ledger/:ledgerId/delete';
  static const String confirmDeletion = '/delete/confirm/:ledgerId';
  static const String deletionResult = '/delete/result/:ledgerId';
  static const String recovery = '/ledger/:ledgerId/recovery';

  /**
   * 57. å°æ‡‰ 6.1ï¼šå–å¾—åˆªé™¤é é¢è·¯ç”±
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description å»ºç«‹åˆªé™¤é é¢çš„GoRouteé…ç½®
   */
  static GoRoute getDeleteLedgerRoute();
}

/**
 * 58. å°æ‡‰ 6.1ï¼šåˆªé™¤å°èˆªæœå‹™
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description è™•ç†åˆªé™¤ç›¸é—œçš„å°èˆªé‚è¼¯
 */
class DeleteNavigationService {
  static final GoRouter _router;
  static GoRouter get router;

  /**
   * 59. å°æ‡‰ 6.1ï¼šå°èˆªåˆ°ç¢ºèªåˆªé™¤
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description å°èˆªåˆ°åˆªé™¤ç¢ºèªé é¢
   */
  Future<void> navigateToConfirmDeletion(String ledgerId);

  /**
   * 60. å°æ‡‰ 6.1ï¼šå°èˆªåˆ°åˆªé™¤çµæœ
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description å°èˆªåˆ°åˆªé™¤çµæœé é¢
   */
  Future<void> navigateToDeletionResult(String ledgerId, DeletionResult result);

  /**
   * 61. å°æ‡‰ 6.1ï¼šå°èˆªåˆ°æ¢å¾©é é¢
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description å°èˆªåˆ°å¸³æœ¬æ¢å¾©é é¢
   */
  Future<void> navigateToRecovery(String ledgerId);

  /**
   * 62. å°æ‡‰ 6.1ï¼šè¿”å›å¸³æœ¬æ¸…å–®
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description è¿”å›åˆ°å¸³æœ¬æ¸…å–®é é¢
   */
  void navigateBackToLedgerList();
}
```

---

## 7.0 éŸ¿æ‡‰å¼è¨­è¨ˆ

### 7.1 éŸ¿æ‡‰å¼è¼”åŠ©å·¥å…·
```dart
/**
 * 63. å°æ‡‰ 7.1ï¼šåˆªé™¤å¸³æœ¬é é¢éŸ¿æ‡‰å¼è¨­è¨ˆè¼”åŠ©å·¥å…·
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description éµå¾ª9005æ–‡ä»¶çš„éŸ¿æ‡‰å¼è¨­è¨ˆè¦ç¯„ï¼Œæä¾›åˆªé™¤é é¢å°ˆç”¨çš„ä½ˆå±€ç®¡ç†
 */
class DeleteLedgerResponsiveHelper {
  final BuildContext context;
  late final MediaQueryData _mediaQuery;
  late final Size _screenSize;

  DeleteLedgerResponsiveHelper.of(BuildContext context);

  // æ–·é»åˆ¤æ–·å±¬æ€§ï¼ˆ9005è¦ç¯„ï¼‰
  bool get isMobile;
  bool get isTablet;
  bool get isSmallDesktop;
  bool get isLargeDesktop;
  DeviceType get deviceType;

  // åˆªé™¤é é¢å°ˆç”¨å°ºå¯¸å±¬æ€§
  double get dialogWidth;
  double get dialogHeight;
  double get confirmationCardHeight;
  EdgeInsets get sectionPadding;
  double get buttonHeight;
  double get warningBannerHeight;

  /**
   * 64. å°æ‡‰ 7.1ï¼šå–å¾—å››æ¨¡å¼å°è©±æ¡†å°ºå¯¸
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼å’Œè£ç½®é¡å‹è¿”å›é©ç•¶å°è©±æ¡†å°ºå¯¸
   */
  Size getDialogSizeForMode(UserMode? mode);

  /**
   * 65. å°æ‡‰ 7.1ï¼šå–å¾—æ¨¡å¼å°æ‡‰ä½ˆå±€é…ç½®
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼è¿”å›é©ç•¶ä½ˆå±€é…ç½®
   */
  DeleteLayoutConfig getLayoutConfigForMode(UserMode? mode);
}
```

---

## 8.0 ç„¡éšœç¤™åŠŸèƒ½

### 8.1 èªæ„åŒ–æ”¯æ´
```dart
/**
 * 66. å°æ‡‰ 8.1ï¼šåˆªé™¤å¸³æœ¬é é¢ç„¡éšœç¤™èªæ„åŒ–WidgetåŒ…è£å™¨
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description æä¾›WCAG 2.1 AAæ¨™æº–çš„å®Œæ•´ç„¡éšœç¤™æ”¯æ´ï¼ˆ9005è¦ç¯„ï¼‰
 */
class DeleteAccessibilityWrapper {

  /**
   * 67. å°æ‡‰ 8.1ï¼šç‚ºå±éšªæ“ä½œæä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description ç‚ºå±éšªæ“ä½œå’Œè­¦å‘Šæ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapDangerousAction(Widget child, DangerLevel level, String description);

  /**
   * 68. å°æ‡‰ 8.1ï¼šç‚ºç¢ºèªè¼¸å…¥æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description ç‚ºç¢ºèªè¼¸å…¥æ¡†æ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapConfirmationField(Widget child, String fieldType, bool isValid);

  /**
   * 69. å°æ‡‰ 8.1ï¼šç‚ºé€²åº¦æŒ‡ç¤ºå™¨æä¾›èªæ„åŒ–æ¨™ç±¤
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description ç‚ºé€²åº¦æŒ‡ç¤ºå™¨æ·»åŠ é©ç•¶çš„èªæ„åŒ–æ¨™ç±¤
   */
  static Widget wrapProgressIndicator(Widget child, String currentStep, int totalSteps);
}
```

---

## 9.0 æ•ˆèƒ½æœ€ä½³åŒ–

### 9.1 Widgetå¿«å–ç­–ç•¥
```dart
/**
 * 70. å°æ‡‰ 9.1ï¼šåˆªé™¤å¸³æœ¬é é¢Widgetå¿«å–ç®¡ç†å™¨
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description å„ªåŒ–åˆªé™¤é é¢Widgeté‡å»ºæ•ˆèƒ½ï¼Œæ¸›å°‘ä¸å¿…è¦çš„é‡å»º
 */
class DeleteLedgerWidgetCache {
  static final Map<String, Widget> _cache = {};
  static final Map<String, DateTime> _cacheTimestamps = {};
  static const Duration _cacheValidDuration = Duration(minutes: 5);

  /**
   * 71. å°æ‡‰ 9.1ï¼šå–å¾—å¿«å–çš„å°è©±æ¡†æˆ–å»ºç«‹æ–°çš„
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description å¾å¿«å–ä¸­ç²å–å°è©±æ¡†Widgetæˆ–å‰µå»ºæ–°çš„
   */
  static Widget getDialogOrCreate(
    String key, 
    DialogType type, 
    Widget Function() creator
  );

  /**
   * 72. å°æ‡‰ 9.1ï¼šæ¸…é™¤åˆªé™¤é é¢å¿«å–
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description æ¸…é™¤åˆªé™¤é é¢ç›¸é—œçš„Widgetå¿«å–
   */
  static void clearDeleteCache();
}

/**
 * 73. å°æ‡‰ 9.1ï¼šåˆªé™¤æ“ä½œå¿«å–ç®¡ç†å™¨
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description ç®¡ç†åˆªé™¤æ“ä½œçš„å¿«å–ç­–ç•¥
 */
class DeleteOperationCache {
  static final Map<String, dynamic> _operationCache = {};
  static final Map<String, DateTime> _cacheTimestamps = {};
  static const Duration _operationValidDuration = Duration(minutes: 1);

  /**
   * 74. å°æ‡‰ 9.1ï¼šå¿«å–åˆªé™¤æ“ä½œè³‡æ–™
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description å¿«å–åˆªé™¤æ“ä½œè³‡æ–™ä»¥é˜²é‡è¤‡æ“ä½œ
   */
  static void cacheOperation(String key, dynamic data);

  /**
   * 75. å°æ‡‰ 9.1ï¼šå–å¾—å¿«å–çš„æ“ä½œè³‡æ–™
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description å¾å¿«å–ä¸­ç²å–æ“ä½œè³‡æ–™
   */
  static T? getCachedOperation<T>(String key);
}
```

---

## 10.0 éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

### 10.1 çµ±ä¸€éŒ¯èª¤è™•ç†
```dart
/**
 * 76. å°æ‡‰ 10.1ï¼šåˆªé™¤å¸³æœ¬é é¢éŒ¯èª¤è™•ç†å™¨
 * @version 2025-01-26-V1.0.0
 * @date 2025-01-26 19:00:00
 * @description æ ¹æ“šP025è¦ç¯„çš„å…·é«”éŒ¯èª¤æƒ…å¢ƒé€²è¡Œè©³ç´°è™•ç†
 */
class DeleteLedgerErrorHandler {

  /**
   * 77. å°æ‡‰ 10.1ï¼šè™•ç†åˆªé™¤æ¬Šé™éŒ¯èª¤
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description è™•ç†åˆªé™¤æ¬Šé™ä¸è¶³éŒ¯èª¤ï¼ˆP025è¦ç¯„ï¼‰
   */
  static String handlePermissionError(dynamic error);

  /**
   * 78. å°æ‡‰ 10.1ï¼šè™•ç†ä¾è³´é—œä¿‚éŒ¯èª¤
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description è™•ç†å¸³æœ¬ä¾è³´é—œä¿‚éŒ¯èª¤ï¼ˆP025è¦ç¯„ï¼‰
   */
  static String handleDependencyError(dynamic error, List<DependencyData> dependencies);

  /**
   * 79. å°æ‡‰ 10.1ï¼šè™•ç†å‚™ä»½å¤±æ•—éŒ¯èª¤
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description è™•ç†è³‡æ–™å‚™ä»½å¤±æ•—éŒ¯èª¤ï¼ˆP025è¦ç¯„ï¼‰
   */
  static String handleBackupError(dynamic error, BackupFormat format);

  /**
   * 80. å°æ‡‰ 10.1ï¼šé¡¯ç¤ºéŒ¯èª¤å°è©±æ¡†
   * @version 2025-01-26-V1.0.0
   * @date 2025-01-26 19:00:00
   * @description é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯å°è©±æ¡†ï¼ˆP025è¦ç¯„ï¼‰
   */
  static Future<void> showErrorDialog(
    BuildContext context, 
    String message, 
    DeleteErrorType errorType,
    {VoidCallback? onRetry, VoidCallback? onCancel}
  );
}
```

---

## éµå¾ª0055è¨­è¨ˆåŸå‰‡

### éšå±¤æ¶æ§‹å°æ‡‰
- æœ¬TDDæ–‡ä»¶åŸºæ–¼P025_åˆªé™¤å¸³æœ¬é é¢_SRS.mdçš„éœ€æ±‚è¦æ ¼
- èˆ‡9005. Flutter_Presentation layer.mdçš„ç”¢å“è¦æ ¼ä¿æŒä¸€è‡´
- æ‰€æœ‰å‡½æ•¸ç¯€é»ç·¨è™Ÿå°æ‡‰ä¸Šå±¤æ–‡ä»¶çš„åŠŸèƒ½æ¢ç›®

### è¨­è¨ˆåŸå‰‡éµå¾ª
1. **éšå±¤æ¶æ§‹é‚è¼¯**: åš´æ ¼åŸºæ–¼SRSæ–‡ä»¶å®šç¾©çš„åŠŸèƒ½æ¢ç›®è¨­è¨ˆ
2. **åŒå±¤ç´šä¾è³´é—œä¿‚**: è€ƒé‡èˆ‡å¸³æœ¬æ¸…å–®é é¢å’Œå¸³æœ¬è¨­å®šçš„ä¾è³´é—œä¿‚
3. **ä»£ç¢¼ç¯€é»ç·¨è™Ÿ**: æ¡ç”¨ä¸åŠ å‰ç¶´çš„ç¯€é»ç·¨è™Ÿæ ¼å¼ï¼ˆå¦‚2.1ã€3.2ï¼‰
4. **å‘½åä¸€è‡´æ€§**: ä¿æŒèˆ‡ä½¿ç”¨è€…ä»‹é¢æ“ä½œæµç¨‹çš„åç¨±åŒæ­¥
5. **å¯è®€æ€§è¨­è¨ˆ**: æ¡ç”¨æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œéµå¾ªä½è€¦åˆã€é«˜å…§èšåŸå‰‡

## æ–‡ä»¶ç¶­è­·è¨˜éŒ„

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹è€… | ä¿®æ”¹å…§å®¹ |
|------|------|--------|----------|
| **v1.0.0** | **2025-01-26 19:00:00 +08:00** | **LCAS SA Team** | **åˆç‰ˆå»ºç«‹ï¼šå®Œæ•´P025åˆªé™¤å¸³æœ¬é é¢TDDè¦æ ¼ï¼Œæ”¯æ´å®‰å…¨åˆªé™¤æµç¨‹ï¼ˆå¤šé‡ç¢ºèªã€è³‡æ–™å‚™ä»½ã€æˆå“¡é€šçŸ¥ã€ä¾è³´æª¢æŸ¥ï¼‰ï¼Œå¯¦ä½œè»Ÿåˆªé™¤å’Œç¡¬åˆªé™¤æ©Ÿåˆ¶ï¼Œå®Œæ•´éŒ¯èª¤è™•ç†æ©Ÿåˆ¶ï¼Œéµå¾ª0055è¨­è¨ˆåŸå‰‡ï¼Œå°æ‡‰P025 SRSè¦æ ¼** |

---

## å‚™è¨»

- **ç´”å‡½æ•¸å®£å‘Š**: å®Œå…¨ç§»é™¤æ‰€æœ‰å¯¦ä½œä»£ç¢¼ï¼Œåƒ…ä¿ç•™å‡½æ•¸åç¨±ã€åƒæ•¸å®šç¾©å’Œè¨»è§£
- **å®‰å…¨åˆªé™¤æ”¯æ´**: æ”¯æ´å¤šé‡ç¢ºèªã€è³‡æ–™å‚™ä»½ã€æˆå“¡é€šçŸ¥ã€ä¾è³´æª¢æŸ¥ç­‰å®Œæ•´å®‰å…¨åˆªé™¤åŠŸèƒ½
- **å››æ¨¡å¼å·®ç•°åŒ–**: æ ¹æ“šä½¿ç”¨è€…æ¨¡å¼æä¾›ä¸åŒçš„åˆªé™¤ç•Œé¢è¤‡é›œåº¦å’Œå®‰å…¨é©—è­‰ç´šåˆ¥
- **æ¢å¾©æ©Ÿåˆ¶**: å®Œæ•´çš„è»Ÿåˆªé™¤å’Œæ¢å¾©æ©Ÿåˆ¶ï¼Œç¢ºä¿èª¤åˆªä¿è­·
- **å®Œæ•´æŠ€è¡“æ¶æ§‹**: Widgetåˆ†å±¤ã€ç‹€æ…‹ç®¡ç†ã€APIæ•´åˆã€éŸ¿æ‡‰å¼è¨­è¨ˆã€ç„¡éšœç¤™æ”¯æ´ã€æ•ˆèƒ½æœ€ä½³åŒ–
- **è¦ç¯„å®Œå…¨å°é½Š**: èˆ‡0055ã€P025ã€9005æ–‡ä»¶å®Œå…¨ä¸€è‡´
- **ç¯€é»ç·¨è™Ÿæ¨™æº–åŒ–**: çµ±ä¸€ç·¨è™Ÿ01-80ï¼Œéµå¾ª0055è¦ç¯„æ ¼å¼
- **ç‰ˆæœ¬çµ±ä¸€å‡ç´š**: æ‰€æœ‰çµ„ä»¶ç‰ˆæœ¬çµ±ä¸€ç‚ºv1.0.0
