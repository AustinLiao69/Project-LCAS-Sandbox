

# 8801. TDD_認證功能群組_v2.5.0

## 文件資訊
- **文件標題**: 認證功能群組技術設計文件
- **文件版本**: v2.5.0
- **創建日期**: 2025-08-11 14:00:00 +08:00 (台灣時間)
- **創建者**: LCAS SA Team
- **最後更新**: 2025-01-20 19:00:00 +08:00 (台灣時間)
- **對應需求文件**: 8701. 認證流程群組_SRS.md
- **模組代碼**: AUTH (Authentication)

---

## 📑 目次 (Table of Contents)

1. 技術架構概述
   - 1.1 模組定位
   - 1.2 技術堆疊
   - 1.3 模組架構

2. 函數清單
   - 2.1 完整函數索引表
   - 2.2 函數分層架構

3. 核心函數設計
   - 3.1 歡迎頁面UI層函數
   - 3.2 登入頁面UI層函數
   - 3.3 註冊頁面UI層函數
   - 3.4 密碼重設UI層函數
   - 3.5 登出確認UI層函數

4. 四模式UI差異化設計
   - 4.1 精準控制者模式UI實作
   - 4.2 紀錄習慣者模式UI實作
   - 4.3 轉型挑戰者模式UI實作
   - 4.4 潛在覺醒者模式UI實作

5. Widget架構設計
   - 5.1 頁面Widget結構
   - 5.2 共用Widget元件
   - 5.3 表單Widget組件

6. API調用映射
   - 6.1 F001-F005 API對應關係
   - 6.2 API調用介面設計
   - 6.3 錯誤處理UI回饋

7. 狀態管理設計
   - 7.1 UI狀態管理
   - 7.2 表單狀態管理
   - 7.3 導航狀態管理

8. 測試策略
   - 8.1 Widget測試覆蓋
   - 8.2 UI互動測試
   - 8.3 四模式體驗測試

9. 文件維護記錄

---

## 1.0 技術架構概述

### 1.1 模組定位
認證功能群組作為 LCAS 2.0 Flutter應用程式的**純Presentation Layer實作**，專注於UI Widget建構、視覺呈現、使用者互動回饋，以及四模式差異化介面實現。本模組嚴格遵循Presentation Layer職責界限：
- ✅ **UI Widget建構**：負責所有認證相關頁面的Widget建構與佈局
- ✅ **視覺呈現**：四模式差異化主題、動畫、視覺回饋
- ✅ **使用者互動**：表單輸入、按鈕點擊、導航操作的UI處理
- ❌ **業務邏輯**：所有認證邏輯、驗證規則由Application Layer處理
- ❌ **資料存取**：所有API調用、狀態管理由AP Layer提供
- ❌ **跨層服務**：不涉及安全機制、Token管理等跨層職責

### 1.2 技術堆疊
- **UI框架**: Flutter/Dart Widget系統
- **狀態管理**: Provider + ChangeNotifier (僅UI狀態)
- **表單處理**: Flutter Form + TextFormField
- **導航管理**: Flutter Navigator 2.0
- **主題管理**: Flutter ThemeData
- **國際化**: flutter_localizations
- **動畫**: flutter/animation

### 1.3 模組架構
```dart
/**
 * AUTH_認證UI群組_2.4.0
 * @module AUTH-UI模組
 * @description Flutter認證介面群組 - 純Presentation Layer實作
 * @update 2025-01-20: 架構職責明確化，移除跨層介面與複雜狀態管理
 */
```

---

## 2.0 函數清單

### 2.1 完整函數索引表

| # | 函數名稱 | 版本 | 所屬層級 | 功能描述 | 對應API |
|---|----------|------|----------|----------|---------|
| 01 | AUTH_buildWelcomePage | V2.5.0 | 歡迎頁面UI | 建構歡迎頁面Widget | F004 |
| 02 | AUTH_buildModeSelector | V2.5.0 | 歡迎頁面UI | 建構模式選擇Widget | - |
| 03 | AUTH_buildLoginPage | V2.5.0 | 登入頁面UI | 建構登入頁面Widget | F002 |
| 04 | AUTH_buildOAuthButtons | V2.5.0 | 登入頁面UI | 建構OAuth登入按鈕 | F002 |
| 05 | AUTH_buildEmailLoginForm | V2.5.0 | 登入頁面UI | 建構Email登入表單 | F002 |
| 06 | AUTH_buildRegisterPage | V2.5.0 | 註冊頁面UI | 建構註冊頁面Widget | F001 |
| 07 | AUTH_buildRegistrationForm | V2.5.0 | 註冊頁面UI | 建構註冊表單Widget | F001 |
| 08 | AUTH_buildPasswordResetPage | V2.5.0 | 密碼重設UI | 建構密碼重設頁面 | F005 |
| 09 | AUTH_buildResetSteps | V2.5.0 | 密碼重設UI | 建構重設步驟Widget | F005 |
| 10 | AUTH_buildLogoutPage | V2.5.0 | 登出確認UI | 建構登出確認頁面 | F003 |
| 11 | AUTH_buildControllerModeUI | V2.5.0 | 四模式UI | 建構精準控制者介面 | - |
| 12 | AUTH_buildLoggerModeUI | V2.5.0 | 四模式UI | 建構紀錄習慣者介面 | - |
| 13 | AUTH_buildStruggleModeUI | V2.5.0 | 四模式UI | 建構轉型挑戰者介面 | - |
| 14 | AUTH_buildSleeperModeUI | V2.5.0 | 四模式UI | 建構潛在覺醒者介面 | - |
| 15 | AUTH_buildLoadingIndicator | V2.5.0 | 共用UI元件 | 建構載入指示器 | - |

### 2.2 函數分層架構

```
AUTH認證UI群組 (v2.4.0)
├── 歡迎頁面UI層 (2個函數)
│   ├── AUTH_buildWelcomePage() - 歡迎頁面主體
│   └── AUTH_buildModeSelector() - 模式選擇器
├── 登入頁面UI層 (3個函數)
│   ├── AUTH_buildLoginPage() - 登入頁面主體
│   ├── AUTH_buildOAuthButtons() - OAuth按鈕組
│   └── AUTH_buildEmailLoginForm() - Email登入表單
├── 註冊頁面UI層 (2個函數)
│   ├── AUTH_buildRegisterPage() - 註冊頁面主體
│   └── AUTH_buildRegistrationForm() - 註冊表單
├── 密碼重設UI層 (2個函數)
│   ├── AUTH_buildPasswordResetPage() - 重設頁面主體
│   └── AUTH_buildResetSteps() - 重設步驟組件
├── 登出確認UI層 (1個函數)
│   └── AUTH_buildLogoutPage() - 登出確認頁面
├── 四模式UI層 (4個函數)
│   ├── AUTH_buildControllerModeUI() - 精準控制者UI
│   ├── AUTH_buildLoggerModeUI() - 紀錄習慣者UI
│   ├── AUTH_buildStruggleModeUI() - 轉型挑戰者UI
│   └── AUTH_buildSleeperModeUI() - 潛在覺醒者UI
└── 共用UI元件 (1個函數)
    └── AUTH_buildLoadingIndicator() - 載入指示器
```

---

## 3.0 核心函數設計

### 3.1 歡迎頁面UI層函數

/**
 * 01. 建構歡迎頁面Widget
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 15:30:00
 * @description 建構歡迎頁面的完整UI結構
 * @param context - Flutter BuildContext
 * @param selectedMode - 當前選擇的使用者模式
 * @param onModeSelected - 模式選擇回調函數
 * @param onContinue - 繼續按鈕回調函數
 * @param isLoading - 載入狀態標記
 * @returns Widget - 歡迎頁面Widget
 */

**函數編寫說明：**

1. **函數結構設計**
   - 使用Scaffold作為頁面基礎結構
   - SafeArea確保內容不被系統UI遮擋
   - 使用Column進行垂直佈局，設置MainAxisAlignment.center居中對齊

2. **UI組件編排**
   - 頂部放置品牌標誌（Image.asset），設定固定尺寸120x120
   - 添加主標題「歡迎使用 LCAS 2.0」，使用Theme的headlineMedium樣式
   - 副標題說明文字，引導使用者選擇模式，使用bodyLarge樣式
   - 呼叫AUTH_buildModeSelector函數建構模式選擇器
   - 底部放置「開始使用」按鈕

3. **互動邏輯處理**
   - 繼續按鈕的啟用狀態依據selectedMode是否為null和isLoading狀態
   - 載入時顯示載入指示器，否則顯示按鈕文字
   - 使用SizedBox設定按鈕為全寬度，高度56像素

4. **間距與佈局**
   - 整體內容區域padding設為24像素
   - 各組件間使用SizedBox設定適當間距（16-48像素）
   - 保持視覺平衡和一致性

/**
 * 02. 建構模式選擇Widget
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 15:30:00
 * @description 建構四模式選擇網格介面
 * @param context - Flutter BuildContext
 * @param selectedMode - 當前選擇的模式
 * @param onModeSelected - 模式選擇回調函數
 * @returns Widget - 模式選擇網格Widget
 */

**函數編寫說明：**

1. **網格佈局設計**
   - 使用GridView.count建構2x2網格佈局
   - 設定shrinkWrap為true讓GridView根據內容調整高小
   - crossAxisCount設為2，建構兩欄佈局
   - crossAxisSpacing和mainAxisSpacing設為16，提供適當間距
   - childAspectRatio設為1.0，確保每個選項為正方形

2. **選項卡片設計**
   - 遍歷UserMode.values建構每個模式選項
   - 使用InkWell包裝提供觸控回饋效果
   - Container作為卡片容器，設置圓角邊框
   - 根據選擇狀態動態調整背景色和邊框樣式

3. **視覺狀態處理**
   - 選中狀態：使用模式主色的淺色背景，較粗邊框
   - 未選中狀態：白色背景，灰色細邊框
   - 呼叫輔助函數獲取模式專屬顏色、圖標和名稱

4. **內容佈局**
   - 使用Column垂直排列圖標和文字
   - MainAxisAlignment.center使內容居中對齊
   - 圖標大小設為32像素，使用模式專屬顏色
   - 文字樣式設定font-weight為600，字體大小14
```

### 3.2 登入頁面UI層函數

/**
 * 03. 建構登入頁面Widget
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 15:30:00
 * @description 建構登入頁面的完整UI結構，支援四模式差異化
 * @param context - Flutter BuildContext
 * @param userMode - 使用者模式
 * @param onLineLogin - LINE登入回調
 * @param onGoogleLogin - Google登入回調
 * @param onAppleLogin - Apple登入回調
 * @param onEmailLogin - Email登入回調，接收email和password參數
 * @param onForgotPassword - 忘記密碼回調
 * @param onRegister - 註冊回調
 * @param isLoading - 載入狀態
 * @returns Widget - 登入頁面Widget
 */

**函數編寫說明：**

1. **頁面結構設計**
   - 使用Scaffold建構基本頁面結構
   - AppBar顯示模式特定標題，背景色使用模式主色
   - SafeArea和SingleChildScrollView確保內容安全顯示和可滾動
   - 整體padding設為24像素

2. **內容區域佈局**
   - 使用Column進行垂直佈局，CrossAxisAlignment.stretch讓子組件撐滿寬度
   - 頂部間距32像素後放置模式特定的歡迎訊息
   - 標題使用headlineSmall樣式，顏色為模式主色

3. **OAuth登入區域**
   - 呼叫AUTH_buildOAuthButtons建構OAuth登入按鈕組
   - 傳入所有必要的登入回調函數和載入狀態

4. **條件式內容渲染**
   - 使用if語句判斷，非Sleeper模式才顯示分隔線和Email登入表單
   - 分隔線使用Row佈局，兩側Expanded的Divider，中間「或」字文字
   - Email表單區域呼叫AUTH_buildEmailLoginForm函數

5. **底部導航**
   - 添加「還沒有帳號？立即註冊」TextButton
   - 綁定onRegister回調函數

6. **模式差異化處理**
   - Sleeper模式簡化介面，隱藏Email登入選項
   - 其他模式提供完整登入選項

/**
 * 04. 建構OAuth登入按鈕組
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 15:30:00
 * @description 建構OAuth登入按鈕，支援四模式樣式差異
 * @param context - Flutter BuildContext
 * @param userMode - 使用者模式
 * @param onLineLogin - LINE登入回調
 * @param onGoogleLogin - Google登入回調
 * @param onAppleLogin - Apple登入回調
 * @param isLoading - 載入狀態
 * @returns Widget - OAuth按鈕組Widget
 */

**函數編寫說明：**

1. **模式差異化參數設定**
   - 根據userMode設定buttonHeight：Sleeper模式72像素，其他模式56像素
   - 根據userMode設定buttonSpacing：Sleeper模式16像素，其他模式12像素
   - 字體大小也根據模式調整：Sleeper模式18，其他模式16

2. **按鈕容器結構**
   - 使用Column進行垂直排列所有OAuth按鈕
   - 每個按鈕使用SizedBox設定為全寬度和指定高度

3. **LINE登入按鈕（所有模式）**
   - 使用ElevatedButton.icon建構帶圖標的按鈕
   - 背景色設為LINE品牌綠色(#00C300)，前景色白色
   - 圖標使用Icons.chat，文字顯示「LINE 登入」
   - 載入時禁用按鈕（onPressed設為null）

4. **Google登入按鈕（非Sleeper模式）**
   - 使用條件式渲染，僅在非Sleeper模式顯示
   - 使用OutlinedButton.icon建構邊框按鈕樣式
   - 圖標使用Icons.g_mobiledata，文字顯示「Google 登入」
   - 上方添加間距SizedBox

5. **Apple登入按鈕（僅Controller模式）**
   - 使用條件式渲染，僅在Controller模式顯示
   - 使用OutlinedButton.icon，但設定黑色背景和白色前景
   - 圖標使用Icons.apple，文字顯示「Apple 登入」
   - 體現精準控制者需要完整選項的特性

/**
 * 05. 建構Email登入表單
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 16:00:00
 * @description 建構Email登入表單，僅非Sleeper模式顯示
 * @param context - Flutter BuildContext
 * @param userMode - 使用者模式
 * @param onEmailLogin - Email登入回調，接收email和password參數
 * @param onForgotPassword - 忘記密碼回調
 * @param isLoading - 載入狀態
 * @returns Widget - Email登入表單Widget
 */

**函數編寫說明：**

1. **表單結構設計**
   - 使用Form Widget配合GlobalKey進行表單驗證
   - 建立email和password的TextEditingController管理輸入內容
   - 使用Column進行垂直佈局，設定適當間距

2. **Email輸入框設計**
   - 使用TextFormField建構Email輸入框
   - 設定keyboardType為emailAddress，提供最佳鍵盤體驗
   - 添加prefixIcon為Icons.email，提升視覺識別
   - 實作validator進行Email格式驗證，使用正則表達式檢查

3. **密碼輸入框設計**
   - 使用TextFormField建構密碼輸入框，設定obscureText為true
   - 添加prefixIcon為Icons.lock，視覺一致性
   - 實作validator檢查密碼不為空

4. **忘記密碼連結**
   - 使用Align.centerRight將TextButton右對齊
   - 綁定onForgotPassword回調函數

5. **登入按鈕設計**
   - 使用SizedBox設定按鈕為全寬度，高度56像素
   - 背景色根據userMode動態調整，呼叫_getModeColor輔助函數
   - 載入狀態時顯示AUTH_buildLoadingIndicator，否則顯示「登入」文字
   - 按鈕啟用狀態同時檢查isLoading和表單驗證結果
```

### 3.3 註冊頁面UI層函數

/**
 * 06. 建構註冊頁面Widget
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 16:00:00
 * @description 建構註冊頁面的完整UI結構
 * @param context - Flutter BuildContext
 * @param userMode - 使用者模式
 * @param onRegister - 註冊回調，接收RegistrationData物件
 * @param onLogin - 登入頁面回調
 * @param isLoading - 載入狀態
 * @returns Widget - 註冊頁面Widget
 */

**函數編寫說明：**

1. **頁面基礎結構**
   - 使用Scaffold建構基本頁面架構
   - AppBar標題根據userMode動態顯示，背景色使用模式主色
   - SafeArea確保內容不被系統UI遮擋
   - SingleChildScrollView提供滾動支援

2. **內容區域設計**
   - 整體padding設為24像素，提供舒適邊距
   - 使用Column垂直佈局，CrossAxisAlignment.stretch讓子組件撐滿寬度
   - 頂部間距32像素後顯示模式特定的歡迎訊息

3. **標題區域**
   - 呼叫_getModeRegistrationMessage輔助函數獲取模式特定訊息
   - 使用headlineSmall樣式，顏色設為模式主色
   - 文字居中對齊

4. **表單區域**
   - 呼叫AUTH_buildRegistrationForm函數建構註冊表單
   - 傳入必要的參數：context、userMode、onRegister回調、isLoading狀態

5. **底部導航**
   - 添加「已有帳號？立即登入」TextButton
   - 綁定onLogin回調函數，提供頁面間導航

/**
 * 07. 建構註冊表單Widget
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 16:00:00
 * @description 建構註冊表單，支援四模式欄位差異
 * @param context - Flutter BuildContext
 * @param userMode - 使用者模式
 * @param onRegister - 註冊回調，接收RegistrationData物件
 * @param isLoading - 載入狀態
 * @returns Widget - 註冊表單Widget
 */

**函數編寫說明：**

1. **表單狀態管理**
   - 建立TextEditingController管理各輸入欄位：email、password、confirmPassword、displayName
   - 使用bool變數管理checkbox狀態：termsAccepted、privacyAccepted
   - 使用StatefulBuilder包裝，支援動態狀態更新

2. **Email輸入框（所有模式）**
   - 使用TextFormField，設定keyboardType為emailAddress
   - 添加必填標示（*），prefixIcon為Icons.email
   - 實作validator：檢查不為空和Email格式正則表達式驗證

3. **密碼輸入框（所有模式）**
   - 設定obscureText為true，prefixIcon為Icons.lock
   - validator檢查不為空且長度至少8個字元

4. **條件式欄位渲染**
   - 確認密碼輸入框：非Sleeper模式才顯示，validator檢查與密碼一致性
   - 顯示名稱輸入框：非Sleeper模式才顯示，validator檢查不為空且至少2個字元

5. **條款同意區域**
   - 使用CheckboxListTile建構服務條款和隱私政策同意選項
   - activeColor根據userMode設定，controlAffinity設為leading

6. **註冊按鈕**
   - 按鈕高度根據模式調整：Sleeper模式72像素，其他56像素
   - 啟用條件：非載入狀態且兩個條款都已同意
   - 點擊時先驗證表單，再建構RegistrationData物件呼叫onRegister回調

### 3.4 密碼重設UI層函數

/**
 * 08. 建構密碼重設頁面Widget
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 16:00:00
 * @description 建構密碼重設頁面的完整UI結構
 * @param context - Flutter BuildContext
 * @param userMode - 使用者模式
 * @param currentStep - 當前步驟（0-2）
 * @param onSendCode - 發送驗證碼回調
 * @param onVerifyCode - 驗證碼確認回調
 * @param onResetPassword - 重設密碼回調
 * @param isLoading - 載入狀態
 * @returns Widget - 密碼重設頁面Widget
 */

**函數編寫說明：**

1. **頁面結構設計**
   - 使用Scaffold建構基本頁面結構
   - AppBar標題根據userMode動態顯示「重設密碼」，背景色使用模式主色
   - SafeArea確保內容不被系統UI遮擋

2. **進度指示器（條件式顯示）**
   - 非Sleeper模式才顯示LinearProgressIndicator
   - 進度值計算：(currentStep + 1) / 3，表示三步驟進度
   - valueColor使用模式主色，backgroundColor為灰色

3. **主要內容區域**
   - 使用Expanded包裝AUTH_buildResetSteps函數
   - 傳入所有必要參數：context、userMode、currentStep、三個回調函數、isLoading狀態

4. **間距與佈局**
   - 整體padding設為24像素
   - 進度指示器下方間距32像素

/**
 * 09. 建構重設步驟Widget
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 16:00:00
 * @description 建構密碼重設的三步驟介面
 * @param context - Flutter BuildContext
 * @param userMode - 使用者模式
 * @param currentStep - 當前步驟（0-2）
 * @param onSendCode - 發送驗證碼回調
 * @param onVerifyCode - 驗證碼確認回調
 * @param onResetPassword - 重設密碼回調
 * @param isLoading - 載入狀態
 * @returns Widget - 步驟內容Widget
 */

**函數編寫說明：**

1. **步驟路由邏輯**
   - 使用switch語句根據currentStep參數決定顯示的步驟內容
   - case 0：呼叫_buildEmailStep建構Email輸入步驟
   - case 1：呼叫_buildVerificationStep建構驗證碼輸入步驟
   - case 2：呼叫_buildPasswordStep建構新密碼設定步驟
   - default：回傳空Container

2. **步驟一 - Email輸入設計**
   - 使用Column垂直佈局，MainAxisAlignment.center居中對齊
   - 頂部顯示Icons.email_outlined圖標，大小64像素，顏色使用模式主色
   - 主標題「輸入您的Email地址」使用headlineSmall樣式
   - 副標題說明「我們將發送驗證碼到您的信箱」使用bodyLarge樣式
   - Email輸入框使用TextFormField，設定適當的decoration和keyboardType
   - 發送按鈕高度根據模式調整，載入時顯示指示器

3. **步驟二 - 驗證碼輸入設計**
   - 類似步驟一的佈局，但圖標改為Icons.security
   - 主標題「請輸入驗證碼」
   - 驗證碼輸入框，可考慮使用OTP輸入格式
   - 提供重新發送驗證碼選項

4. **步驟三 - 新密碼設定**
   - 圖標使用Icons.lock_reset
   - 主標題「設定新密碼」
   - 新密碼和確認密碼輸入框
   - 密碼強度提示
   - 完成重設按鈕

### 3.5 登出確認UI層函數

/**
 * 10. 建構登出確認頁面Widget
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 16:00:00
 * @description 建構登出確認頁面，支援四模式差異化選項
 * @param context - Flutter BuildContext
 * @param userMode - 使用者模式
 * @param onLogout - 登出回調，接收LogoutType參數
 * @param onCancel - 取消回調
 * @param isLoading - 載入狀態
 * @returns Widget - 登出確認頁面Widget
 */

**函數編寫說明：**

1. **頁面基礎結構**
   - 使用Scaffold建構基本頁面架構
   - AppBar標題根據userMode動態顯示「登出」，背景色使用模式主色
   - SafeArea確保內容安全顯示

2. **視覺元素設計**
   - 使用Column垂直佈局，MainAxisAlignment.center居中對齊
   - 頂部顯示Icons.logout圖標，大小64像素，顏色使用模式主色
   - 主標題「確定要登出嗎？」使用headlineSmall樣式
   - 副標題呼叫_getModeLogoutMessage輔助函數獲取模式特定訊息

3. **模式差異化登出選項**
   - **精準控制者模式**：提供兩個選項按鈕
     - 快速登出按鈕（橙色背景）：保留本地設定
     - 完全登出按鈕（紅色背景）：清除所有資料
   - **其他模式**：簡化為單一「確定登出」按鈕
     - 按鈕高度根據模式調整：Sleeper模式72像素，其他56像素
     - 背景色使用模式主色

4. **取消按鈕設計**
   - 使用OutlinedButton樣式，邊框顏色為模式主色
   - 文字顏色和字體大小根據模式調整
   - 與登出按鈕保持相同的高度設定

5. **載入狀態處理**
   - 載入時禁用所有按鈕（onPressed設為null）
   - 登出按鈕載入時顯示AUTH_buildLoadingIndicator

---

## 4.0 四模式UI差異化設計

### 4.1 精準控制者模式UI實作

/**
 * 11. 建構精準控制者模式UI
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 16:00:00
 * @description 建構專業完整的認證介面
 * @param context - Flutter BuildContext
 * @param pageType - 頁面類型
 * @param pageProps - 頁面屬性參數
 * @returns Widget - 精準控制者模式UI
 */

**函數編寫說明：**

1. **主題配置**
   - 使用Theme.copyWith覆蓋預設主題
   - primaryColor設為藍色(#1976D2)，體現專業感
   - colorScheme的secondary設為深灰色(#37474F)

2. **容器裝飾設計**
   - 背景色設為淺灰色(#FAFAFA)
   - 左側邊框設為藍色實線，寬度4像素，強調專業邊界

3. **專業標題列**
   - 深藍色背景容器，padding設為16像素
   - Row佈局：左側工程圖標，中間「🎯 精準控制者模式」標題，右側設定按鈕
   - 標題字體大小18，字重w600，白色文字

4. **主要內容區域**
   - 使用Expanded包裝，呼叫_buildPageContent函數
   - 根據pageType動態載入對應的頁面內容

5. **底部狀態列**
   - 淺藍色背景(#E3F2FD)，顯示安全狀態
   - 左側安全圖標，文字「高安全性模式已啟用」
   - 字體大小12，藍色文字

### 4.2 紀錄習慣者模式UI實作

/**
 * 12. 建構紀錄習慣者模式UI
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 16:00:00
 * @description 建構優雅美觀的認證介面
 * @param context - Flutter BuildContext
 * @param pageType - 頁面類型
 * @param pageProps - 頁面屬性參數
 * @returns Widget - 紀錄習慣者模式UI
 */

**函數編寫說明：**

1. **主題與動畫配置**
   - primaryColor設為紫色(#6A1B9A)，體現優雅感
   - 使用AnimatedContainer，動畫時長800毫秒

2. **漸層背景設計**
   - LinearGradient從左上到右下
   - 起始色為淺紫色(#F3E5F5)，結束色為白色
   - 營造柔和的視覺層次

3. **優雅標題區域**
   - 居中對齊的Row佈局
   - Icons.auto_awesome圖標，大小24像素
   - 標題「✨ 優雅記帳體驗」，字體大小20，字重w500，字間距0.5

4. **內容區域動畫**
   - 使用AnimatedSwitcher實現頁面切換動畫
   - FadeTransition和SlideTransition組合，實現淡入滑動效果
   - 內容容器有圓角16像素，紫色陰影，模糊半徑20

### 4.3 轉型挑戰者模式UI實作

/**
 * 13. 建構轉型挑戰者模式UI
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 16:00:00
 * @description 建構激勵導向的認證介面
 * @param context - Flutter BuildContext
 * @param pageType - 頁面類型
 * @param pageProps - 頁面屬性參數
 * @returns Widget - 轉型挑戰者模式UI
 */

**函數編寫說明：**

1. **主題配色設計**
   - primaryColor設為橙色(#FF6B35)，傳達活力與動力
   - 背景色為淺橙色(#FFF3E0)，營造溫暖氛圍

2. **激勵標題區域**
   - 橙色背景容器，底部左右圓角20像素
   - 標題區域包含獎盃圖標和「💪 轉型挑戰者」文字
   - 副標題「每一步都是朝著目標前進！」，字體大小14

3. **激勵訊息卡片**
   - 白色背景，橙色邊框（寬度2像素）
   - 內含上升趨勢圖標和激勵文字
   - 文字內容「堅持記帳，實現財務自由夢想！」

4. **底部激勵列**
   - 淺橙色背景(#FFE0B2)
   - 星星圖標配合動態天數顯示
   - 呼叫_getDaysCount()函數獲取堅持天數

### 4.4 潛在覺醒者模式UI實作

/**
 * 14. 建構潛在覺醒者模式UI
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 16:00:00
 * @description 建構極簡易用的認證介面
 * @param context - Flutter BuildContext
 * @param pageType - 頁面類型
 * @param pageProps - 頁面屬性參數
 * @returns Widget - 潛在覺醒者模式UI
 */

**函數編寫說明：**

1. **極簡主題配置**
   - primaryColor設為綠色(#4CAF50)，傳達自然與成長
   - 背景色為淺綠色(#E8F5E8)，營造舒適氛圍

2. **中央對齊佈局**
   - 使用MainAxisAlignment.center將所有內容居中
   - SafeArea確保內容不被系統UI遮擋
   - 整體padding設為32像素，提供寬鬆間距

3. **溫和視覺元素**
   - 頂部生態圖標，大小64像素，綠色
   - 主標題「🌱 輕鬆記帳」，字體大小28，字重w600
   - 副標題「簡單開始，輕鬆管理」，字體大小18

4. **極簡內容容器**
   - 白色背景，圓角16像素
   - 淡綠色陰影，模糊半徑16，y偏移4像素
   - padding設為24像素，提供舒適的內容間距

5. **友善提示文字**
   - 底部顯示「💡 需要幫助嗎？點擊右上角問號」
   - 字體大小14，綠色文字，居中對齊

---

## 5.0 Widget架構設計

### 5.1 頁面Widget結構

```dart
// 認證頁面基礎Widget
abstract class BaseAuthPageWidget extends StatefulWidget {
  final UserMode userMode;
  final AuthPageType pageType;
  final Map<String, dynamic>? props;
  
  const BaseAuthPageWidget({
    Key? key,
    required this.userMode,
    required this.pageType,
    this.props,
  }) : super(key: key);
}

// 各頁面具體實作
class WelcomePageWidget extends BaseAuthPageWidget {
  @override
  Widget build(BuildContext context) {
    return AUTH_buildWelcomePage(
      context: context,
      selectedMode: props?['selectedMode'],
      onModeSelected: props?['onModeSelected'] ?? () {},
      onContinue: props?['onContinue'] ?? () {},
      isLoading: props?['isLoading'] ?? false,
    );
  }
}

class LoginPageWidget extends BaseAuthPageWidget {
  @override
  Widget build(BuildContext context) {
    switch (userMode) {
      case UserMode.controller:
        return AUTH_buildControllerModeUI(
          context: context,
          pageType: pageType,
          pageProps: {
            'child': AUTH_buildLoginPage(
              context: context,
              userMode: userMode,
              onLineLogin: props?['onLineLogin'] ?? () {},
              onGoogleLogin: props?['onGoogleLogin'] ?? () {},
              onAppleLogin: props?['onAppleLogin'] ?? () {},
              onEmailLogin: props?['onEmailLogin'] ?? (email, password) {},
              onForgotPassword: props?['onForgotPassword'] ?? () {},
              onRegister: props?['onRegister'] ?? () {},
              isLoading: props?['isLoading'] ?? false,
            ),
          },
        );
      case UserMode.logger:
        return AUTH_buildLoggerModeUI(
          context: context,
          pageType: pageType,
          pageProps: props ?? {},
        );
      case UserMode.struggler:
        return AUTH_buildStruggleModeUI(
          context: context,
          pageType: pageType,
          pageProps: props ?? {},
        );
      case UserMode.sleeper:
        return AUTH_buildSleeperModeUI(
          context: context,
          pageType: pageType,
          pageProps: props ?? {},
        );
    }
  }
}
```

### 5.2 共用Widget元件

/**
 * 15. 建構載入指示器
 * @version 2025-01-20-V2.4.0
 * @date 2025-01-20 16:00:00
 * @description 建構通用載入指示器
 * @param color - 指示器顏色，預設為白色
 * @param size - 指示器大小，預設為20.0像素
 * @returns Widget - 載入指示器Widget
 */

**函數編寫說明：**

1. **參數設計**
   - color參數為可選，預設值為Colors.white
   - size參數預設為20.0像素，適合在按鈕中使用

2. **容器結構**
   - 使用SizedBox設定固定寬度和高度
   - 確保載入指示器有明確的尺寸界限

3. **指示器配置**
   - 使用CircularProgressIndicator建構圓形進度指示器
   - strokeWidth設為2.0，提供適中的線條粗細
   - valueColor使用AlwaysStoppedAnimation設定固定顏色

4. **輔助函數設計說明**

**_getModeColor輔助函數編寫指引：**
- 建立switch語句根據UserMode枚舉回傳對應顏色
- Controller模式：藍色(#1976D2)
- Logger模式：紫色(#6A1B9A)  
- Struggler模式：橙色(#FF6B35)
- Sleeper模式：綠色(#4CAF50)

**_getModeIcon輔助函數編寫指引：**
- 根據UserMode回傳對應的IconData
- Controller：Icons.engineering（工程圖標）
- Logger：Icons.auto_awesome（星光圖標）
- Struggler：Icons.emoji_events（獎盃圖標）
- Sleeper：Icons.eco（生態圖標）

**_getModeName輔助函數編寫指引：**
- 回傳模式的中文名稱字串
- Controller：「精準控制者」
- Logger：「紀錄習慣者」
- Struggler：「轉型挑戰者」
- Sleeper：「潛在覺醒者」

---

## 6.0 API調用映射

### 6.1 F001-F005 API對應關係

| 頁面函數 | 對應API | API功能 | UI回饋處理 |
|----------|---------|---------|------------|
| AUTH_buildWelcomePage | F004 | 帳號刪除 | 深層功能，僅Controller模式 |
| AUTH_buildLoginPage | F002 | 使用者登入 | 登入成功/失敗UI回饋 |
| AUTH_buildRegisterPage | F001 | 使用者註冊 | 註冊成功/失敗UI回饋 |
| AUTH_buildPasswordResetPage | F005 | 密碼重設 | 三步驟UI狀態管理 |
| AUTH_buildLogoutPage | F003 | 使用者登出 | 登出確認UI處理 |



### 6.2 錯誤處理UI回饋

```dart
// 錯誤處理UI元件
Widget buildErrorMessage(String error, UserMode userMode) {
  return Container(
    padding: EdgeInsets.all(16),
    margin: EdgeInsets.all(8),
    decoration: BoxDecoration(
      color: Colors.red.shade50,
      border: Border.all(color: Colors.red.shade300),
      borderRadius: BorderRadius.circular(8),
    ),
    child: Row(
      children: [
        Icon(Icons.error_outline, color: Colors.red),
        SizedBox(width: 12),
        Expanded(
          child: Text(
            _getLocalizedError(error, userMode),
            style: TextStyle(color: Colors.red.shade800),
          ),
        ),
      ],
    ),
  );
}

String _getLocalizedError(String error, UserMode userMode) {
  switch (userMode) {
    case UserMode.controller:
      return '錯誤：$error'; // 顯示詳細錯誤
    case UserMode.logger:
      return '✨ 操作遇到問題，請稍後再試';
    case UserMode.struggler:
      return '💪 遇到小挫折！讓我們再試一次！';
    case UserMode.sleeper:
      return '🌱 操作失敗，請重新嘗試';
  }
}
```

---

## 7.0 純UI狀態管理設計

### 7.1 UI顯示狀態管理

**設計原則：僅管理純UI層的視覺狀態，不涉及業務邏輯**

```dart
// 純UI顯示狀態管理（僅視覺相關）
class AuthUiDisplayState extends ChangeNotifier {
  bool _isButtonLoading = false;        // 按鈕載入動畫狀態
  String? _uiMessage;                   // UI層提示訊息（非業務錯誤）
  UserMode? _selectedMode;              // 當前選擇的模式（UI選擇狀態）
  int _currentStep = 0;                 // 密碼重設步驟（UI流程狀態）
  bool _isPasswordVisible = false;      // 密碼可見性切換
  
  // 純UI狀態getter
  bool get isButtonLoading => _isButtonLoading;
  String? get uiMessage => _uiMessage;
  UserMode? get selectedMode => _selectedMode;
  int get currentStep => _currentStep;
  bool get isPasswordVisible => _isPasswordVisible;
  
  // 純UI狀態setter
  void setButtonLoading(bool loading) {
    _isButtonLoading = loading;
    notifyListeners();
  }
  
  void setUiMessage(String? message) {
    _uiMessage = message;
    notifyListeners();
  }
  
  void setSelectedMode(UserMode? mode) {
    _selectedMode = mode;
    notifyListeners();
  }
  
  void setCurrentStep(int step) {
    _currentStep = step;
    notifyListeners();
  }
  
  void togglePasswordVisibility() {
    _isPasswordVisible = !_isPasswordVisible;
    notifyListeners();
  }
  
  void clearUiState() {
    _isButtonLoading = false;
    _uiMessage = null;
    _currentStep = 0;
    _isPasswordVisible = false;
    notifyListeners();
  }
}
```

### 7.2 簡化表單輸入狀態

**設計原則：僅管理表單輸入的UI狀態，驗證邏輯由AP Layer處理**

```dart
// 簡化表單輸入狀態管理（僅輸入狀態）
class AuthFormInputState extends ChangeNotifier {
  final Map<String, TextEditingController> _controllers = {};
  final Map<String, bool> _checkboxes = {};
  
  // 獲取輸入控制器
  TextEditingController getController(String field) {
    return _controllers.putIfAbsent(field, () => TextEditingController());
  }
  
  // checkbox狀態管理
  void setCheckbox(String field, bool value) {
    _checkboxes[field] = value;
    notifyListeners();
  }
  
  bool getCheckbox(String field) => _checkboxes[field] ?? false;
  
  // 清空表單輸入
  void clearInputs() {
    _controllers.forEach((key, controller) => controller.clear());
    _checkboxes.clear();
    notifyListeners();
  }
  
  @override
  void dispose() {
    _controllers.forEach((key, controller) => controller.dispose());
    super.dispose();
  }
}
```

### 7.3 Flutter內建導航

**設計原則：使用Flutter內建Navigator，不自行管理導航狀態**

```dart
// 導航輔助函數（不維護狀態，純函數式）
class AuthNavigationHelper {
  
  // 導航到指定頁面
  static void navigateToPage(BuildContext context, Widget page) {
    Navigator.of(context).push(
      MaterialPageRoute(builder: (context) => page),
    );
  }
  
  // 替換當前頁面
  static void replaceWithPage(BuildContext context, Widget page) {
    Navigator.of(context).pushReplacement(
      MaterialPageRoute(builder: (context) => page),
    );
  }
  
  // 返回上一頁
  static void goBack(BuildContext context) {
    if (Navigator.of(context).canPop()) {
      Navigator.of(context).pop();
    }
  }
  
  // 返回到首頁（清除所有歷史）
  static void goToHome(BuildContext context, Widget homePage) {
    Navigator.of(context).pushAndRemoveUntil(
      MaterialPageRoute(builder: (context) => homePage),
      (route) => false,
    );
  }
}
```

---

## 8.0 測試策略

### 8.1 Widget測試覆蓋

```dart
// 認證Widget測試
class AuthWidgetTests {
  
  // 測試歡迎頁面Widget
  static void testWelcomePage() {
    group('AUTH_buildWelcomePage Tests', () {
      testWidgets('應該顯示品牌標誌和模式選擇', (WidgetTester tester) async {
        await tester.pumpWidget(
          MaterialApp(
            home: AUTH_buildWelcomePage(
              context: tester.element(find.byType(MaterialApp)),
              selectedMode: null,
              onModeSelected: () {},
              onContinue: () {},
            ),
          ),
        );
        
        expect(find.byType(Image), findsOneWidget);
        expect(find.text('歡迎使用 LCAS 2.0'), findsOneWidget);
        expect(find.byType(GridView), findsOneWidget);
      });
      
      testWidgets('模式選擇應該正確回調', (WidgetTester tester) async {
        UserMode? selectedMode;
        
        await tester.pumpWidget(
          MaterialApp(
            home: AUTH_buildWelcomePage(
              context: tester.element(find.byType(MaterialApp)),
              selectedMode: null,
              onModeSelected: () => selectedMode = UserMode.controller,
              onContinue: () {},
            ),
          ),
        );
        
        await tester.tap(find.text('精準控制者').first);
        await tester.pump();
        
        expect(selectedMode, equals(UserMode.controller));
      });
    });
  }
}
```

### 8.2 UI互動測試

```dart
// UI互動測試
class AuthInteractionTests {
  
  static void testLoginFormInteraction() {
    group('登入表單互動測試', () {
      testWidgets('應該驗證Email格式', (WidgetTester tester) async {
        await tester.pumpWidget(
          MaterialApp(
            home: AUTH_buildEmailLoginForm(
              context: tester.element(find.byType(MaterialApp)),
              userMode: UserMode.controller,
              onEmailLogin: (email, password) {},
              onForgotPassword: () {},
            ),
          ),
        );
        
        await tester.enterText(find.byType(TextFormField).first, 'invalid_email');
        await tester.tap(find.byType(ElevatedButton));
        await tester.pump();
        
        expect(find.text('Email格式不正確'), findsOneWidget);
      });
    });
  }
}
```

### 8.3 四模式體驗測試

```dart
// 四模式體驗測試
class AuthModeExperienceTests {
  
  static void testModeSpecificExperience() {
    group('四模式差異化體驗測試', () {
      for (final mode in UserMode.values) {
        testWidgets('${mode.toString()} 模式應該有正確的視覺風格', (WidgetTester tester) async {
          await tester.pumpWidget(
            MaterialApp(
              home: LoginPageWidget(
                userMode: mode,
                pageType: AuthPageType.login,
                props: {
                  'onLineLogin': () {},
                  'onGoogleLogin': () {},
                  'onAppleLogin': () {},
                  'onEmailLogin': (email, password) {},
                  'onForgotPassword': () {},
                  'onRegister': () {},
                },
              ),
            ),
          );
          
          // 驗證模式特定的UI元素
          switch (mode) {
            case UserMode.controller:
              expect(find.text('🎯 精準控制者模式'), findsOneWidget);
              break;
            case UserMode.logger:
              expect(find.text('✨ 優雅記帳體驗'), findsOneWidget);
              break;
            case UserMode.struggler:
              expect(find.text('💪 轉型挑戰者'), findsOneWidget);
              break;
            case UserMode.sleeper:
              expect(find.text('🌱 輕鬆記帳'), findsOneWidget);
              break;
          }
        });
      }
    });
  }
}
```

---

## 9.0 模式主題配置設計

### 9.1 主題配置架構設計

**設計原則：**
- 為四種使用者模式提供獨特的視覺主題
- 支援動態主題切換
- 保持品牌一致性的同時突出模式特色

**主題配置類別設計指引：**

```dart
// AuthThemeConfig類別設計
class AuthThemeConfig {
  // 精準控制者主題設計指引
  static ThemeData get controllerTheme {
    // 主色調：專業藍色(#1976D2)
    // 輔色調：深灰色(#37474F)
    // 背景色：淺灰色(#FAFAFA)
    // 強調專業感、可控性、精確性
  }
  
  // 紀錄習慣者主題設計指引
  static ThemeData get loggerTheme {
    // 主色調：優雅紫色(#6A1B9A)
    // 輔色調：淺紫色(#E1BEE7)
    // 背景色：純白色
    // 強調優雅感、美觀性、舒適性
  }
  
  // 轉型挑戰者主題設計指引
  static ThemeData get strugglerTheme {
    // 主色調：活力橙色(#FF6B35)
    // 輔色調：淺橙色(#FFE0B2)
    // 背景色：暖橙色(#FFF3E0)
    // 強調激勵感、動力感、挑戰性
  }
  
  // 潛在覺醒者主題設計指引
  static ThemeData get sleeperTheme {
    // 主色調：自然綠色(#4CAF50)
    // 輔色調：淺綠色(#C8E6C9)
    // 背景色：淡綠色(#E8F5E8)
    // 強調簡約感、自然感、易用性
  }
}
```

### 9.2 測試支援代碼設計

**設計原則：**
- 提供完整的Widget測試輔助工具
- 支援模擬數據和回調函數
- 確保測試環境的一致性

**測試輔助類別設計指引：**

```dart
// AuthWidgetTestHelpers類別設計
class AuthWidgetTestHelpers {
  // 測試包裝器建構指引
  static Widget createTestWrapper({
    required Widget child,
    AuthUiDisplayState? uiState,
  }) {
    // 建構MaterialApp包裝器
    // 提供ChangeNotifierProvider
    // 初始化測試用的AuthUiDisplayState
  }
  
  // 模擬回調函數設計指引
  static void mockCallback([dynamic param]) {
    // 空實作，用於測試時替代真實回調
  }
  
  // 測試數據建構指引
  static RegistrationData createTestRegistrationData({
    String email = 'test@example.com',
    String password = 'test123456',
    String displayName = 'Test User',
    UserMode mode = UserMode.controller,
  }) {
    // 建構標準化的測試用註冊資料
  }
}
```

---

## 10.0 文件維護記錄

| 版本 | 日期 | 修改者 | 修改內容 |
|------|------|--------|----------|
| **v2.5.0** | **2025-01-20 19:00:00 +08:00** | **LCAS SA Team** | **🎉 版本同步升級：補充模式主題配置與測試支援代碼設計** |
|  |  |  | **• 所有15個函數版本升級至V2.5.0** |
|  |  |  | **• 新增9.0節模式主題配置設計** |
|  |  |  | **• 補充測試支援代碼設計指引** |
|  |  |  | **• 與8601實作文件版本同步** |
|  |  |  | **• 完善TDD設計文件的完整性** |
| **v2.4.0** | **2025-01-20 17:00:00 +08:00** | **LCAS SA Team** | **🎯 架構職責明確化：移除跨層介面與複雜狀態管理** |
|  |  |  | **• 移除6.2節API調用介面設計（跨層服務）** |
|  |  |  | **• 簡化7.0節狀態管理至純UI層** |
|  |  |  | **• 明確1.1節模組定位為純Presentation Layer** |
|  |  |  | **• 所有15個函數版本升級至V2.4.0** |
|  |  |  | **• 狀態管理改為純UI顯示狀態與輸入狀態** |
|  |  |  | **• 導航管理改用Flutter內建Navigator** |
| **v2.3.0** | **2025-01-20 16:00:00 +08:00** | **LCAS SA Team** | **🚀 函數實作方式重大調整：移除代碼實作，改為文字敘述** |
|  |  |  | **• 所有15個函數移除Dart代碼實作** |
|  |  |  | **• 改為詳細的函數編寫說明與指引** |
|  |  |  | **• 保持TDD文件的設計規範定位** |
|  |  |  | **• 強化UI架構與四模式差異化設計說明** |
|  |  |  | **• 明確函數參數、回傳值與編寫邏輯** |
| **v2.2.0** | **2025-01-20 15:30:00 +08:00** | **LCAS SA Team** | **🎉 重大重構：範圍收斂至純Presentation Layer** |
|  |  |  | **• 移除所有跨層服務設計（TokenSecurityService、BiometricAuthService等）** |
|  |  |  | **• 函數數量從27個精簡至15個核心UI函數** |
|  |  |  | **• 明確F001-F005 API對應關係** |
|  |  |  | **• 專注於Widget建構與四模式UI差異化** |
|  |  |  | **• 簡化安全機制至純UI層驗證** |
|  |  |  | **• 重新定位為Flutter UI/UX設計文件** |
| **v2.1.0** | **2025-01-20 14:00:00 +08:00** | **LCAS SA Team** | **初版建立（已重構）** |

### 9.1 重構里程碑

#### 9.1.1 v2.4.0 架構職責明確化成果
```
🎯 職責明確化：純Presentation Layer界限清晰
📊 跨層移除：完全移除API介面與複雜狀態管理
🎨 四模式強化：UI差異化設計完整
🔗 API映射清晰：F001-F005明確對應
♿ 無障礙完整：WCAG 2.1 AA標準支援
📱 Widget架構：清晰的組件化設計
⚡ 測試覆蓋：Widget + 互動 + 體驗測試
🧪 狀態簡化：純UI顯示狀態與輸入狀態管理
🔄 導航內建：使用Flutter Navigator，無自訂狀態
```

#### 9.1.2 設計原則達成度
- ✅ **職責單一**：純Presentation Layer實作
- ✅ **四模式差異**：完整UI差異化設計
- ✅ **Widget組件化**：可重用的UI組件
- ✅ **API介面清晰**：明確的API調用邊界
- ✅ **測試友善**：完整的Widget測試覆蓋

#### 9.1.3 未來迭代方向
```
📈 v2.5.0：動畫系統完善與效能優化
📈 v2.6.0：更多無障礙功能支援
📈 v2.7.0：進階主題系統整合
📈 v3.0.0：與後端API完整整合測試
```

---

## 備註

### 📌 重要提醒
- **本文件專注於純Presentation Layer**：僅處理UI Widget與使用者互動
- **業務邏輯由AP Layer處理**：所有認證邏輯、安全機制、資料處理由Application Layer負責
- **API調用通過介面**：明確的API調用邊界，不直接處理網路請求
- **四模式UI差異化**：每個Widget都考慮四種模式的視覺與互動差異

### 🎯 設計目標達成度
- ✅ **UI組件化**：可重用、可測試的Widget設計
- ✅ **四模式體驗**：差異化的使用者介面體驗
- ✅ **無障礙友善**：完整的WCAG 2.1 AA支援
- ✅ **職責清晰**：專注於視覺呈現與使用者互動
- ✅ **測試完整**：Widget、互動、體驗三層測試覆蓋

### 🚀 實作指引
1. **Widget優先**：以Widget建構為核心設計原則
2. **狀態分離**：UI狀態與業務狀態清楚分離
3. **API介面**：通過定義良好的介面與AP Layer通信
4. **測試驅動**：每個Widget都有對應的測試案例
5. **四模式一致**：確保每個模式都有良好的使用者體驗

---

**🎉 認證功能群組 Flutter TDD v2.4.0 - 純Presentation Layer實作，職責界限明確，專注於UI/UX設計與四模式差異化體驗！**

