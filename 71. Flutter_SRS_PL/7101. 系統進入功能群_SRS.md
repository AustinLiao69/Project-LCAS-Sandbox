
# 7101. ç³»çµ±é€²å…¥åŠŸèƒ½ç¾¤_SRS.md

**æ–‡ä»¶ç·¨è™Ÿ**: 7101  
**ç‰ˆæœ¬**: v1.0.0  
**å»ºç«‹æ—¥æœŸ**: 2025-09-11  
**å»ºç«‹è€…**: LCAS PM Team  
**æœ€å¾Œæ›´æ–°**: 2025-09-11  

---

## ğŸ“‘ ç›®æ¬¡ (Table of Contents)

1. [æ¨¡çµ„æ¦‚è¿° (Module Overview)](#10-æ¨¡çµ„æ¦‚è¿°module-overview)

2. [åŠŸèƒ½éœ€æ±‚ (Functional Requirements)](#20-åŠŸèƒ½éœ€æ±‚functional-requirements)
   - 2.1 APPå•Ÿå‹•èˆ‡åˆå§‹åŒ–
   - 2.2 ä½¿ç”¨è€…è¨»å†ŠåŠŸèƒ½
   - 2.3 ä½¿ç”¨è€…ç™»å…¥åŠŸèƒ½
   - 2.4 å¯†ç¢¼é‡è¨­åŠŸèƒ½
   - 2.5 æ¨¡å¼è©•ä¼°èˆ‡è¨­å®š
   - 2.6 è·¨å¹³å°ç¶å®šåŠŸèƒ½
   - 2.7 APPæ¨å»£å±•ç¤º
   - 2.8 éŒ¯èª¤è™•ç†èˆ‡é‡è©¦æ©Ÿåˆ¶

3. [è¼¸å…¥/è¼¸å‡ºè¦æ ¼ (Input & Output Specifications)](#30-è¼¸å…¥è¼¸å‡ºè¦æ ¼input--output-specifications)
   - 3.1 è¼¸å…¥
   - 3.2 è¼¸å‡º

4. [éŒ¯èª¤è™•ç†èˆ‡ä¾‹å¤–ç‹€æ³ (Error Handling & Edge Cases)](#40-éŒ¯èª¤è™•ç†èˆ‡ä¾‹å¤–ç‹€æ³error-handling--edge-cases)
   - 4.1 èªè­‰ç›¸é—œéŒ¯èª¤
   - 4.2 ç¶²è·¯é€£ç·šéŒ¯èª¤
   - 4.3 è¼¸å…¥é©—è­‰éŒ¯èª¤
   - 4.4 ç³»çµ±ç•°å¸¸è™•ç†

---

## 1.0 æ¨¡çµ„æ¦‚è¿°ï¼ˆModule Overviewï¼‰

### 1.1 æ¨¡çµ„å®šä½èˆ‡è·è²¬

**ç³»çµ±é€²å…¥åŠŸèƒ½ç¾¤**æ˜¯LCAS 2.0å°ˆæ¡ˆPresentation Layerçš„æ ¸å¿ƒå…¥å£æ¨¡çµ„ç¾¤ï¼Œè² è²¬è™•ç†ä½¿ç”¨è€…å¾é¦–æ¬¡æ¥è§¸ç³»çµ±åˆ°æˆåŠŸé€²å…¥ä¸»è¦åŠŸèƒ½çš„å®Œæ•´æµç¨‹ã€‚æœ¬åŠŸèƒ½ç¾¤å°æ‡‰0090 Sprintè¨ˆç•«çš„**Phase 1**ç¯„åœï¼Œç¢ºä¿ä½¿ç”¨è€…èƒ½å¤ é †åˆ©å®Œæˆè¨»å†Šã€ç™»å…¥ã€æ¨¡å¼è©•ä¼°èˆ‡è·¨å¹³å°æ•´åˆã€‚

**æ ¸å¿ƒè·è²¬ç¯„åœ**ï¼š
- ğŸš€ **APPå•Ÿå‹•ç®¡ç†**ï¼šå“ç‰Œå±•ç¤ºã€ç‰ˆæœ¬æª¢æŸ¥ã€è¼‰å…¥ç‹€æ…‹
- ğŸ‘¤ **èº«ä»½èªè­‰æµç¨‹**ï¼šè¨»å†Šã€ç™»å…¥ã€å¯†ç¢¼é‡è¨­å®Œæ•´é«”é©—
- ğŸ¯ **æ¨¡å¼è©•ä¼°æ©Ÿåˆ¶**ï¼šå››æ¨¡å¼ç†è«–çš„å¯¦éš›æ‡‰ç”¨èˆ‡è¨­å®š
- ğŸ”— **è·¨å¹³å°æ•´åˆ**ï¼šLINE OAèˆ‡APPçš„ç„¡ç¸«é€£æ¥é«”é©—
- ğŸ“± **ä½¿ç”¨å¼•å°**ï¼šé¦–æ¬¡ä½¿ç”¨è€…çš„å®Œæ•´å¼•å°æµç¨‹

### 1.2 åŠŸèƒ½ç¾¤ç¯„åœå®šç¾©

åŸºæ–¼7021 Screen listæ–‡ä»¶ï¼Œæœ¬åŠŸèƒ½ç¾¤æ¶µè“‹ä»¥ä¸‹8å€‹æ ¸å¿ƒç•«é¢ï¼š

| ç•«é¢ç·¨è™Ÿ | ç•«é¢åç¨± | Phase | æ ¸å¿ƒåŠŸèƒ½ | å››æ¨¡å¼æ”¯æ´ |
|----------|----------|-------|----------|------------|
| **S-102** | APPå•Ÿå‹•é  | Phase 1 | å“ç‰Œå±•ç¤ºã€è¼‰å…¥é€²åº¦ | çµ±ä¸€é«”é©— |
| **S-103** | APPè¨»å†Šé  | Phase 1 | Emailè¨»å†Šã€å¯†ç¢¼è¨­å®š | âœ… å·®ç•°åŒ– |
| **S-104** | APPç™»å…¥é  | Phase 1 | å¸³è™Ÿå¯†ç¢¼ã€ç¬¬ä¸‰æ–¹ç™»å…¥ | âœ… å·®ç•°åŒ– |
| **S-105** | å¿˜è¨˜å¯†ç¢¼é  | Phase 1 | Emailé‡è¨­ã€é©—è­‰æµç¨‹ | âœ… å·®ç•°åŒ– |
| **S-106** | æ¨¡å¼è©•ä¼°å•å·é  | Phase 1 | 5é¡Œè©•ä¼°ã€æ¨¡å¼æ¨è–¦ | âœ… æ ¸å¿ƒåŠŸèƒ½ |
| **S-107** | è·¨å¹³å°ç¶å®šé  | Phase 1 | LINE OAç¶å®šã€QR Code | çµ±ä¸€é«”é©— |
| **S-108** | APPä¸‹è¼‰æ¨å»£é  | Phase 1 | åŠŸèƒ½ä»‹ç´¹ã€ä¸‹è¼‰å¼•å° | çµ±ä¸€é«”é©— |

**å‚™è¨»**ï¼šS-101 LINE OAæ­¡è¿é å±¬æ–¼LINE OAå¹³å°ï¼Œä¸åœ¨Flutter APPç¯„åœå…§ã€‚

### 1.3 å››æ¨¡å¼å·®ç•°åŒ–ç­–ç•¥

åŸºæ–¼0015æ–‡ä»¶çš„å››æ¨¡å¼ç†è«–ï¼Œæœ¬åŠŸèƒ½ç¾¤å¯¦ç¾ä»¥ä¸‹å·®ç•°åŒ–ç­–ç•¥ï¼š

#### 1.3.1 Expertæ¨¡å¼ï¼ˆå°ˆå®¶æ¨¡å¼ï¼‰
- **è¨»å†Š/ç™»å…¥**ï¼šæä¾›å®Œæ•´é¸é …ã€é€²éšå®‰å…¨è¨­å®šã€æ‰¹æ¬¡åŒ¯å…¥åŠŸèƒ½
- **æ¨¡å¼è©•ä¼°**ï¼šé¡¯ç¤ºè©³ç´°è©•ä¼°é‚è¼¯ã€æ”¯æ´æ‰‹å‹•èª¿æ•´ã€æä¾›å°ˆæ¥­å»ºè­°
- **è¦–è¦ºé¢¨æ ¼**ï¼šå°ˆæ¥­è—è‰²èª¿ã€è±å¯Œè³‡è¨Šå¯†åº¦ã€å¤šå±¤æ¬¡å°èˆª

#### 1.3.2 Inertialæ¨¡å¼ï¼ˆæ…£æ€§æ¨¡å¼ï¼‰
- **è¨»å†Š/ç™»å…¥**ï¼šå›ºå®šæ­¥é©Ÿæµç¨‹ã€ä¸€è‡´æ€§ä»‹é¢ä½ˆå±€ã€å¯é æ¸¬æ“ä½œ
- **æ¨¡å¼è©•ä¼°**ï¼šæ¨™æº–åŒ–å•å·ã€æ¸…æ™°çš„æ­¥é©ŸæŒ‡ç¤ºã€ç©©å®šçš„é€²åº¦å±•ç¤º
- **è¦–è¦ºé¢¨æ ¼**ï¼šç©©å®šç°è—è‰²èª¿ã€ç°¡æ½”ä½ˆå±€ã€é‚è¼¯æ¸…æ™°

#### 1.3.3 Cultivationæ¨¡å¼ï¼ˆé¤Šæˆæ¨¡å¼ï¼‰
- **è¨»å†Š/ç™»å…¥**ï¼šå¼•å°å¼æµç¨‹ã€é€²åº¦è¿½è¹¤ã€æ¿€å‹µæ€§è¨Šæ¯
- **æ¨¡å¼è©•ä¼°**ï¼šäº’å‹•å¼å•å·ã€å³æ™‚å›é¥‹ã€æˆé•·å»ºè­°
- **è¦–è¦ºé¢¨æ ¼**ï¼šæ´»åŠ›ç¶ è‰²èª¿ã€å‹•æ…‹æ•ˆæœã€æˆå°±æ„Ÿè¨­è¨ˆ

#### 1.3.4 Guidingæ¨¡å¼ï¼ˆå¼•å°æ¨¡å¼ï¼‰
- **è¨»å†Š/ç™»å…¥**ï¼šæ¥µç°¡æµç¨‹ã€è‡ªå‹•å¡«å…¥ã€ä¸€éµå®Œæˆ
- **æ¨¡å¼è©•ä¼°**ï¼šç°¡åŒ–å•å·ã€æ™ºæ…§æ¨è–¦ã€æœ€å°‘æ±ºç­–
- **è¦–è¦ºé¢¨æ ¼**ï¼šæº«å’Œæ©˜è‰²èª¿ã€å¤§æŒ‰éˆ•è¨­è¨ˆã€æ¸…æ™°æŒ‡å¼•

### 1.4 æŠ€è¡“æ¶æ§‹æ•´åˆ

#### 1.4.1 APIæ•´åˆè¦ç¯„
æœ¬åŠŸèƒ½ç¾¤**åš´æ ¼éµå¾ª0026æ–‡ä»¶PL-APL-BLä¸‰å±¤æ¶æ§‹å°æ‡‰**ï¼Œåƒ…æ¶ˆè²»ä»¥ä¸‹APIæœå‹™ï¼š

- **8101 èªè­‰æœå‹™API**ï¼šå®Œæ•´çš„è¨»å†Šã€ç™»å…¥ã€å¯†ç¢¼é‡è¨­åŠŸèƒ½
- **8102 ç”¨æˆ¶ç®¡ç†æœå‹™API**ï¼šæ¨¡å¼è©•ä¼°ã€å€‹äººè³‡æ–™ã€åå¥½è¨­å®š
- **8111 ç³»çµ±æœå‹™API**ï¼šAPPç‰ˆæœ¬æª¢æŸ¥ã€ç³»çµ±ç‹€æ…‹ã€è¨­å®šåŒæ­¥

#### 1.4.2 ç‹€æ…‹ç®¡ç†æ¶æ§‹
```dart
// é€²å…¥éšæ®µç‹€æ…‹ç®¡ç†çµæ§‹
EntryFlowStateManager/
â”œâ”€â”€ AuthState          // èªè­‰ç‹€æ…‹ç®¡ç†
â”œâ”€â”€ ModeAssessmentState // æ¨¡å¼è©•ä¼°ç‹€æ…‹
â”œâ”€â”€ OnboardingState     // å¼•å°æµç¨‹ç‹€æ…‹
â””â”€â”€ PlatformBindingState // è·¨å¹³å°ç¶å®šç‹€æ…‹
```

#### 1.4.3 æœ¬åœ°è³‡æ–™å„²å­˜
- **èªè­‰Token**ï¼šä½¿ç”¨FlutterSecureStorageå®‰å…¨å„²å­˜
- **æ¨¡å¼è¨­å®š**ï¼šSharedPreferencesæŒä¹…åŒ–
- **å¼•å°é€²åº¦**ï¼šæœ¬åœ°å¿«å–æ©Ÿåˆ¶

### 1.5 å“è³ªèˆ‡å®‰å…¨è¦æ±‚

#### 1.5.1 æ•ˆèƒ½è¦æ±‚
- **APPå•Ÿå‹•æ™‚é–“**ï¼šâ‰¤ 3ç§’ï¼ˆå†·å•Ÿå‹•ï¼‰ã€â‰¤ 1ç§’ï¼ˆç†±å•Ÿå‹•ï¼‰
- **é é¢è¼‰å…¥æ™‚é–“**ï¼šâ‰¤ 1ç§’ï¼ˆæœ¬åœ°é é¢ï¼‰ã€â‰¤ 3ç§’ï¼ˆAPIä¾è³´é é¢ï¼‰
- **è¨˜æ†¶é«”ä½¿ç”¨**ï¼šâ‰¤ 50MBï¼ˆå®Œæ•´é€²å…¥æµç¨‹ï¼‰

#### 1.5.2 å®‰å…¨è¦æ±‚
- **å¯†ç¢¼å®‰å…¨**ï¼š8ä½æ•¸ä»¥ä¸Šã€åŒ…å«å¤§å°å¯«å­—æ¯èˆ‡æ•¸å­—
- **Tokenç®¡ç†**ï¼šè‡ªå‹•æ›´æ–°ã€å®‰å…¨å„²å­˜ã€éæœŸæª¢æŸ¥
- **è¼¸å…¥é©—è­‰**ï¼šå‰ç«¯é©—è­‰ + å¾Œç«¯é©—è­‰é›™é‡ä¿è­·

#### 1.5.3 å¯ç”¨æ€§è¦æ±‚
- **é›¢ç·šæ”¯æ´**ï¼šåŸºæœ¬åŠŸèƒ½å¯é›¢ç·šä½¿ç”¨ã€è‡ªå‹•åŒæ­¥æ©Ÿåˆ¶
- **éŒ¯èª¤å¾©åŸ**ï¼šå‹å–„éŒ¯èª¤è¨Šæ¯ã€è‡ªå‹•é‡è©¦ã€æ›¿ä»£æ–¹æ¡ˆ
- **ç„¡éšœç¤™æ”¯æ´**ï¼šScreen Readeræ”¯æ´ã€éµç›¤å°èˆªã€å°æ¯”åº¦ç¬¦åˆæ¨™æº–

### 1.6 èˆ‡å…¶ä»–åŠŸèƒ½ç¾¤çš„å”ä½œ

#### 1.6.1 åŠŸèƒ½ç¾¤ä»‹é¢
- **â†’ è¨˜å¸³æ ¸å¿ƒåŠŸèƒ½ç¾¤**ï¼šå®Œæˆèªè­‰å¾Œç›´æ¥é€²å…¥è¨˜å¸³ä¸»é ï¼ˆS-202ï¼‰
- **â†’ ç³»çµ±åŠŸèƒ½ç¾¤**ï¼šæ¨¡å¼è¨­å®šåŒæ­¥è‡³å€‹äººè¨­å®šé ï¼ˆS-505ï¼‰
- **â†” LINE OAå¹³å°**ï¼šè·¨å¹³å°ç¶å®šèˆ‡è³‡æ–™åŒæ­¥

#### 1.6.2 è³‡æ–™æµå‘
```
é€²å…¥éšæ®µ â†’ èªè­‰å®Œæˆ â†’ æ¨¡å¼è¨­å®š â†’ ä¸»è¦åŠŸèƒ½ç¾¤
    â†“
æœ¬åœ°å„²å­˜ â† APIåŒæ­¥ â† é›²ç«¯è³‡æ–™
```

---

## 2.0 åŠŸèƒ½éœ€æ±‚ï¼ˆFunctional Requirementsï¼‰

### 2.1 APPå•Ÿå‹•èˆ‡åˆå§‹åŒ–
**å°æ‡‰ç•«é¢**ï¼šS-102 APPå•Ÿå‹•é 
**é–‹ç™¼å„ªå…ˆç´š**ï¼šP1ï¼ˆPhase 1 å¿…é ˆå®Œæˆï¼‰

#### 2.1.1 åŸºæœ¬åŠŸèƒ½éœ€æ±‚
- **FR-102-001**ï¼šæ‡‰ç”¨ç¨‹å¼å•Ÿå‹•æ™‚é¡¯ç¤ºLCASå“ç‰ŒLogoèˆ‡è¼‰å…¥å‹•ç•«
- **FR-102-002**ï¼šè‡ªå‹•æª¢æŸ¥æ‡‰ç”¨ç¨‹å¼ç‰ˆæœ¬ï¼Œæç¤ºæ›´æ–°è³‡è¨Š
- **FR-102-003**ï¼šè¼‰å…¥ç”¨æˆ¶èªè­‰ç‹€æ…‹ï¼Œåˆ¤æ–·æ˜¯å¦éœ€è¦ç™»å…¥
- **FR-102-004**ï¼šåˆå§‹åŒ–å››æ¨¡å¼è¨­å®šï¼Œè¼‰å…¥ç”¨æˆ¶åå¥½é…ç½®
- **FR-102-005**ï¼šæª¢æŸ¥ç¶²è·¯é€£ç·šç‹€æ…‹ï¼Œè™•ç†é›¢ç·šæ¨¡å¼åˆ‡æ›

### 2.2 ä½¿ç”¨è€…è¨»å†ŠåŠŸèƒ½
**å°æ‡‰ç•«é¢**ï¼šS-103 APPè¨»å†Šé 
**é–‹ç™¼å„ªå…ˆç´š**ï¼šP1ï¼ˆPhase 1 å¿…é ˆå®Œæˆï¼‰

#### 2.2.1 åŸºæœ¬åŠŸèƒ½éœ€æ±‚
- **FR-103-001**ï¼šæä¾›Emailåœ°å€è¨»å†Šè¼¸å…¥æ¡†èˆ‡æ ¼å¼é©—è­‰
- **FR-103-002**ï¼šæä¾›å¯†ç¢¼è¨­å®šè¼¸å…¥æ¡†èˆ‡å¼·åº¦æª¢æŸ¥
- **FR-103-003**ï¼šæä¾›å¯†ç¢¼ç¢ºèªè¼¸å…¥æ¡†èˆ‡ä¸€è‡´æ€§é©—è­‰
- **FR-103-004**ï¼šæ•´åˆGoogle OAuthè¨»å†Šé¸é …
- **FR-103-005**ï¼šè¨»å†ŠæˆåŠŸå¾Œè‡ªå‹•å°å‘æ¨¡å¼è©•ä¼°é é¢

### 2.3 ä½¿ç”¨è€…ç™»å…¥åŠŸèƒ½
**å°æ‡‰ç•«é¢**ï¼šS-104 APPç™»å…¥é 
**é–‹ç™¼å„ªå…ˆç´š**ï¼šP1ï¼ˆPhase 1 å¿…é ˆå®Œæˆï¼‰

#### 2.3.1 åŸºæœ¬åŠŸèƒ½éœ€æ±‚
- **FR-104-001**ï¼šæä¾›Email/å¯†ç¢¼ç™»å…¥è¡¨å–®èˆ‡é©—è­‰
- **FR-104-002**ï¼šæ•´åˆGoogle OAuthç™»å…¥é¸é …
- **FR-104-003**ï¼šæä¾›ã€Œè¨˜ä½æˆ‘ã€é¸é …èˆ‡è‡ªå‹•ç™»å…¥åŠŸèƒ½
- **FR-104-004**ï¼šç™»å…¥æˆåŠŸå¾Œå°å‘å°æ‡‰çš„ä¸»è¦åŠŸèƒ½é é¢
- **FR-104-005**ï¼šæä¾›å¿˜è¨˜å¯†ç¢¼é€£çµå°å‘é‡è¨­é é¢

### 2.4 å¯†ç¢¼é‡è¨­åŠŸèƒ½
**å°æ‡‰ç•«é¢**ï¼šS-105 å¿˜è¨˜å¯†ç¢¼é 
**é–‹ç™¼å„ªå…ˆç´š**ï¼šP1ï¼ˆPhase 1 å¿…é ˆå®Œæˆï¼‰

#### 2.4.1 åŸºæœ¬åŠŸèƒ½éœ€æ±‚
- **FR-105-001**ï¼šæä¾›Emailè¼¸å…¥æ¡†ç™¼é€é‡è¨­é€£çµ
- **FR-105-002**ï¼šé¡¯ç¤ºé‡è¨­éƒµä»¶ç™¼é€ç‹€æ…‹èˆ‡ç¢ºèªè¨Šæ¯
- **FR-105-003**ï¼šæä¾›è¿”å›ç™»å…¥é é¢çš„å°èˆªé¸é …
- **FR-105-004**ï¼šè™•ç†é‡è¨­é€£çµé»æ“Šèˆ‡å¯†ç¢¼æ›´æ–°æµç¨‹

### 2.5 æ¨¡å¼è©•ä¼°èˆ‡è¨­å®š
**å°æ‡‰ç•«é¢**ï¼šS-106 æ¨¡å¼è©•ä¼°å•å·é 
**é–‹ç™¼å„ªå…ˆç´š**ï¼šP1ï¼ˆPhase 1 å¿…é ˆå®Œæˆï¼‰

#### 2.5.1 åŸºæœ¬åŠŸèƒ½éœ€æ±‚
- **FR-106-001**ï¼šæä¾›5é¡Œæ¨™æº–åŒ–è©•ä¼°å•å·ä»‹é¢
- **FR-106-002**ï¼šæ ¹æ“šè©•ä¼°çµæœæ¨è–¦æœ€é©åˆçš„ä½¿ç”¨æ¨¡å¼
- **FR-106-003**ï¼šæä¾›å››æ¨¡å¼è©³ç´°èªªæ˜èˆ‡æ¯”è¼ƒè³‡è¨Š
- **FR-106-004**ï¼šæ”¯æ´æ‰‹å‹•æ¨¡å¼é¸æ“‡èˆ‡ç¢ºèªæ©Ÿåˆ¶
- **FR-106-005**ï¼šå®Œæˆè©•ä¼°å¾Œä¿å­˜æ¨¡å¼è¨­å®šè‡³ç”¨æˆ¶è³‡æ–™

### 2.6 è·¨å¹³å°ç¶å®šåŠŸèƒ½
**å°æ‡‰ç•«é¢**ï¼šS-107 è·¨å¹³å°ç¶å®šé 
**é–‹ç™¼å„ªå…ˆç´š**ï¼šP1ï¼ˆPhase 1 å¿…é ˆå®Œæˆï¼‰

#### 2.6.1 åŸºæœ¬åŠŸèƒ½éœ€æ±‚
- **FR-107-001**ï¼šé¡¯ç¤ºLINE OAä»‹ç´¹èˆ‡åŠŸèƒ½èªªæ˜
- **FR-107-002**ï¼šæä¾›QR CodeæƒæåŠŸèƒ½åŠ å…¥LINE OA
- **FR-107-003**ï¼šæª¢æ¸¬LINE OAç¶å®šç‹€æ…‹èˆ‡å¸³è™Ÿç¢ºèª
- **FR-107-004**ï¼šå®Œæˆç¶å®šå¾ŒåŒæ­¥ç”¨æˆ¶è³‡æ–™èˆ‡è¨­å®š
- **FR-107-005**ï¼šæä¾›è·³éç¶å®šé¸é …èˆ‡å¾ŒçºŒè¨­å®šæé†’

### 2.7 APPæ¨å»£å±•ç¤º
**å°æ‡‰ç•«é¢**ï¼šS-108 APPä¸‹è¼‰æ¨å»£é 
**é–‹ç™¼å„ªå…ˆç´š**ï¼šP2ï¼ˆPhase 1 é¸æ“‡æ€§å®Œæˆï¼‰

#### 2.7.1 åŸºæœ¬åŠŸèƒ½éœ€æ±‚
- **FR-108-001**ï¼šå±•ç¤ºAPPæ ¸å¿ƒåŠŸèƒ½èˆ‡å››æ¨¡å¼ç‰¹è‰²
- **FR-108-002**ï¼šæä¾›APP Storeèˆ‡Google Playä¸‹è¼‰é€£çµ
- **FR-108-003**ï¼šé¡¯ç¤ºç”¨æˆ¶è©•åƒ¹èˆ‡ä½¿ç”¨çµ±è¨ˆè³‡è¨Š
- **FR-108-004**ï¼šæä¾›ç¤¾ç¾¤åˆ†äº«åŠŸèƒ½èˆ‡æ¨è–¦æ©Ÿåˆ¶

### 2.8 éŒ¯èª¤è™•ç†èˆ‡é‡è©¦æ©Ÿåˆ¶
**è·¨ç•«é¢é€šç”¨åŠŸèƒ½**
**é–‹ç™¼å„ªå…ˆç´š**ï¼šP1ï¼ˆPhase 1 å¿…é ˆå®Œæˆï¼‰

#### 2.8.1 åŸºæœ¬åŠŸèƒ½éœ€æ±‚
- **FR-109-001**ï¼šç¶²è·¯é€£ç·šä¸­æ–·æ™‚æä¾›é›¢ç·šæ¨¡å¼èˆ‡é‡è©¦æ©Ÿåˆ¶
- **FR-109-002**ï¼šAPIèª¿ç”¨å¤±æ•—æ™‚é¡¯ç¤ºå‹å–„éŒ¯èª¤è¨Šæ¯èˆ‡å»ºè­°
- **FR-109-003**ï¼šè¼¸å…¥é©—è­‰éŒ¯èª¤æ™‚æä¾›å³æ™‚å›é¥‹èˆ‡ä¿®æ­£å»ºè­°
- **FR-109-004**ï¼šç³»çµ±ç•°å¸¸æ™‚æä¾›éŒ¯èª¤å›å ±èˆ‡å®¢æœè¯ç¹«æ–¹å¼

---

## 3.0 è¼¸å…¥/è¼¸å‡ºè¦æ ¼ï¼ˆInput & Output Specificationsï¼‰

### 3.1 è¼¸å…¥

#### 3.1.1 è¨»å†ŠåŠŸèƒ½è¼¸å…¥è¦æ ¼ï¼ˆS-103å°æ‡‰POST /auth/registerï¼‰

**åŸºæ–¼8101èªè­‰æœå‹™APIè¦æ ¼**ï¼š
```yaml
email:
  type: string
  format: email
  required: true
  max_length: 255
  example: "user@example.com"
  description: "ä½¿ç”¨è€… Email åœ°å€"

password:
  type: string
  minLength: 8
  required: true
  example: "SecurePassword123"
  description: "å¯†ç¢¼ï¼Œè‡³å°‘ 8 å€‹å­—å…ƒ"

confirmPassword:
  type: string
  required: true  # éGuidingæ¨¡å¼å¿…å¡«
  example: "SecurePassword123"
  description: "ç¢ºèªå¯†ç¢¼ï¼ˆé Guiding æ¨¡å¼å¿…å¡«ï¼‰"

displayName:
  type: string
  minLength: 2
  maxLength: 50
  required: true  # éGuidingæ¨¡å¼å¿…å¡«
  example: "å¼µå°æ˜"
  description: "é¡¯ç¤ºåç¨±ï¼ˆé Guiding æ¨¡å¼å¿…å¡«ï¼‰"

userMode:
  type: string
  enum: [Expert, Inertial, Cultivation, Guiding]
  required: true
  example: "Expert"
  description: "ä½¿ç”¨è€…æ¨¡å¼"

acceptTerms:
  type: boolean
  required: true
  example: true
  description: "åŒæ„æœå‹™æ¢æ¬¾"

acceptPrivacy:
  type: boolean
  required: false
  example: true
  description: "åŒæ„éš±ç§æ”¿ç­–"

timezone:
  type: string
  required: false
  example: "Asia/Taipei"
  description: "æ™‚å€è¨­å®š"

language:
  type: string
  required: false
  example: "zh-TW"
  description: "èªè¨€åå¥½"
```

#### 3.1.2 ç™»å…¥åŠŸèƒ½è¼¸å…¥è¦æ ¼ï¼ˆS-104å°æ‡‰POST /auth/loginï¼‰

**åŸºæ–¼8101èªè­‰æœå‹™APIè¦æ ¼**ï¼š
```yaml
email:
  type: string
  format: email
  required: true
  example: "user@example.com"

password:
  type: string
  required: true
  example: "SecurePassword123"

rememberMe:
  type: boolean
  required: false
  default: false
  example: true
  description: "è¨˜ä½ç™»å…¥ç‹€æ…‹"

deviceInfo:
  type: object
  required: false
  properties:
    deviceId:
      type: string
      example: "device-uuid"
    platform:
      type: string
      enum: [iOS, Android, Web]
      example: "iOS"
    appVersion:
      type: string
      example: "1.0.0"
```

#### 3.1.3 å¯†ç¢¼é‡è¨­è¼¸å…¥è¦æ ¼ï¼ˆS-105å°æ‡‰POST /auth/forgot-passwordï¼‰

**åŸºæ–¼8101èªè­‰æœå‹™APIè¦æ ¼**ï¼š
```yaml
forgot_password_input:
  email:
    type: string
    format: email
    required: true
    example: "user@example.com"

reset_password_input:
  token:
    type: string
    required: true
    example: "reset-token-string"
    description: "å¯†ç¢¼é‡è¨­ Token"
  newPassword:
    type: string
    minLength: 8
    required: true
    example: "NewSecurePassword123"
    description: "æ–°å¯†ç¢¼"
  confirmPassword:
    type: string
    required: true
    example: "NewSecurePassword123"
    description: "ç¢ºèªæ–°å¯†ç¢¼"
```

#### 3.1.4 æ¨¡å¼è©•ä¼°è¼¸å…¥è¦æ ¼ï¼ˆS-106å°æ‡‰POST /users/assessmentï¼‰

**åŸºæ–¼8102ç”¨æˆ¶ç®¡ç†æœå‹™APIè¦æ ¼**ï¼š
```yaml
assessment_input:
  answers:
    type: array
    required: true
    items:
      type: object
      properties:
        questionId:
          type: integer
          range: [1, 5]
        answer:
          type: string
          enum: ["A", "B", "C", "D"]
    example:
      - questionId: 1
        answer: "A"
      - questionId: 2
        answer: "C"
```

#### 3.1.5 è·¨å¹³å°ç¶å®šè¼¸å…¥è¦æ ¼ï¼ˆS-107å°æ‡‰POST /auth/bind-lineï¼‰

**åŸºæ–¼8101èªè­‰æœå‹™APIè¦æ ¼**ï¼š
```yaml
line_binding_input:
  lineUserId:
    type: string
    required: true
    example: "U1234567890abcdef"
    description: "LINE ä½¿ç”¨è€… ID"
  lineAccessToken:
    type: string
    required: true
    example: "line-access-token"
    description: "LINE å­˜å– Token"
  lineProfile:
    type: object
    required: false
    properties:
      displayName:
        type: string
        example: "LINE ä½¿ç”¨è€…"
      pictureUrl:
        type: string
        format: uri
        example: "https://profile.line-scdn.net/..."
```

### 3.2 è¼¸å‡º

#### 3.2.1 è¨»å†ŠåŠŸèƒ½è¼¸å‡ºè¦æ ¼ï¼ˆS-103ï¼‰

**æˆåŠŸå›æ‡‰ï¼ˆHTTP 201ï¼‰åŸºæ–¼8101 APIè¦æ ¼**ï¼š
```yaml
registration_success:
  success:
    type: boolean
    example: true
  data:
    type: object
    properties:
      userId:
        type: string
        example: "uuid-string"
        description: "ä½¿ç”¨è€… ID"
      email:
        type: string
        example: "user@example.com"
      userMode:
        type: string
        example: "Expert"
      verificationSent:
        type: boolean
        example: true
        description: "æ˜¯å¦å·²ç™¼é€é©—è­‰ä¿¡"
      needsAssessment:
        type: boolean
        example: false
        description: "æ˜¯å¦éœ€è¦æ¨¡å¼è©•ä¼°"
      token:
        type: string
        example: "jwt-token-string"
        description: "å­˜å– Token"
      refreshToken:
        type: string
        example: "refresh-token-string"
        description: "åˆ·æ–° Token"
      expiresAt:
        type: string
        format: date-time
        example: "2025-01-28T00:00:00Z"
        description: "Token éæœŸæ™‚é–“"
  metadata:
    type: object
    required:
      - timestamp
      - requestId
      - userMode
    properties:
      timestamp:
        type: string
        format: date-time
        example: "2025-01-27T12:00:00Z"
      requestId:
        type: string
        example: "req-uuid-string"
      userMode:
        type: string
        enum: [Expert, Inertial, Cultivation, Guiding]
        example: "Expert"
```

#### 3.2.2 ç™»å…¥åŠŸèƒ½è¼¸å‡ºè¦æ ¼ï¼ˆS-104ï¼‰

**æˆåŠŸå›æ‡‰ï¼ˆHTTP 200ï¼‰åŸºæ–¼8101 APIè¦æ ¼å››æ¨¡å¼å·®ç•°åŒ–**ï¼š
```yaml
login_success_expert:
  success:
    type: boolean
    example: true
  data:
    token:
      type: string
      example: "jwt-token"
    refreshToken:
      type: string
      example: "refresh-jwt-token"
    expiresAt:
      type: string
      format: date-time
      example: "2025-01-28T00:00:00Z"
    user:
      type: object
      # UserProfile schema from 8101
    loginHistory:
      type: object
      description: "Expert æ¨¡å¼å°ˆç”¨"
      properties:
        lastLogin:
          type: string
          format: date-time
        loginCount:
          type: integer
        newDeviceDetected:
          type: boolean
  metadata:
    timestamp:
      type: string
      format: date-time
    requestId:
      type: string
    userMode:
      type: string
      example: "Expert"

login_success_cultivation:
  # ç›¸åŒåŸºæœ¬çµæ§‹ï¼Œä½†å¢åŠ æ¿€å‹µè³‡è¨Š
  data:
    # ... åŸºæœ¬æ¬„ä½
    streakInfo:
      type: object
      description: "Cultivation æ¨¡å¼å°ˆç”¨"
      properties:
        currentStreak:
          type: integer
        longestStreak:
          type: integer
        streakMessage:
          type: string
```

#### 3.2.3 æ¨¡å¼è©•ä¼°è¼¸å‡ºè¦æ ¼ï¼ˆS-106ï¼‰

**åŸºæ–¼8102ç”¨æˆ¶ç®¡ç†æœå‹™APIè¦æ ¼**ï¼š
```yaml
assessment_result:
  success:
    type: boolean
    example: true
  data:
    recommendedMode:
      type: string
      enum: [Expert, Inertial, Cultivation, Guiding]
      example: "Expert"
    confidence:
      type: integer
      range: [0, 100]
      example: 85
      description: "æ¨è–¦ä¿¡å¿ƒåº¦"
    explanation:
      type: string
      example: "åŸºæ–¼æ‚¨çš„å›ç­”ï¼Œå»ºè­°ä½¿ç”¨å°ˆå®¶æ¨¡å¼ä»¥ç²å¾—å®Œæ•´åŠŸèƒ½é«”é©—"
    modeCharacteristics:
      type: object
      properties:
        Expert:
          type: string
          example: "å®Œæ•´åŠŸèƒ½ã€å°ˆæ¥­å·¥å…·ã€æ·±åº¦è¨­å®š"
        alternative:
          type: string
          example: "Inertial"
  metadata:
    timestamp:
      type: string
      format: date-time
    requestId:
      type: string
    userMode:
      type: string
```

#### 3.2.4 è·¨å¹³å°ç¶å®šè¼¸å‡ºè¦æ ¼ï¼ˆS-107ï¼‰

**åŸºæ–¼8101èªè­‰æœå‹™APIè¦æ ¼**ï¼š
```yaml
binding_success:
  success:
    type: boolean
    example: true
  data:
    message:
      type: string
      example: "LINE å¸³è™Ÿç¶å®šæˆåŠŸ"
    linkedAccounts:
      type: object
      properties:
        email:
          type: string
          example: "user@example.com"
        line:
          type: string
          example: "U1234567890abcdef"
        bindingDate:
          type: string
          format: date-time
          example: "2025-01-27T12:00:00Z"
  metadata:
    timestamp:
      type: string
      format: date-time
    requestId:
      type: string
    userMode:
      type: string
```

#### 3.2.5 ç³»çµ±æœå‹™è¼¸å‡ºè¦æ ¼

**APPå•Ÿå‹•é é¢è¼¸å‡ºï¼ˆS-102å°æ‡‰GET /system/app-infoï¼‰**ï¼š
```yaml
app_info_response:
  success:
    type: boolean
    example: true
  data:
    version:
      type: string
      example: "1.0.0"
    minVersion:
      type: string
      example: "1.0.0"
    forceUpdate:
      type: boolean
      example: false
    features:
      type: object
      description: "åŠŸèƒ½é–‹é—œ"
    maintenanceMode:
      type: boolean
      example: false
  metadata:
    timestamp:
      type: string
      format: date-time
    requestId:
      type: string
    userMode:
      type: string
```

---

## 4.0 éŒ¯èª¤è™•ç†èˆ‡ä¾‹å¤–ç‹€æ³ï¼ˆError Handling & Edge Casesï¼‰

### 4.1 èªè­‰ç›¸é—œéŒ¯èª¤ï¼ˆåŸºæ–¼8101 APIè¦æ ¼ï¼‰

#### 4.1.1 è¨»å†ŠéŒ¯èª¤è™•ç†ï¼ˆPOST /auth/registerï¼‰
```yaml
EMAIL_ALREADY_EXISTS:
  http_status: 409
  code: "EMAIL_ALREADY_EXISTS"
  message: "æ­¤é›»å­éƒµä»¶å·²è¢«è¨»å†Šï¼Œè«‹ä½¿ç”¨å…¶ä»–ä¿¡ç®±æˆ–ç›´æ¥ç™»å…¥"
  field: "email"
  ui_action: "å°å‘ç™»å…¥é é¢"
  retry_allowed: false
  
VALIDATION_ERROR:
  http_status: 400
  code: "VALIDATION_ERROR" 
  message: "å¯†ç¢¼é•·åº¦ä¸è¶³ï¼Œè«‹è¼¸å…¥è‡³å°‘8ä½æ•¸"
  field: "password"
  ui_action: "é‡æ–°è¼¸å…¥å¯†ç¢¼"
  retry_allowed: true
  details:
    validation:
      - field: "password"
        message: "å¯†ç¢¼é•·åº¦ä¸è¶³"
        code: "PASSWORD_TOO_SHORT"
```

#### 4.1.2 ç™»å…¥éŒ¯èª¤è™•ç†ï¼ˆPOST /auth/loginï¼‰
```yaml
INVALID_CREDENTIALS:
  http_status: 401
  code: "INVALID_CREDENTIALS"
  message: "å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹é‡æ–°è¼¸å…¥"
  field: null
  ui_action: "é‡æ–°è¼¸å…¥æˆ–é‡è¨­å¯†ç¢¼"
  retry_allowed: true
  max_attempts: 5
  
ACCOUNT_LOCKED:
  http_status: 423
  code: "ACCOUNT_LOCKED"
  message: "å¸³è™Ÿå› å¤šæ¬¡ç™»å…¥å¤±æ•—è¢«æš«æ™‚é–å®š"
  field: null
  ui_action: "è¯ç¹«å®¢æœæˆ–ç­‰å¾…è§£é–"
  retry_allowed: false
  unlock_at: "2025-01-27T14:00:00Z"
  
EMAIL_NOT_VERIFIED:
  http_status: 401
  code: "EMAIL_NOT_VERIFIED"
  message: "é›»å­éƒµä»¶å°šæœªé©—è­‰ï¼Œè«‹å…ˆå®Œæˆéƒµä»¶é©—è­‰"
  field: "email"
  ui_action: "é‡æ–°ç™¼é€é©—è­‰éƒµä»¶"
  retry_allowed: true
```

#### 4.1.3 å¯†ç¢¼é‡è¨­éŒ¯èª¤è™•ç†ï¼ˆPOST /auth/forgot-password & /auth/reset-passwordï¼‰
```yaml
EMAIL_NOT_FOUND:
  http_status: 404
  code: "EMAIL_NOT_FOUND"
  message: "æ‰¾ä¸åˆ°æ­¤é›»å­éƒµä»¶åœ°å€"
  field: "email"
  ui_action: "ç¢ºèªéƒµä»¶åœ°å€æˆ–è¨»å†Šæ–°å¸³è™Ÿ"
  retry_allowed: true
  
INVALID_RESET_TOKEN:
  http_status: 400
  code: "INVALID_RESET_TOKEN"
  message: "é‡è¨­é€£çµç„¡æ•ˆæˆ–å·²éæœŸ"
  field: "token"
  ui_action: "é‡æ–°ç”³è«‹å¯†ç¢¼é‡è¨­"
  retry_allowed: true
```

#### 4.1.4 Google OAuthéŒ¯èª¤è™•ç†ï¼ˆPOST /auth/google-loginï¼‰
```yaml
GOOGLE_AUTH_FAILED:
  http_status: 401
  code: "GOOGLE_AUTH_FAILED"
  message: "Google èªè­‰å¤±æ•—ï¼Œè«‹é‡æ–°å˜—è©¦"
  field: "googleToken"
  ui_action: "é‡æ–°é€²è¡ŒGoogleç™»å…¥"
  retry_allowed: true
```

#### 4.1.5 è·¨å¹³å°ç¶å®šéŒ¯èª¤è™•ç†ï¼ˆPOST /auth/bind-lineï¼‰
```yaml
LINE_ACCOUNT_ALREADY_BOUND:
  http_status: 409
  code: "LINE_ACCOUNT_ALREADY_BOUND"
  message: "æ­¤LINEå¸³è™Ÿå·²è¢«å…¶ä»–ä½¿ç”¨è€…ç¶å®š"
  field: "lineUserId"
  ui_action: "ä½¿ç”¨å…¶ä»–LINEå¸³è™Ÿæˆ–è§£é™¤åŸç¶å®š"
  retry_allowed: false
  
INVALID_LINE_TOKEN:
  http_status: 401
  code: "INVALID_LINE_TOKEN"
  message: "LINEå­˜å–æ¬Šæ–ç„¡æ•ˆæˆ–å·²éæœŸ"
  field: "lineAccessToken"
  ui_action: "é‡æ–°æˆæ¬ŠLINEå¸³è™Ÿ"
  retry_allowed: true
```

### 4.2 æ¨¡å¼è©•ä¼°éŒ¯èª¤ï¼ˆåŸºæ–¼8102 APIè¦æ ¼ï¼‰

#### 4.2.1 è©•ä¼°å•å·éŒ¯èª¤è™•ç†ï¼ˆPOST /users/assessmentï¼‰
```yaml
INVALID_QUESTIONNAIRE_ID:
  http_status: 400
  code: "INVALID_QUESTIONNAIRE_ID"
  message: "å•å·ç‰ˆæœ¬ç„¡æ•ˆæˆ–å·²éæœŸ"
  field: "questionnaireId"
  ui_action: "é‡æ–°è¼‰å…¥å•å·"
  retry_allowed: true
  
INCOMPLETE_ANSWERS:
  http_status: 400
  code: "VALIDATION_ERROR"
  message: "è«‹å®Œæˆæ‰€æœ‰å¿…å¡«é¡Œç›®"
  field: "answers"
  ui_action: "æª¢æŸ¥ä¸¦å®Œæˆæœªç­”é¡Œç›®"
  retry_allowed: true
  details:
    validation:
      - field: "answers[2]"
        message: "ç¬¬3é¡Œç‚ºå¿…å¡«"
        code: "REQUIRED_FIELD"
```

### 4.3 ç¶²è·¯é€£ç·šéŒ¯èª¤ï¼ˆåŸºæ–¼8088è¦ç¯„ï¼‰

#### 4.3.1 é€£ç·šä¸­æ–·è™•ç†
```yaml
CONNECTION_TIMEOUT:
  http_status: null  # ç¶²è·¯å±¤éŒ¯èª¤
  code: "NETWORK_TIMEOUT"
  message: "ç¶²è·¯é€£ç·šé€¾æ™‚ï¼Œè«‹æª¢æŸ¥æ‚¨çš„ç¶²è·¯è¨­å®š"
  ui_action: "é‡è©¦é€£ç·šæˆ–å•Ÿç”¨é›¢ç·šæ¨¡å¼"
  retry_allowed: true
  retry_delay: 3000  # 3ç§’å¾Œé‡è©¦
  max_retries: 3
  
NO_INTERNET_CONNECTION:
  http_status: null
  code: "NO_INTERNET"
  message: "ç„¡æ³•é€£æ¥ç¶²è·¯ï¼ŒæŸäº›åŠŸèƒ½å°‡æš«æ™‚ç„¡æ³•ä½¿ç”¨"
  ui_action: "å•Ÿç”¨é›¢ç·šæ¨¡å¼æˆ–æª¢æŸ¥ç¶²è·¯"
  offline_mode_available: true
  
DNS_RESOLUTION_FAILED:
  http_status: null
  code: "DNS_ERROR"
  message: "ç„¡æ³•è§£æä¼ºæœå™¨ä½å€"
  ui_action: "æª¢æŸ¥DNSè¨­å®šæˆ–ç¨å¾Œå†è©¦"
  retry_allowed: true
```

### 4.4 ä¼ºæœå™¨éŒ¯èª¤ï¼ˆåŸºæ–¼8088è¦ç¯„ï¼‰

#### 4.4.1 APIä¼ºæœå™¨éŒ¯èª¤
```yaml
INTERNAL_SERVER_ERROR:
  http_status: 500
  code: "INTERNAL_SERVER_ERROR"
  message: "ä¼ºæœå™¨æš«æ™‚ç„¡æ³•è™•ç†è«‹æ±‚ï¼Œè«‹ç¨å¾Œå†è©¦"
  ui_action: "è‡ªå‹•é‡è©¦æˆ–è¯ç¹«å®¢æœ"
  retry_allowed: true
  retry_strategy: "exponential_backoff"
  
SERVICE_UNAVAILABLE:
  http_status: 503
  code: "SERVICE_UNAVAILABLE"
  message: "æœå‹™æš«æ™‚ç¶­è­·ä¸­ï¼Œé è¨ˆ30åˆ†é˜å¾Œæ¢å¾©"
  ui_action: "ç­‰å¾…æœå‹™æ¢å¾©æˆ–æŸ¥çœ‹ç³»çµ±å…¬å‘Š"
  retry_allowed: false
  estimated_recovery: "2025-01-27T14:30:00Z"
  
RATE_LIMIT_EXCEEDED:
  http_status: 429
  code: "RATE_LIMIT_EXCEEDED"
  message: "è«‹æ±‚é »ç‡éé«˜ï¼Œè«‹ç¨å¾Œå†è©¦"
  ui_action: "é™ä½æ“ä½œé »ç‡æˆ–ç¨å¾Œé‡è©¦"
  retry_allowed: true
  reset_time: "2025-01-27T13:01:00Z"
```

### 4.5 æ¥­å‹™é‚è¼¯éŒ¯èª¤ï¼ˆåŸºæ–¼8088è¦ç¯„ï¼‰

#### 4.5.1 æ¥­å‹™è¦å‰‡é•å
```yaml
BUSINESS_LOGIC_ERROR:
  http_status: 422
  code: "BUSINESS_LOGIC_ERROR"
  message: "æ“ä½œé•åæ¥­å‹™è¦å‰‡"
  ui_action: "æª¢æŸ¥æ“ä½œæ¢ä»¶å¾Œé‡è©¦"
  retry_allowed: true
  
MODE_SWITCH_TOO_FREQUENT:
  http_status: 422
  code: "MODE_SWITCH_LIMIT"
  message: "æ¨¡å¼åˆ‡æ›éæ–¼é »ç¹ï¼Œè«‹24å°æ™‚å¾Œå†è©¦"
  field: "userMode"
  ui_action: "ç­‰å¾…å†·å»æ™‚é–“çµæŸ"
  retry_allowed: false
  cooldown_until: "2025-01-28T12:00:00Z"
```

### 4.6 è¼¸å…¥é©—è­‰éŒ¯èª¤ï¼ˆçµ±ä¸€æ ¼å¼ï¼‰

#### 4.6.1 è¡¨å–®é©—è­‰éŒ¯èª¤
```yaml
VALIDATION_ERROR:
  http_status: 400
  code: "VALIDATION_ERROR"
  message: "è«‹æ±‚åƒæ•¸é©—è­‰å¤±æ•—"
  ui_action: "ä¿®æ­£è¼¸å…¥å…§å®¹"
  retry_allowed: true
  details:
    validation:
      - field: "email"
        message: "é›»å­éƒµä»¶æ ¼å¼ä¸æ­£ç¢º"
        code: "INVALID_EMAIL_FORMAT"
        value: "invalid-email"
      - field: "password"
        message: "å¯†ç¢¼é•·åº¦ä¸è¶³"
        code: "PASSWORD_TOO_SHORT"
        value: "123"
```

### 4.7 è£ç½®èˆ‡ç³»çµ±éŒ¯èª¤

#### 4.7.1 è£ç½®ç›¸é—œéŒ¯èª¤
```yaml
INSUFFICIENT_STORAGE:
  code: "DEVICE_STORAGE_FULL"
  message: "è£ç½®å„²å­˜ç©ºé–“ä¸è¶³ï¼Œè«‹æ¸…ç†å¾Œé‡è©¦"
  ui_action: "æ¸…ç†è£ç½®ç©ºé–“æˆ–ç§»é™¤å¿«å–"
  retry_allowed: true
  
BIOMETRIC_NOT_AVAILABLE:
  code: "BIOMETRIC_UNAVAILABLE"
  message: "ç”Ÿç‰©è¾¨è­˜åŠŸèƒ½ä¸å¯ç”¨"
  ui_action: "ä½¿ç”¨PINç¢¼æˆ–å¯†ç¢¼ç™»å…¥"
  fallback_available: true
  
CAMERA_PERMISSION_DENIED:
  code: "PERMISSION_DENIED"
  message: "éœ€è¦ç›¸æ©Ÿæ¬Šé™ä»¥æƒæQR Code"
  ui_action: "å‰å¾€è¨­å®šé–‹å•Ÿç›¸æ©Ÿæ¬Šé™"
  permission_required: "camera"
```

### 4.8 éŒ¯èª¤å›é¥‹èˆ‡å¾©åŸæ©Ÿåˆ¶

#### 4.8.1 è‡ªå‹•é‡è©¦ç­–ç•¥
```yaml
retry_strategies:
  immediate:
    delay: 0
    max_attempts: 1
    applicable_errors: ["VALIDATION_ERROR"]
    
  linear_backoff:
    initial_delay: 1000
    increment: 1000
    max_attempts: 3
    applicable_errors: ["NETWORK_TIMEOUT"]
    
  exponential_backoff:
    initial_delay: 1000
    multiplier: 2
    max_delay: 30000
    max_attempts: 5
    applicable_errors: ["INTERNAL_SERVER_ERROR"]
```

#### 4.8.2 é›¢ç·šæ¨¡å¼æ”¯æ´
```yaml
offline_capabilities:
  available_features:
    - "APPå•Ÿå‹•èˆ‡åˆå§‹åŒ–"
    - "å·²å¿«å–çš„æ¨¡å¼è¨­å®š"
    - "æœ¬åœ°é©—è­‰ï¼ˆPINç¢¼ï¼‰"
    
  unavailable_features:
    - "è¨»å†Šæ–°å¸³è™Ÿ"
    - "æ¨¡å¼è©•ä¼°å•å·"
    - "è·¨å¹³å°ç¶å®š"
    - "å¯†ç¢¼é‡è¨­"
    
  sync_strategy: "background_sync_when_online"
```

#### 4.8.3 éŒ¯èª¤å ±å‘Šæ©Ÿåˆ¶
```yaml
error_reporting:
  automatic_report:
    - "INTERNAL_SERVER_ERROR"
    - "UNEXPECTED_ERROR"
    - "SERVICE_UNAVAILABLE"
    
  user_report_option:
    - "BUSINESS_LOGIC_ERROR"
    - "NETWORK_TIMEOUT"
    
  include_data:
    - device_info
    - app_version
    - user_mode
    - error_context
    
  exclude_data:
    - passwords
    - tokens
    - personal_data
```
