# 8208. 報表分析服務 - Low Level Design (LLD)

**版本**: 2.2.0  
**建立日期**: 2025-09-05  
**最後更新**: 2025-09-05  
**建立者**: SA  
**來源文件**: 8020. API list.md, 8088. API設計規範.md, 8108. 報表分析服務 API 規格.yaml

---

## 目次 (Table of Contents)

### 1. [簡介](#1-簡介)
### 2. [架構設計](#2-架構設計)
### 3. [模組與類別設計](#3-模組與類別設計)
### 4. [API 設計規格](#4-api-設計規格)
### 5. [資料模型設計](#5-資料模型設計)
### 6. [安全與驗證設計](#6-安全與驗證設計)
### 7. [錯誤處理設計](#7-錯誤處理設計)
### 8. [四模式支援設計](#8-四模式支援設計)
### 9. [測試設計策略](#9-測試設計策略)

---

## 1. 簡介

### 1.1 設計目的與範圍
報表分析服務提供 LCAS 2.0 系統的完整報表與分析功能，採用 **Dart** 語言實作客戶端 API 介面。本文件定義系統架構、類別設計、方法規格及互動關係，專注於Low Level Design規格。

### 1.2 核心功能模組
- **財務報表模組**：損益表、資產負債表、現金流量表
- **趨勢分析模組**：時間序列分析、趨勢預測、成長率計算
- **分類統計模組**：支出分類、收入分析、科目統計
- **比較分析模組**：期間比較、預算對比、目標達成
- **視覺化報表模組**：圖表生成、客製化展示、匯出功能

### 1.3 設計遵循規範
- **完全遵循 8088. API設計規範**：統一回應格式、錯誤處理、四模式支援
- **對應 8108. 報表分析服務 API 規格**：確保端點定義一致
- **符合 8020. API list 映射關係**：支援所有對應畫面功能

---

## 2. 架構設計

### 2.1 系統分層架構
```
┌─────────────────────────────────────────┐
│            Controller Layer             │
│         (ReportController)              │
├─────────────────────────────────────────┤
│            Service Layer                │
│  ┌─────────────┬─────────────┬────────┐ │
│  │ReportSvc    │AnalysisSvc  │ ChartSvc│ │
│  └─────────────┴─────────────┴────────┘ │
├─────────────────────────────────────────┤
│            Utility Layer                │
│  ┌─────────────┬─────────────────────┐  │
│  │AggregationSvc│CalculationEngine   │  │
│  └─────────────┴─────────────────────┘  │
├─────────────────────────────────────────┤
│            Data Access Layer            │
│         (Repository Pattern)            │
└─────────────────────────────────────────┘
```

### 2.2 類別關係圖
```
ReportController
    ├─ depends on ──→ ReportService
    ├─ depends on ──→ AnalysisService
    ├─ depends on ──→ ChartService
    ├─ depends on ──→ UserModeAdapter
    └─ depends on ──→ ErrorHandler

ReportService
    ├─ depends on ──→ TransactionRepository
    ├─ depends on ──→ AggregationService
    └─ depends on ──→ CalculationEngine
```

---

## 3. 模組與類別設計

### 3.1 ReportController 類別設計

#### 3.1.1 類別職責
- 處理所有報表相關的HTTP請求
- 協調Service層處理業務邏輯
- 確保四模式差異化回應
- 統一錯誤處理與回應格式

#### 3.1.2 方法簽名規格

**財務報表方法**
```dart
/**
 * 01. 取得損益表
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<ApiResponse<IncomeStatementResponse>> getIncomeStatement(IncomeStatementRequest request);

/**
 * 02. 取得資產負債表
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<ApiResponse<BalanceSheetResponse>> getBalanceSheet(BalanceSheetRequest request);

/**
 * 03. 取得現金流量表
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<ApiResponse<CashFlowResponse>> getCashFlow(CashFlowRequest request);
```

**分析報表方法**
```dart
/**
 * 04. 取得趨勢分析
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<ApiResponse<TrendAnalysisResponse>> getTrendAnalysis(TrendAnalysisRequest request);

/**
 * 05. 取得分類統計
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<ApiResponse<CategoryStatisticsResponse>> getCategoryStatistics(CategoryStatisticsRequest request);

/**
 * 06. 取得比較分析
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<ApiResponse<ComparisonAnalysisResponse>> getComparisonAnalysis(ComparisonAnalysisRequest request);
```

**自訂報表方法**
```dart
/**
 * 07. 建立自訂報表
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<ApiResponse<CreateCustomReportResponse>> createCustomReport(CreateCustomReportRequest request);

/**
 * 08. 取得自訂報表
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<ApiResponse<CustomReportResponse>> getCustomReport(String reportId);
```

### 3.2 ReportService 類別設計

#### 3.2.1 類別職責
- 處理報表業務邏輯
- 協調資料聚合與計算
- 管理報表快取與更新
- 處理報表權限控制

#### 3.2.2 方法簽名規格

**核心業務方法**
```dart
/**
 * 09. 生成損益表資料
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<IncomeStatementData> generateIncomeStatement(String ledgerId, DateTime startDate, DateTime endDate);

/**
 * 10. 生成資產負債表資料
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<BalanceSheetData> generateBalanceSheet(String ledgerId, DateTime asOfDate);

/**
 * 11. 生成現金流量表資料
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<CashFlowData> generateCashFlow(String ledgerId, DateTime startDate, DateTime endDate);
```

**報表管理方法**
```dart
/**
 * 12. 儲存報表快照
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<String> saveReportSnapshot(ReportData reportData, ReportMetadata metadata);

/**
 * 13. 取得報表快照
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<ReportSnapshot> getReportSnapshot(String snapshotId);
```

### 3.3 AnalysisService 類別設計

#### 3.3.1 類別職責
- 執行各種財務分析
- 計算財務比率與指標
- 提供趨勢預測分析
- 生成洞察與建議

#### 3.3.2 方法簽名規格

**分析方法**
```dart
/**
 * 14. 執行趨勢分析
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<TrendAnalysisResult> performTrendAnalysis(List<DataPoint> dataPoints, String analysisType);

/**
 * 15. 計算財務比率
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<FinancialRatios> calculateFinancialRatios(IncomeStatementData incomeStatement, BalanceSheetData balanceSheet);

/**
 * 16. 生成洞察建議
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<List<Insight>> generateInsights(AnalysisData analysisData, UserProfile userProfile);
```

### 3.4 ChartService 類別設計

#### 3.4.1 類別職責
- 生成各種類型的圖表
- 處理圖表客製化設定
- 提供圖表匯出功能
- 管理圖表模板

#### 3.4.2 方法簽名規格

**圖表生成方法**
```dart
/**
 * 17. 生成線圖
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<ChartData> generateLineChart(List<DataPoint> dataPoints, ChartOptions options);

/**
 * 18. 生成圓餅圖
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<ChartData> generatePieChart(List<CategoryData> categoryData, ChartOptions options);

/**
 * 19. 生成長條圖
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<ChartData> generateBarChart(List<SeriesData> seriesData, ChartOptions options);
```

### 3.5 AggregationService 類別設計

#### 3.5.1 類別職責
- 執行資料聚合運算
- 處理大量資料分組
- 提供彈性的聚合規則
- 優化查詢效能

#### 3.5.2 方法簽名規格

**聚合方法**
```dart
/**
 * 20. 依時間聚合
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<List<AggregatedData>> aggregateByTime(List<TransactionData> transactions, TimeGranularity granularity);

/**
 * 21. 依科目聚合
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
Future<List<AggregatedData>> aggregateByCategory(List<TransactionData> transactions, AggregationRule rule);
```

---

## 4. 統一回應格式

### 4.1 成功回應格式

所有API端點遵循8088規範的統一回應格式：

```javascript
{
  "success": true,
  "data": {
    // 具體回應數據
  },
  "metadata": {
    "timestamp": "2025-09-19T10:00:00Z",
    "requestId": "req_unique_id",
    "userMode": "Expert|Inertial|Cultivation|Guiding",
    "apiVersion": "v1.0.0",
    "processingTimeMs": 150
  }
}
```

### 4.2 HTTP狀態碼使用規範

| 狀態碼 | 使用場景 | 說明 |
|--------|----------|------|
| 200 | 查詢成功 | 成功取得報表資料 |
| 201 | 建立成功 | 成功建立自訂報表 |
| 204 | 刪除成功 | 成功刪除報表，無回應內容 |
| 400 | 請求錯誤 | 參數驗證失敗 |
| 401 | 未授權 | JWT token無效 |
| 403 | 權限不足 | 無權限存取報表 |
| 404 | 找不到資源 | 報表不存在 |
| 422 | 業務邏輯錯誤 | 報表邏輯驗證失敗 |
| 500 | 系統錯誤 | 伺服器內部錯誤 |

---

## 5. API 設計規格

### 4.1 標準回應格式

**ApiResponse 泛型類別**
```dart
/**
 * 22. API回應基礎類別
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
class ApiResponse<T> {
  final bool success;
  final T? data;
  final ApiMetadata metadata;
  final ApiError? error;

  // 建構子定義
  ApiResponse.success({required T data, required ApiMetadata metadata});
  ApiResponse.error({required ApiError error, required ApiMetadata metadata});

  // 工廠方法
  static ApiResponse<T> createSuccess<T>(T data, ApiMetadata metadata);
  static ApiResponse<T> createError<T>(ApiError error, ApiMetadata metadata);

  // JSON 轉換方法
  Map<String, dynamic> toJson();
  static ApiResponse<T> fromJson<T>(Map<String, dynamic> json, T Function(Map<String, dynamic>) fromJsonT);
}
```

### 4.2 API 端點映射規格

遵循 **8108. 報表分析服務 API 規格.yaml** 的定義：

| 端點 | HTTP 方法 | Controller 方法 | 對應畫面 |
|------|----------|----------------|----------|
| `/reports/income-statement` | GET | `getIncomeStatement(IncomeStatementRequest)` | S-206 |
| `/reports/balance-sheet` | GET | `getBalanceSheet(BalanceSheetRequest)` | S-206 |
| `/reports/cash-flow` | GET | `getCashFlow(CashFlowRequest)` | S-206 |
| `/reports/trend-analysis` | GET | `getTrendAnalysis(TrendAnalysisRequest)` | S-206 |
| `/reports/category-statistics` | GET | `getCategoryStatistics(CategoryStatisticsRequest)` | S-206 |
| `/reports/comparison` | GET | `getComparisonAnalysis(ComparisonAnalysisRequest)` | S-206 |
| `/reports/custom` | POST | `createCustomReport(CreateCustomReportRequest)` | S-206 |
| `/reports/custom/{id}` | GET | `getCustomReport(String)` | S-206 |

---

## 5. 資料模型設計

### 5.1 請求資料模型

#### 5.1.1 IncomeStatementRequest 類別規格

```dart
/**
 * 23. 損益表請求
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
class IncomeStatementRequest {
  final String ledgerId;
  final DateTime startDate;
  final DateTime endDate;
  final ReportFormat format;
  final bool includeSubCategories;
  final bool includeComparison;
  final ComparisonPeriod? comparisonPeriod;

  // 建構子
  IncomeStatementRequest({required ledgerId, required startDate, required endDate, ...});

  // 驗證方法
  List<ValidationError> validate();

  // 轉換方法
  Map<String, dynamic> toJson();
  static IncomeStatementRequest fromJson(Map<String, dynamic> json);
}
```

#### 5.1.2 TrendAnalysisRequest 類別規格

```dart
/**
 * 24. 趨勢分析請求
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
class TrendAnalysisRequest {
  final String ledgerId;
  final DateTime startDate;
  final DateTime endDate;
  final TrendType trendType;
  final TimeGranularity granularity;
  final List<String>? categoryIds;
  final bool includeForecast;
  final ForecastPeriod? forecastPeriod;

  // 方法定義
  TrendAnalysisRequest({required ledgerId, required startDate, required endDate, ...});
  List<ValidationError> validate();
  Map<String, dynamic> toJson();
  static TrendAnalysisRequest fromJson(Map<String, dynamic> json);
}
```

### 5.2 回應資料模型

#### 5.2.1 IncomeStatementResponse 類別規格

```dart
/**
 * 25. 損益表回應
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
class IncomeStatementResponse {
  final IncomeStatementData incomeStatement;
  final ReportSummary summary;
  final List<FinancialRatio>? ratios;
  final ComparisonData? comparison;
  final List<Insight>? insights;
  final ChartData? visualizations;

  // 方法定義
  IncomeStatementResponse({required incomeStatement, required summary, ...});
  Map<String, dynamic> toJson();
  static IncomeStatementResponse fromJson(Map<String, dynamic> json);
}
```

#### 5.2.2 TrendAnalysisResponse 類別規格

```dart
/**
 * 26. 趨勢分析回應
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
class TrendAnalysisResponse {
  final TrendAnalysisData trendData;
  final List<DataPoint> historicalData;
  final List<DataPoint>? forecastData;
  final TrendStatistics statistics;
  final List<TrendInsight> insights;
  final ChartData visualizations;

  // 方法定義
  TrendAnalysisResponse({required trendData, required historicalData, ...});
  Map<String, dynamic> toJson();
  static TrendAnalysisResponse fromJson(Map<String, dynamic> json);
}
```

### 5.3 資料存取層設計

#### 5.3.1 ReportRepository 介面規格

```dart
/**
 * 27. 報表資料存取介面
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
abstract class ReportRepository {
  Future<List<TransactionData>> getTransactionData(String ledgerId, DateTime startDate, DateTime endDate);
  Future<List<AccountBalance>> getAccountBalances(String ledgerId, DateTime asOfDate);
  Future<List<CategorySummary>> getCategorySummaries(String ledgerId, DateTime startDate, DateTime endDate);
  Future<ReportSnapshot> saveSnapshot(ReportData data, ReportMetadata metadata);
  Future<ReportSnapshot?> getSnapshot(String snapshotId);
}
```

#### 5.3.2 ReportData 類別規格

```dart
/**
 * 28. 報表資料實體
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
class ReportData {
  final String id;
  final String reportType;
  final String ledgerId;
  final DateTime reportDate;
  final DateTime startDate;
  final DateTime endDate;
  final Map<String, dynamic> data;
  final ReportMetadata metadata;
  final DateTime createdAt;

  // 方法定義
  ReportData({required id, ...});
  Map<String, dynamic> toFirestore();
  static ReportData fromFirestore(Map<String, dynamic> data, String id);
  bool isExpired();
  String getReportPeriod();
}
```

---

## 6. 安全與驗證設計

### 6.1 驗證服務設計

#### 6.1.1 ReportValidationService 類別規格

```dart
/**
 * 29. 報表驗證服務
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
abstract class ReportValidationService {
  Future<ValidationResult> validateDateRange(DateTime startDate, DateTime endDate);
  Future<ValidationResult> validateLedgerAccess(String userId, String ledgerId);
  bool validateReportFormat(ReportFormat format);
  bool validateChartOptions(ChartOptions options);
}
```

### 6.2 安全檢查設計

#### 6.2.1 ReportSecurityService 類別規格

```dart
/**
 * 30. 報表安全服務
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
abstract class ReportSecurityService {
  Future<bool> canAccessReport(String userId, String ledgerId);
  Future<bool> canCreateCustomReport(String userId);
  Future<bool> canExportReport(String userId, String reportId);
  Future<List<String>> getAccessibleLedgers(String userId);
}
```

---

## 7. 錯誤處理設計

### 7.1 錯誤碼定義

#### 7.1.1 ReportErrorCode 枚舉

```dart
/**
 * 31. 報表錯誤碼枚舉
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
enum ReportErrorCode {
  REPORT_NOT_FOUND,
  INVALID_DATE_RANGE,
  INSUFFICIENT_DATA,
  LEDGER_ACCESS_DENIED,
  REPORT_GENERATION_FAILED,
  INVALID_REPORT_FORMAT,
  CHART_GENERATION_FAILED,
  PERMISSION_DENIED
}
```

### 7.2 錯誤處理服務

#### 7.2.1 ReportErrorHandler 類別規格

```dart
/**
 * 32. 報表錯誤處理器
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
abstract class ReportErrorHandler {
  ApiResponse<T> handleException<T>(Exception exception, UserMode userMode);
  ApiError createValidationError(List<ValidationError> errors, UserMode userMode);
  ApiError createBusinessLogicError(ReportErrorCode code, String message, UserMode userMode);
  String getLocalizedErrorMessage(ReportErrorCode code, UserMode userMode);
}
```

---

## 8. 四模式支援設計

### 8.1 模式差異化策略

嚴格遵循 **8088. API設計規範** 的四模式支援規範：

#### 8.1.1 ReportModeConfig 類別規格

```dart
/**
 * 33. 報表模式配置服務
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
abstract class ReportModeConfig {
  ReportModeSettings getConfigForMode(UserMode mode);
  List<String> getAvailableReportTypes(UserMode mode);
  Map<String, dynamic> getDefaultSettings(UserMode mode);
  bool isFeatureEnabled(UserMode mode, String feature);
}
```

#### 8.1.2 ReportResponseFilter 類別規格

```dart
/**
 * 34. 報表回應過濾器
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
abstract class ReportResponseFilter {
  Map<String, dynamic> filterForExpert(Map<String, dynamic> data);
  Map<String, dynamic> filterForInertial(Map<String, dynamic> data);
  Map<String, dynamic> filterForCultivation(Map<String, dynamic> data);
  Map<String, dynamic> filterForGuiding(Map<String, dynamic> data);
}
```

### 8.2 模式特定回應策略

#### 8.2.1 Expert Mode 回應特性
- 包含完整的財務比率和深度分析
- 提供詳細的趨勢分析和預測
- 顯示所有可用的圖表類型

#### 8.2.2 Cultivation Mode 回應特性
- 強調教育性的洞察和建議
- 包含解釋性的財務指標說明
- 提供學習導向的分析內容

#### 8.2.3 Guiding Mode 回應特性
- 極簡化的重要指標展示
- 隱藏複雜的財務分析
- 提供直觀易懂的視覺化

---

## 9. 測試設計策略

### 9.1 測試分層策略

#### 9.1.1 單元測試設計

**ReportController 測試規格**
```dart
/**
 * 35. 報表控制器測試
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
abstract class ReportControllerTest {
  void testGetIncomeStatementWithValidInput();
  void testGetTrendAnalysisWithValidData();
  void testCreateCustomReportWithValidData();
  void testGetReportWithInvalidLedgerId();
}
```

**ReportService 測試規格**
```dart
/**
 * 36. 報表服務測試
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
abstract class ReportServiceTest {
  void testIncomeStatementGeneration();
  void testTrendAnalysisCalculation();
  void testReportCaching();
  void testDataAggregation();
}
```

#### 9.1.2 整合測試設計

**Report API 整合測試規格**
```dart
/**
 * 37. 報表API整合測試
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
abstract class ReportAPIIntegrationTest {
  void testCompleteReportGenerationFlow();
  void testReportDataAccuracy();
  void testChartGenerationIntegration();
  void testReportModeFiltering();
}
```

### 9.2 四模式測試設計

#### 9.2.1 模式差異化測試規格

```dart
/**
 * 38. 報表模式測試
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
abstract class ReportModeTest {
  void testExpertModeResponse();
  void testInertialModeResponse();
  void testCultivationModeResponse();
  void testGuidingModeResponse();
  void testModeResponseConsistency();
  void testModeFeatureFiltering();
}
```

---

## 附錄

### A. 資料類型定義

#### A.1 枚舉類型定義

```dart
enum ReportFormat { summary, detailed, custom }
enum TrendType { revenue, expense, net_income, category_breakdown }
enum TimeGranularity { daily, weekly, monthly, quarterly, yearly }
enum ComparisonPeriod { previous_period, year_over_year, budget_comparison }
enum ForecastPeriod { one_month, three_months, six_months, one_year }
enum UserMode { expert, inertial, cultivation, guiding }
```

### B. 介面契約定義

#### B.1 Calculator 基礎介面

```dart
/**
 * 39. 報表計算基礎介面
 * @version 2025-09-05-V1.0.0
 * @date 2025-09-05 12:00:00
 * @update: 初始版本
 */
abstract class ReportCalculator {
  decimal calculateTotalRevenue(List<TransactionData> transactions);
  decimal calculateTotalExpense(List<TransactionData> transactions);
  decimal calculateNetIncome(decimal revenue, decimal expense);
  decimal calculateGrowthRate(decimal current, decimal previous);
}
```

---

**文件完成日期**: 2025-09-05  
**版本**: 2.2.0  
**維護者**: LCAS SA Team  
**規範遵循**: 完全遵循 8020、8088、8108 文件規範，移除所有程式碼實作，專注於 Low Level Design 架構設計