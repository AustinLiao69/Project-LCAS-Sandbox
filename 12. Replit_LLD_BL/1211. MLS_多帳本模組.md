# 1211. MLS_å¤šå¸³æœ¬æ¨¡çµ„

## æ–‡ä»¶è³‡è¨Š
- **æ–‡ä»¶æ¨™é¡Œ**: MLS å¤šå¸³æœ¬ç®¡ç†æ¨¡çµ„æŠ€è¡“è¨­è¨ˆæ–‡ä»¶
- **æ–‡ä»¶ç‰ˆæœ¬**: v2.0
- **å‰µå»ºæ—¥æœŸ**: 2025-07-07 14:12:13 +08:00 (å°ç£æ™‚é–“)
- **å‰µå»ºè€…**: AustinLiao69
- **æœ€å¾Œæ›´æ–°**: 2025-08-02 10:00:00 +08:00 (å°ç£æ™‚é–“)
- **å°æ‡‰éœ€æ±‚æ–‡ä»¶**: 1111. MLS_å¤šå¸³æœ¬ç®¡ç†æ¨¡çµ„.md
- **æ¨¡çµ„ä»£ç¢¼**: MLS (Multi-Ledger System)

---

## ğŸ“‘ ç›®æ¬¡ (Table of Contents)

1. æŠ€è¡“æ¶æ§‹æ¦‚è¿°
   - 1.1 æ¨¡çµ„å®šä½
   - 1.2 æŠ€è¡“å †ç–Š
   - 1.3 æ¨¡çµ„æ¶æ§‹

2. æ ¸å¿ƒå‡½æ•¸è¨­è¨ˆ
   - 2.1 å¸³æœ¬é¡å‹ç®¡ç†å‡½æ•¸
   - 2.2 å¸³æœ¬åŸºæœ¬æ“ä½œå‡½æ•¸
   - 2.3 æ¬Šé™èˆ‡æˆå“¡ç®¡ç†å‡½æ•¸
   - 2.4 å¸³æœ¬åˆ‡æ›èˆ‡è·¯ç”±å‡½æ•¸
   - 2.5 å¸³æœ¬å±¬æ€§èˆ‡è¨­å®šå‡½æ•¸
   - 2.6 éŒ¯èª¤è™•ç†èˆ‡ç›£æ§å‡½æ•¸

3. æ¨¡çµ„é–“äº’å‹•æ¶æ§‹
   - 3.1 æ ¸å¿ƒä¾è³´é—œä¿‚
   - 3.2 è³‡æ–™æµå‘è¨­è¨ˆ

4. è³‡æ–™åº«æ¶æ§‹è¨­è¨ˆ
   - 4.1 Firestore é›†åˆçµæ§‹
   - 4.2 æ¬Šé™çµæ§‹è¨­è¨ˆ

5. API ä»‹é¢è¦æ ¼
   - 5.1 REST API ç«¯é»
   - 5.2 WebSocket äº‹ä»¶

6. æ•ˆèƒ½èˆ‡æ“´å±•æ€§è€ƒé‡
   - 6.1 å¿«å–ç­–ç•¥
   - 6.2 æ‰¹æ¬¡è™•ç†

7. æ–‡ä»¶ç¶­è­·è¨˜éŒ„

---

## 1.0 æŠ€è¡“æ¶æ§‹æ¦‚è¿°

### 1.1 æ¨¡çµ„å®šä½
MLS å¤šå¸³æœ¬ç®¡ç†æ¨¡çµ„ä½œç‚º LCAS 2.0 çš„æ ¸å¿ƒæ”¯æŸ±æ¨¡çµ„ï¼Œè² è²¬ç®¡ç†ä¸åŒé¡å‹çš„å¸³æœ¬ï¼ˆå°ˆæ¡ˆã€åˆ†é¡ã€å…±äº«ï¼‰ï¼Œæä¾›å®Œæ•´çš„å¸³æœ¬ç”Ÿå‘½é€±æœŸç®¡ç†åŠŸèƒ½ã€‚

### 1.2 æŠ€è¡“å †ç–Š
- **å¾Œç«¯æ¡†æ¶**: Node.js/Express
- **è³‡æ–™åº«**: Firestore
- **æ—¥èªŒç³»çµ±**: DL æ¨¡çµ„
- **æ¬Šé™ç®¡ç†**: å”ä½œç®¡ç†æ¨¡çµ„
- **è³‡æ–™åŒæ­¥**: DD è³‡æ–™åˆ†ç™¼æ¨¡çµ„

### 1.3 æ¨¡çµ„æ¶æ§‹
```javascript
/**
 * MLS_å¤šå¸³æœ¬ç®¡ç†æ¨¡çµ„_1.0.0
 * @module MLSæ¨¡çµ„ 
 * @description å¤šå¸³æœ¬ç®¡ç†ç³»çµ± - æ”¯æ´å°ˆæ¡ˆã€åˆ†é¡ã€å…±äº«å¸³æœ¬çš„å»ºç«‹èˆ‡ç®¡ç†
 * @update 2025-07-07: åˆç‰ˆå»ºç«‹ï¼Œå¯¦ç¾å¤šå¸³æœ¬é¡å‹æ”¯æ´èˆ‡æ¬Šé™ç®¡ç†
 */
```

---

## 2.0 æ ¸å¿ƒå‡½æ•¸è¨­è¨ˆ

### 2.1 å¸³æœ¬é¡å‹ç®¡ç†å‡½æ•¸

#### 2.1.1 å°ˆæ¡ˆå¸³æœ¬ç®¡ç†
```javascript
/**
 * 01. å»ºç«‹å°ˆæ¡ˆå¸³æœ¬
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description é‡å°ç‰¹å®šå°ˆæ¡ˆ/äº‹ä»¶å»ºç«‹å°ˆæ¡ˆå¸³æœ¬
 */
function MLS_createProjectLedger(userId, projectName, projectDescription, startDate, endDate, budget)
```
- **åŠŸèƒ½**: å»ºç«‹å°ˆæ¡ˆå°å‘çš„å¸³æœ¬ï¼Œæ”¯æ´æ™‚é–“ç¯„åœå’Œé ç®—è¨­å®š
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - `DL_log()` - è¨˜éŒ„å»ºç«‹æ“ä½œæ—¥èªŒ
  - Firestore - å»ºç«‹ ledgers collection æ–‡ä»¶
  - **é ç®—ç®¡ç†æ¨¡çµ„** `budgetManager.js` - è¨­å®šå°ˆæ¡ˆé ç®—
- **å›å‚³å€¼**: `{success: boolean, ledgerId: string, message: string}`

```javascript
/**
 * 02. å»ºç«‹åˆ†é¡å¸³æœ¬
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description ä¾ç”¨é€”/ä¸»é¡Œï¼ˆå¦‚æ—…éŠã€é¤é£²ï¼‰å»ºç«‹åˆ†é¡å¸³æœ¬
 */
function MLS_createCategoryLedger(userId, categoryName, categoryType, tags, defaultSubjects)
```
- **åŠŸèƒ½**: å»ºç«‹ä¸»é¡Œåˆ†é¡å¸³æœ¬ï¼Œæ”¯æ´æ¨™ç±¤å’Œé è¨­ç§‘ç›®
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - `DD_distributeData()` - é€²è¡Œè³‡æ–™åˆ†ç™¼
  - **MRAæ¨¡çµ„** `reportTemplates.js` - è¨­å®šåˆ†é¡å ±è¡¨æ¨¡æ¿
- **å›å‚³å€¼**: `{success: boolean, ledgerId: string, categoryId: string}`

```javascript
/**
 * 03. å»ºç«‹å…±äº«å¸³æœ¬
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description æ”¯æ´å¤šç”¨æˆ¶å”ä½œçš„å…±äº«å¸³æœ¬
 */
function MLS_createSharedLedger(ownerId, ledgerName, memberList, permissionSettings)
```
- **åŠŸèƒ½**: å»ºç«‹å¤šäººå”ä½œå¸³æœ¬ï¼Œæ”¯æ´æ¬Šé™åˆ†ç´š
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - **å”ä½œç®¡ç†æ¨¡çµ„** `permissionController.js` - è¨­å®šæˆå“¡æ¬Šé™
  - `syncService.js` - å•Ÿå‹•å³æ™‚åŒæ­¥æœå‹™
- **å›å‚³å€¼**: `{success: boolean, ledgerId: string, memberCount: number}`

### 2.2 å¸³æœ¬åŸºæœ¬æ“ä½œå‡½æ•¸

```javascript
/**
 * 04. ç·¨è¼¯å¸³æœ¬
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description ä¿®æ”¹å¸³æœ¬åŸºæœ¬è³‡è¨Šã€å±¬æ€§è¨­å®š
 */
function MLS_editLedger(ledgerId, userId, updateData, permission)
```
- **åŠŸèƒ½**: å®‰å…¨ç·¨è¼¯å¸³æœ¬è³‡è¨Šï¼Œå«æ¬Šé™é©—è­‰
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - `BK_processBookkeeping()` - æ›´æ–°ç›¸é—œè¨˜å¸³è³‡æ–™
  - **å”ä½œç®¡ç†æ¨¡çµ„** - é©—è­‰ç·¨è¼¯æ¬Šé™

```javascript
/**
 * 05. åˆªé™¤å¸³æœ¬ï¼ˆå«äºŒæ¬¡ç¢ºèªï¼‰
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description å®‰å…¨åˆªé™¤å¸³æœ¬ï¼Œé˜²æ­¢èª¤åˆª
 */
function MLS_deleteLedger(ledgerId, userId, confirmationToken)
```
- **åŠŸèƒ½**: äºŒæ¬¡ç¢ºèªåˆªé™¤æ©Ÿåˆ¶ï¼Œç¢ºä¿è³‡æ–™å®‰å…¨
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - **å‚™ä»½æœå‹™æ¨¡çµ„** `backupManager.js` - å»ºç«‹åˆªé™¤å‰å‚™ä»½
  - `DL_error()` - è¨˜éŒ„åˆªé™¤æ“ä½œæ—¥èªŒ

```javascript
/**
 * 06. æ­¸æª”å¸³æœ¬
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description å°‡ä¸å¸¸ç”¨çš„å¸³æœ¬é€²è¡Œæ­¸æª”
 */
function MLS_archiveLedger(ledgerId, userId, archiveOptions)
```
- **åŠŸèƒ½**: å¸³æœ¬æ­¸æª”ç®¡ç†ï¼Œé‡‹æ”¾æ´»èºç©ºé–“
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - **å‚™ä»½æœå‹™æ¨¡çµ„** - é€²è¡Œè³‡æ–™æ­¸æª”
  - **MRAæ¨¡çµ„** - ç”Ÿæˆæ­¸æª”å‰çš„æœ€çµ‚å ±è¡¨

### 2.3 æ¬Šé™èˆ‡æˆå“¡ç®¡ç†å‡½æ•¸

```javascript
/**
 * 07. è¨­å®šå¸³æœ¬æ¬Šé™
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description è¨­å®šå¸³æœ¬æ“æœ‰è€…ã€ç®¡ç†å“¡ã€ä¸€èˆ¬æˆå“¡ã€åƒ…æª¢è¦–è€…
 */
function MLS_setLedgerPermissions(ledgerId, userId, memberPermissions)
```
- **åŠŸèƒ½**: å®Œæ•´çš„å¸³æœ¬æ¬Šé™ç®¡ç†ç³»çµ±
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - **å”ä½œç®¡ç†æ¨¡çµ„** `permissionController.js` - æ ¸å¿ƒæ¬Šé™æ§åˆ¶
  - `syncService.js` - åŒæ­¥æ¬Šé™è®Šæ›´

```javascript
/**
 * 08. é‚€è«‹å”ä½œæˆå“¡
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description é‚€è«‹æ–°æˆå“¡åŠ å…¥å…±äº«å¸³æœ¬
 */
function MLS_inviteMember(ledgerId, inviterId, inviteeInfo, permissionLevel)
```
- **åŠŸèƒ½**: æˆå“¡é‚€è«‹æ©Ÿåˆ¶ï¼Œæ”¯æ´æ¬Šé™é è¨­
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - **AMæ¨¡çµ„** `userProfileManager.js` - é©—è­‰ä½¿ç”¨è€…
  - **LINE OAæ¨¡çµ„** - ç™¼é€é‚€è«‹é€šçŸ¥

```javascript
/**
 * 09. ç§»é™¤å”ä½œæˆå“¡
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description å¾å…±äº«å¸³æœ¬ç§»é™¤æˆå“¡
 */
function MLS_removeMember(ledgerId, removerId, targetUserId, removeReason)
```
- **åŠŸèƒ½**: å®‰å…¨çš„æˆå“¡ç§»é™¤æ©Ÿåˆ¶
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - **å”ä½œç®¡ç†æ¨¡çµ„** - é©—è­‰ç§»é™¤æ¬Šé™
  - `DL_warning()` - è¨˜éŒ„æˆå“¡ç§»é™¤æ—¥èªŒ

### 2.4 å¸³æœ¬åˆ‡æ›èˆ‡è·¯ç”±å‡½æ•¸

```javascript
/**
 * 10. åˆ‡æ›ç•¶å‰å¸³æœ¬
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description ç”¨æˆ¶åœ¨ä»‹é¢æµæš¢åˆ‡æ›ä¸åŒå¸³æœ¬
 */
function MLS_switchLedger(userId, targetLedgerId, platform)
```
- **åŠŸèƒ½**: è·¨å¹³å°å¸³æœ¬åˆ‡æ›æ”¯æ´
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - `WH_formatDateTime()` - è¨˜éŒ„åˆ‡æ›æ™‚é–“
  - **AMæ¨¡çµ„** - æ›´æ–°ä½¿ç”¨è€…æ´»å‹•ç‹€æ…‹

```javascript
/**
 * 11. å–å¾—ä½¿ç”¨è€…å¸³æœ¬æ¸…å–®
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description æŸ¥è©¢ç•¶å‰ç”¨æˆ¶å¯è¦‹çš„æ‰€æœ‰å¸³æœ¬
 */
function MLS_getLedgerList(userId, filterOptions, sortOrder)
```
- **åŠŸèƒ½**: æ™ºæ…§å¸³æœ¬æ¸…å–®ç®¡ç†
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - **å”ä½œç®¡ç†æ¨¡çµ„** - æª¢æŸ¥å¸³æœ¬å¯è¦‹æ¬Šé™
  - **MRAæ¨¡çµ„** - æä¾›å¸³æœ¬çµ±è¨ˆè³‡è¨Š

```javascript
/**
 * 12. é©—è­‰å¸³æœ¬å­˜å–æ¬Šé™
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description API æ”¯æ´å¸³æœ¬æŸ¥è©¢ã€åˆ‡æ›ã€æ¬Šé™æª¢æŸ¥
 */
function MLS_validateLedgerAccess(userId, ledgerId, operationType)
```
- **åŠŸèƒ½**: çµ±ä¸€çš„æ¬Šé™é©—è­‰æ©Ÿåˆ¶
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - **å”ä½œç®¡ç†æ¨¡çµ„** - æ ¸å¿ƒæ¬Šé™æª¢æŸ¥æ©Ÿåˆ¶
  - `DL_warning()` - è¨˜éŒ„æ¬Šé™æ‹’çµ•äº‹ä»¶

### 2.5 å¸³æœ¬å±¬æ€§èˆ‡è¨­å®šå‡½æ•¸

```javascript
/**
 * 13. è¨­å®šå¸³æœ¬å±¬æ€§
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description è‡ªè¨‚å¸³æœ¬åç¨±ã€å°é¢ã€æ¨™ç±¤ã€åˆ†é¡è¦å‰‡
 */
function MLS_setLedgerAttributes(ledgerId, userId, attributeData)
```
- **åŠŸèƒ½**: å®Œæ•´çš„å¸³æœ¬å€‹äººåŒ–è¨­å®š
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - `DD_distributeData()` - åˆ†ç™¼å±¬æ€§æ›´æ–°
  - **å‚™ä»½æœå‹™æ¨¡çµ„** - å‚™ä»½è¨­å®šè®Šæ›´

```javascript
/**
 * 14. é…ç½®å¸³æœ¬é¡å‹ç‰¹æ®Šè¨­å®š
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description é‡å°ä¸åŒå¸³æœ¬é¡å‹é…ç½®å°ˆå±¬è¨­å®š
 */
function MLS_configureLedgerType(ledgerId, ledgerType, typeSpecificConfig)
```
- **åŠŸèƒ½**: å¸³æœ¬é¡å‹å°ˆå±¬åŠŸèƒ½é…ç½®
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - **é ç®—ç®¡ç†æ¨¡çµ„** `budgetManager.js` - é…ç½®é ç®—è¦å‰‡
  - **MRAæ¨¡çµ„** - è¨­å®šå ±è¡¨ç”¢å‡ºè¦å‰‡

### 2.6 éŒ¯èª¤è™•ç†èˆ‡ç›£æ§å‡½æ•¸

```javascript
/**
 * 15. è™•ç†æ¬Šé™éŒ¯èª¤
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description çµ±ä¸€è™•ç†æ¬Šé™ä¸è¶³çš„éŒ¯èª¤æƒ…æ³
 */
function MLS_handlePermissionError(userId, ledgerId, attemptedOperation, errorDetails)
```
- **åŠŸèƒ½**: æ¨™æº–åŒ–æ¬Šé™éŒ¯èª¤è™•ç†
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - `DL_error()` - è¨˜éŒ„æ¬Šé™éŒ¯èª¤è©³æƒ…
  - **LINE OAæ¨¡çµ„** - ç™¼é€éŒ¯èª¤é€šçŸ¥

```javascript
/**
 * 16. æª¢æ¸¬é‡è¤‡å¸³æœ¬åç¨±
 * @version 2025-07-07-V1.0.0
 * @date 2025-07-07 14:12:13
 * @description é˜²æ­¢ç”¨æˆ¶å»ºç«‹é‡è¤‡åç¨±çš„å¸³æœ¬
 */
function MLS_detectDuplicateName(userId, proposedName, ledgerType)
```
- **åŠŸèƒ½**: å¸³æœ¬åç¨±å”¯ä¸€æ€§é©—è­‰
- **èˆ‡å…¶ä»–æ¨¡çµ„äº’å‹•**:
  - Firestore - æŸ¥è©¢é©—è­‰åç¨±å”¯ä¸€æ€§
  - `DL_warning()` - è¨˜éŒ„é‡è¤‡åç¨±å˜—è©¦

---

## 3.0 æ¨¡çµ„é–“äº’å‹•æ¶æ§‹

### 3.1 æ ¸å¿ƒä¾è³´é—œä¿‚
```
MLS å¤šå¸³æœ¬ç®¡ç†æ¨¡çµ„
â”œâ”€â”€ å”ä½œç®¡ç†æ¨¡çµ„ (Collaboration)
â”‚   â”œâ”€â”€ permissionController.js - æ¬Šé™é©—è­‰èˆ‡ç®¡ç†
â”‚   â””â”€â”€ syncService.js - å³æ™‚è³‡æ–™åŒæ­¥
â”œâ”€â”€ é ç®—ç®¡ç†æ¨¡çµ„ (Budget Management)
â”‚   â”œâ”€â”€ budgetManager.js - å¸³æœ¬é ç®—è¨­å®šèˆ‡è¿½è¹¤
â”‚   â””â”€â”€ budgetAlertService.js - é ç®—è­¦ç¤ºæ•´åˆ
â”œâ”€â”€ DLæ¨¡çµ„ (Data Logging)
â”‚   â”œâ”€â”€ DL_log() - ä¸€èˆ¬æ“ä½œæ—¥èªŒ
â”‚   â”œâ”€â”€ DL_error() - éŒ¯èª¤æ—¥èªŒ
â”‚   â””â”€â”€ DL_warning() - è­¦å‘Šæ—¥èªŒ
â”œâ”€â”€ BKæ¨¡çµ„ (Bookkeeping)
â”‚   â””â”€â”€ BK_processBookkeeping() - è¨˜å¸³è³‡æ–™è™•ç†
â”œâ”€â”€ DDæ¨¡çµ„ (Data Distribution)
â”‚   â””â”€â”€ DD_distributeData() - å¸³æœ¬è³‡æ–™åˆ†ç™¼
â”œâ”€â”€ MRAæ¨¡çµ„ (Multi-platform Report & Analytics)
â”‚   â”œâ”€â”€ reportGenerator.js - å¸³æœ¬å ±è¡¨ç”¢å‡º
â”‚   â””â”€â”€ reportTemplates.js - å ±è¡¨æ¨¡æ¿ç®¡ç†
â””â”€â”€ å‚™ä»½æœå‹™æ¨¡çµ„ (Backup Service)
    â””â”€â”€ backupManager.js - å¸³æœ¬è³‡æ–™å‚™ä»½èˆ‡æ¢å¾©
```

### 3.2 è³‡æ–™æµå‘è¨­è¨ˆ
```
ä½¿ç”¨è€…è«‹æ±‚ â†’ MLSæ¬Šé™é©—è­‰ â†’ å”ä½œæ¨¡çµ„æ¬Šé™æª¢æŸ¥ â†’ 
è³‡æ–™æ“ä½œ â†’ DDè³‡æ–™åˆ†ç™¼ â†’ DLæ—¥èªŒè¨˜éŒ„ â†’ å›æ‡‰ä½¿ç”¨è€…
```

---

## 4.0 è³‡æ–™åº«æ¶æ§‹è¨­è¨ˆ

### 4.1 Firestore é›†åˆçµæ§‹
```
ledgers/
â”œâ”€â”€ {ledger_id}/
â”‚   â”œâ”€â”€ type: "project" | "category" | "shared"
â”‚   â”œâ”€â”€ name: string
â”‚   â”œâ”€â”€ description: string
â”‚   â”œâ”€â”€ owner_id: string
â”‚   â”œâ”€â”€ members: array
â”‚   â”œâ”€â”€ permissions: object
â”‚   â”œâ”€â”€ attributes: object
â”‚   â”œâ”€â”€ created_at: timestamp
â”‚   â”œâ”€â”€ updated_at: timestamp
â”‚   â”œâ”€â”€ archived: boolean
â”‚   â””â”€â”€ metadata: object
```

### 4.2 æ¬Šé™çµæ§‹è¨­è¨ˆ
```javascript
permissions: {
  owner: userId,
  admins: [userId1, userId2],
  members: [userId3, userId4],
  viewers: [userId5, userId6],
  settings: {
    allow_invite: boolean,
    allow_edit: boolean,
    allow_delete: boolean
  }
}
```

---

## 5.0 API ä»‹é¢è¦æ ¼

### 5.1 REST API ç«¯é»
```
POST   /api/v2/ledgers/create          - å»ºç«‹æ–°å¸³æœ¬
GET    /api/v2/ledgers/list            - å–å¾—å¸³æœ¬æ¸…å–®
PUT    /api/v2/ledgers/{id}/edit       - ç·¨è¼¯å¸³æœ¬
DELETE /api/v2/ledgers/{id}/delete     - åˆªé™¤å¸³æœ¬
POST   /api/v2/ledgers/{id}/archive    - æ­¸æª”å¸³æœ¬
POST   /api/v2/ledgers/{id}/copy       - è¤‡è£½å¸³æœ¬
POST   /api/v2/ledgers/migrate         - è³‡æ–™é·ç§»
PUT    /api/v2/ledgers/{id}/switch     - åˆ‡æ›å¸³æœ¬
```

### 5.2 WebSocket äº‹ä»¶
```javascript
// å³æ™‚åŒæ­¥äº‹ä»¶
'ledger:member_added'    - æˆå“¡åŠ å…¥
'ledger:permission_changed' - æ¬Šé™è®Šæ›´
'ledger:data_updated'    - è³‡æ–™æ›´æ–°
'ledger:archived'        - å¸³æœ¬æ­¸æª”
```

---

## 6.0 æ•ˆèƒ½èˆ‡æ“´å±•æ€§è€ƒé‡

### 6.1 å¿«å–ç­–ç•¥
- å¸³æœ¬åŸºæœ¬è³‡è¨Šå¿«å– (5åˆ†é˜)
- æ¬Šé™è³‡è¨Šå¿«å– (10åˆ†é˜)
- æˆå“¡æ¸…å–®å¿«å– (15åˆ†é˜)

### 6.2 æ‰¹æ¬¡è™•ç†
- å¤§é‡å¸³æœ¬æ“ä½œæ‰¹æ¬¡è™•ç†
- è³‡æ–™é·ç§»åˆ†æ‰¹åŸ·è¡Œ
- æ¬Šé™æ›´æ–°æ‰¹æ¬¡åŒæ­¥

---

## 7.0 æ–‡ä»¶ç¶­è­·è¨˜éŒ„

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹è€… | ä¿®æ”¹å…§å®¹ |
|------|------|--------|----------|
| v1.0 | 2025-07-07 14:12:13 +08:00 | AustinLiao69 | åˆç‰ˆå»ºç«‹ï¼Œå®Œæ•´æŠ€è¡“è¨­è¨ˆ |
| v2.0 | 2025-08-02 10:00:00 +08:00 | LCAS SA Team | æ·»åŠ å®Œæ•´ç›®æ¬¡çµæ§‹ï¼Œå„ªåŒ–æ–‡ä»¶çµæ§‹ |

---

**æ–‡ä»¶çµæŸ**
*æ­¤æ–‡ä»¶ç‚º LCAS 2.0 MLS å¤šå¸³æœ¬ç®¡ç†æ¨¡çµ„çš„å®Œæ•´æŠ€è¡“è¨­è¨ˆè¦æ ¼ï¼Œæ‰€æœ‰å‡½æ•¸è¨­è¨ˆå‡åŸºæ–¼ PRD éœ€æ±‚ä¸¦æ•´åˆç¾æœ‰ç³»çµ±æ¶æ§‹ã€‚*