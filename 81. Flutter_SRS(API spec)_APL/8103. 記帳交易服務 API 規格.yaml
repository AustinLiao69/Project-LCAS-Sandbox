
openapi: 3.0.3
info:
  title: LCAS 2.0 - è¨˜å¸³äº¤æ˜“æœå‹™ API è¦æ ¼
  version: 1.0.0
  description: |
    **LCAS 2.0 è¨˜å¸³äº¤æ˜“æœå‹™ API è¦æ ¼**
    
    è² è²¬äº¤æ˜“è¨˜éŒ„çš„å®Œæ•´ç”Ÿå‘½é€±æœŸç®¡ç†ï¼ŒåŒ…å«è¨˜å¸³ã€æŸ¥è©¢ã€çµ±è¨ˆã€æ‰¹æ¬¡æ“ä½œç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚
    æ”¯æ´ LINE OA å¿«é€Ÿè¨˜å¸³èˆ‡ APP å®Œæ•´è¨˜å¸³ï¼Œæä¾›å››æ¨¡å¼å·®ç•°åŒ–é«”é©—ã€‚
    
    **æœå‹™ç¯„åœ**:
    - äº¤æ˜“è¨˜éŒ„ CRUDï¼ˆæ–°å¢ã€æŸ¥è©¢ã€ä¿®æ”¹ã€åˆªé™¤ï¼‰
    - LINE OA å¿«é€Ÿè¨˜å¸³ï¼ˆæ™ºæ…§æ–‡å­—è§£æï¼‰
    - æ‰¹æ¬¡æ“ä½œï¼ˆæ‰¹æ¬¡æ–°å¢ã€ä¿®æ”¹ã€åˆªé™¤ï¼‰
    - é‡è¤‡äº¤æ˜“ç®¡ç†ï¼ˆé‡è¤‡è¨˜å¸³è¨­å®šèˆ‡åŸ·è¡Œï¼‰
    - çµ±è¨ˆåˆ†æï¼ˆå„€è¡¨æ¿æ•¸æ“šã€åœ–è¡¨ç”Ÿæˆï¼‰
    - é™„ä»¶ç®¡ç†ï¼ˆåœ–ç‰‡ä¸Šå‚³ã€ç®¡ç†ï¼‰
    
    **å››æ¨¡å¼å·®ç•°åŒ–ç­–ç•¥**:
    - **Expert**: å®Œæ•´äº¤æ˜“è³‡è¨Šã€é€²éšç¯©é¸ã€æ‰¹æ¬¡æ“ä½œã€è©³ç´°çµ±è¨ˆ
    - **Inertial**: æ¨™æº–äº¤æ˜“ä»‹é¢ã€ç°¡æ½”ç¯©é¸ã€åŸºæœ¬çµ±è¨ˆ
    - **Cultivation**: å¼•å°å¼è¨˜å¸³ã€é€²åº¦è¿½è¹¤ã€æˆå°±æ¿€å‹µ
    - **Guiding**: æ¥µç°¡è¨˜å¸³ã€è‡ªå‹•å¡«å…¥ã€æœ€å°‘æ¬„ä½
    
    **ç‰ˆæœ¬**: 1.0.0  
    **å»ºç«‹æ—¥æœŸ**: 2025-08-21  
    **å°æ‡‰æ–‡ä»¶**: 0021. Screen list.md (S-201, S-202, S-203, S-209~S-211)

servers:
  - url: https://api.lcas.app/v1
    description: "Production server"
  - url: https://api-staging.lcas.app/v1
    description: "Staging server"

security:
  - BearerAuth: []

paths:
  /transactions/quick:
    post:
      summary: "LINE OA å¿«é€Ÿè¨˜å¸³"
      description: |
        é€é LINE OA é€²è¡Œæ™ºæ…§æ–‡å­—è§£æè¨˜å¸³ï¼Œæ”¯æ´è‡ªç„¶èªè¨€è¼¸å…¥ã€‚
        
        **å°æ‡‰ç•«é¢**: S-201 LINE OA è¨˜å¸³å°è©±
        **æ™ºæ…§è§£æ**: è‡ªå‹•è­˜åˆ¥é‡‘é¡ã€ç§‘ç›®ã€æè¿°ç­‰è³‡è¨Š
        **å››æ¨¡å¼å·®ç•°**: å›æ‡‰è©³ç´°ç¨‹åº¦èˆ‡å»ºè­°å…§å®¹ä¸åŒ
      tags:
        - "å¿«é€Ÿè¨˜å¸³"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                input:
                  type: string
                  example: "åˆé¤ 150"
                  description: "ç”¨æˆ¶è¼¸å…¥çš„è‡ªç„¶èªè¨€è¨˜å¸³å…§å®¹"
                userId:
                  type: string
                  example: "user-uuid-12345"
                ledgerId:
                  type: string
                  example: "ledger-uuid-001"
                  description: "ç›®æ¨™å¸³æœ¬ IDï¼Œç©ºå€¼æ™‚ä½¿ç”¨é è¨­å¸³æœ¬"
                context:
                  type: object
                  properties:
                    location:
                      type: string
                      example: "å°åŒ—å¸‚ä¿¡ç¾©å€"
                    timestamp:
                      type: string
                      format: date-time
                      example: "2025-01-27T12:30:00Z"
              required:
                - input
                - userId
      responses:
        '200':
          description: "å¿«é€Ÿè¨˜å¸³æˆåŠŸ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      transactionId:
                        type: string
                        example: "transaction-uuid-12345"
                      parsed:
                        type: object
                        properties:
                          amount:
                            type: number
                            example: 150
                          type:
                            type: string
                            enum: [income, expense]
                            example: "expense"
                          category:
                            type: string
                            example: "é£Ÿç‰©"
                          categoryId:
                            type: string
                            example: "category-uuid-food"
                          description:
                            type: string
                            example: "åˆé¤"
                          confidence:
                            type: number
                            example: 0.95
                            description: "è§£æä¿¡å¿ƒåº¦ (0-1)"
                      
                      # å››æ¨¡å¼å·®ç•°åŒ–å›æ‡‰
                      confirmation:
                        type: string
                        example: "âœ… å·²è¨˜éŒ„æ”¯å‡º NT$150 - åˆé¤ï¼ˆé£Ÿç‰©ï¼‰"
                      
                      # Expert Mode: è©³ç´°çµ±è¨ˆ
                      balance:
                        type: object
                        properties:
                          today:
                            type: number
                            example: -450
                          week:
                            type: number
                            example: -2800
                          month:
                            type: number
                            example: -12500
                          accountBalance:
                            type: number
                            example: 25000
                      
                      # Cultivation Mode: æ¿€å‹µè³‡è¨Š
                      achievement:
                        type: object
                        properties:
                          type:
                            type: string
                            example: "streak"
                          message:
                            type: string
                            example: "é€£çºŒè¨˜å¸³ 7 å¤©ï¼"
                          progress:
                            type: number
                            example: 70
                      
                      # å»ºè­°èˆ‡æé†’ï¼ˆExpert/Cultivationï¼‰
                      suggestions:
                        type: array
                        items:
                          type: object
                          properties:
                            type:
                              type: string
                              enum: [category_suggestion, budget_alert, tip]
                              example: "budget_alert"
                            message:
                              type: string
                              example: "æœ¬æœˆé£Ÿç‰©æ”¯å‡ºå·²é”é ç®— 80%"
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '400':
          description: "è§£æå¤±æ•—æˆ–åƒæ•¸éŒ¯èª¤"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: "PARSE_FAILED"
                      message:
                        type: string
                        example: "ç„¡æ³•è§£æè¨˜å¸³å…§å®¹ï¼Œè«‹å˜—è©¦ã€Œé‡‘é¡ é …ç›®ã€æ ¼å¼"
                      field:
                        type: string
                        example: "input"
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      details:
                        type: object
                        properties:
                          suggestions:
                            type: array
                            items:
                              type: string
                            example: ["150 åˆé¤", "æ”¶å…¥ 3000 è–ªæ°´"]
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /transactions:
    get:
      summary: "æŸ¥è©¢äº¤æ˜“è¨˜éŒ„åˆ—è¡¨"
      description: |
        æŸ¥è©¢ç”¨æˆ¶çš„äº¤æ˜“è¨˜éŒ„ï¼Œæ”¯æ´å¤šç¨®ç¯©é¸æ¢ä»¶èˆ‡åˆ†é ã€‚
        
        **å°æ‡‰ç•«é¢**: S-209 è¨˜éŒ„ç®¡ç†é ã€S-202 APP è¨˜å¸³ä¸»é 
        **å››æ¨¡å¼å·®ç•°**: å›å‚³è³‡æ–™è©³ç´°ç¨‹åº¦èˆ‡é è¨­ç¯©é¸æ¢ä»¶ä¸åŒ
      tags:
        - "äº¤æ˜“æŸ¥è©¢"
      parameters:
        - name: ledgerId
          in: query
          description: "å¸³æœ¬ ID"
          schema:
            type: string
            example: "ledger-uuid-001"
        - name: categoryId
          in: query
          description: "ç§‘ç›® ID"
          schema:
            type: string
            example: "category-uuid-food"
        - name: accountId
          in: query
          description: "å¸³æˆ¶ ID"
          schema:
            type: string
            example: "account-uuid-001"
        - name: type
          in: query
          description: "äº¤æ˜“é¡å‹"
          schema:
            type: string
            enum: [income, expense, transfer]
        - name: startDate
          in: query
          description: "é–‹å§‹æ—¥æœŸ"
          schema:
            type: string
            format: date
            example: "2025-01-01"
        - name: endDate
          in: query
          description: "çµæŸæ—¥æœŸ"
          schema:
            type: string
            format: date
            example: "2025-01-31"
        - name: minAmount
          in: query
          description: "æœ€å°é‡‘é¡"
          schema:
            type: number
            example: 100
        - name: maxAmount
          in: query
          description: "æœ€å¤§é‡‘é¡"
          schema:
            type: number
            example: 1000
        - name: search
          in: query
          description: "æœå°‹é—œéµå­—ï¼ˆæè¿°ã€å‚™è¨»ï¼‰"
          schema:
            type: string
            example: "åˆé¤"
        - name: page
          in: query
          description: "é ç¢¼"
          schema:
            type: integer
            example: 1
            default: 1
        - name: limit
          in: query
          description: "æ¯é ç­†æ•¸"
          schema:
            type: integer
            example: 20
            default: 20
            maximum: 100
        - name: sort
          in: query
          description: "æ’åº"
          schema:
            type: string
            example: "date:desc"
            default: "date:desc"
        - name: X-User-Mode
          in: header
          description: "ç”¨æˆ¶æ¨¡å¼æ¨™è­˜"
          schema:
            type: string
            enum: [Expert, Inertial, Cultivation, Guiding]
      responses:
        '200':
          description: "æˆåŠŸå–å¾—äº¤æ˜“è¨˜éŒ„"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      transactions:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              example: "transaction-uuid-12345"
                            amount:
                              type: number
                              example: 150
                            type:
                              type: string
                              enum: [income, expense, transfer]
                              example: "expense"
                            date:
                              type: string
                              format: date
                              example: "2025-01-27"
                            description:
                              type: string
                              example: "åˆé¤"
                            
                            # åŸºæœ¬è³‡è¨Šï¼ˆæ‰€æœ‰æ¨¡å¼ï¼‰
                            category:
                              type: object
                              properties:
                                id:
                                  type: string
                                  example: "category-uuid-food"
                                name:
                                  type: string
                                  example: "é£Ÿç‰©"
                                icon:
                                  type: string
                                  example: "ğŸ½ï¸"
                            account:
                              type: object
                              properties:
                                id:
                                  type: string
                                  example: "account-uuid-001"
                                name:
                                  type: string
                                  example: "ç¾é‡‘"
                                type:
                                  type: string
                                  example: "cash"
                            
                            # Expert Mode: è©³ç´°è³‡è¨Š
                            notes:
                              type: string
                              example: "èˆ‡åŒäº‹èšé¤"
                            tags:
                              type: array
                              items:
                                type: string
                              example: ["èšé¤", "åŒäº‹"]
                            attachments:
                              type: array
                              items:
                                type: object
                                properties:
                                  id:
                                    type: string
                                    example: "attachment-uuid-001"
                                  url:
                                    type: string
                                    example: "https://api.lcas.app/attachments/img-001.jpg"
                                  type:
                                    type: string
                                    example: "image"
                            createdAt:
                              type: string
                              format: date-time
                              example: "2025-01-27T12:30:00Z"
                            updatedAt:
                              type: string
                              format: date-time
                              example: "2025-01-27T12:30:00Z"
                      
                      # åˆ†é è³‡è¨Šï¼ˆä¿®æ­£ç‚º8088è¦ç¯„æ ¼å¼ï¼‰
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                            example: 1
                          limit:
                            type: integer
                            example: 20
                          total:
                            type: integer
                            example: 95
                          totalPages:
                            type: integer
                            example: 5
                          hasNext:
                            type: boolean
                            example: true
                          hasPrev:
                            type: boolean
                            example: false
                          nextPage:
                            type: integer
                            example: 2
                          prevPage:
                            type: integer
                            example: null
                      
                      # Expert Mode: çµ±è¨ˆæ‘˜è¦
                      summary:
                        type: object
                        properties:
                          totalIncome:
                            type: number
                            example: 50000
                          totalExpense:
                            type: number
                            example: 35000
                          netAmount:
                            type: number
                            example: 15000
                          recordCount:
                            type: integer
                            example: 95
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

    post:
      summary: "æ–°å¢äº¤æ˜“è¨˜éŒ„"
      description: |
        æ–°å¢å®Œæ•´çš„äº¤æ˜“è¨˜éŒ„ï¼Œæ”¯æ´æ‰€æœ‰æ¬„ä½èˆ‡é™„ä»¶ã€‚
        
        **å°æ‡‰ç•«é¢**: S-203 APP è¨˜å¸³è¡¨å–®é 
        **å››æ¨¡å¼å·®ç•°**: å¿…å¡«æ¬„ä½èˆ‡é è¨­å€¼ä¸åŒ
      tags:
        - "äº¤æ˜“ç®¡ç†"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                # å¿…è¦æ¬„ä½ï¼ˆæ‰€æœ‰æ¨¡å¼ï¼‰
                amount:
                  type: number
                  example: 1500
                  minimum: 0.01
                type:
                  type: string
                  enum: [income, expense, transfer]
                  example: "expense"
                categoryId:
                  type: string
                  example: "category-uuid-food"
                accountId:
                  type: string
                  example: "account-uuid-001"
                ledgerId:
                  type: string
                  example: "ledger-uuid-001"
                date:
                  type: string
                  format: date
                  example: "2025-01-27"
                
                # é¸å¡«æ¬„ä½
                description:
                  type: string
                  example: "æ™šé¤èšæœƒ"
                  maxLength: 200
                notes:
                  type: string
                  example: "èˆ‡æœ‹å‹æ…¶ç¥ç”Ÿæ—¥"
                  maxLength: 500
                tags:
                  type: array
                  items:
                    type: string
                  example: ["èšæœƒ", "æ…¶ç¥"]
                  maxItems: 10
                
                # è½‰å¸³å°ˆç”¨ï¼ˆtype = transferï¼‰
                toAccountId:
                  type: string
                  example: "account-uuid-002"
                  description: "è½‰å…¥å¸³æˆ¶ IDï¼ˆè½‰å¸³æ™‚å¿…å¡«ï¼‰"
                
                # Expert Mode: é€²éšæ¬„ä½
                attachmentIds:
                  type: array
                  items:
                    type: string
                  example: ["attachment-uuid-001"]
                location:
                  type: object
                  properties:
                    latitude:
                      type: number
                      example: 25.0330
                    longitude:
                      type: number
                      example: 121.5654
                    address:
                      type: string
                      example: "å°åŒ—å¸‚ä¿¡ç¾©å€"
                
                # é‡è¤‡è¨­å®š
                recurring:
                  type: object
                  properties:
                    enabled:
                      type: boolean
                      example: false
                    frequency:
                      type: string
                      enum: [daily, weekly, monthly, yearly]
                      example: "monthly"
                    interval:
                      type: integer
                      example: 1
                    endDate:
                      type: string
                      format: date
                      example: "2025-12-31"
              required:
                - amount
                - type
                - categoryId
                - accountId
                - ledgerId
                - date
      responses:
        '201':
          description: "äº¤æ˜“è¨˜éŒ„æ–°å¢æˆåŠŸ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      transactionId:
                        type: string
                        example: "transaction-uuid-12345"
                      amount:
                        type: number
                        example: 1500
                      type:
                        type: string
                        example: "expense"
                      category:
                        type: string
                        example: "é£Ÿç‰©"
                      account:
                        type: string
                        example: "ä¿¡ç”¨å¡"
                      date:
                        type: string
                        format: date
                        example: "2025-01-27"
                      
                      # Expert Mode: è©³ç´°è³‡è¨Š
                      accountBalance:
                        type: number
                        example: 25000
                      monthlyTotal:
                        type: number
                        example: 15000
                      categoryBudget:
                        type: object
                        properties:
                          used:
                            type: number
                            example: 8000
                          total:
                            type: number
                            example: 12000
                          remaining:
                            type: number
                            example: 4000
                          percentage:
                            type: number
                            example: 66.7
                      
                      # Cultivation Mode: æ¿€å‹µè³‡è¨Š
                      achievement:
                        type: object
                        properties:
                          type:
                            type: string
                            example: "streak"
                          message:
                            type: string
                            example: "é€£çºŒè¨˜å¸³ 7 å¤©ï¼"
                          progress:
                            type: number
                            example: 70
                          pointsEarned:
                            type: integer
                            example: 10
                      
                      # Guiding Mode: ç°¡åŒ–ç¢ºèª
                      message:
                        type: string
                        example: "è¨˜å¸³æˆåŠŸ"
                      
                      # é‡è¤‡è¨­å®šå›æ‡‰
                      recurringId:
                        type: string
                        example: "recurring-uuid-001"
                      
                      createdAt:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:30:00Z"
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /transactions/{id}:
    get:
      summary: "å–å¾—äº¤æ˜“è¨˜éŒ„è©³æƒ…"
      description: |
        å–å¾—æŒ‡å®šäº¤æ˜“è¨˜éŒ„çš„å®Œæ•´è©³ç´°è³‡è¨Šã€‚
        
        **å°æ‡‰ç•«é¢**: S-210 è¨˜éŒ„ç·¨è¼¯é 
        **å››æ¨¡å¼å·®ç•°**: é¡¯ç¤ºè³‡æ–™è©³ç´°ç¨‹åº¦ä¸åŒ
      tags:
        - "äº¤æ˜“æŸ¥è©¢"
      parameters:
        - name: id
          in: path
          required: true
          description: "äº¤æ˜“è¨˜éŒ„ ID"
          schema:
            type: string
            example: "transaction-uuid-12345"
      responses:
        '200':
          description: "æˆåŠŸå–å¾—äº¤æ˜“è©³æƒ…"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: "transaction-uuid-12345"
                      amount:
                        type: number
                        example: 1500
                      type:
                        type: string
                        example: "expense"
                      date:
                        type: string
                        format: date
                        example: "2025-01-27"
                      description:
                        type: string
                        example: "æ™šé¤èšæœƒ"
                      notes:
                        type: string
                        example: "èˆ‡æœ‹å‹æ…¶ç¥ç”Ÿæ—¥"
                      
                      category:
                        type: object
                        properties:
                          id:
                            type: string
                            example: "category-uuid-food"
                          name:
                            type: string
                            example: "é£Ÿç‰©"
                          icon:
                            type: string
                            example: "ğŸ½ï¸"
                          parentId:
                            type: string
                            example: "category-uuid-daily"
                      
                      account:
                        type: object
                        properties:
                          id:
                            type: string
                            example: "account-uuid-001"
                          name:
                            type: string
                            example: "ä¿¡ç”¨å¡"
                          type:
                            type: string
                            example: "credit_card"
                          balance:
                            type: number
                            example: 25000
                      
                      ledger:
                        type: object
                        properties:
                          id:
                            type: string
                            example: "ledger-uuid-001"
                          name:
                            type: string
                            example: "å€‹äººå¸³æœ¬"
                          type:
                            type: string
                            example: "personal"
                      
                      # Expert Mode: è©³ç´°è³‡è¨Š
                      tags:
                        type: array
                        items:
                          type: string
                        example: ["èšæœƒ", "æ…¶ç¥"]
                      attachments:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              example: "attachment-uuid-001"
                            url:
                              type: string
                              example: "https://api.lcas.app/attachments/img-001.jpg"
                            thumbnailUrl:
                              type: string
                              example: "https://api.lcas.app/attachments/thumb-001.jpg"
                            type:
                              type: string
                              example: "image"
                            size:
                              type: integer
                              example: 1048576
                            uploadedAt:
                              type: string
                              format: date-time
                              example: "2025-01-27T12:25:00Z"
                      
                      location:
                        type: object
                        properties:
                          latitude:
                            type: number
                            example: 25.0330
                          longitude:
                            type: number
                            example: 121.5654
                          address:
                            type: string
                            example: "å°åŒ—å¸‚ä¿¡ç¾©å€ä¿¡ç¾©è·¯äº”æ®µ"
                      
                      recurring:
                        type: object
                        properties:
                          id:
                            type: string
                            example: "recurring-uuid-001"
                          enabled:
                            type: boolean
                            example: true
                          frequency:
                            type: string
                            example: "monthly"
                          interval:
                            type: integer
                            example: 1
                          nextDate:
                            type: string
                            format: date
                            example: "2025-02-27"
                          endDate:
                            type: string
                            format: date
                            example: "2025-12-31"
                      
                      # è½‰å¸³ç›¸é—œ
                      transferInfo:
                        type: object
                        properties:
                          toAccount:
                            type: object
                            properties:
                              id:
                                type: string
                                example: "account-uuid-002"
                              name:
                                type: string
                                example: "å„²è“„å¸³æˆ¶"
                          linkedTransactionId:
                            type: string
                            example: "transaction-uuid-67890"
                      
                      # å¯©è¨ˆè³‡è¨Š
                      auditInfo:
                        type: object
                        properties:
                          createdAt:
                            type: string
                            format: date-time
                            example: "2025-01-27T12:30:00Z"
                          updatedAt:
                            type: string
                            format: date-time
                            example: "2025-01-27T12:30:00Z"
                          createdBy:
                            type: string
                            example: "user-uuid-12345"
                          source:
                            type: string
                            enum: [manual, quick, import, recurring]
                            example: "manual"
                          modificationHistory:
                            type: array
                            items:
                              type: object
                              properties:
                                modifiedAt:
                                  type: string
                                  format: date-time
                                  example: "2025-01-27T13:00:00Z"
                                modifiedBy:
                                  type: string
                                  example: "user-uuid-12345"
                                changes:
                                  type: object
                                  example: {"amount": {"from": 1400, "to": 1500}}
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '404':
          $ref: '#/components/responses/NotFoundError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

    put:
      summary: "æ›´æ–°äº¤æ˜“è¨˜éŒ„"
      description: |
        æ›´æ–°æŒ‡å®šçš„äº¤æ˜“è¨˜éŒ„ï¼Œæ”¯æ´éƒ¨åˆ†æ¬„ä½æ›´æ–°ã€‚
        
        **å°æ‡‰ç•«é¢**: S-210 è¨˜éŒ„ç·¨è¼¯é 
        **æ¥­å‹™é‚è¼¯**: è¨˜éŒ„ä¿®æ”¹æ­·å²ã€è§¸ç™¼ç›¸é—œå¸³æˆ¶é¤˜é¡é‡ç®—
      tags:
        - "äº¤æ˜“ç®¡ç†"
      parameters:
        - name: id
          in: path
          required: true
          description: "äº¤æ˜“è¨˜éŒ„ ID"
          schema:
            type: string
            example: "transaction-uuid-12345"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                amount:
                  type: number
                  example: 1600
                type:
                  type: string
                  enum: [income, expense, transfer]
                  example: "expense"
                categoryId:
                  type: string
                  example: "category-uuid-food"
                accountId:
                  type: string
                  example: "account-uuid-001"
                date:
                  type: string
                  format: date
                  example: "2025-01-27"
                description:
                  type: string
                  example: "æ™šé¤èšæœƒï¼ˆä¿®æ”¹ï¼‰"
                notes:
                  type: string
                  example: "èˆ‡æœ‹å‹æ…¶ç¥ç”Ÿæ—¥ï¼Œåœ°é»æ”¹ç‚ºæ–°é¤å»³"
                tags:
                  type: array
                  items:
                    type: string
                  example: ["èšæœƒ", "æ…¶ç¥", "æ–°é¤å»³"]
                attachmentIds:
                  type: array
                  items:
                    type: string
                  example: ["attachment-uuid-001", "attachment-uuid-002"]
      responses:
        '200':
          description: "äº¤æ˜“è¨˜éŒ„æ›´æ–°æˆåŠŸ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      transactionId:
                        type: string
                        example: "transaction-uuid-12345"
                      message:
                        type: string
                        example: "äº¤æ˜“è¨˜éŒ„æ›´æ–°æˆåŠŸ"
                      updatedFields:
                        type: array
                        items:
                          type: string
                        example: ["amount", "description", "tags"]
                      updatedAt:
                        type: string
                        format: date-time
                        example: "2025-01-27T13:00:00Z"
                      
                      # å½±éŸ¿çš„å¸³æˆ¶é¤˜é¡
                      accountBalanceChanges:
                        type: array
                        items:
                          type: object
                          properties:
                            accountId:
                              type: string
                              example: "account-uuid-001"
                            previousBalance:
                              type: number
                              example: 25000
                            newBalance:
                              type: number
                              example: 24900
                            change:
                              type: number
                              example: -100
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '400':
          $ref: '#/components/responses/ValidationError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

    delete:
      summary: "åˆªé™¤äº¤æ˜“è¨˜éŒ„"
      description: |
        åˆªé™¤æŒ‡å®šçš„äº¤æ˜“è¨˜éŒ„ï¼ŒåŒæ™‚è™•ç†ç›¸é—œè¯çš„è³‡æ–™ã€‚
        
        **å°æ‡‰ç•«é¢**: S-209 è¨˜éŒ„ç®¡ç†é 
        **æ¥­å‹™é‚è¼¯**: è»Ÿåˆªé™¤ã€å½±éŸ¿å¸³æˆ¶é¤˜é¡ã€è™•ç†é‡è¤‡äº¤æ˜“
      tags:
        - "äº¤æ˜“ç®¡ç†"
      parameters:
        - name: id
          in: path
          required: true
          description: "äº¤æ˜“è¨˜éŒ„ ID"
          schema:
            type: string
            example: "transaction-uuid-12345"
        - name: deleteRecurring
          in: query
          description: "æ˜¯å¦åŒæ™‚åˆªé™¤é‡è¤‡è¨­å®š"
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: "äº¤æ˜“è¨˜éŒ„åˆªé™¤æˆåŠŸ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      transactionId:
                        type: string
                        example: "transaction-uuid-12345"
                      message:
                        type: string
                        example: "äº¤æ˜“è¨˜éŒ„å·²åˆªé™¤"
                      deletedAt:
                        type: string
                        format: date-time
                        example: "2025-01-27T13:00:00Z"
                      
                      # å½±éŸ¿çš„ç›¸é—œè³‡æ–™
                      affectedData:
                        type: object
                        properties:
                          accountBalance:
                            type: number
                            example: 26500
                          recurringDeleted:
                            type: boolean
                            example: false
                          attachmentsDeleted:
                            type: integer
                            example: 2
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '404':
          $ref: '#/components/responses/NotFoundError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /transactions/dashboard:
    get:
      summary: "å–å¾—è¨˜å¸³ä¸»é å„€è¡¨æ¿æ•¸æ“š"
      description: |
        å–å¾—ç”¨æˆ¶è¨˜å¸³ä¸»é æ‰€éœ€çš„çµ±è¨ˆæ•¸æ“šèˆ‡åœ–è¡¨è³‡æ–™ã€‚
        
        **å°æ‡‰ç•«é¢**: S-202 APP è¨˜å¸³ä¸»é 
        **å››æ¨¡å¼å·®ç•°**: æ•¸æ“šè¤‡é›œåº¦èˆ‡åœ–è¡¨é¡å‹ä¸åŒ
      tags:
        - "çµ±è¨ˆåˆ†æ"
      parameters:
        - name: ledgerId
          in: query
          description: "å¸³æœ¬ ID"
          schema:
            type: string
            example: "ledger-uuid-001"
        - name: period
          in: query
          description: "çµ±è¨ˆæœŸé–“"
          schema:
            type: string
            enum: [day, week, month, year]
            default: month
        - name: X-User-Mode
          in: header
          description: "ç”¨æˆ¶æ¨¡å¼æ¨™è­˜"
          schema:
            type: string
            enum: [Expert, Inertial, Cultivation, Guiding]
      responses:
        '200':
          description: "æˆåŠŸå–å¾—å„€è¡¨æ¿æ•¸æ“š"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      # åŸºæœ¬çµ±è¨ˆï¼ˆæ‰€æœ‰æ¨¡å¼ï¼‰
                      summary:
                        type: object
                        properties:
                          todayIncome:
                            type: number
                            example: 0
                          todayExpense:
                            type: number
                            example: 450
                          monthIncome:
                            type: number
                            example: 50000
                          monthExpense:
                            type: number
                            example: 35000
                          balance:
                            type: number
                            example: 15000
                          transactionCount:
                            type: integer
                            example: 156
                      
                      # Expert Mode: å®Œæ•´å„€è¡¨æ¿
                      recentTransactions:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              example: "transaction-uuid-001"
                            amount:
                              type: number
                              example: 150
                            type:
                              type: string
                              example: "expense"
                            category:
                              type: string
                              example: "é£Ÿç‰©"
                            date:
                              type: string
                              format: date
                              example: "2025-01-27"
                            description:
                              type: string
                              example: "åˆé¤"
                      
                      charts:
                        type: object
                        properties:
                          weeklyTrend:
                            type: array
                            items:
                              type: object
                              properties:
                                date:
                                  type: string
                                  format: date
                                  example: "2025-01-21"
                                income:
                                  type: number
                                  example: 0
                                expense:
                                  type: number
                                  example: 800
                          categoryDistribution:
                            type: array
                            items:
                              type: object
                              properties:
                                category:
                                  type: string
                                  example: "é£Ÿç‰©"
                                amount:
                                  type: number
                                  example: 8000
                                percentage:
                                  type: number
                                  example: 22.86
                          accountBalance:
                            type: array
                            items:
                              type: object
                              properties:
                                account:
                                  type: string
                                  example: "ç¾é‡‘"
                                balance:
                                  type: number
                                  example: 5000
                      
                      budgetStatus:
                        type: array
                        items:
                          type: object
                          properties:
                            categoryId:
                              type: string
                              example: "category-uuid-food"
                            category:
                              type: string
                              example: "é£Ÿç‰©"
                            budgetAmount:
                              type: number
                              example: 12000
                            usedAmount:
                              type: number
                              example: 8000
                            percentage:
                              type: number
                              example: 66.7
                            status:
                              type: string
                              enum: [safe, warning, exceeded]
                              example: "warning"
                      
                      # Cultivation Mode: æˆå°±èˆ‡é€²åº¦
                      achievements:
                        type: object
                        properties:
                          currentStreak:
                            type: integer
                            example: 7
                          monthlyGoalProgress:
                            type: number
                            example: 75.5
                          completedChallenges:
                            type: integer
                            example: 3
                          availableRewards:
                            type: integer
                            example: 2
                      
                      quickActions:
                        type: array
                        items:
                          type: object
                          properties:
                            action:
                              type: string
                              example: "addTransaction"
                            label:
                              type: string
                              example: "å¿«é€Ÿè¨˜å¸³"
                            icon:
                              type: string
                              example: "â•"
                            priority:
                              type: integer
                              example: 1
                      
                      # Guiding Mode: æ¥µç°¡è³‡è¨Š
                      simpleData:
                        type: object
                        properties:
                          todayExpense:
                            type: number
                            example: 450
                          quickAddButton:
                            type: boolean
                            example: true
                          simpleMessage:
                            type: string
                            example: "ä»Šå¤©å·²èŠ±è²» NT$450"
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /transactions/statistics:
    get:
      summary: "å–å¾—äº¤æ˜“çµ±è¨ˆæ•¸æ“š"
      description: |
        å–å¾—äº¤æ˜“ç›¸é—œçš„çµ±è¨ˆæ•¸æ“šï¼Œæ”¯æ´å¤šç¨®çµ±è¨ˆç¶­åº¦ã€‚
        
        **å°æ‡‰ç•«é¢**: S-201 LINE OA è¨˜å¸³å°è©±ã€S-211 çµ±è¨ˆåœ–è¡¨é 
        **ç”¨é€”**: LINE OA æŸ¥è©¢çµ±è¨ˆã€APP åœ–è¡¨å±•ç¤º
      tags:
        - "çµ±è¨ˆåˆ†æ"
      parameters:
        - name: ledgerId
          in: query
          description: "å¸³æœ¬ ID"
          schema:
            type: string
            example: "ledger-uuid-001"
        - name: period
          in: query
          description: "çµ±è¨ˆæœŸé–“"
          schema:
            type: string
            enum: [today, week, month, quarter, year]
            default: month
        - name: groupBy
          in: query
          description: "åˆ†çµ„ç¶­åº¦"
          schema:
            type: string
            enum: [category, account, day, week, month]
            default: category
        - name: type
          in: query
          description: "äº¤æ˜“é¡å‹"
          schema:
            type: string
            enum: [income, expense, all]
            default: all
      responses:
        '200':
          description: "æˆåŠŸå–å¾—çµ±è¨ˆæ•¸æ“š"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      period:
                        type: object
                        properties:
                          start:
                            type: string
                            format: date
                            example: "2025-01-01"
                          end:
                            type: string
                            format: date
                            example: "2025-01-31"
                          type:
                            type: string
                            example: "month"
                      
                      summary:
                        type: object
                        properties:
                          totalIncome:
                            type: number
                            example: 50000
                          totalExpense:
                            type: number
                            example: 35000
                          netAmount:
                            type: number
                            example: 15000
                          transactionCount:
                            type: integer
                            example: 156
                          averagePerDay:
                            type: number
                            example: 1161.29
                      
                      breakdown:
                        type: array
                        items:
                          type: object
                          properties:
                            category:
                              type: string
                              example: "é£Ÿç‰©"
                            amount:
                              type: number
                              example: 8000
                            count:
                              type: integer
                              example: 45
                            percentage:
                              type: number
                              example: 22.86
                            average:
                              type: number
                              example: 177.78
                      
                      trends:
                        type: array
                        items:
                          type: object
                          properties:
                            date:
                              type: string
                              format: date
                              example: "2025-01-01"
                            income:
                              type: number
                              example: 0
                            expense:
                              type: number
                              example: 1200
                            net:
                              type: number
                              example: -1200
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /transactions/batch:
    post:
      summary: "æ‰¹æ¬¡æ–°å¢äº¤æ˜“è¨˜éŒ„"
      description: |
        æ‰¹æ¬¡æ–°å¢å¤šç­†äº¤æ˜“è¨˜éŒ„ï¼Œæ”¯æ´åŒ¯å…¥åŠŸèƒ½ã€‚
        
        **ä½¿ç”¨å ´æ™¯**: Excel åŒ¯å…¥ã€æ‰¹æ¬¡è¨˜å¸³
        **é™åˆ¶**: æ¯æ¬¡æœ€å¤šè™•ç† 100 ç­†è¨˜éŒ„
      tags:
        - "æ‰¹æ¬¡æ“ä½œ"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                transactions:
                  type: array
                  maxItems: 100
                  items:
                    type: object
                    properties:
                      amount:
                        type: number
                        example: 150
                      type:
                        type: string
                        enum: [income, expense, transfer]
                        example: "expense"
                      categoryId:
                        type: string
                        example: "category-uuid-food"
                      accountId:
                        type: string
                        example: "account-uuid-001"
                      date:
                        type: string
                        format: date
                        example: "2025-01-27"
                      description:
                        type: string
                        example: "åˆé¤"
                    required:
                      - amount
                      - type
                      - categoryId
                      - accountId
                      - date
                ledgerId:
                  type: string
                  example: "ledger-uuid-001"
                skipDuplicates:
                  type: boolean
                  default: false
                  description: "æ˜¯å¦è·³éé‡è¤‡è¨˜éŒ„"
              required:
                - transactions
                - ledgerId
      responses:
        '200':
          description: "æ‰¹æ¬¡è™•ç†å®Œæˆ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      processed:
                        type: integer
                        example: 95
                      successful:
                        type: integer
                        example: 90
                      failed:
                        type: integer
                        example: 5
                      skipped:
                        type: integer
                        example: 0
                      
                      results:
                        type: array
                        items:
                          type: object
                          properties:
                            index:
                              type: integer
                              example: 0
                            status:
                              type: string
                              enum: [success, failed, skipped]
                              example: "success"
                            transactionId:
                              type: string
                              example: "transaction-uuid-12345"
                            error:
                              type: string
                              example: "ç§‘ç›® ID ä¸å­˜åœ¨"
                      
                      summary:
                        type: object
                        properties:
                          totalAmount:
                            type: number
                            example: 15000
                          affectedAccounts:
                            type: array
                            items:
                              type: string
                            example: ["account-uuid-001", "account-uuid-002"]
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '400':
          description: "æ‰¹æ¬¡è«‹æ±‚é©—è­‰å¤±æ•—"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: "BATCH_VALIDATION_ERROR"
                      message:
                        type: string
                        example: "æ‰¹æ¬¡è³‡æ–™åŒ…å«éŒ¯èª¤"
                      field:
                        type: string
                        example: "transactions"
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      details:
                        type: object
                        properties:
                          validation:
                            type: array
                            items:
                              type: object
                              properties:
                                index:
                                  type: integer
                                  example: 0
                                field:
                                  type: string
                                  example: "amount"
                                message:
                                  type: string
                                  example: "é‡‘é¡å¿…é ˆå¤§æ–¼ 0"
                                value:
                                  type: number
                                  example: -100
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /transactions/{id}/attachments:
    post:
      summary: "ä¸Šå‚³äº¤æ˜“é™„ä»¶"
      description: |
        ç‚ºæŒ‡å®šäº¤æ˜“è¨˜éŒ„ä¸Šå‚³é™„ä»¶ï¼ˆåœ–ç‰‡ã€PDF ç­‰ï¼‰ã€‚
        
        **å°æ‡‰ç•«é¢**: S-207 åœ–ç‰‡é™„åŠ é 
        **æ”¯æ´æ ¼å¼**: JPEG, PNG, PDF
        **å¤§å°é™åˆ¶**: 5MB per file, æœ€å¤š 10 å€‹é™„ä»¶
      tags:
        - "é™„ä»¶ç®¡ç†"
      parameters:
        - name: id
          in: path
          required: true
          description: "äº¤æ˜“è¨˜éŒ„ ID"
          schema:
            type: string
            example: "transaction-uuid-12345"
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                files:
                  type: array
                  items:
                    type: string
                    format: binary
                  maxItems: 10
                  description: "ä¸Šå‚³çš„æª”æ¡ˆ"
                description:
                  type: string
                  example: "ç™¼ç¥¨åœ–ç‰‡"
                  description: "é™„ä»¶æè¿°"
              required:
                - files
      responses:
        '200':
          description: "é™„ä»¶ä¸Šå‚³æˆåŠŸ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      uploadedFiles:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              example: "attachment-uuid-001"
                            filename:
                              type: string
                              example: "receipt_20250127.jpg"
                            url:
                              type: string
                              example: "https://api.lcas.app/attachments/att-001.jpg"
                            thumbnailUrl:
                              type: string
                              example: "https://api.lcas.app/attachments/thumb-001.jpg"
                            type:
                              type: string
                              example: "image"
                            size:
                              type: integer
                              example: 1048576
                            uploadedAt:
                              type: string
                              format: date-time
                              example: "2025-01-27T12:30:00Z"
                      totalAttachments:
                        type: integer
                        example: 3
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '400':
          description: "æª”æ¡ˆä¸Šå‚³å¤±æ•—"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: "FILE_UPLOAD_ERROR"
                      message:
                        type: string
                        example: "æª”æ¡ˆæ ¼å¼ä¸æ”¯æ´æˆ–æª”æ¡ˆéå¤§"
                      field:
                        type: string
                        example: "files"
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      details:
                        type: object
                        properties:
                          validation:
                            type: array
                            items:
                              type: object
                              properties:
                                filename:
                                  type: string
                                  example: "large_file.pdf"
                                message:
                                  type: string
                                  example: "æª”æ¡ˆå¤§å°è¶…é 5MB é™åˆ¶"
                                value:
                                  type: integer
                                  example: 10485760
        '404':
          $ref: '#/components/responses/NotFoundError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

    delete:
      summary: "åˆªé™¤äº¤æ˜“é™„ä»¶"
      description: |
        åˆªé™¤æŒ‡å®šäº¤æ˜“è¨˜éŒ„çš„ç‰¹å®šé™„ä»¶ã€‚
        
        **å°æ‡‰ç•«é¢**: S-207 åœ–ç‰‡é™„åŠ é 
      tags:
        - "é™„ä»¶ç®¡ç†"
      parameters:
        - name: id
          in: path
          required: true
          description: "äº¤æ˜“è¨˜éŒ„ ID"
          schema:
            type: string
            example: "transaction-uuid-12345"
        - name: attachmentId
          in: path
          required: true
          description: "é™„ä»¶ ID"
          schema:
            type: string
            example: "attachment-uuid-001"
      responses:
        '200':
          description: "é™„ä»¶åˆªé™¤æˆåŠŸ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      attachmentId:
                        type: string
                        example: "attachment-uuid-001"
                      message:
                        type: string
                        example: "é™„ä»¶å·²åˆªé™¤"
                      remainingAttachments:
                        type: integer
                        example: 2
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '404':
          $ref: '#/components/responses/NotFoundError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /transactions/batch:
    put:
      summary: "æ‰¹æ¬¡æ›´æ–°äº¤æ˜“è¨˜éŒ„"
      description: |
        æ‰¹æ¬¡æ›´æ–°å¤šç­†äº¤æ˜“è¨˜éŒ„ï¼Œæ”¯æ´æ‰¹é‡ä¿®æ”¹ã€‚
        
        **ä½¿ç”¨å ´æ™¯**: æ‰¹æ¬¡ä¿®æ”¹äº¤æ˜“é¡åˆ¥ã€å¸³æˆ¶ç­‰
        **é™åˆ¶**: æ¯æ¬¡æœ€å¤šè™•ç† 100 ç­†è¨˜éŒ„
      tags:
        - "æ‰¹æ¬¡æ“ä½œ"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                updates:
                  type: array
                  maxItems: 100
                  items:
                    type: object
                    properties:
                      transactionId:
                        type: string
                        example: "transaction-uuid-12345"
                      amount:
                        type: number
                        example: 160
                      categoryId:
                        type: string
                        example: "category-uuid-food"
                      accountId:
                        type: string
                        example: "account-uuid-001"
                      description:
                        type: string
                        example: "åˆé¤ï¼ˆä¿®æ”¹ï¼‰"
                      tags:
                        type: array
                        items:
                          type: string
                        example: ["ä¿®æ”¹", "æ‰¹æ¬¡"]
                    required:
                      - transactionId
              required:
                - updates
      responses:
        '200':
          description: "æ‰¹æ¬¡æ›´æ–°å®Œæˆ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      processed:
                        type: integer
                        example: 95
                      successful:
                        type: integer
                        example: 90
                      failed:
                        type: integer
                        example: 5
                      
                      results:
                        type: array
                        items:
                          type: object
                          properties:
                            transactionId:
                              type: string
                              example: "transaction-uuid-12345"
                            status:
                              type: string
                              enum: [success, failed]
                              example: "success"
                            error:
                              type: string
                              example: "äº¤æ˜“è¨˜éŒ„ä¸å­˜åœ¨"
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

    delete:
      summary: "æ‰¹æ¬¡åˆªé™¤äº¤æ˜“è¨˜éŒ„"
      description: |
        æ‰¹æ¬¡åˆªé™¤å¤šç­†äº¤æ˜“è¨˜éŒ„ã€‚
        
        **ä½¿ç”¨å ´æ™¯**: æ‰¹æ¬¡æ¸…ç†ã€åŒ¯å…¥éŒ¯èª¤è³‡æ–™æ¸…é™¤
        **é™åˆ¶**: æ¯æ¬¡æœ€å¤šè™•ç† 100 ç­†è¨˜éŒ„
      tags:
        - "æ‰¹æ¬¡æ“ä½œ"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                transactionIds:
                  type: array
                  maxItems: 100
                  items:
                    type: string
                  example: ["transaction-uuid-001", "transaction-uuid-002"]
                deleteRecurring:
                  type: boolean
                  default: false
                  description: "æ˜¯å¦åŒæ™‚åˆªé™¤é—œè¯çš„é‡è¤‡è¨­å®š"
              required:
                - transactionIds
      responses:
        '200':
          description: "æ‰¹æ¬¡åˆªé™¤å®Œæˆ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      processed:
                        type: integer
                        example: 50
                      successful:
                        type: integer
                        example: 48
                      failed:
                        type: integer
                        example: 2
                      
                      deletedTransactions:
                        type: array
                        items:
                          type: string
                        example: ["transaction-uuid-001", "transaction-uuid-003"]
                      
                      affectedAccounts:
                        type: array
                        items:
                          type: object
                          properties:
                            accountId:
                              type: string
                              example: "account-uuid-001"
                            balanceChange:
                              type: number
                              example: 1500
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /transactions/recent:
    get:
      summary: "å–å¾—æœ€è¿‘äº¤æ˜“è¨˜éŒ„"
      description: |
        å–å¾—ç”¨æˆ¶æœ€è¿‘çš„äº¤æ˜“è¨˜éŒ„ï¼Œç”¨æ–¼å¿«é€Ÿç€è¦½ã€‚
        
        **å°æ‡‰ç•«é¢**: S-202 APP è¨˜å¸³ä¸»é 
        **ç”¨é€”**: ä¸»é æœ€è¿‘äº¤æ˜“å€å¡Šé¡¯ç¤º
      tags:
        - "äº¤æ˜“æŸ¥è©¢"
      parameters:
        - name: limit
          in: query
          description: "å–å¾—ç­†æ•¸"
          schema:
            type: integer
            example: 10
            default: 10
            maximum: 50
        - name: ledgerId
          in: query
          description: "å¸³æœ¬ ID"
          schema:
            type: string
            example: "ledger-uuid-001"
        - name: type
          in: query
          description: "äº¤æ˜“é¡å‹ç¯©é¸"
          schema:
            type: string
            enum: [income, expense, transfer, all]
            default: all
      responses:
        '200':
          description: "æˆåŠŸå–å¾—æœ€è¿‘äº¤æ˜“"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      transactions:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              example: "transaction-uuid-001"
                            amount:
                              type: number
                              example: 150
                            type:
                              type: string
                              example: "expense"
                            category:
                              type: string
                              example: "é£Ÿç‰©"
                            categoryIcon:
                              type: string
                              example: "ğŸ½ï¸"
                            date:
                              type: string
                              format: date
                              example: "2025-01-27"
                            description:
                              type: string
                              example: "åˆé¤"
                            account:
                              type: string
                              example: "ç¾é‡‘"
                            createdAt:
                              type: string
                              format: date-time
                              example: "2025-01-27T12:30:00Z"
                      totalCount:
                        type: integer
                        example: 156
                      hasMore:
                        type: boolean
                        example: true
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /transactions/charts:
    get:
      summary: "å–å¾—åœ–è¡¨æ•¸æ“š"
      description: |
        å–å¾—äº¤æ˜“åœ–è¡¨å±•ç¤ºæ‰€éœ€çš„æ•¸æ“šã€‚
        
        **å°æ‡‰ç•«é¢**: S-211 çµ±è¨ˆåœ–è¡¨é 
        **ç”¨é€”**: åœ–è¡¨è¦–è¦ºåŒ–å±•ç¤º
      tags:
        - "çµ±è¨ˆåˆ†æ"
      parameters:
        - name: chartType
          in: query
          description: "åœ–è¡¨é¡å‹"
          schema:
            type: string
            enum: [pie, bar, line, trend]
            default: pie
        - name: period
          in: query
          description: "çµ±è¨ˆæœŸé–“"
          schema:
            type: string
            enum: [week, month, quarter, year]
            default: month
        - name: ledgerId
          in: query
          description: "å¸³æœ¬ ID"
          schema:
            type: string
            example: "ledger-uuid-001"
        - name: groupBy
          in: query
          description: "åˆ†çµ„ç¶­åº¦"
          schema:
            type: string
            enum: [category, account, month, week]
            default: category
      responses:
        '200':
          description: "æˆåŠŸå–å¾—åœ–è¡¨æ•¸æ“š"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      chartType:
                        type: string
                        example: "pie"
                      period:
                        type: object
                        properties:
                          start:
                            type: string
                            format: date
                            example: "2025-01-01"
                          end:
                            type: string
                            format: date
                            example: "2025-01-31"
                      
                      chartData:
                        type: array
                        items:
                          type: object
                          properties:
                            label:
                              type: string
                              example: "é£Ÿç‰©"
                            value:
                              type: number
                              example: 8000
                            percentage:
                              type: number
                              example: 22.86
                            color:
                              type: string
                              example: "#FF6384"
                            count:
                              type: integer
                              example: 45
                      
                      summary:
                        type: object
                        properties:
                          totalAmount:
                            type: number
                            example: 35000
                          totalTransactions:
                            type: integer
                            example: 156
                          averageAmount:
                            type: number
                            example: 224.36
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /transactions/import:
    post:
      summary: "åŒ¯å…¥äº¤æ˜“è¨˜éŒ„"
      description: |
        å¾å¤–éƒ¨æª”æ¡ˆæˆ–ç³»çµ±åŒ¯å…¥äº¤æ˜“è¨˜éŒ„ã€‚
        
        **æ”¯æ´æ ¼å¼**: CSV, Excel
        **ä½¿ç”¨å ´æ™¯**: éŠ€è¡Œå°å¸³å–®åŒ¯å…¥ã€å…¶ä»–è¨˜å¸³ç³»çµ±è³‡æ–™è½‰ç§»
      tags:
        - "æ‰¹æ¬¡æ“ä½œ"
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: "åŒ¯å…¥æª”æ¡ˆ (CSV/Excel)"
                ledgerId:
                  type: string
                  example: "ledger-uuid-001"
                  description: "ç›®æ¨™å¸³æœ¬ ID"
                mappingConfig:
                  type: string
                  example: '{"amount": "é‡‘é¡", "date": "æ—¥æœŸ", "description": "èªªæ˜"}'
                  description: "æ¬„ä½å°æ‡‰è¨­å®š JSON"
                skipFirstRow:
                  type: boolean
                  default: true
                  description: "æ˜¯å¦è·³éæ¨™é¡Œè¡Œ"
                duplicateHandling:
                  type: string
                  enum: [skip, overwrite, create_new]
                  default: skip
                  description: "é‡è¤‡è¨˜éŒ„è™•ç†æ–¹å¼"
              required:
                - file
                - ledgerId
      responses:
        '200':
          description: "åŒ¯å…¥è™•ç†å®Œæˆ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      importId:
                        type: string
                        example: "import-uuid-001"
                      totalRows:
                        type: integer
                        example: 120
                      processed:
                        type: integer
                        example: 120
                      successful:
                        type: integer
                        example: 115
                      failed:
                        type: integer
                        example: 3
                      skipped:
                        type: integer
                        example: 2
                      
                      importSummary:
                        type: object
                        properties:
                          totalAmount:
                            type: number
                            example: 45000
                          incomeCount:
                            type: integer
                            example: 25
                          expenseCount:
                            type: integer
                            example: 90
                          transferCount:
                            type: integer
                            example: 0
                      
                      errors:
                        type: array
                        items:
                          type: object
                          properties:
                            row:
                              type: integer
                              example: 5
                            error:
                              type: string
                              example: "æ—¥æœŸæ ¼å¼ä¸æ­£ç¢º"
                            data:
                              type: object
                              example: {"é‡‘é¡": "abc", "æ—¥æœŸ": "2025/01/30"}
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '400':
          description: "åŒ¯å…¥æª”æ¡ˆæ ¼å¼éŒ¯èª¤æˆ–è™•ç†å¤±æ•—"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: object
                    properties:
                      code:
                        type: string
                        example: "IMPORT_FILE_ERROR"
                      message:
                        type: string
                        example: "æª”æ¡ˆæ ¼å¼ä¸æ”¯æ´æˆ–åŒ…å«éŒ¯èª¤"
                      field:
                        type: string
                        example: "file"
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      details:
                        type: object
                        properties:
                          validation:
                            type: array
                            items:
                              type: object
                              properties:
                                field:
                                  type: string
                                  example: "mappingConfig"
                                message:
                                  type: string
                                  example: "æ¬„ä½å°æ‡‰è¨­å®šæ ¼å¼éŒ¯èª¤"
                                value:
                                  type: string
                                  example: "invalid json"
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /transactions/recurring:
    get:
      summary: "æŸ¥è©¢é‡è¤‡äº¤æ˜“è¨­å®š"
      description: |
        æŸ¥è©¢ç”¨æˆ¶çš„é‡è¤‡äº¤æ˜“è¨­å®šåˆ—è¡¨ã€‚
        
        **å°æ‡‰ç•«é¢**: S-208 é‡è¤‡è¨­å®šé 
      tags:
        - "é‡è¤‡äº¤æ˜“"
      parameters:
        - name: ledgerId
          in: query
          description: "å¸³æœ¬ ID"
          schema:
            type: string
            example: "ledger-uuid-001"
        - name: status
          in: query
          description: "è¨­å®šç‹€æ…‹"
          schema:
            type: string
            enum: [active, paused, completed]
            default: active
      responses:
        '200':
          description: "æˆåŠŸå–å¾—é‡è¤‡äº¤æ˜“è¨­å®š"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      recurringTransactions:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              example: "recurring-uuid-001"
                            name:
                              type: string
                              example: "æ¯æœˆæˆ¿ç§Ÿ"
                            amount:
                              type: number
                              example: 15000
                            type:
                              type: string
                              example: "expense"
                            category:
                              type: string
                              example: "æˆ¿ç§Ÿ"
                            frequency:
                              type: string
                              example: "monthly"
                            interval:
                              type: integer
                              example: 1
                            nextDate:
                              type: string
                              format: date
                              example: "2025-02-01"
                            endDate:
                              type: string
                              format: date
                              example: "2025-12-31"
                            status:
                              type: string
                              enum: [active, paused, completed]
                              example: "active"
                            executedCount:
                              type: integer
                              example: 12
                            remainingCount:
                              type: integer
                              example: 11
                      totalCount:
                        type: integer
                        example: 5
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '401':
          $ref: '#/components/responses/UnauthorizedError'

    post:
      summary: "å»ºç«‹é‡è¤‡äº¤æ˜“è¨­å®š"
      description: |
        å»ºç«‹æ–°çš„é‡è¤‡äº¤æ˜“è¨­å®šã€‚
        
        **å°æ‡‰ç•«é¢**: S-208 é‡è¤‡è¨­å®šé 
        **æ¥­å‹™é‚è¼¯**: å»ºç«‹è¨­å®šå¾Œè‡ªå‹•æ’ç¨‹ç¬¬ä¸€æ¬¡åŸ·è¡Œ
      tags:
        - "é‡è¤‡äº¤æ˜“"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "æ¯æœˆæˆ¿ç§Ÿ"
                  maxLength: 100
                amount:
                  type: number
                  example: 15000
                type:
                  type: string
                  enum: [income, expense, transfer]
                  example: "expense"
                categoryId:
                  type: string
                  example: "category-uuid-rent"
                accountId:
                  type: string
                  example: "account-uuid-001"
                ledgerId:
                  type: string
                  example: "ledger-uuid-001"
                
                # é‡è¤‡è¨­å®š
                frequency:
                  type: string
                  enum: [daily, weekly, monthly, yearly]
                  example: "monthly"
                interval:
                  type: integer
                  example: 1
                  minimum: 1
                  maximum: 12
                startDate:
                  type: string
                  format: date
                  example: "2025-02-01"
                endDate:
                  type: string
                  format: date
                  example: "2025-12-31"
                  description: "çµæŸæ—¥æœŸï¼ˆé¸å¡«ï¼‰"
                maxExecutions:
                  type: integer
                  example: 11
                  description: "æœ€å¤§åŸ·è¡Œæ¬¡æ•¸ï¼ˆé¸å¡«ï¼‰"
                
                # é¸å¡«æ¬„ä½
                description:
                  type: string
                  example: "ç§Ÿå±‹è™•æœˆç§Ÿè²»"
                notes:
                  type: string
                  example: "æ¯æœˆ 1 è™Ÿæ‰£æ¬¾"
                
                # é€šçŸ¥è¨­å®š
                notifications:
                  type: object
                  properties:
                    enabled:
                      type: boolean
                      example: true
                    advanceDays:
                      type: integer
                      example: 1
                      description: "æå‰å¹¾å¤©é€šçŸ¥"
              required:
                - name
                - amount
                - type
                - categoryId
                - accountId
                - ledgerId
                - frequency
                - startDate
      responses:
        '201':
          description: "é‡è¤‡äº¤æ˜“è¨­å®šå»ºç«‹æˆåŠŸ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      recurringId:
                        type: string
                        example: "recurring-uuid-001"
                      name:
                        type: string
                        example: "æ¯æœˆæˆ¿ç§Ÿ"
                      frequency:
                        type: string
                        example: "monthly"
                      nextExecutionDate:
                        type: string
                        format: date
                        example: "2025-02-01"
                      totalExecutions:
                        type: integer
                        example: 11
                      status:
                        type: string
                        example: "active"
                      createdAt:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:30:00Z"
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /transactions/recurring/{id}:
    put:
      summary: "æ›´æ–°é‡è¤‡äº¤æ˜“è¨­å®š"
      description: |
        æ›´æ–°æŒ‡å®šçš„é‡è¤‡äº¤æ˜“è¨­å®šã€‚
        
        **å°æ‡‰ç•«é¢**: S-208 é‡è¤‡è¨­å®šé 
        **æ¥­å‹™é‚è¼¯**: æ›´æ–°å¾Œé‡æ–°è¨ˆç®—ä¸‹æ¬¡åŸ·è¡Œæ™‚é–“
      tags:
        - "é‡è¤‡äº¤æ˜“"
      parameters:
        - name: id
          in: path
          required: true
          description: "é‡è¤‡äº¤æ˜“è¨­å®š ID"
          schema:
            type: string
            example: "recurring-uuid-001"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "æ¯æœˆæˆ¿ç§Ÿï¼ˆèª¿æ•´ï¼‰"
                amount:
                  type: number
                  example: 16000
                categoryId:
                  type: string
                  example: "category-uuid-rent"
                accountId:
                  type: string
                  example: "account-uuid-001"
                frequency:
                  type: string
                  enum: [daily, weekly, monthly, yearly]
                  example: "monthly"
                interval:
                  type: integer
                  example: 1
                endDate:
                  type: string
                  format: date
                  example: "2025-12-31"
                status:
                  type: string
                  enum: [active, paused]
                  example: "active"
                description:
                  type: string
                  example: "ç§Ÿå±‹è™•æœˆç§Ÿè²»ï¼ˆèª¿æ•´å¾Œï¼‰"
                notifications:
                  type: object
                  properties:
                    enabled:
                      type: boolean
                      example: true
                    advanceDays:
                      type: integer
                      example: 2
      responses:
        '200':
          description: "é‡è¤‡äº¤æ˜“è¨­å®šæ›´æ–°æˆåŠŸ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      recurringId:
                        type: string
                        example: "recurring-uuid-001"
                      message:
                        type: string
                        example: "é‡è¤‡äº¤æ˜“è¨­å®šæ›´æ–°æˆåŠŸ"
                      updatedFields:
                        type: array
                        items:
                          type: string
                        example: ["amount", "endDate", "notifications"]
                      nextExecutionDate:
                        type: string
                        format: date
                        example: "2025-02-01"
                      updatedAt:
                        type: string
                        format: date-time
                        example: "2025-01-27T13:00:00Z"
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '400':
          $ref: '#/components/responses/ValidationError'
        '404':
          $ref: '#/components/responses/NotFoundError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

    delete:
      summary: "åˆªé™¤é‡è¤‡äº¤æ˜“è¨­å®š"
      description: |
        åˆªé™¤æŒ‡å®šçš„é‡è¤‡äº¤æ˜“è¨­å®šã€‚
        
        **å°æ‡‰ç•«é¢**: S-208 é‡è¤‡è¨­å®šé 
        **æ¥­å‹™é‚è¼¯**: è»Ÿåˆªé™¤è¨­å®šï¼Œä½†ä¿ç•™å·²ç”¢ç”Ÿçš„äº¤æ˜“è¨˜éŒ„
      tags:
        - "é‡è¤‡äº¤æ˜“"
      parameters:
        - name: id
          in: path
          required: true
          description: "é‡è¤‡äº¤æ˜“è¨­å®š ID"
          schema:
            type: string
            example: "recurring-uuid-001"
        - name: deleteExistingTransactions
          in: query
          description: "æ˜¯å¦åŒæ™‚åˆªé™¤å·²ç”¢ç”Ÿçš„äº¤æ˜“è¨˜éŒ„"
          schema:
            type: boolean
            default: false
      responses:
        '200':
          description: "é‡è¤‡äº¤æ˜“è¨­å®šåˆªé™¤æˆåŠŸ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      recurringId:
                        type: string
                        example: "recurring-uuid-001"
                      message:
                        type: string
                        example: "é‡è¤‡äº¤æ˜“è¨­å®šå·²åˆªé™¤"
                      deletedAt:
                        type: string
                        format: date-time
                        example: "2025-01-27T13:00:00Z"
                      affectedTransactions:
                        type: integer
                        example: 0
                        description: "è¢«åŒæ™‚åˆªé™¤çš„äº¤æ˜“è¨˜éŒ„æ•¸é‡"
                  metadata:
                    type: object
                    properties:
                      timestamp:
                        type: string
                        format: date-time
                        example: "2025-01-27T12:00:00Z"
                      requestId:
                        type: string
                        example: "uuid"
                      userMode:
                        type: string
                        example: "Expert"
        '404':
          $ref: '#/components/responses/NotFoundError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: "Firebase Auth JWT Token"

  responses:
    UnauthorizedError:
      description: "æœªæˆæ¬Šå­˜å–"
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: "UNAUTHORIZED"
                  message:
                    type: string
                    example: "Token ç„¡æ•ˆæˆ–å·²éæœŸ"
                  field:
                    type: string
                    example: "authorization"
                  timestamp:
                    type: string
                    format: date-time
                    example: "2025-01-27T12:00:00Z"
                  requestId:
                    type: string
                    example: "uuid"
                  details:
                    type: object
                    properties:
                      reason:
                        type: string
                        example: "JWT token expired"

    ValidationError:
      description: "è«‹æ±‚åƒæ•¸é©—è­‰å¤±æ•—"
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: "VALIDATION_ERROR"
                  message:
                    type: string
                    example: "é‡‘é¡å¿…é ˆå¤§æ–¼ 0"
                  field:
                    type: string
                    example: "amount"
                  timestamp:
                    type: string
                    format: date-time
                    example: "2025-01-27T12:00:00Z"
                  requestId:
                    type: string
                    example: "uuid"
                  details:
                    type: object
                    properties:
                      validation:
                        type: array
                        items:
                          type: object
                          properties:
                            field:
                              type: string
                              example: "amount"
                            message:
                              type: string
                              example: "é‡‘é¡å¿…é ˆå¤§æ–¼ 0"
                            value:
                              type: number
                              example: -100

    NotFoundError:
      description: "è³‡æºä¸å­˜åœ¨"
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: "RESOURCE_NOT_FOUND"
                  message:
                    type: string
                    example: "äº¤æ˜“è¨˜éŒ„ä¸å­˜åœ¨"
                  field:
                    type: string
                    example: "id"
                  timestamp:
                    type: string
                    format: date-time
                    example: "2025-01-27T12:00:00Z"
                  requestId:
                    type: string
                    example: "uuid"
                  details:
                    type: object
                    properties:
                      resourceType:
                        type: string
                        example: "transaction"
                      resourceId:
                        type: string
                        example: "transaction-uuid-12345"

    InternalServerError:
      description: "å…§éƒ¨ä¼ºæœå™¨éŒ¯èª¤"
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              error:
                type: object
                properties:
                  code:
                    type: string
                    example: "INTERNAL_SERVER_ERROR"
                  message:
                    type: string
                    example: "ä¼ºæœå™¨æš«æ™‚ç„¡æ³•è™•ç†è«‹æ±‚ï¼Œè«‹ç¨å¾Œå†è©¦"
                  timestamp:
                    type: string
                    format: date-time
                    example: "2025-01-27T12:00:00Z"
                  requestId:
                    type: string
                    example: "uuid"
                  details:
                    type: object
                    properties:
                      errorId:
                        type: string
                        example: "error-uuid-12345"

tags:
  - name: "å¿«é€Ÿè¨˜å¸³"
    description: "LINE OA å¿«é€Ÿè¨˜å¸³èˆ‡æ™ºæ…§è§£æ"
  - name: "äº¤æ˜“ç®¡ç†"
    description: "äº¤æ˜“è¨˜éŒ„çš„ CRUD æ“ä½œ"
  - name: "äº¤æ˜“æŸ¥è©¢"
    description: "äº¤æ˜“è¨˜éŒ„æŸ¥è©¢èˆ‡ç¯©é¸"
  - name: "çµ±è¨ˆåˆ†æ"
    description: "äº¤æ˜“çµ±è¨ˆèˆ‡åœ–è¡¨æ•¸æ“š"
  - name: "æ‰¹æ¬¡æ“ä½œ"
    description: "æ‰¹æ¬¡æ–°å¢ã€ä¿®æ”¹ã€åˆªé™¤äº¤æ˜“"
  - name: "é™„ä»¶ç®¡ç†"
    description: "äº¤æ˜“é™„ä»¶ä¸Šå‚³èˆ‡ç®¡ç†"
  - name: "é‡è¤‡äº¤æ˜“"
    description: "é‡è¤‡äº¤æ˜“è¨­å®šèˆ‡ç®¡ç†"
