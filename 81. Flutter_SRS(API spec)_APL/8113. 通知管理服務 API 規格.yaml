
openapi: 3.0.3
info:
  title: LCAS 2.0 - é€šçŸ¥ç®¡ç†æœå‹™ API è¦æ ¼
  description: |
    **LCAS 2.0 é€šçŸ¥ç®¡ç†æœå‹™ API è¦æ ¼**

    è² è²¬ç³»çµ±é€šçŸ¥ã€æ¨æ’­è¨Šæ¯ã€è¨˜å¸³æé†’èˆ‡å€‹äººåŒ–é€šçŸ¥ç®¡ç†çš„å®Œæ•´ API è¦æ ¼ã€‚
    æ”¯æ´å¤šé€šé“é€šçŸ¥å‚³é€ï¼Œæä¾›å½ˆæ€§çš„é€šçŸ¥è¦å‰‡è¨­å®šèˆ‡å››æ¨¡å¼å·®ç•°åŒ–é«”é©—ã€‚

    **æœå‹™ç¯„åœ**:
    - é€šçŸ¥è¨­å®šç®¡ç†ï¼ˆåå¥½è¨­å®šã€é€šçŸ¥è¦å‰‡ã€é »ç‡æ§åˆ¶ï¼‰
    - è¨˜å¸³æé†’æœå‹™ï¼ˆå®šæ™‚æé†’ã€æ™ºæ…§æé†’ã€æƒ…å¢ƒæé†’ï¼‰
    - æ¨æ’­é€šçŸ¥ç®¡ç†ï¼ˆç³»çµ±é€šçŸ¥ã€å€‹äººé€šçŸ¥ã€æ´»å‹•é€šçŸ¥ï¼‰
    - é€šçŸ¥æ­·å²ç®¡ç†ï¼ˆæŸ¥çœ‹æ­·å²ã€ç‹€æ…‹è¿½è¹¤ã€çµ±è¨ˆåˆ†æï¼‰

    **å››æ¨¡å¼å·®ç•°åŒ–ç­–ç•¥**:
    - **Expert**: å®Œæ•´é€šçŸ¥æ§åˆ¶ã€é€²éšè¦å‰‡è¨­å®šã€è©³ç´°çµ±è¨ˆ
    - **Inertial**: æ¨™æº–é€šçŸ¥è¨­å®šã€åŸºæœ¬è¦å‰‡ã€ç°¡åŒ–ç®¡ç†
    - **Cultivation**: æ¿€å‹µå¼é€šçŸ¥ã€ç›®æ¨™æé†’ã€æˆå°±é€šçŸ¥
    - **Guiding**: ç°¡åŒ–é€šçŸ¥ã€æ™ºæ…§é è¨­ã€æœ€å°‘å¹²æ“¾

  version: 1.1.0
  contact:
    name: LCAS é–‹ç™¼åœ˜éšŠ
    email: dev@lcas.com.tw

servers:
  - url: https://api.lcas.com.tw/v1
    description: æ­£å¼ç’°å¢ƒ
  - url: https://staging-api.lcas.com.tw/v1
    description: æ¸¬è©¦ç’°å¢ƒ

security:
  - bearerAuth: []

paths:
  /notifications/settings:
    get:
      tags:
        - Notification Settings
      summary: å–å¾—é€šçŸ¥è¨­å®š
      description: |
        å–å¾—ç”¨æˆ¶çš„é€šçŸ¥åå¥½è¨­å®šã€‚
        å››æ¨¡å¼å·®ç•°ï¼š
        - Expert: å®Œæ•´é€šçŸ¥æ§åˆ¶é¸é …ã€é€²éšè¦å‰‡è¨­å®šã€è©³ç´°åˆ†é¡
        - Inertial: æ¨™æº–é€šçŸ¥è¨­å®šã€åŸºæœ¬é–‹é—œã€ç°¡åŒ–é¸é …
        - Cultivation: ç›®æ¨™å°å‘é€šçŸ¥ã€æ¿€å‹µè¨­å®šã€æˆå°±æé†’
        - Guiding: ç°¡åŒ–è¨­å®šç•Œé¢ã€æ™ºæ…§é è¨­ã€æœ€å°‘é¸é …
      responses:
        '200':
          description: æˆåŠŸå–å¾—é€šçŸ¥è¨­å®š
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationSettingsResponse'

    put:
      tags:
        - Notification Settings
      summary: æ›´æ–°é€šçŸ¥è¨­å®š
      description: |
        æ›´æ–°ç”¨æˆ¶çš„é€šçŸ¥åå¥½è¨­å®šã€‚
        æ”¯æ´æ‰¹æ¬¡æ›´æ–°èˆ‡éƒ¨åˆ†æ›´æ–°ã€‚
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateNotificationSettingsRequest'
      responses:
        '200':
          description: é€šçŸ¥è¨­å®šæ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationSettingsResponse'

  /notifications/list:
    get:
      tags:
        - Notification History
      summary: é€šçŸ¥åˆ—è¡¨
      description: |
        å–å¾—ç”¨æˆ¶çš„é€šçŸ¥æ­·å²åˆ—è¡¨ã€‚
        å››æ¨¡å¼å·®ç•°ï¼š
        - Expert: å®Œæ•´é€šçŸ¥è©³æƒ…ã€é€²éšç¯©é¸ã€çµ±è¨ˆè³‡è¨Š
        - Inertial: æ¨™æº–é€šçŸ¥åˆ—è¡¨ã€åŸºæœ¬ç¯©é¸ã€ç°¡åŒ–é¡¯ç¤º
        - Cultivation: é‡é»é€šçŸ¥å±•ç¤ºã€æˆå°±é€šçŸ¥ã€æ¿€å‹µå…ƒç´ 
        - Guiding: ç°¡åŒ–é€šçŸ¥åˆ—è¡¨ã€é‡è¦é€šçŸ¥å„ªå…ˆã€æ¸…æ™°åˆ†é¡
      parameters:
        - name: page
          in: query
          description: é ç¢¼
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: limit
          in: query
          description: æ¯é ç­†æ•¸
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
        - name: status
          in: query
          description: é€šçŸ¥ç‹€æ…‹ç¯©é¸
          schema:
            type: string
            enum: [unread, read, archived]
        - name: type
          in: query
          description: é€šçŸ¥é¡å‹ç¯©é¸
          schema:
            type: string
            enum: [system, reminder, achievement, alert, social]
        - name: priority
          in: query
          description: å„ªå…ˆç´šç¯©é¸
          schema:
            type: string
            enum: [low, normal, high, urgent]
      responses:
        '200':
          description: æˆåŠŸå–å¾—é€šçŸ¥åˆ—è¡¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationListResponse'

  /notifications/{notificationId}/read:
    put:
      tags:
        - Notification History
      summary: æ¨™è¨˜å·²è®€
      description: å°‡æŒ‡å®šé€šçŸ¥æ¨™è¨˜ç‚ºå·²è®€
      parameters:
        - name: notificationId
          in: path
          required: true
          description: é€šçŸ¥ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: æˆåŠŸæ¨™è¨˜å·²è®€
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /notifications/reminders:
    get:
      tags:
        - Reminders
      summary: å–å¾—æé†’è¦å‰‡
      description: |
        å–å¾—ç”¨æˆ¶è¨­å®šçš„è¨˜å¸³æé†’è¦å‰‡ã€‚
        å››æ¨¡å¼å·®ç•°ï¼š
        - Expert: è¤‡é›œæé†’è¦å‰‡ã€å¤šæ¢ä»¶è¨­å®šã€è©³ç´°æ§åˆ¶
        - Inertial: æ¨™æº–æé†’è¨­å®šã€åŸºæœ¬è¦å‰‡ã€å›ºå®šé¸é …
        - Cultivation: ç›®æ¨™å°å‘æé†’ã€æ¿€å‹µå¼æé†’ã€é€²åº¦ç›¸é—œ
        - Guiding: ç°¡åŒ–æé†’è¨­å®šã€æ™ºæ…§å»ºè­°ã€æœ€å°‘é…ç½®
      responses:
        '200':
          description: æˆåŠŸå–å¾—æé†’è¦å‰‡
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RemindersResponse'

    post:
      tags:
        - Reminders
      summary: å»ºç«‹è¨˜å¸³æé†’
      description: å»ºç«‹æ–°çš„è¨˜å¸³æé†’è¦å‰‡
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateReminderRequest'
      responses:
        '201':
          description: æé†’è¦å‰‡å»ºç«‹æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReminderResponse'

  /notifications/reminders/{reminderId}:
    put:
      tags:
        - Reminders
      summary: æ›´æ–°æé†’è¦å‰‡
      description: æ›´æ–°æŒ‡å®šçš„è¨˜å¸³æé†’è¦å‰‡
      parameters:
        - name: reminderId
          in: path
          required: true
          description: æé†’è¦å‰‡ID
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateReminderRequest'
      responses:
        '200':
          description: æé†’è¦å‰‡æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReminderResponse'

    delete:
      tags:
        - Reminders
      summary: åˆªé™¤æé†’
      description: åˆªé™¤æŒ‡å®šçš„è¨˜å¸³æé†’è¦å‰‡
      parameters:
        - name: reminderId
          in: path
          required: true
          description: æé†’è¦å‰‡ID
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: æé†’è¦å‰‡åˆªé™¤æˆåŠŸ

  /notifications/reminder-templates:
    get:
      tags:
        - Reminders
      summary: å–å¾—æé†’æ¨¡æ¿
      description: |
        å–å¾—é è¨­çš„æé†’æ¨¡æ¿åˆ—è¡¨ã€‚
        å››æ¨¡å¼å·®ç•°ï¼š
        - Expert: æ‰€æœ‰æ¨¡æ¿é¡å‹ã€è©³ç´°è¨­å®šã€è‡ªè¨‚é¸é …
        - Inertial: å¸¸ç”¨æ¨¡æ¿ã€æ¨™æº–è¨­å®šã€åŸºæœ¬é¸é …
        - Cultivation: æ¿€å‹µå¼æ¨¡æ¿ã€ç›®æ¨™å°å‘ã€æˆå°±ç›¸é—œ
        - Guiding: ç°¡åŒ–æ¨¡æ¿ã€æ™ºæ…§æ¨è–¦ã€æœ€å°‘é¸æ“‡
      responses:
        '200':
          description: æˆåŠŸå–å¾—æé†’æ¨¡æ¿
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReminderTemplatesResponse'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    NotificationSettingsResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            general:
              type: object
              properties:
                enabled:
                  type: boolean
                  description: ç¸½é–‹é—œ
                doNotDisturb:
                  type: object
                  properties:
                    enabled:
                      type: boolean
                    startTime:
                      type: string
                      format: time
                      example: "22:00"
                    endTime:
                      type: string
                      format: time
                      example: "07:00"
            channels:
              type: object
              properties:
                push:
                  type: boolean
                  description: æ¨æ’­é€šçŸ¥
                email:
                  type: boolean
                  description: é›»å­éƒµä»¶é€šçŸ¥
                line:
                  type: boolean
                  description: LINE é€šçŸ¥
                inApp:
                  type: boolean
                  description: App å…§é€šçŸ¥
            categories:
              type: object
              properties:
                reminders:
                  type: object
                  properties:
                    enabled:
                      type: boolean
                    frequency:
                      type: string
                      enum: [low, normal, high]
                system:
                  type: object
                  properties:
                    enabled:
                      type: boolean
                    priority:
                      type: string
                      enum: [normal, high, urgent]
                achievements:
                  type: object
                  properties:
                    enabled:
                      type: boolean
                    celebrationMode:
                      type: boolean
                budgetAlerts:
                  type: object
                  properties:
                    enabled:
                      type: boolean
                    thresholds:
                      type: array
                      items:
                        type: integer
                social:
                  type: object
                  properties:
                    enabled:
                      type: boolean
                    friendActivity:
                      type: boolean
                    leaderboard:
                      type: boolean

    UpdateNotificationSettingsRequest:
      type: object
      properties:
        general:
          type: object
          properties:
            enabled:
              type: boolean
            doNotDisturb:
              type: object
              properties:
                enabled:
                  type: boolean
                startTime:
                  type: string
                  format: time
                endTime:
                  type: string
                  format: time
        channels:
          type: object
          properties:
            push:
              type: boolean
            email:
              type: boolean
            line:
              type: boolean
            inApp:
              type: boolean
        categories:
          type: object
          properties:
            reminders:
              type: object
              properties:
                enabled:
                  type: boolean
                frequency:
                  type: string
                  enum: [low, normal, high]
            system:
              type: object
              properties:
                enabled:
                  type: boolean
                priority:
                  type: string
                  enum: [normal, high, urgent]
            achievements:
              type: object
              properties:
                enabled:
                  type: boolean
                celebrationMode:
                  type: boolean
            budgetAlerts:
              type: object
              properties:
                enabled:
                  type: boolean
                thresholds:
                  type: array
                  items:
                    type: integer
            social:
              type: object
              properties:
                enabled:
                  type: boolean
                friendActivity:
                  type: boolean
                leaderboard:
                  type: boolean

    NotificationListResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            notifications:
              type: array
              items:
                $ref: '#/components/schemas/Notification'
            pagination:
              $ref: '#/components/schemas/Pagination'
            summary:
              type: object
              properties:
                totalCount:
                  type: integer
                unreadCount:
                  type: integer
                todayCount:
                  type: integer

    Notification:
      type: object
      properties:
        notificationId:
          type: string
          format: uuid
        type:
          type: string
          enum: [system, reminder, achievement, alert, social, promotion]
        title:
          type: string
        message:
          type: string
        priority:
          type: string
          enum: [low, normal, high, urgent]
        status:
          type: string
          enum: [unread, read, archived]
        channels:
          type: array
          items:
            type: string
            enum: [push, email, line, inApp]
        data:
          type: object
          description: é€šçŸ¥é™„åŠ è³‡æ–™
          properties:
            actionUrl:
              type: string
            imageUrl:
              type: string
            category:
              type: string
        createdAt:
          type: string
          format: date-time
        readAt:
          type: string
          format: date-time
          nullable: true
        expiresAt:
          type: string
          format: date-time
          nullable: true

    RemindersResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            reminders:
              type: array
              items:
                $ref: '#/components/schemas/Reminder'
            activeCount:
              type: integer
            nextReminder:
              type: object
              nullable: true
              properties:
                reminderId:
                  type: string
                  format: uuid
                title:
                  type: string
                scheduledTime:
                  type: string
                  format: date-time

    Reminder:
      type: object
      properties:
        reminderId:
          type: string
          format: uuid
        title:
          type: string
        message:
          type: string
        type:
          type: string
          enum: [daily, weekly, monthly, custom, smart]
        schedule:
          type: object
          properties:
            frequency:
              type: string
              enum: [daily, weekly, monthly, custom]
            time:
              type: string
              format: time
            daysOfWeek:
              type: array
              items:
                type: integer
                minimum: 0
                maximum: 6
            dayOfMonth:
              type: integer
              minimum: 1
              maximum: 31
            customPattern:
              type: string
              description: è‡ªè¨‚é‡è¤‡æ¨¡å¼
        conditions:
          type: object
          properties:
            onlyWhenNoActivity:
              type: boolean
              description: åƒ…åœ¨ç„¡è¨˜å¸³æ´»å‹•æ™‚æé†’
            budgetThreshold:
              type: number
              description: é ç®—é–¾å€¼æé†’
            locationBased:
              type: boolean
              description: ä½ç½®ç›¸é—œæé†’
        channels:
          type: array
          items:
            type: string
            enum: [push, email, line]
        isActive:
          type: boolean
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        lastTriggered:
          type: string
          format: date-time
          nullable: true
        nextTrigger:
          type: string
          format: date-time
          nullable: true

    CreateReminderRequest:
      type: object
      required:
        - title
        - type
        - schedule
      properties:
        title:
          type: string
          maxLength: 100
          description: æé†’æ¨™é¡Œ
        message:
          type: string
          maxLength: 500
          description: æé†’è¨Šæ¯
        type:
          type: string
          enum: [daily, weekly, monthly, custom, smart]
          description: æé†’é¡å‹
        schedule:
          type: object
          required:
            - frequency
          properties:
            frequency:
              type: string
              enum: [daily, weekly, monthly, custom]
            time:
              type: string
              format: time
            daysOfWeek:
              type: array
              items:
                type: integer
                minimum: 0
                maximum: 6
            dayOfMonth:
              type: integer
              minimum: 1
              maximum: 31
            customPattern:
              type: string
        conditions:
          type: object
          properties:
            onlyWhenNoActivity:
              type: boolean
              default: false
            budgetThreshold:
              type: number
            locationBased:
              type: boolean
              default: false
        channels:
          type: array
          items:
            type: string
            enum: [push, email, line]
          default: ["push"]

    UpdateReminderRequest:
      type: object
      properties:
        title:
          type: string
          maxLength: 100
        message:
          type: string
          maxLength: 500
        schedule:
          type: object
          properties:
            frequency:
              type: string
              enum: [daily, weekly, monthly, custom]
            time:
              type: string
              format: time
            daysOfWeek:
              type: array
              items:
                type: integer
                minimum: 0
                maximum: 6
            dayOfMonth:
              type: integer
              minimum: 1
              maximum: 31
            customPattern:
              type: string
        conditions:
          type: object
          properties:
            onlyWhenNoActivity:
              type: boolean
            budgetThreshold:
              type: number
            locationBased:
              type: boolean
        channels:
          type: array
          items:
            type: string
            enum: [push, email, line]
        isActive:
          type: boolean

    ReminderResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          $ref: '#/components/schemas/Reminder'

    ReminderTemplatesResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            templates:
              type: array
              items:
                $ref: '#/components/schemas/ReminderTemplate'

    ReminderTemplate:
      type: object
      properties:
        templateId:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        category:
          type: string
          enum: [daily, weekly, goal_based, smart]
        template:
          type: object
          properties:
            title:
              type: string
            message:
              type: string
            type:
              type: string
            schedule:
              type: object
            conditions:
              type: object
        usageCount:
          type: integer
          description: ä½¿ç”¨æ¬¡æ•¸
        rating:
          type: number
          minimum: 0
          maximum: 5
          description: è©•åˆ†

    Pagination:
      type: object
      properties:
        page:
          type: integer
        limit:
          type: integer
        total:
          type: integer
        totalPages:
          type: integer
        hasNext:
          type: boolean
        hasPrev:
          type: boolean

    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Operation completed successfully"

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          properties:
            code:
              type: string
            message:
              type: string
            timestamp:
              type: string
              format: date-time
            requestId:
              type: string
              format: uuid

tags:
  - name: Notification Settings
    description: é€šçŸ¥è¨­å®šç›¸é—œ API
  - name: Notification History
    description: é€šçŸ¥æ­·å²ç›¸é—œ API
  - name: Reminders
    description: è¨˜å¸³æé†’ç›¸é—œ API
info:
  title: LCAS 2.0 é€šçŸ¥ç®¡ç†æœå‹™ API
  version: 1.0.0
  description: |
    **é€šçŸ¥ç®¡ç†æœå‹™ API è¦æ ¼æ›¸**
    
    **ç‰ˆæœ¬**: 1.0.0  
    **å»ºç«‹æ—¥æœŸ**: 2025-08-22  
    **æœ€å¾Œæ›´æ–°**: 2025-08-22  
    **å»ºç«‹è€…**: AustinLiao69  
    
    ---
    
    ## ğŸ“‹ æœå‹™æ¦‚è¿°
    
    é€šçŸ¥ç®¡ç†æœå‹™æä¾›å®Œæ•´çš„é€šçŸ¥è¨­å®šã€ç®¡ç†èˆ‡è¨˜å¸³æé†’åŠŸèƒ½ï¼Œæ”¯æ´å€‹äººåŒ–é€šçŸ¥åå¥½èˆ‡æ™ºæ…§æé†’æ©Ÿåˆ¶ã€‚
    
    ### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
    - **é€šçŸ¥è¨­å®š**: å€‹äººåŒ–é€šçŸ¥åå¥½ç®¡ç†
    - **é€šçŸ¥åˆ—è¡¨**: ç³»çµ±é€šçŸ¥è¨Šæ¯ç®¡ç†
    - **è¨˜å¸³æé†’**: æ™ºæ…§è¨˜å¸³æé†’èˆ‡æ’ç¨‹
    - **æé†’æ¨¡æ¿**: é è¨­æé†’è¦å‰‡ç®¡ç†
    
    ### ğŸ”§ å››æ¨¡å¼æ”¯æ´
    - **Expert**: è©³ç´°é€šçŸ¥è¨­å®šã€é€²éšæ’ç¨‹è¦å‰‡
    - **Inertial**: æ¨™æº–é€šçŸ¥è¨­å®šã€å›ºå®šæé†’æ™‚é–“
    - **Cultivation**: è±å¯Œæé†’è¨­å®šã€ç¿’æ…£é¤Šæˆæé†’
    - **Guiding**: è‡ªå‹•é€šçŸ¥è¨­å®šã€æœ€ç°¡åŒ–ç®¡ç†
    
    ### ğŸ“Š å°æ‡‰ç•«é¢
    - **S-504**: é€šçŸ¥è¨­å®šé 
    - **S-201**: LINE OA è¨˜å¸³å°è©±ï¼ˆæé†’åŠŸèƒ½ï¼‰
    - **S-501**: æ¿€å‹µç³»çµ±é ï¼ˆæé†’ç›¸é—œï¼‰

servers:
  - url: https://api.lcas.app/v1
    description: Production server
  - url: https://staging-api.lcas.app/v1
    description: Staging server

security:
  - BearerAuth: []

tags:
  - name: settings
    description: é€šçŸ¥è¨­å®šç›¸é—œ API
  - name: notifications
    description: é€šçŸ¥ç®¡ç†ç›¸é—œ API
  - name: reminders
    description: è¨˜å¸³æé†’ç›¸é—œ API

paths:
  /notifications/settings:
    get:
      tags:
        - settings
      summary: å–å¾—é€šçŸ¥è¨­å®š
      description: |
        å–å¾—ä½¿ç”¨è€…çš„é€šçŸ¥è¨­å®šèˆ‡åå¥½
        
        **å°æ‡‰ç•«é¢**: S-504 é€šçŸ¥è¨­å®šé 
        **User Story**: US-034
        
        **å››æ¨¡å¼å·®ç•°**:
        - **Expert**: é¡¯ç¤ºè©³ç´°é€šçŸ¥åˆ†é¡è¨­å®š
        - **Inertial**: é¡¯ç¤ºæ¨™æº–é€šçŸ¥è¨­å®šé¸é …
        - **Cultivation**: å¼·èª¿ç¿’æ…£é¤Šæˆç›¸é—œæé†’
        - **Guiding**: é¡¯ç¤ºç°¡åŒ–çš„åŸºæœ¬è¨­å®š
      parameters:
        - name: X-User-Mode
          in: header
          description: ä½¿ç”¨è€…æ¨¡å¼
          required: false
          schema:
            type: string
            enum: [Expert, Inertial, Cultivation, Guiding]
            default: Inertial
      responses:
        '200':
          description: æˆåŠŸå–å¾—é€šçŸ¥è¨­å®š
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      generalSettings:
                        type: object
                        description: ä¸€èˆ¬é€šçŸ¥è¨­å®š
                        properties:
                          pushNotifications:
                            type: boolean
                            description: æ˜¯å¦å•Ÿç”¨æ¨æ’­é€šçŸ¥
                            example: true
                          emailNotifications:
                            type: boolean
                            description: æ˜¯å¦å•Ÿç”¨ä¿¡ä»¶é€šçŸ¥
                            example: true
                          lineNotifications:
                            type: boolean
                            description: æ˜¯å¦å•Ÿç”¨ LINE é€šçŸ¥
                            example: true
                          quietHours:
                            type: object
                            description: éœéŸ³æ™‚æ®µè¨­å®š
                            properties:
                              enabled:
                                type: boolean
                                description: æ˜¯å¦å•Ÿç”¨éœéŸ³æ™‚æ®µ
                                example: true
                              startTime:
                                type: string
                                format: time
                                description: éœéŸ³é–‹å§‹æ™‚é–“
                                example: "22:00"
                              endTime:
                                type: string
                                format: time
                                description: éœéŸ³çµæŸæ™‚é–“
                                example: "08:00"
                      reminderSettings:
                        type: object
                        description: æé†’è¨­å®š
                        properties:
                          dailyReminder:
                            type: object
                            description: æ¯æ—¥è¨˜å¸³æé†’
                            properties:
                              enabled:
                                type: boolean
                                description: æ˜¯å¦å•Ÿç”¨
                                example: true
                              time:
                                type: string
                                format: time
                                description: æé†’æ™‚é–“
                                example: "21:00"
                              message:
                                type: string
                                description: æé†’è¨Šæ¯
                                example: "åˆ¥å¿˜äº†è¨˜éŒ„ä»Šå¤©çš„æ”¯å‡ºå–”ï¼"
                          budgetWarning:
                            type: object
                            description: é ç®—è­¦å‘Šè¨­å®š
                            properties:
                              enabled:
                                type: boolean
                                description: æ˜¯å¦å•Ÿç”¨
                                example: true
                              threshold:
                                type: integer
                                minimum: 1
                                maximum: 100
                                description: è­¦å‘Šé–€æª»ç™¾åˆ†æ¯”
                                example: 80
                          weeklyReport:
                            type: object
                            description: é€±å ±è¨­å®š
                            properties:
                              enabled:
                                type: boolean
                                description: æ˜¯å¦å•Ÿç”¨
                                example: true
                              dayOfWeek:
                                type: integer
                                minimum: 0
                                maximum: 6
                                description: æ˜ŸæœŸå¹¾ï¼ˆ0=é€±æ—¥ï¼‰
                                example: 0
                              time:
                                type: string
                                format: time
                                description: ç™¼é€æ™‚é–“
                                example: "10:00"
                          monthlyReport:
                            type: object
                            description: æœˆå ±è¨­å®š
                            properties:
                              enabled:
                                type: boolean
                                description: æ˜¯å¦å•Ÿç”¨
                                example: true
                              dayOfMonth:
                                type: integer
                                minimum: 1
                                maximum: 31
                                description: æ¯æœˆç¬¬å¹¾æ—¥
                                example: 1
                              time:
                                type: string
                                format: time
                                description: ç™¼é€æ™‚é–“
                                example: "09:00"
                      categorySettings:
                        type: object
                        description: åˆ†é¡é€šçŸ¥è¨­å®š
                        properties:
                          systemUpdates:
                            type: boolean
                            description: ç³»çµ±æ›´æ–°é€šçŸ¥
                            example: true
                          collaborationInvites:
                            type: boolean
                            description: å”ä½œé‚€è«‹é€šçŸ¥
                            example: true
                          achievementUnlocked:
                            type: boolean
                            description: æˆå°±è§£é–é€šçŸ¥
                            example: true
                          dataBackup:
                            type: boolean
                            description: è³‡æ–™å‚™ä»½é€šçŸ¥
                            example: false
                      lastUpdated:
                        type: string
                        format: date-time
                        description: æœ€å¾Œæ›´æ–°æ™‚é–“
                        example: "2025-08-22T10:30:00Z"
              examples:
                expert_settings:
                  summary: Expertæ¨¡å¼ - è©³ç´°è¨­å®š
                  value:
                    success: true
                    data:
                      generalSettings:
                        pushNotifications: true
                        emailNotifications: true
                        lineNotifications: true
                        quietHours:
                          enabled: true
                          startTime: "22:00"
                          endTime: "08:00"
                      reminderSettings:
                        dailyReminder:
                          enabled: true
                          time: "21:00"
                          message: "åˆ¥å¿˜äº†è¨˜éŒ„ä»Šå¤©çš„æ”¯å‡ºå–”ï¼"
                        budgetWarning:
                          enabled: true
                          threshold: 80
                        weeklyReport:
                          enabled: true
                          dayOfWeek: 0
                          time: "10:00"
                        monthlyReport:
                          enabled: true
                          dayOfMonth: 1
                          time: "09:00"
                      categorySettings:
                        systemUpdates: true
                        collaborationInvites: true
                        achievementUnlocked: true
                        dataBackup: false
                      lastUpdated: "2025-08-22T10:30:00Z"
                guiding_settings:
                  summary: Guidingæ¨¡å¼ - ç°¡åŒ–è¨­å®š
                  value:
                    success: true
                    data:
                      generalSettings:
                        pushNotifications: true
                        lineNotifications: true
                      reminderSettings:
                        dailyReminder:
                          enabled: true
                          time: "21:00"
                          message: "è¨˜å¾—è¨˜å¸³å–”ï¼"
                      lastUpdated: "2025-08-22T10:30:00Z"
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

    put:
      tags:
        - settings
      summary: æ›´æ–°é€šçŸ¥è¨­å®š
      description: |
        æ›´æ–°ä½¿ç”¨è€…çš„é€šçŸ¥è¨­å®šèˆ‡åå¥½
        
        **å°æ‡‰ç•«é¢**: S-504 é€šçŸ¥è¨­å®šé 
        **User Story**: US-034
        
        **å››æ¨¡å¼å·®ç•°**:
        - **Expert**: æ”¯æ´è©³ç´°é€šçŸ¥åˆ†é¡è¨­å®š
        - **Inertial**: æ”¯æ´æ¨™æº–é€šçŸ¥è¨­å®šé¸é …
        - **Cultivation**: å¼·èª¿ç¿’æ…£é¤Šæˆç›¸é—œæé†’è¨­å®š
        - **Guiding**: åƒ…æ”¯æ´åŸºæœ¬å¿…è¦è¨­å®š
      parameters:
        - name: X-User-Mode
          in: header
          description: ä½¿ç”¨è€…æ¨¡å¼
          required: false
          schema:
            type: string
            enum: [Expert, Inertial, Cultivation, Guiding]
            default: Inertial
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                generalSettings:
                  type: object
                  description: ä¸€èˆ¬é€šçŸ¥è¨­å®š
                  properties:
                    pushNotifications:
                      type: boolean
                      description: æ˜¯å¦å•Ÿç”¨æ¨æ’­é€šçŸ¥
                      example: true
                    emailNotifications:
                      type: boolean
                      description: æ˜¯å¦å•Ÿç”¨ä¿¡ä»¶é€šçŸ¥
                      example: true
                    lineNotifications:
                      type: boolean
                      description: æ˜¯å¦å•Ÿç”¨ LINE é€šçŸ¥
                      example: true
                    quietHours:
                      type: object
                      description: éœéŸ³æ™‚æ®µè¨­å®š
                      properties:
                        enabled:
                          type: boolean
                          description: æ˜¯å¦å•Ÿç”¨éœéŸ³æ™‚æ®µ
                          example: true
                        startTime:
                          type: string
                          format: time
                          description: éœéŸ³é–‹å§‹æ™‚é–“
                          example: "22:00"
                        endTime:
                          type: string
                          format: time
                          description: éœéŸ³çµæŸæ™‚é–“
                          example: "08:00"
                reminderSettings:
                  type: object
                  description: æé†’è¨­å®š
                  properties:
                    dailyReminder:
                      type: object
                      description: æ¯æ—¥è¨˜å¸³æé†’
                      properties:
                        enabled:
                          type: boolean
                          description: æ˜¯å¦å•Ÿç”¨
                          example: true
                        time:
                          type: string
                          format: time
                          description: æé†’æ™‚é–“
                          example: "21:00"
                        message:
                          type: string
                          description: æé†’è¨Šæ¯
                          example: "åˆ¥å¿˜äº†è¨˜éŒ„ä»Šå¤©çš„æ”¯å‡ºå–”ï¼"
                          maxLength: 200
                    budgetWarning:
                      type: object
                      description: é ç®—è­¦å‘Šè¨­å®š
                      properties:
                        enabled:
                          type: boolean
                          description: æ˜¯å¦å•Ÿç”¨
                          example: true
                        threshold:
                          type: integer
                          minimum: 1
                          maximum: 100
                          description: è­¦å‘Šé–€æª»ç™¾åˆ†æ¯”
                          example: 80
                    weeklyReport:
                      type: object
                      description: é€±å ±è¨­å®š
                      properties:
                        enabled:
                          type: boolean
                          description: æ˜¯å¦å•Ÿç”¨
                          example: true
                        dayOfWeek:
                          type: integer
                          minimum: 0
                          maximum: 6
                          description: æ˜ŸæœŸå¹¾ï¼ˆ0=é€±æ—¥ï¼‰
                          example: 0
                        time:
                          type: string
                          format: time
                          description: ç™¼é€æ™‚é–“
                          example: "10:00"
                    monthlyReport:
                      type: object
                      description: æœˆå ±è¨­å®š
                      properties:
                        enabled:
                          type: boolean
                          description: æ˜¯å¦å•Ÿç”¨
                          example: true
                        dayOfMonth:
                          type: integer
                          minimum: 1
                          maximum: 31
                          description: æ¯æœˆç¬¬å¹¾æ—¥
                          example: 1
                        time:
                          type: string
                          format: time
                          description: ç™¼é€æ™‚é–“
                          example: "09:00"
                categorySettings:
                  type: object
                  description: åˆ†é¡é€šçŸ¥è¨­å®š
                  properties:
                    systemUpdates:
                      type: boolean
                      description: ç³»çµ±æ›´æ–°é€šçŸ¥
                      example: true
                    collaborationInvites:
                      type: boolean
                      description: å”ä½œé‚€è«‹é€šçŸ¥
                      example: true
                    achievementUnlocked:
                      type: boolean
                      description: æˆå°±è§£é–é€šçŸ¥
                      example: true
                    dataBackup:
                      type: boolean
                      description: è³‡æ–™å‚™ä»½é€šçŸ¥
                      example: false
            examples:
              update_all_settings:
                summary: æ›´æ–°å®Œæ•´è¨­å®š
                value:
                  generalSettings:
                    pushNotifications: true
                    emailNotifications: false
                    lineNotifications: true
                    quietHours:
                      enabled: true
                      startTime: "23:00"
                      endTime: "07:00"
                  reminderSettings:
                    dailyReminder:
                      enabled: true
                      time: "20:30"
                      message: "ä»Šå¤©çš„è¨˜å¸³å®Œæˆäº†å—ï¼Ÿ"
                    budgetWarning:
                      enabled: true
                      threshold: 85
                  categorySettings:
                    systemUpdates: true
                    collaborationInvites: true
                    achievementUnlocked: false
                    dataBackup: false
              simple_update:
                summary: ç°¡å–®è¨­å®šæ›´æ–°
                value:
                  generalSettings:
                    pushNotifications: false
                  reminderSettings:
                    dailyReminder:
                      enabled: false
      responses:
        '200':
          description: æˆåŠŸæ›´æ–°é€šçŸ¥è¨­å®š
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                        description: æˆåŠŸè¨Šæ¯
                        example: "é€šçŸ¥è¨­å®šå·²æˆåŠŸæ›´æ–°"
                      updatedAt:
                        type: string
                        format: date-time
                        description: æ›´æ–°æ™‚é–“
                        example: "2025-08-22T11:00:00Z"
                      affectedSettings:
                        type: array
                        items:
                          type: string
                        description: è¢«æ›´æ–°çš„è¨­å®šé …ç›®
                        example: ["generalSettings.pushNotifications", "reminderSettings.dailyReminder"]
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /notifications/list:
    get:
      tags:
        - notifications
      summary: é€šçŸ¥åˆ—è¡¨
      description: |
        å–å¾—ä½¿ç”¨è€…çš„é€šçŸ¥è¨Šæ¯åˆ—è¡¨
        
        **å°æ‡‰ç•«é¢**: é€šçŸ¥ä¸­å¿ƒã€æ¨æ’­é€šçŸ¥
        **User Story**: US-034
        
        **é€šçŸ¥é¡å‹**:
        - **system**: ç³»çµ±é€šçŸ¥
        - **reminder**: è¨˜å¸³æé†’
        - **collaboration**: å”ä½œç›¸é—œ
        - **achievement**: æˆå°±é€šçŸ¥
        - **budget**: é ç®—è­¦å‘Š
      parameters:
        - name: page
          in: query
          description: åˆ†é ç·¨è™Ÿ
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: pageSize
          in: query
          description: æ¯é ç­†æ•¸
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: type
          in: query
          description: é€šçŸ¥é¡å‹ç¯©é¸
          required: false
          schema:
            type: string
            enum: [all, system, reminder, collaboration, achievement, budget]
            default: all
        - name: status
          in: query
          description: è®€å–ç‹€æ…‹ç¯©é¸
          required: false
          schema:
            type: string
            enum: [all, unread, read]
            default: all
        - name: sortBy
          in: query
          description: æ’åºæ¬„ä½
          required: false
          schema:
            type: string
            enum: [createdAt, priority]
            default: createdAt
        - name: sortOrder
          in: query
          description: æ’åºæ–¹å‘
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: desc
      responses:
        '200':
          description: æˆåŠŸå–å¾—é€šçŸ¥åˆ—è¡¨
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      notifications:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              format: uuid
                              description: é€šçŸ¥ID
                              example: "notif_12345"
                            type:
                              type: string
                              enum: [system, reminder, collaboration, achievement, budget]
                              description: é€šçŸ¥é¡å‹
                              example: "reminder"
                            title:
                              type: string
                              description: é€šçŸ¥æ¨™é¡Œ
                              example: "è¨˜å¸³æé†’"
                            message:
                              type: string
                              description: é€šçŸ¥å…§å®¹
                              example: "åˆ¥å¿˜äº†è¨˜éŒ„ä»Šå¤©çš„æ”¯å‡ºå–”ï¼"
                            priority:
                              type: string
                              enum: [low, normal, high, urgent]
                              description: å„ªå…ˆç­‰ç´š
                              example: "normal"
                            isRead:
                              type: boolean
                              description: æ˜¯å¦å·²è®€
                              example: false
                            createdAt:
                              type: string
                              format: date-time
                              description: å»ºç«‹æ™‚é–“
                              example: "2025-08-22T09:00:00Z"
                            readAt:
                              type: string
                              format: date-time
                              description: è®€å–æ™‚é–“
                              example: null
                            actionUrl:
                              type: string
                              format: uri
                              description: å‹•ä½œé€£çµ
                              example: "/bookkeeping/new"
                            metadata:
                              type: object
                              description: é¡å¤–è³‡è¨Š
                              properties:
                                icon:
                                  type: string
                                  description: åœ–ç¤º
                                  example: "ğŸ’°"
                                category:
                                  type: string
                                  description: åˆ†é¡
                                  example: "daily_reminder"
                      pagination:
                        type: object
                        properties:
                          currentPage:
                            type: integer
                            example: 1
                          totalPages:
                            type: integer
                            example: 3
                          totalItems:
                            type: integer
                            example: 45
                          pageSize:
                            type: integer
                            example: 20
                          unreadCount:
                            type: integer
                            description: æœªè®€é€šçŸ¥æ•¸é‡
                            example: 12
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /notifications/{id}/read:
    put:
      tags:
        - notifications
      summary: æ¨™è¨˜å·²è®€
      description: |
        å°‡æŒ‡å®šé€šçŸ¥æ¨™è¨˜ç‚ºå·²è®€ç‹€æ…‹
        
        **å°æ‡‰ç•«é¢**: é€šçŸ¥ä¸­å¿ƒ
        **User Story**: US-034
      parameters:
        - name: id
          in: path
          description: é€šçŸ¥ID
          required: true
          schema:
            type: string
            format: uuid
            example: "notif_12345"
      responses:
        '200':
          description: æˆåŠŸæ¨™è¨˜å·²è®€
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                        description: æˆåŠŸè¨Šæ¯
                        example: "é€šçŸ¥å·²æ¨™è¨˜ç‚ºå·²è®€"
                      readAt:
                        type: string
                        format: date-time
                        description: è®€å–æ™‚é–“
                        example: "2025-08-22T11:30:00Z"
        '404':
          description: é€šçŸ¥ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /notifications/reminders:
    post:
      tags:
        - reminders
      summary: å»ºç«‹è¨˜å¸³æé†’
      description: |
        å»ºç«‹è‡ªå®šç¾©è¨˜å¸³æé†’è¦å‰‡
        
        **å°æ‡‰ç•«é¢**: S-504 é€šçŸ¥è¨­å®šé 
        **User Story**: US-034
        
        **å››æ¨¡å¼å·®ç•°**:
        - **Expert**: æ”¯æ´è¤‡é›œæ’ç¨‹è¦å‰‡ã€æ¢ä»¶è§¸ç™¼
        - **Inertial**: æ”¯æ´æ¨™æº–æ™‚é–“æé†’
        - **Cultivation**: å¼·èª¿ç¿’æ…£é¤Šæˆæé†’
        - **Guiding**: åƒ…æ”¯æ´ç°¡å–®æ¯æ—¥æé†’
      parameters:
        - name: X-User-Mode
          in: header
          description: ä½¿ç”¨è€…æ¨¡å¼
          required: false
          schema:
            type: string
            enum: [Expert, Inertial, Cultivation, Guiding]
            default: Inertial
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: æé†’åç¨±
                  example: "æ¯æ—¥æ™šé–“è¨˜å¸³æé†’"
                  maxLength: 100
                type:
                  type: string
                  enum: [daily, weekly, monthly, custom]
                  description: æé†’é¡å‹
                  example: "daily"
                schedule:
                  type: object
                  description: æ’ç¨‹è¨­å®š
                  properties:
                    time:
                      type: string
                      format: time
                      description: æé†’æ™‚é–“
                      example: "21:00"
                    timezone:
                      type: string
                      description: æ™‚å€
                      example: "Asia/Taipei"
                      default: "Asia/Taipei"
                    daysOfWeek:
                      type: array
                      items:
                        type: integer
                        minimum: 0
                        maximum: 6
                      description: æ˜ŸæœŸå¹¾ï¼ˆ0=é€±æ—¥ï¼Œåƒ…weeklyé¡å‹ï¼‰
                      example: [1, 2, 3, 4, 5]
                    dayOfMonth:
                      type: integer
                      minimum: 1
                      maximum: 31
                      description: æ¯æœˆç¬¬å¹¾æ—¥ï¼ˆåƒ…monthlyé¡å‹ï¼‰
                      example: 1
                    customRule:
                      type: string
                      description: è‡ªå®šç¾©æ’ç¨‹è¦å‰‡ï¼ˆåƒ…customé¡å‹ï¼Œcronæ ¼å¼ï¼‰
                      example: "0 21 * * 1-5"
                message:
                  type: object
                  description: æé†’è¨Šæ¯è¨­å®š
                  properties:
                    title:
                      type: string
                      description: æ¨™é¡Œ
                      example: "è¨˜å¸³æé†’"
                      maxLength: 50
                    content:
                      type: string
                      description: å…§å®¹
                      example: "åˆ¥å¿˜äº†è¨˜éŒ„ä»Šå¤©çš„æ”¶æ”¯å–”ï¼"
                      maxLength: 200
                    actionText:
                      type: string
                      description: å‹•ä½œæŒ‰éˆ•æ–‡å­—
                      example: "ç«‹å³è¨˜å¸³"
                      maxLength: 20
                    actionUrl:
                      type: string
                      format: uri
                      description: å‹•ä½œé€£çµ
                      example: "/bookkeeping/new"
                conditions:
                  type: object
                  description: è§¸ç™¼æ¢ä»¶ï¼ˆåƒ…Expertæ¨¡å¼ï¼‰
                  properties:
                    minDaysSinceLastEntry:
                      type: integer
                      minimum: 0
                      description: è·é›¢ä¸Šæ¬¡è¨˜å¸³æœ€å°‘å¤©æ•¸
                      example: 1
                    budgetThreshold:
                      type: number
                      minimum: 0
                      maximum: 100
                      description: é ç®—ä½¿ç”¨é–€æª»ç™¾åˆ†æ¯”
                      example: 80.0
                    categoryFilter:
                      type: array
                      items:
                        type: string
                        format: uuid
                      description: åƒ…é‡å°ç‰¹å®šç§‘ç›®æé†’
                      example: ["cat_123", "cat_456"]
                isActive:
                  type: boolean
                  description: æ˜¯å¦å•Ÿç”¨
                  example: true
                  default: true
              required:
                - name
                - type
                - schedule
                - message
            examples:
              daily_reminder:
                summary: æ¯æ—¥æé†’
                value:
                  name: "æ¯æ—¥æ™šé–“è¨˜å¸³æé†’"
                  type: "daily"
                  schedule:
                    time: "21:00"
                    timezone: "Asia/Taipei"
                  message:
                    title: "è¨˜å¸³æé†’"
                    content: "åˆ¥å¿˜äº†è¨˜éŒ„ä»Šå¤©çš„æ”¶æ”¯å–”ï¼"
                    actionText: "ç«‹å³è¨˜å¸³"
                    actionUrl: "/bookkeeping/new"
                  isActive: true
              weekly_reminder:
                summary: é€±æœ«æé†’
                value:
                  name: "é€±æœ«æ”¯å‡ºæª¢è¦–æé†’"
                  type: "weekly"
                  schedule:
                    time: "10:00"
                    daysOfWeek: [0, 6]
                    timezone: "Asia/Taipei"
                  message:
                    title: "é€±æœ«æ”¯å‡ºæª¢è¦–"
                    content: "ä¾†çœ‹çœ‹é€™é€±çš„æ”¯å‡ºç‹€æ³å§ï¼"
                    actionText: "æŸ¥çœ‹å ±è¡¨"
                    actionUrl: "/reports/weekly"
                  isActive: true
              expert_conditional:
                summary: Expertæ¨¡å¼ - æ¢ä»¶æé†’
                value:
                  name: "é ç®—è¶…æ¨™è­¦å‘Š"
                  type: "custom"
                  schedule:
                    customRule: "0 18 * * *"
                    timezone: "Asia/Taipei"
                  message:
                    title: "é ç®—è­¦å‘Š"
                    content: "æœ¬æœˆé ç®—å³å°‡è¶…æ¨™ï¼Œè«‹æ³¨æ„æ”¯å‡ºï¼"
                    actionText: "æŸ¥çœ‹é ç®—"
                    actionUrl: "/budget/status"
                  conditions:
                    budgetThreshold: 85.0
                  isActive: true
      responses:
        '201':
          description: æˆåŠŸå»ºç«‹æé†’è¦å‰‡
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      reminderId:
                        type: string
                        format: uuid
                        description: æé†’è¦å‰‡ID
                        example: "reminder_67890"
                      name:
                        type: string
                        description: æé†’åç¨±
                        example: "æ¯æ—¥æ™šé–“è¨˜å¸³æé†’"
                      status:
                        type: string
                        enum: [active, inactive]
                        description: ç‹€æ…‹
                        example: "active"
                      nextTrigger:
                        type: string
                        format: date-time
                        description: ä¸‹æ¬¡è§¸ç™¼æ™‚é–“
                        example: "2025-08-22T21:00:00Z"
                      createdAt:
                        type: string
                        format: date-time
                        description: å»ºç«‹æ™‚é–“
                        example: "2025-08-22T11:45:00Z"
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /notifications/reminders/{id}:
    put:
      tags:
        - reminders
      summary: æ›´æ–°æé†’è¦å‰‡
      description: |
        æ›´æ–°æŒ‡å®šçš„è¨˜å¸³æé†’è¦å‰‡
        
        **å°æ‡‰ç•«é¢**: S-504 é€šçŸ¥è¨­å®šé 
        **User Story**: US-034
      parameters:
        - name: id
          in: path
          description: æé†’è¦å‰‡ID
          required: true
          schema:
            type: string
            format: uuid
            example: "reminder_67890"
        - name: X-User-Mode
          in: header
          description: ä½¿ç”¨è€…æ¨¡å¼
          required: false
          schema:
            type: string
            enum: [Expert, Inertial, Cultivation, Guiding]
            default: Inertial
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: æé†’åç¨±
                  example: "æ¯æ—¥æ™šé–“è¨˜å¸³æé†’"
                  maxLength: 100
                schedule:
                  type: object
                  description: æ’ç¨‹è¨­å®š
                  properties:
                    time:
                      type: string
                      format: time
                      description: æé†’æ™‚é–“
                      example: "21:30"
                    daysOfWeek:
                      type: array
                      items:
                        type: integer
                        minimum: 0
                        maximum: 6
                      description: æ˜ŸæœŸå¹¾ï¼ˆåƒ…weeklyé¡å‹ï¼‰
                      example: [1, 2, 3, 4, 5]
                message:
                  type: object
                  description: æé†’è¨Šæ¯è¨­å®š
                  properties:
                    title:
                      type: string
                      description: æ¨™é¡Œ
                      example: "è¨˜å¸³æé†’"
                      maxLength: 50
                    content:
                      type: string
                      description: å…§å®¹
                      example: "è¨˜å¾—è¨˜éŒ„ä»Šå¤©çš„æ”¯å‡ºï¼"
                      maxLength: 200
                isActive:
                  type: boolean
                  description: æ˜¯å¦å•Ÿç”¨
                  example: true
            examples:
              update_time:
                summary: æ›´æ–°æé†’æ™‚é–“
                value:
                  schedule:
                    time: "20:30"
              update_message:
                summary: æ›´æ–°æé†’è¨Šæ¯
                value:
                  message:
                    content: "ä»Šå¤©æœ‰è¨˜å¸³å—ï¼Ÿå¿«ä¾†è¨˜éŒ„ä¸€ä¸‹å§ï¼"
              disable_reminder:
                summary: åœç”¨æé†’
                value:
                  isActive: false
      responses:
        '200':
          description: æˆåŠŸæ›´æ–°æé†’è¦å‰‡
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                        description: æˆåŠŸè¨Šæ¯
                        example: "æé†’è¦å‰‡å·²æˆåŠŸæ›´æ–°"
                      reminderId:
                        type: string
                        format: uuid
                        description: æé†’è¦å‰‡ID
                        example: "reminder_67890"
                      updatedAt:
                        type: string
                        format: date-time
                        description: æ›´æ–°æ™‚é–“
                        example: "2025-08-22T12:00:00Z"
                      nextTrigger:
                        type: string
                        format: date-time
                        description: ä¸‹æ¬¡è§¸ç™¼æ™‚é–“
                        example: "2025-08-22T20:30:00Z"
        '404':
          description: æé†’è¦å‰‡ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

    delete:
      tags:
        - reminders
      summary: åˆªé™¤æé†’è¦å‰‡
      description: |
        åˆªé™¤æŒ‡å®šçš„è¨˜å¸³æé†’è¦å‰‡
        
        **å°æ‡‰ç•«é¢**: S-504 é€šçŸ¥è¨­å®šé 
        **User Story**: US-034
      parameters:
        - name: id
          in: path
          description: æé†’è¦å‰‡ID
          required: true
          schema:
            type: string
            format: uuid
            example: "reminder_67890"
      responses:
        '200':
          description: æˆåŠŸåˆªé™¤æé†’è¦å‰‡
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                        description: æˆåŠŸè¨Šæ¯
                        example: "æé†’è¦å‰‡å·²æˆåŠŸåˆªé™¤"
                      deletedAt:
                        type: string
                        format: date-time
                        description: åˆªé™¤æ™‚é–“
                        example: "2025-08-22T12:15:00Z"
        '404':
          description: æé†’è¦å‰‡ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /notifications/reminder-templates:
    get:
      tags:
        - reminders
      summary: å–å¾—æé†’æ¨¡æ¿
      description: |
        å–å¾—ç³»çµ±é è¨­çš„æé†’è¦å‰‡æ¨¡æ¿
        
        **å°æ‡‰ç•«é¢**: S-504 é€šçŸ¥è¨­å®šé 
        **User Story**: US-034
        
        **å››æ¨¡å¼å·®ç•°**:
        - **Expert**: é¡¯ç¤ºæ‰€æœ‰æ¨¡æ¿åŒ…å«é€²éšé¸é …
        - **Inertial**: é¡¯ç¤ºæ¨™æº–æ¨¡æ¿
        - **Cultivation**: å¼·èª¿ç¿’æ…£é¤Šæˆç›¸é—œæ¨¡æ¿
        - **Guiding**: åƒ…é¡¯ç¤ºåŸºæœ¬ç°¡å–®æ¨¡æ¿
      parameters:
        - name: X-User-Mode
          in: header
          description: ä½¿ç”¨è€…æ¨¡å¼
          required: false
          schema:
            type: string
            enum: [Expert, Inertial, Cultivation, Guiding]
            default: Inertial
        - name: category
          in: query
          description: æ¨¡æ¿åˆ†é¡
          required: false
          schema:
            type: string
            enum: [all, daily, weekly, monthly, budget, habit]
            default: all
      responses:
        '200':
          description: æˆåŠŸå–å¾—æé†’æ¨¡æ¿
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      templates:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              description: æ¨¡æ¿ID
                              example: "template_daily_evening"
                            name:
                              type: string
                              description: æ¨¡æ¿åç¨±
                              example: "æ¯æ—¥æ™šé–“æé†’"
                            description:
                              type: string
                              description: æ¨¡æ¿æè¿°
                              example: "æé†’æ‚¨åœ¨æ¯å¤©æ™šä¸Šè¨˜éŒ„ç•¶æ—¥çš„æ”¶æ”¯"
                            category:
                              type: string
                              enum: [daily, weekly, monthly, budget, habit]
                              description: æ¨¡æ¿åˆ†é¡
                              example: "daily"
                            difficulty:
                              type: string
                              enum: [beginner, intermediate, advanced]
                              description: é©ç”¨é›£åº¦
                              example: "beginner"
                            recommendedFor:
                              type: array
                              items:
                                type: string
                                enum: [Expert, Inertial, Cultivation, Guiding]
                              description: æ¨è–¦æ¨¡å¼
                              example: ["Inertial", "Cultivation", "Guiding"]
                            template:
                              type: object
                              description: æ¨¡æ¿å…§å®¹
                              properties:
                                type:
                                  type: string
                                  enum: [daily, weekly, monthly, custom]
                                  description: æé†’é¡å‹
                                  example: "daily"
                                schedule:
                                  type: object
                                  description: é è¨­æ’ç¨‹
                                  properties:
                                    time:
                                      type: string
                                      format: time
                                      description: å»ºè­°æ™‚é–“
                                      example: "21:00"
                                    daysOfWeek:
                                      type: array
                                      items:
                                        type: integer
                                      description: æ˜ŸæœŸè¨­å®š
                                      example: [1, 2, 3, 4, 5, 6, 7]
                                message:
                                  type: object
                                  description: é è¨­è¨Šæ¯
                                  properties:
                                    title:
                                      type: string
                                      description: æ¨™é¡Œ
                                      example: "è¨˜å¸³æé†’"
                                    content:
                                      type: string
                                      description: å…§å®¹
                                      example: "åˆ¥å¿˜äº†è¨˜éŒ„ä»Šå¤©çš„æ”¶æ”¯å–”ï¼"
                                    actionText:
                                      type: string
                                      description: å‹•ä½œæŒ‰éˆ•
                                      example: "ç«‹å³è¨˜å¸³"
                            usage:
                              type: object
                              description: ä½¿ç”¨çµ±è¨ˆ
                              properties:
                                popularity:
                                  type: integer
                                  minimum: 0
                                  maximum: 100
                                  description: å—æ­¡è¿ç¨‹åº¦
                                  example: 85
                                userCount:
                                  type: integer
                                  description: ä½¿ç”¨äººæ•¸
                                  example: 1250
                      categories:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              description: åˆ†é¡ID
                              example: "daily"
                            name:
                              type: string
                              description: åˆ†é¡åç¨±
                              example: "æ¯æ—¥æé†’"
                            count:
                              type: integer
                              description: è©²åˆ†é¡æ¨¡æ¿æ•¸é‡
                              example: 5
              examples:
                expert_templates:
                  summary: Expertæ¨¡å¼ - å®Œæ•´æ¨¡æ¿
                  value:
                    success: true
                    data:
                      templates:
                        - id: "template_daily_evening"
                          name: "æ¯æ—¥æ™šé–“æé†’"
                          description: "æé†’æ‚¨åœ¨æ¯å¤©æ™šä¸Šè¨˜éŒ„ç•¶æ—¥çš„æ”¶æ”¯"
                          category: "daily"
                          difficulty: "beginner"
                          recommendedFor: ["Inertial", "Cultivation", "Guiding"]
                          template:
                            type: "daily"
                            schedule:
                              time: "21:00"
                            message:
                              title: "è¨˜å¸³æé†’"
                              content: "åˆ¥å¿˜äº†è¨˜éŒ„ä»Šå¤©çš„æ”¶æ”¯å–”ï¼"
                              actionText: "ç«‹å³è¨˜å¸³"
                          usage:
                            popularity: 85
                            userCount: 1250
                        - id: "template_budget_warning"
                          name: "é ç®—è­¦å‘Šæé†’"
                          description: "ç•¶é ç®—ä½¿ç”¨é”åˆ°è¨­å®šé–€æª»æ™‚è‡ªå‹•æé†’"
                          category: "budget"
                          difficulty: "advanced"
                          recommendedFor: ["Expert"]
                          template:
                            type: "custom"
                            schedule:
                              customRule: "0 18 * * *"
                            message:
                              title: "é ç®—è­¦å‘Š"
                              content: "æœ¬æœˆé ç®—å³å°‡è¶…æ¨™ï¼Œè«‹æ³¨æ„æ”¯å‡ºï¼"
                          usage:
                            popularity: 65
                            userCount: 380
                      categories:
                        - id: "daily"
                          name: "æ¯æ—¥æé†’"
                          count: 5
                        - id: "budget"
                          name: "é ç®—ç›¸é—œ"
                          count: 3
                guiding_templates:
                  summary: Guidingæ¨¡å¼ - ç°¡åŒ–æ¨¡æ¿
                  value:
                    success: true
                    data:
                      templates:
                        - id: "template_simple_daily"
                          name: "ç°¡å–®æ¯æ—¥æé†’"
                          description: "æ¯å¤©æé†’æ‚¨è¨˜å¸³"
                          category: "daily"
                          difficulty: "beginner"
                          recommendedFor: ["Guiding"]
                          template:
                            type: "daily"
                            schedule:
                              time: "20:00"
                            message:
                              title: "è¨˜å¸³æ™‚é–“"
                              content: "è¨˜å¾—è¨˜å¸³å–”ï¼"
                              actionText: "è¨˜å¸³"
                          usage:
                            popularity: 90
                            userCount: 850
                      categories:
                        - id: "daily"
                          name: "æ¯æ—¥æé†’"
                          count: 2
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token for authentication

  schemas:
    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          properties:
            code:
              type: string
              description: éŒ¯èª¤ä»£ç¢¼
              example: "VALIDATION_ERROR"
            message:
              type: string
              description: éŒ¯èª¤è¨Šæ¯
              example: "è«‹æ±‚åƒæ•¸æ ¼å¼éŒ¯èª¤"
            details:
              type: object
              description: è©³ç´°éŒ¯èª¤è³‡è¨Š
            timestamp:
              type: string
              format: date-time
              description: éŒ¯èª¤ç™¼ç”Ÿæ™‚é–“
              example: "2025-08-22T12:00:00Z"
            requestId:
              type: string
              format: uuid
              description: è«‹æ±‚è¿½è¹¤ID
              example: "req_abc123"

  responses:
    BadRequest:
      description: è«‹æ±‚åƒæ•¸éŒ¯èª¤
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            validation_error:
              summary: åƒæ•¸é©—è­‰éŒ¯èª¤
              value:
                success: false
                error:
                  code: "VALIDATION_ERROR"
                  message: "æé†’æ™‚é–“æ ¼å¼éŒ¯èª¤"
                  details:
                    field: "schedule.time"
                    rejectedValue: "25:00"
                    expectedFormat: "HH:mm"
                  timestamp: "2025-08-22T12:00:00Z"
                  requestId: "req_abc123"

    Unauthorized:
      description: æœªæˆæ¬Šå­˜å–
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            success: false
            error:
              code: "UNAUTHORIZED"
              message: "å­˜å–ä»¤ç‰Œç„¡æ•ˆæˆ–å·²éæœŸ"
              timestamp: "2025-08-22T12:00:00Z"
              requestId: "req_abc123"

    InternalServerError:
      description: å…§éƒ¨ä¼ºæœå™¨éŒ¯èª¤
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            success: false
            error:
              code: "INTERNAL_SERVER_ERROR"
              message: "ç³»çµ±æš«æ™‚ç„¡æ³•è™•ç†è«‹æ±‚ï¼Œè«‹ç¨å¾Œå†è©¦"
              timestamp: "2025-08-22T12:00:00Z"
              requestId: "req_abc123"
