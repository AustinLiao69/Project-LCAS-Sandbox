
# 6503. LCAS 2.0 Phase 3 SIT測試計畫

**文件版本：** v1.0.0  
**建立日期：** 2025-11-17  
**最後更新：** 2025-11-17  
**負責人：** LCAS SQA Team  
**適用範圍：** 0090計畫之Phase 3 帳戶與科目管理功能測試

---

## 目次

1. [計畫概覽](#1-計畫概覽)
2. [測試範圍與目標](#2-測試範圍與目標)
3. [測試階段規劃](#3-測試階段規劃)
4. [測試環境與準備](#4-測試環境與準備)
5. [具體測試案例](#5-具體測試案例)
6. [測試執行計畫](#6-測試執行計畫)
7. [驗收標準](#7-驗收標準)

---

## 1. 計畫概覽

### 1.1 背景說明

基於0090 Sprint計畫Phase 3開發狀況：
- **PL層**: 7306帳戶與科目管理功能群已完成
- **APL層**: APL.dart統一Gateway已整合P3功能
- **BL層**: 1350.WCM.js帳戶與科目管理模組已開發完成
- **DL層**: Firestore資料結構已擴展支援P3功能

### 1.2 SIT策略_P3-MVP

**13個精簡測試案例**
- **TC-001~005**：帳戶管理功能測試（5個）
- **TC-006~010**：科目管理功能測試（5個）
- **TC-011~013**：整合驗證測試（3個）

---

## 2. 測試範圍與目標

### 2.1 測試範圍

#### 2.1.1 帳戶管理功能測試
**測試對象**: 7306. 帳戶與科目管理功能群.dart  
**測試方式**: 直接調用PL層函數，驗證帳戶管理業務邏輯  
**API整合**: 通過APL.dart調用BL層1350.WCM.js模組  

#### 2.1.2 科目管理功能測試
**測試對象**: 7306. 帳戶與科目管理功能群.dart  
**測試方式**: 直接調用PL層函數，驗證科目管理業務邏輯  
**API整合**: 通過APL.dart調用BL層1350.WCM.js模組  

### 2.2 測試目標

#### 2.2.1 MVP功能完整性目標
- 帳戶管理核心功能100%正確
- 科目管理基本功能100%正確
- APL.dart統一Gateway整合100%成功

---

## 3. 測試階段規劃

### 3.1 階段一：帳戶管理功能測試 - TC-001~005

#### 3.1.1 帳戶CRUD功能驗證
- 建立帳戶業務邏輯驗證
- 查詢帳戶列表業務邏輯驗證
- 更新帳戶資訊業務邏輯驗證
- 刪除帳戶業務邏輯驗證
- 帳戶餘額查詢驗證

### 3.2 階段二：科目管理功能測試 - TC-006~010

#### 3.2.1 科目管理功能驗證（5個）
- 科目建立業務邏輯驗證
- 科目列表查詢業務邏輯驗證
- 科目更新業務邏輯驗證
- 科目階層驗證邏輯驗證
- 科目個人化管理驗證

### 3.3 階段三：整合驗證測試 - TC-011~013

#### 3.3.1 APL.dart統一Gateway驗證
- 帳戶管理API轉發驗證
- 科目管理API轉發驗證
- 統一錯誤處理機制驗證

---

## 4. 測試環境與準備

### 4.1 測試環境配置

#### 4.1.1 Dart測試環境
- **測試框架**: Dart test package
- **測試控制中心**: 待開發的SIT_P3.dart (統一控制測試流程)
- **測試資料來源**: 7598.Data warehouse.json擴展P3測試資料
- **執行流程**: SIT_P3.dart → PL層函數測試 → APL.dart → BL層模組

#### 4.1.2 API整合測試環境
- **APL.dart統一Gateway**: 完整整合P3功能
- **BL層模組**: 1350.WCM.js正常運作
- **Firestore環境**: P3資料結構配置完成

---

## 5. 具體測試案例

### 5.1 帳戶管理功能測試案例（TC-001~006）

#### TC-001：建立帳戶
**測試函數表頭**:
```dart
/**
 * TC-001： 建立帳戶
 * @version 2025-11-17 v1.0.0
 * @date 2025-11-17
 * @update: 初始版本
 */
Future<void> testCreateWallet();
```
- **測試焦點**: US-021 建立帳戶完整業務邏輯
- **驗證重點**: PL→APL→ASL→BL→DL完整鏈路驗證
- **測試步驟**:
  1. PL層7306.帳戶與科目管理功能群建立帳戶函數
  2. APL.dart轉發至ASL.js
  3. ASL.js轉發至BL層1350.WCM.js模組
  4. BL層處理帳戶建立邏輯
  5. DL層Firestore儲存帳戶資料
  6. 回傳建立結果到PL層
- **預期結果**: 帳戶建立成功，資料完整儲存

#### TC-002：查詢帳戶列表
**測試函數表頭**:
```dart
/**
 * TC-002： 查詢帳戶列表
 * @version 2025-11-17 v1.0.0
 * @date 2025-11-17
 * @update: 初始版本
 */
Future<void> testGetWalletList();
```
- **測試焦點**: US-021 帳戶管理查詢功能
- **驗證重點**: PL→APL→ASL→BL→DL完整鏈路驗證
- **測試步驟**:
  1. PL層7306.帳戶與科目管理功能群查詢帳戶列表函數
  2. APL.dart轉發至ASL.js
  3. ASL.js轉發至BL層1350.WCM.js模組
  4. BL層處理帳戶查詢邏輯
  5. DL層Firestore執行資料查詢
  6. 回傳查詢結果到PL層
- **預期結果**: 正確回傳帳戶列表資料

#### TC-003：更新帳戶資訊
**測試函數表頭**:
```dart
/**
 * TC-003： 更新帳戶資訊
 * @version 2025-11-17 v1.0.0
 * @date 2025-11-17
 * @update: 初始版本
 */
Future<void> testUpdateWalletInfo();
```
- **測試焦點**: US-021 帳戶資訊更新功能
- **驗證重點**: PL→APL→ASL→BL→DL完整鏈路驗證
- **測試步驟**:
  1. PL層7306.帳戶與科目管理功能群更新帳戶函數
  2. APL.dart轉發至ASL.js
  3. ASL.js轉發至BL層1350.WCM.js模組
  4. BL層處理帳戶更新邏輯
  5. DL層Firestore執行資料更新
  6. 回傳更新結果到PL層
- **預期結果**: 帳戶資訊正確更新

#### TC-004：刪除帳戶
**測試函數表頭**:
```dart
/**
 * TC-004： 刪除帳戶
 * @version 2025-11-17 v1.0.0
 * @date 2025-11-17
 * @update: 初始版本
 */
Future<void> testDeleteWallet();
```
- **測試焦點**: US-023 刪除帳戶功能
- **驗證重點**: PL→APL→ASL→BL→DL完整鏈路驗證
- **測試步驟**:
  1. PL層7306.帳戶與科目管理功能群刪除帳戶函數
  2. APL.dart轉發至ASL.js
  3. ASL.js轉發至BL層1350.WCM.js模組
  4. BL層處理帳戶刪除邏輯
  5. DL層Firestore執行資料刪除
  6. 回傳刪除結果到PL層
- **預期結果**: 帳戶正確刪除，無殘留資料

#### TC-005：查詢帳戶餘額
**測試函數表頭**:
```dart
/**
 * TC-005： 查詢帳戶餘額
 * @version 2025-11-17 v1.0.0
 * @date 2025-11-17
 * @update: 初始版本
 */
Future<void> testGetWalletBalance();
```
- **測試焦點**: 帳戶餘額查詢功能
- **驗證重點**: PL→APL→ASL→BL→DL完整鏈路驗證
- **測試步驟**:
  1. PL層7306.帳戶與科目管理功能群餘額查詢函數
  2. APL.dart轉發至ASL.js
  3. ASL.js轉發至BL層1350.WCM.js模組
  4. BL層處理餘額查詢邏輯
  5. DL層Firestore查詢餘額資料
  6. 回傳餘額結果到PL層
- **預期結果**: 餘額查詢正確，格式標準化

### 5.2 科目管理功能測試案例（TC-006~010）

#### TC-006：建立科目
**測試函數表頭**:
```dart
/**
 * TC-006： 建立科目
 * @version 2025-11-17 v1.0.0
 * @date 2025-11-17
 * @update: 初始版本
 */
Future<void> testCreateCategory();
```
- **測試焦點**: US-024 建立與管理科目功能
- **驗證重點**: PL→APL→ASL→BL→DL完整鏈路驗證
- **測試步驟**:
  1. PL層7306.帳戶與科目管理功能群建立科目函數
  2. APL.dart轉發至ASL.js
  3. ASL.js轉發至BL層1350.WCM.js模組
  4. BL層處理科目建立邏輯
  5. DL層Firestore儲存科目資料
  6. 回傳建立結果到PL層
- **預期結果**: 科目建立成功，階層關係正確

#### TC-007：查詢科目列表
**測試函數表頭**:
```dart
/**
 * TC-007： 查詢科目列表
 * @version 2025-11-17 v1.0.0
 * @date 2025-11-17
 * @update: 初始版本
 */
Future<void> testGetCategoryList();
```
- **測試焦點**: US-024 科目管理查詢功能
- **驗證重點**: PL→APL→ASL→BL→DL完整鏈路驗證
- **測試步驟**:
  1. PL層7306.帳戶與科目管理功能群查詢科目列表函數
  2. APL.dart轉發至ASL.js
  3. ASL.js轉發至BL層1350.WCM.js模組
  4. BL層處理科目查詢邏輯
  5. DL層Firestore執行資料查詢
  6. 回傳查詢結果到PL層
- **預期結果**: 正確回傳科目列表，階層結構完整

#### TC-008：更新科目資訊
**測試函數表頭**:
```dart
/**
 * TC-008： 更新科目資訊
 * @version 2025-11-17 v1.0.0
 * @date 2025-11-17
 * @update: 初始版本
 */
Future<void> testUpdateCategoryInfo();
```
- **測試焦點**: US-024 科目資訊更新功能
- **驗證重點**: PL→APL→ASL→BL→DL完整鏈路驗證
- **測試步驟**:
  1. PL層7306.帳戶與科目管理功能群更新科目函數
  2. APL.dart轉發至ASL.js
  3. ASL.js轉發至BL層1350.WCM.js模組
  4. BL層處理科目更新邏輯
  5. DL層Firestore執行資料更新
  6. 回傳更新結果到PL層
- **預期結果**: 科目資訊正確更新，階層關係維持

#### TC-009：驗證科目階層
**測試函數表頭**:
```dart
/**
 * TC-009： 驗證科目階層
 * @version 2025-11-17 v1.0.0
 * @date 2025-11-17
 * @update: 初始版本
 */
Future<void> testValidateCategoryHierarchy();
```
- **測試焦點**: US-024 科目階層邏輯驗證
- **驗證重點**: PL→APL→ASL→BL→DL完整鏈路驗證
- **測試步驟**:
  1. PL層7306.帳戶與科目管理功能群階層驗證函數
  2. APL.dart轉發至ASL.js
  3. ASL.js轉發至BL層1350.WCM.js模組
  4. BL層處理階層驗證邏輯
  5. DL層Firestore查詢階層資料
  6. 回傳驗證結果到PL層
- **預期結果**: 階層關係驗證正確，避免循環引用

#### TC-010：科目個人化管理
**測試函數表頭**:
```dart
/**
 * TC-010： 科目個人化管理
 * @version 2025-11-17 v1.0.0
 * @date 2025-11-17
 * @update: 初始版本
 */
Future<void> testCategoryPersonalization();
```
- **測試焦點**: SC-011 帳戶科目個人化管理流程
- **驗證重點**: PL→APL→ASL→BL→DL完整鏈路驗證
- **測試步驟**:
  1. PL層7306.帳戶與科目管理功能群個人化函數
  2. APL.dart轉發至ASL.js
  3. ASL.js轉發至BL層1350.WCM.js模組
  4. BL層處理個人化管理邏輯
  5. DL層Firestore儲存個人化設定
  6. 回傳管理結果到PL層
- **預期結果**: 個人化設定生效，符合使用習慣

### 5.3 整合驗證測試案例（TC-011~013）

#### TC-011：帳戶管理API轉發驗證
**測試函數表頭**:
```dart
/**
 * TC-011： 帳戶管理API轉發驗證
 * @version 2025-11-17 v1.0.0
 * @date 2025-11-17
 * @update: 初始版本
 */
Future<void> testWalletAPIForwarding();
```
- **測試焦點**: PL→APL→ASL→BL→DL完整鏈路驗證
- **驗證重點**: 帳戶管理API轉發功能
- **測試步驟**:
  1. PL層函數呼叫帳戶管理API轉發請求
  2. APL.dart執行帳戶管理API轉發邏輯
  3. ASL.js轉發至BL層1350.WCM.js
  4. BL層1350.WCM.js處理帳戶管理請求
  5. DL層執行帳戶資料操作
  6. 回傳API轉發結果到PL層
- **預期結果**: 帳戶API轉發100%成功

#### TC-012：科目管理API轉發驗證
**測試函數表頭**:
```dart
/**
 * TC-012： 科目管理API轉發驗證
 * @version 2025-11-17 v1.0.0
 * @date 2025-11-17
 * @update: 初始版本
 */
Future<void> testCategoryAPIForwarding();
```
- **測試焦點**: PL→APL→ASL→BL→DL完整鏈路驗證
- **驗證重點**: 科目管理API轉發功能
- **測試步驟**:
  1. PL層函數呼叫科目管理API轉發請求
  2. APL.dart執行科目管理API轉發邏輯
  3. ASL.js轉發至BL層1350.WCM.js
  4. BL層1350.WCM.js處理科目管理請求
  5. DL層執行科目資料操作
  6. 回傳API轉發結果到PL層
- **預期結果**: 科目API轉發100%成功

#### TC-013：統一錯誤處理驗證
**測試函數表頭**:
```dart
/**
 * TC-013： 統一錯誤處理驗證
 * @version 2025-11-17 v1.0.0
 * @date 2025-11-17
 * @update: 初始版本
 */
Future<void> testUnifiedErrorHandling();
```
- **測試焦點**: PL→APL→ASL→BL→DL完整鏈路驗證
- **驗證重點**: 錯誤處理機制完整性
- **測試步驟**:
  1. PL層函數呼叫錯誤處理驗證請求
  2. APL.dart執行錯誤捕捉與轉發
  3. ASL.js轉發錯誤處理請求
  4. BL層處理錯誤處理邏輯
  5. DL層記錄錯誤日誌
  6. 回傳錯誤處理結果到PL層
- **預期結果**: 錯誤正確處理與回報

---

## 6. 測試執行計畫

### 6.1 SIT測試執行流程

#### 6.1.1 測試執行架構
**執行順序**：
1. **階段一：帳戶管理功能測試** (TC-001~005)
   - **執行方式**: 遵守PL→APL→ASL→BL鏈路調用PL層7306.帳戶與科目管理功能群函數
   - **驗證重點**: 帳戶業務邏輯正確性

2. **階段二：科目管理功能測試** (TC-006~010)
   - **執行方式**: 遵守PL→APL→ASL→BL鏈路調用PL層7306.帳戶與科目管理功能群函數
   - **驗證重點**: 科目業務邏輯正確性

3. **階段三：整合驗證測試** (TC-011~013)
   - **執行方式**: 驗證APL.dart統一Gateway功能
   - **驗證重點**: API整合完整性

#### 6.1.2 測試執行策略

**MVP精簡執行策略**
- **統一測試入口**: 透過待開發的SIT_P3.dart執行
- **直接函數調用**: 減少測試複雜度，專注核心功能驗證
- **API整合驗證**: 確保APL.dart統一Gateway正確運作

**錯誤處理策略**
- Critical錯誤：立即停止測試並報告
- High錯誤：完成當前測試後停止
- Medium/Low錯誤：記錄後繼續執行

---

## 7. 驗收標準

### 7.1 必須達成標準

#### 7.1.1 MVP功能完整性標準
- ✅ **帳戶管理核心功能通過率 = 100%**
- ✅ **科目管理基本功能通過率 = 100%**
- ✅ **APL.dart統一Gateway整合成功率 = 100%**

#### 7.1.2 API整合標準
- ✅ **API轉發功能 = 100%正確**
- ✅ **統一回應格式 = 100%合規DCN-0015**
- ✅ **錯誤處理機制 = 100%覆蓋**
- ✅ **業務邏輯驗證 = 100%通過**

### 7.2 品質門檻

#### 7.2.1 Go/No-Go標準
**Go條件 (全部滿足才可進入下一階段):**
1. 所有必須達成標準100%通過
2. 無Critical級別功能缺陷
3. High級別缺陷 < 2個且已有修正計畫
4. 帳戶管理與科目管理核心功能100%正確
5. APL.dart統一Gateway整合100%成功

**No-Go條件 (任一條件即需延期):**
1. 任一必須達成標準未通過
2. 存在Critical級別功能缺陷
3. 帳戶管理功能通過率 < 95%
4. 科目管理功能通過率 < 95%
5. API整合成功率 < 95%

---

## 附錄

### A. 測試檢查清單

#### A.1 基礎環境檢查
- [ ] PL層代碼7306完成
- [ ] APL.dart統一Gateway正常運作
- [ ] BL層1350.WCM.js模組功能正常
- [ ] DL層Firestore P3資料結構配置

#### A.2 SIT測試架構檢查
- [ ] `SIT_P3.dart` 測試控制中心完成（待開發）
- [ ] 7598.Data warehouse.json P3測試資料準備完成
- [ ] API整合測試環境配置完成

### B. 相關文件清單
- [0015. Product_SPEC_LCAS_2.0.md](../00.%20Master_Project%20document/0015.%20Product_SPEC_LCAS_2.0.md)
- [0090. Sprint計畫.md](../00.%20Master_Project%20document/0090.%20Sprint計畫(功能群).md)
- [7016. User story map.md](../70.%20Flutter_PRD_PL/7016.%20User%20story%20map.md)
- [7017. User story.md](../70.%20Flutter_PRD_PL/7017.%20User%20story.md)
- [7018. User scenario.md](../70.%20Flutter_PRD_PL/7018.%20User%20scenario.md)
- [7106. 帳戶與科目管理功能群_SRS.md](../71.%20Flutter_SRS_PL/7106.%20帳戶與科目管理功能群_SRS.md)
- [7206. 帳戶與科目管理功能群_LLD.md](../72.%20Flutter_LLD_PL/7206.%20帳戶與科目管理功能群_LLD.md)
- [1350. WCM.js](../13.%20Replit_Module%20code_BL/1350.%20WCM.js)
- [APL.dart](../APL.dart)

### C. 測試案例索引

#### 帳戶管理功能測試（TC-001~005）
| 測試案例ID | 測試案例名稱 | 測試焦點 | 優先級 |
|------------|--------------|----------|--------|
| TC-001 | 建立帳戶 | US-021 建立帳戶業務邏輯 | P1 |
| TC-002 | 查詢帳戶列表 | US-021 帳戶查詢業務邏輯 | P1 |
| TC-003 | 更新帳戶資訊 | US-021 帳戶更新業務邏輯 | P1 |
| TC-004 | 刪除帳戶 | US-023 帳戶刪除業務邏輯 | P1 |
| TC-005 | 查詢帳戶餘額 | 餘額查詢邏輯 | P1 |

#### 科目管理功能測試（TC-006~010）
| 測試案例ID | 測試案例名稱 | 測試焦點 | 優先級 |
|------------|--------------|----------|--------|
| TC-006 | 建立科目 | US-024 科目建立業務邏輯 | P1 |
| TC-007 | 查詢科目列表 | US-024 科目查詢業務邏輯 | P1 |
| TC-008 | 更新科目資訊 | US-024 科目更新業務邏輯 | P1 |
| TC-009 | 驗證科目階層 | US-024 階層驗證邏輯 | P1 |
| TC-010 | 科目個人化管理 | SC-011 個人化管理流程 | P1 |

#### 整合驗證測試（TC-011~013）
| 測試案例ID | 測試案例名稱 | 測試焦點 | 優先級 |
|------------|--------------|----------|--------|
| TC-011 | 帳戶管理API轉發驗證 | 帳戶API轉發功能 | P1 |
| TC-012 | 科目管理API轉發驗證 | 科目API轉發功能 | P1 |
| TC-013 | 統一錯誤處理驗證 | 錯誤處理機制 | P1 |

---
