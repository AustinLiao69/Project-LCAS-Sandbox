{
  "metadata": {
    "version": "v2.1.0",
    "created_date": "2025-09-15",
    "last_updated": "2025-01-26",
    "description": "LCAS 2.0 Phase 1 SITæ¸¬è©¦è³‡æ–™é…ç½®æª” - éšæ®µä¸€ç·Šæ€¥ä¿®å¾©ç‰ˆ",
    "test_cases_supported": "TC-SIT-001 to TC-SIT-028 (å®Œæ•´28å€‹æ¸¬è©¦æ¡ˆä¾‹)",
    "author": "LCAS SQA Team",
    "change_log": [
      {
        "version": "v1.0.0",
        "date": "2025-09-15",
        "changes": "åˆå§‹ç‰ˆæœ¬å»ºç«‹"
      },
      {
        "version": "v1.1.0",
        "date": "2025-09-15",
        "changes": "éšæ®µä¸€ï¼šåŸºç¤æ¸¬è©¦è³‡æ–™æ¶æ§‹å»ºç«‹å®Œæˆ"
      },
      {
        "version": "v1.2.0",
        "date": "2025-09-15",
        "changes": "éšæ®µäºŒï¼šæ ¸å¿ƒæ¥­å‹™åŠŸèƒ½æ¸¬è©¦è³‡æ–™å»ºç«‹å®Œæˆ"
      },
      {
        "version": "v2.0.0",
        "date": "2025-01-24",
        "changes": "éšæ®µäºŒï¼šå››å±¤æ¶æ§‹è³‡æ–™æµæ¸¬è©¦èˆ‡æ ¸å¿ƒæ¥­å‹™æµç¨‹æ¸¬è©¦è³‡æ–™å»ºç«‹å®Œæˆ"
      },
      {
        "version": "v2.1.0",
        "date": "2025-01-26",
        "changes": "éšæ®µä¸€ç·Šæ€¥ä¿®å¾©ï¼šè£œå…¨expert_mode_user_001ã€data_transformation_testsã€long_running_stability_testsç­‰ç¼ºå¤±æ¬„ä½"
      }
    ]
  },

  "test_environment": {
    "api_base_url": "http://0.0.0.0:5000/api/v1",
    "backup_base_url": "https://lcas-api.replit.app/api/v1",
    "timeout_settings": {
      "api_timeout": 5000,
      "database_timeout": 3000,
      "authentication_timeout": 10000
    },
    "retry_settings": {
      "max_retries": 3,
      "retry_delay": 1000
    }
  },

  "authentication_test_data": {
    "valid_users": {
      "expert_mode_user_001": {
        "email": "expert001@lcas.app",
        "password": "ExpertPass123!",
        "display_name": "Expertæ¸¬è©¦ç”¨æˆ¶001",
        "mode": "expert",
        "expected_features": ["advanced", "detailed", "batch", "analytics"],
        "registration_data": {
          "first_name": "Expert",
          "last_name": "User001",
          "phone": "+886912345001",
          "date_of_birth": "1986-05-31",
          "preferred_language": "zh-TW"
        }
      },
      "expert_mode_user_002": {
        "email": "expert002@lcas.app",
        "password": "ExpertPass456!",
        "display_name": "Expertæ¸¬è©¦ç”¨æˆ¶002",
        "mode": "expert",
        "expected_features": ["advanced", "detailed", "analytics", "export"],
        "registration_data": {
          "first_name": "Expert",
          "last_name": "User002",
          "phone": "+886912345002",
          "date_of_birth": "1988-05-15",
          "preferred_language": "zh-TW"
        }
      },
      "guiding_mode_user_001": {
        "email": "guiding001@lcas.app",
        "password": "GuidingPass123!",
        "display_name": "Guidingæ¸¬è©¦ç”¨æˆ¶001",
        "mode": "guiding",
        "expected_features": ["simple", "guided", "tutorial", "hints"],
        "registration_data": {
          "first_name": "Guiding",
          "last_name": "User001",
          "phone": "+886912345003",
          "date_of_birth": "1995-03-20",
          "preferred_language": "zh-TW"
        }
      },
      "inertial_mode_user_001": {
        "email": "inertial001@lcas.app",
        "password": "InertialPass123!",
        "display_name": "Inertialæ¸¬è©¦ç”¨æˆ¶001",
        "mode": "inertial",
        "expected_features": ["stable", "consistent", "reliable", "standard"],
        "registration_data": {
          "first_name": "Inertial",
          "last_name": "User001",
          "phone": "+886912345004",
          "date_of_birth": "1985-08-10",
          "preferred_language": "zh-TW"
        }
      },
      "cultivation_mode_user_001": {
        "email": "cultivation001@lcas.app",
        "password": "CultivationPass123!",
        "display_name": "Cultivationæ¸¬è©¦ç”¨æˆ¶001",
        "mode": "cultivation",
        "expected_features": ["motivation", "achievement", "gamification", "progress"],
        "registration_data": {
          "first_name": "Cultivation",
          "last_name": "User001",
          "phone": "+886912345005",
          "date_of_birth": "1992-12-05",
          "preferred_language": "zh-TW"
        }
      }
    },

    "invalid_users": {
      "invalid_email_format": {
        "email": "invalid-email-format",
        "password": "ValidPass123!",
        "expected_error": "EMAIL_FORMAT_INVALID"
      },
      "weak_password": {
        "email": "test@lcas.app",
        "password": "123",
        "expected_error": "PASSWORD_TOO_WEAK"
      },
      "empty_credentials": {
        "email": "",
        "password": "",
        "expected_error": "REQUIRED_FIELDS_MISSING"
      },
      "nonexistent_user": {
        "email": "nonexistent@lcas.app",
        "password": "NonexistentPass123!",
        "expected_error": "USER_NOT_FOUND"
      },
      "wrong_password": {
        "email": "expert001@lcas.app",
        "password": "WrongPassword123!",
        "expected_error": "INVALID_CREDENTIALS"
      }
    }
  },

  "mode_assessment_test_data": {
    "expert_mode_assessment": {
      "assessment_id": "expert_assessment_001",
      "answers": {
        "financial_experience": "advanced",
        "detail_preference": "detailed",
        "interface_complexity": "complex",
        "reporting_needs": "comprehensive"
      },
      "expected_mode": "expert"
    },
    "guiding_mode_assessment": {
      "assessment_id": "guiding_assessment_001",
      "answers": {
        "financial_experience": "beginner",
        "detail_preference": "simple",
        "interface_complexity": "minimal",
        "guidance_needs": "high"
      },
      "expected_mode": "guiding"
    },
    "four_mode_differentiation_tests": {
      "expert_mode_features": {
        "test_id": "mode_expert_001",
        "mode": "expert",
        "expected_features": ["advanced_analytics", "batch_operations", "detailed_reports", "custom_categories"],
        "api_response_fields": ["advanced_data", "detailed_metadata", "comprehensive_options"],
        "ui_complexity": "high"
      },
      "guiding_mode_features": {
        "test_id": "mode_guiding_001",
        "mode": "guiding",
        "expected_features": ["auto_fill", "simplified_ui", "minimal_decisions", "step_by_step_guide"],
        "api_response_fields": ["simplified_data", "guided_options", "help_text"],
        "ui_complexity": "low"
      },
      "inertial_mode_features": {
        "test_id": "mode_inertial_001",
        "mode": "inertial",
        "expected_features": ["consistent_interface", "stable_workflows", "minimal_changes"],
        "api_response_fields": ["standard_data", "consistent_format", "stable_options"],
        "ui_complexity": "medium"
      },
      "cultivation_mode_features": {
        "test_id": "mode_cultivation_001",
        "mode": "cultivation",
        "expected_features": ["achievement_tracking", "progress_indicators", "motivational_messages", "goal_setting"],
        "api_response_fields": ["progress_data", "achievement_status", "motivational_content"],
        "ui_complexity": "medium"
      }
    }
  },

  "basic_bookkeeping_test_data": {
    "quick_booking_tests": [
      {
        "test_id": "quick_001",
        "input_text": "åˆé¤150",
        "expected_parsing": {
          "amount": 150,
          "category": "é¤é£²",
          "type": "expense",
          "description": "åˆé¤",
          "payment_method": "åˆ·å¡"
        },
        "mode_specific_responses": {
          "expert": "å·²è¨˜éŒ„æ”¯å‡ºï¼šåˆé¤ NT$150 (é¤é£²é¡åˆ¥)",
          "guiding": "âœ… å·²å¹«æ‚¨è¨˜éŒ„ï¼šåˆé¤èŠ±è²»150å…ƒ",
          "inertial": "è¨˜éŒ„å®Œæˆï¼šåˆé¤ 150å…ƒ",
          "cultivation": "ğŸ‰ æ­å–œï¼å®Œæˆä»Šæ—¥ç¬¬1ç­†è¨˜å¸³ï¼šåˆé¤150å…ƒ"
        }
      },
      {
        "test_id": "quick_002",
        "input_text": "è–ªæ°´35000è½‰å¸³",
        "expected_parsing": {
          "amount": 35000,
          "category": "è–ªè³‡",
          "type": "income",
          "description": "è–ªæ°´",
          "payment_method": "è½‰å¸³"
        },
        "mode_specific_responses": {
          "expert": "å·²è¨˜éŒ„æ”¶å…¥ï¼šè–ªæ°´ NT$35,000 (è½‰å¸³å…¥å¸³)",
          "guiding": "âœ… å¤ªå¥½äº†ï¼è–ªæ°´35,000å…ƒå·²è¨˜éŒ„",
          "inertial": "è¨˜éŒ„å®Œæˆï¼šè–ªæ°´æ”¶å…¥ 35,000å…ƒ",
          "cultivation": "ğŸ’° å¤ªæ£’äº†ï¼è–ªæ°´å…¥å¸³35,000å…ƒï¼Œè²¡å¯Œå¢åŠ ä¸­ï¼"
        }
      },
      {
        "test_id": "quick_003",
        "input_text": "å’–å•¡85ä¿¡ç”¨å¡",
        "expected_parsing": {
          "amount": 85,
          "category": "é¤é£²",
          "type": "expense",
          "description": "å’–å•¡",
          "payment_method": "ä¿¡ç”¨å¡"
        },
        "mode_specific_responses": {
          "expert": "å·²è¨˜éŒ„æ”¯å‡ºï¼šå’–å•¡ NT$85 (ä¿¡ç”¨å¡æ”¯ä»˜)",
          "guiding": "âœ… å’–å•¡85å…ƒå·²è¨˜éŒ„åˆ°ä¿¡ç”¨å¡",
          "inertial": "è¨˜éŒ„å®Œæˆï¼šå’–å•¡ 85å…ƒ (ä¿¡ç”¨å¡)",
          "cultivation": "â˜• è¨˜å¸³å¥½ç¿’æ…£ï¼å’–å•¡85å…ƒå·²è¨˜éŒ„"
        }
      }
    ],

    "form_booking_tests": [
      {
        "test_id": "form_001",
        "transaction_data": {
          "type": "expense",
          "amount": 1200,
          "category_id": "10301",
          "category_name": "é¤é£²",
          "account_id": "acc_cash_001",
          "account_name": "ç¾é‡‘",
          "description": "æ™šé¤èšæœƒ",
          "date": "2025-09-15",
          "time": "19:30",
          "tags": ["èšæœƒ", "æœ‹å‹"],
          "notes": "å…¬å¸åŒäº‹èšé¤",
          "attachments": []
        },
        "expected_result": {
          "transaction_id": "generated_id",
          "status": "success",
          "message": "äº¤æ˜“è¨˜éŒ„æˆåŠŸ"
        }
      },
      {
        "test_id": "form_002",
        "transaction_data": {
          "type": "income",
          "amount": 5000,
          "category_id": "80105",
          "category_name": "çé‡‘",
          "account_id": "acc_bank_001",
          "account_name": "éŠ€è¡Œå¸³æˆ¶",
          "description": "ç¸¾æ•ˆçé‡‘",
          "date": "2025-09-15",
          "time": "10:00",
          "tags": ["å·¥ä½œ", "ç¸¾æ•ˆ"],
          "notes": "Q4ç¸¾æ•ˆçé‡‘",
          "attachments": []
        },
        "expected_result": {
          "transaction_id": "generated_id",
          "status": "success",
          "message": "æ”¶å…¥è¨˜éŒ„æˆåŠŸ"
        }
      }
    ]
  },

  "api_endpoints": {
    "authentication": {
      "register": "/auth/register",
      "login": "/auth/login",
      "logout": "/auth/logout",
      "refresh_token": "/auth/refresh",
      "verify_token": "/auth/verify",
      "reset_password": "/auth/reset-password"
    },
    "user_management": {
      "profile": "/user/profile",
      "update_profile": "/user/profile/update",
      "change_password": "/user/password/change",
      "mode_assessment": "/user/mode-assessment",
      "update_mode": "/user/mode/update"
    },
    "bookkeeping": {
      "quick_booking": "/bookkeeping/quick",
      "create_transaction": "/bookkeeping/transactions",
      "get_transactions": "/bookkeeping/transactions",
      "update_transaction": "/bookkeeping/transactions/{id}",
      "delete_transaction": "/bookkeeping/transactions/{id}"
    }
  },

  "expected_response_formats": {
    "dcn_0015_unified_success_response": {
      "success": true,
      "data": {
        "exampleField": "exampleValue"
      },
      "error": null,
      "message": "æ“ä½œæˆåŠŸ",
      "metadata": {
        "timestamp": "2025-09-24T10:00:00.000Z",
        "requestId": "req_123456789",
        "userMode": "Expert",
        "apiVersion": "v1.0.0",
        "processingTimeMs": 150,
        "modeFeatures": {
          "detailedAnalytics": true,
          "advancedOptions": true,
          "performanceMetrics": true
        }
      }
    },
    "dcn_0015_unified_error_response": {
      "success": false,
      "data": null,
      "error": {
        "code": "VALIDATION_ERROR",
        "message": "è¼¸å…¥åƒæ•¸é©—è­‰å¤±æ•—",
        "details": {
          "field": "amount",
          "expectedType": "number",
          "actualValue": "abc"
        }
      },
      "message": "è«‹æ±‚è™•ç†å¤±æ•—",
      "metadata": {
        "timestamp": "2025-09-24T10:00:00.000Z",
        "requestId": "req_123456789",
        "userMode": "Expert",
        "apiVersion": "v1.0.0",
        "processingTimeMs": 45,
        "modeFeatures": {
          "detailedAnalytics": true,
          "advancedOptions": true,
          "performanceMetrics": true
        }
      }
    }
  },

  "cross_layer_error_handling_tests": {
    "network_errors": [
      {
        "test_id": "error_network_001",
        "scenario": "ç¶²è·¯è¶…æ™‚",
        "mock_error": "NETWORK_TIMEOUT",
        "error_layer": "APL",
        "expected_pl_response": "ç¶²è·¯é€£ç·šé€¾æ™‚ï¼Œè«‹æª¢æŸ¥ç¶²è·¯ç‹€æ…‹å¾Œé‡è©¦",
        "expected_retry_attempts": 3,
        "expected_user_action": "é¡¯ç¤ºé‡è©¦æŒ‰éˆ•",
        "mode_specific_messages": {
          "expert": "ç¶²è·¯è¶…æ™‚ (5s)ï¼Œå»ºè­°æª¢æŸ¥é€£ç·šç‹€æ…‹",
          "guiding": "ç¶²è·¯ä¼¼ä¹æœ‰é»æ…¢ï¼Œè«‹ç¨å¾Œå†è©¦ä¸€æ¬¡",
          "inertial": "é€£ç·šé€¾æ™‚ï¼Œè«‹é‡æ–°å˜—è©¦",
          "cultivation": "ç¶²è·¯å°æ†©ä¸€ä¸‹ï¼Œå†è©¦ä¸€æ¬¡å°±å¥½ï¼"
        }
      },
      {
        "test_id": "error_network_002",
        "scenario": "ä¼ºæœå™¨ç„¡å›æ‡‰",
        "mock_error": "SERVER_UNREACHABLE",
        "error_layer": "APL",
        "expected_pl_response": "ä¼ºæœå™¨æš«æ™‚ç„¡æ³•é€£æ¥ï¼Œè«‹ç¨å¾Œå†è©¦",
        "expected_retry_attempts": 2,
        "expected_user_action": "é¡¯ç¤ºç¨å¾Œé‡è©¦è¨Šæ¯"
      }
    ],

    "authentication_errors": [
      {
        "test_id": "error_auth_001",
        "scenario": "èªè­‰éæœŸ",
        "mock_error": "TOKEN_EXPIRED",
        "error_layer": "BL",
        "expected_pl_response": "ç™»å…¥å·²éæœŸï¼Œè«‹é‡æ–°ç™»å…¥",
        "expected_user_action": "redirectToLogin",
        "expected_retry_attempts": 0,
        "mode_specific_messages": {
          "expert": "JWT Tokenå·²éæœŸï¼Œéœ€è¦é‡æ–°èªè­‰",
          "guiding": "ç™»å…¥æ™‚é–“åˆ°äº†ï¼Œè«‹é‡æ–°ç™»å…¥ç¹¼çºŒä½¿ç”¨",
          "inertial": "ç™»å…¥å·²éæœŸï¼Œè«‹é‡æ–°ç™»å…¥",
          "cultivation": "è©²é‡æ–°å……é›»äº†ï¼è«‹é‡æ–°ç™»å…¥ç¹¼çºŒè¨˜å¸³ä¹‹æ—…"
        }
      },
      {
        "test_id": "error_auth_002",
        "scenario": "æ¬Šé™ä¸è¶³",
        "mock_error": "INSUFFICIENT_PERMISSIONS",
        "error_layer": "BL",
        "expected_pl_response": "æ¬Šé™ä¸è¶³ï¼Œç„¡æ³•åŸ·è¡Œæ­¤æ“ä½œ",
        "expected_user_action": "showPermissionDenied",
        "expected_retry_attempts": 0
      }
    ],

    "validation_errors": [
      {
        "test_id": "error_validation_001",
        "scenario": "è³‡æ–™æ ¼å¼éŒ¯èª¤",
        "mock_error": "VALIDATION_ERROR",
        "error_layer": "APL",
        "expected_pl_response": "è³‡æ–™æ ¼å¼éŒ¯èª¤ï¼Œè«‹æª¢æŸ¥è¼¸å…¥å…§å®¹",
        "expected_error_details": {
          "field": "amount",
          "message": "é‡‘é¡å¿…é ˆç‚ºæ­£æ•¸",
          "value": "-100"
        },
        "expected_user_action": "highlightErrorField",
        "mode_specific_messages": {
          "expert": "æ¬„ä½é©—è­‰å¤±æ•—ï¼šamount (é‡‘é¡å¿…é ˆç‚ºæ­£æ•¸)",
          "guiding": "é‡‘é¡ä¸èƒ½æ˜¯è² æ•¸å“¦ï¼Œè«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—",
          "inertial": "è«‹è¼¸å…¥æœ‰æ•ˆçš„é‡‘é¡æ•¸å­—",
          "cultivation": "æ•¸å­—éœ€è¦æ˜¯æ­£çš„æ‰èƒ½è¨˜å¸³æˆåŠŸå–”ï¼"
        }
      },
      {
        "test_id": "error_validation_002",
        "scenario": "å¿…å¡«æ¬„ä½ç¼ºå¤±",
        "mock_error": "REQUIRED_FIELD_MISSING",
        "error_layer": "APL",
        "expected_pl_response": "è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½",
        "expected_error_details": {
          "missing_fields": ["amount", "category"],
          "message": "é‡‘é¡å’Œé¡åˆ¥ç‚ºå¿…å¡«æ¬„ä½"
        },
        "expected_user_action": "highlightRequiredFields"
      }
    ],

    "business_logic_errors": [
      {
        "test_id": "error_business_001",
        "scenario": "é¤˜é¡ä¸è¶³",
        "mock_error": "INSUFFICIENT_BALANCE",
        "error_layer": "BL",
        "expected_pl_response": "å¸³æˆ¶é¤˜é¡ä¸è¶³ï¼Œç„¡æ³•å®Œæˆæ­¤äº¤æ˜“",
        "expected_error_details": {
          "current_balance": 500,
          "required_amount": 1000,
          "account_name": "ç¾é‡‘å¸³æˆ¶"
        },
        "expected_user_action": "showBalanceWarning",
        "mode_specific_messages": {
          "expert": "ç¾é‡‘å¸³æˆ¶é¤˜é¡ä¸è¶³ï¼šç›®å‰500å…ƒï¼Œéœ€è¦1000å…ƒ",
          "guiding": "éŒ¢åŒ…è£¡çš„éŒ¢ä¸å¤ äº†ï¼Œç›®å‰åªæœ‰500å…ƒ",
          "inertial": "å¸³æˆ¶é¤˜é¡ä¸è¶³ä»¥å®Œæˆæ­¤äº¤æ˜“",
          "cultivation": "å°è±¬æ’²æ»¿éœ€è¦æ›´å¤šé›¶éŒ¢æ‰èƒ½å®Œæˆé€™ç­†äº¤æ˜“ï¼"
        }
      }
    ]
  },

  "performance_test_data": {
    "concurrent_operations": {
      "test_id": "perf_concurrent_001",
      "concurrent_users": 15,
      "operations_per_user": 8,
      "operation_types": ["quick_booking", "form_booking", "transaction_query", "mode_switch"],
      "expected_response_time_ms": 2000,
      "expected_success_rate": 0.90,
      "phase_2_enhancements": {
        "mode_differentiation_test": true,
        "cross_layer_validation": true,
        "data_consistency_check": true
      }
    },

    "load_test_scenarios": [
      {
        "test_id": "load_001",
        "scenario": "é«˜é »è¨˜å¸³æ¸¬è©¦",
        "duration_seconds": 60,
        "requests_per_second": 50,
        "endpoint": "/bookkeeping/quick",
        "expected_avg_response_time_ms": 1500,
        "expected_max_response_time_ms": 3000
      },
      {
        "test_id": "load_002",
        "scenario": "æ‰¹é‡æŸ¥è©¢æ¸¬è©¦",
        "duration_seconds": 30,
        "requests_per_second": 20,
        "endpoint": "/bookkeeping/transactions",
        "expected_avg_response_time_ms": 1000,
        "expected_max_response_time_ms": 2000
      }
    ]
  },

  "end_to_end_business_process_tests": {
    "complete_user_journey_tests": [
      {
        "test_id": "journey_001",
        "scenario": "æ–°ç”¨æˆ¶å®Œæ•´ç”Ÿå‘½é€±æœŸæµç¨‹",
        "steps": [
          {
            "step": 1,
            "action": "ç”¨æˆ¶è¨»å†Š",
            "data": {
              "email": "newuser001@lcas.app",
              "password": "NewUser123!",
              "display_name": "æ–°ç”¨æˆ¶001"
            },
            "expected_result": "è¨»å†ŠæˆåŠŸï¼Œç²å¾—ç”¨æˆ¶ID"
          },
          {
            "step": 2,
            "action": "æ¨¡å¼è©•ä¼°",
            "data": {
              "assessment_answers": {
                "financial_experience": "beginner",
                "detail_preference": "simple",
                "control_preference": "guided"
              }
            },
            "expected_result": "è¢«åˆ†é…ç‚ºGuidingæ¨¡å¼"
          },
          {
            "step": 3,
            "action": "é¦–æ¬¡è¨˜å¸³",
            "data": {
              "input_text": "æ—©é¤50",
              "expected_category": "é¤é£²",
              "expected_amount": 50
            },
            "expected_result": "è¨˜å¸³æˆåŠŸï¼Œé¡¯ç¤ºå¼•å°å¼å›é¥‹"
          },
          {
            "step": 4,
            "action": "æŸ¥è©¢è¨˜å¸³è¨˜éŒ„",
            "data": {
              "query_type": "recent",
              "limit": 10
            },
            "expected_result": "æ­£ç¢ºé¡¯ç¤ºå‰›æ‰çš„è¨˜å¸³è¨˜éŒ„"
          },
          {
            "step": 5,
            "action": "ç™»å‡º",
            "data": {},
            "expected_result": "æˆåŠŸç™»å‡ºï¼ŒTokenè¢«æ’¤éŠ·"
          }
        ],
        "total_expected_time": "300000",
        "success_criteria": "æ‰€æœ‰æ­¥é©Ÿ100%æˆåŠŸå®Œæˆ"
      },
      {
        "test_id": "journey_002",
        "scenario": "Expertæ¨¡å¼ç”¨æˆ¶é€²éšåŠŸèƒ½æµç¨‹",
        "steps": [
          {
            "step": 1,
            "action": "Expertç”¨æˆ¶ç™»å…¥",
            "data": {
              "email": "expert001@lcas.app",
              "password": "ExpertPass123!"
            },
            "expected_result": "ç™»å…¥æˆåŠŸï¼Œé¡¯ç¤ºé€²éšåŠŸèƒ½ä»‹é¢"
          },
          {
            "step": 2,
            "action": "æ‰¹é‡è¨˜å¸³",
            "data": {
              "transactions": [
                {"input": "åˆé¤120", "category": "é¤é£²"},
                {"input": "äº¤é€š50", "category": "äº¤é€š"},
                {"input": "å’–å•¡85", "category": "é¤é£²"}
              ]
            },
            "expected_result": "æ‰¹é‡è¨˜å¸³æˆåŠŸï¼Œé¡¯ç¤ºè©³ç´°çµ±è¨ˆ"
          },
          {
            "step": 3,
            "action": "é€²éšæŸ¥è©¢",
            "data": {
              "query_type": "advanced",
              "filters": {
                "category": "é¤é£²",
                "date_range": "today",
                "amount_range": {"min": 0, "max": 200}
              }
            },
            "expected_result": "æ­£ç¢ºç¯©é¸å‡ºä»Šæ—¥é¤é£²è¨˜éŒ„"
          }
        ],
        "total_expected_time": "240000",
        "success_criteria": "Expertæ¨¡å¼ç‰¹æœ‰åŠŸèƒ½æ­£å¸¸é‹ä½œ"
      }
    ],

    "business_value_chain_tests": [
      {
        "test_id": "value_chain_001",
        "scenario": "è¨˜å¸³åƒ¹å€¼éˆç«¯åˆ°ç«¯é©—è­‰",
        "value_chain_steps": [
          {
            "step": "è³‡æ–™è¼¸å…¥",
            "layer": "PL",
            "function": "ç”¨æˆ¶è¼¸å…¥è¨˜å¸³è³‡è¨Š",
            "expected_output": "æ ¼å¼åŒ–è¨˜å¸³è³‡æ–™"
          },
          {
            "step": "è³‡æ–™é©—è­‰",
            "layer": "APL",
            "function": "é©—è­‰è¨˜å¸³è³‡æ–™æ ¼å¼",
            "expected_output": "é©—è­‰é€šéçš„è³‡æ–™"
          },
          {
            "step": "æ¥­å‹™è™•ç†",
            "layer": "BL",
            "function": "è¨˜å¸³é‚è¼¯è™•ç†",
            "expected_output": "è™•ç†å¾Œçš„äº¤æ˜“è¨˜éŒ„"
          },
          {
            "step": "è³‡æ–™å„²å­˜",
            "layer": "DL",
            "function": "å„²å­˜åˆ°Firestore",
            "expected_output": "å„²å­˜æˆåŠŸç¢ºèª"
          },
          {
            "step": "çµæœå›å‚³",
            "layer": "APL",
            "function": "åŒ…è£å›æ‡‰è³‡æ–™",
            "expected_output": "APIå›æ‡‰æ ¼å¼"
          },
          {
            "step": "çµæœé¡¯ç¤º",
            "layer": "PL",
            "function": "é¡¯ç¤ºè¨˜å¸³çµæœ",
            "expected_output": "ç”¨æˆ¶å‹å–„çš„æˆåŠŸè¨Šæ¯"
          }
        ],
        "success_criteria": "æ•´å€‹åƒ¹å€¼éˆç„¡è³‡æ–™éºå¤±ï¼Œç„¡æ ¼å¼éŒ¯èª¤"
      }
    ],

    "four_mode_user_experience_tests": [
      {
        "test_id": "ux_expert_001",
        "mode": "expert",
        "scenario": "Expertæ¨¡å¼ç”¨æˆ¶é«”é©—æµç¨‹",
        "test_interactions": [
          {
            "action": "å¿«é€Ÿè¨˜å¸³",
            "input": "åˆé¤150ä¿¡ç”¨å¡",
            "expected_response": "å·²è¨˜éŒ„æ”¯å‡ºï¼šåˆé¤ NT$150 (ä¿¡ç”¨å¡æ”¯ä»˜)",
            "expected_details": "è©³ç´°åˆ†é¡è³‡è¨Šã€ä»˜æ¬¾æ–¹å¼ã€æ™‚é–“æˆ³è¨˜"
          },
          {
            "action": "æŸ¥çœ‹çµ±è¨ˆ",
            "input": "ä»Šæ—¥çµ±è¨ˆ",
            "expected_response": "è©³ç´°çš„ä»Šæ—¥æ”¯å‡ºåˆ†æï¼ŒåŒ…å«é¡åˆ¥åˆ†ä½ˆåœ–è¡¨",
            "expected_details": "é€²éšçµ±è¨ˆè³‡æ–™ã€åœ–è¡¨è¦–è¦ºåŒ–"
          }
        ]
      },
      {
        "test_id": "ux_guiding_001",
        "mode": "guiding",
        "scenario": "Guidingæ¨¡å¼ç”¨æˆ¶é«”é©—æµç¨‹",
        "test_interactions": [
          {
            "action": "å¿«é€Ÿè¨˜å¸³",
            "input": "åˆé¤150",
            "expected_response": "âœ… å·²å¹«æ‚¨è¨˜éŒ„ï¼šåˆé¤èŠ±è²»150å…ƒ",
            "expected_details": "å‹å–„æç¤ºã€ä¸‹ä¸€æ­¥å»ºè­°"
          },
          {
            "action": "æŸ¥çœ‹è¨˜éŒ„",
            "input": "æˆ‘çš„è¨˜éŒ„",
            "expected_response": "ç°¡åŒ–çš„è¨˜éŒ„åˆ—è¡¨ï¼Œå«ä½¿ç”¨æç¤º",
            "expected_details": "å¼•å°å¼ä»‹é¢ã€æ“ä½œæç¤º"
          }
        ]
      }
    ]
  },

  "stability_and_performance_tests": {
    "long_running_stability_tests": [
      {
        "test_id": "stability_8h_001",
        "scenario": "8å°æ™‚é€£çºŒé‹è¡Œæ¸¬è©¦",
        "duration_hours": 8,
        "simulation_duration_minutes": 2,
        "test_operations": [
          {
            "operation": "ç”¨æˆ¶è¨»å†Š",
            "frequency_per_hour": 10,
            "concurrent_users": 3,
            "test_data_template": {
              "email": "stability_user_{index}@lcas.app",
              "password": "StabilityTest123!",
              "display_name": "ç©©å®šæ€§æ¸¬è©¦ç”¨æˆ¶{index}"
            }
          },
          {
            "operation": "ç”¨æˆ¶ç™»å…¥",
            "frequency_per_hour": 60,
            "concurrent_users": 10,
            "test_endpoints": ["/api/v1/auth/login"]
          },
          {
            "operation": "å¿«é€Ÿè¨˜å¸³",
            "frequency_per_hour": 120,
            "concurrent_users": 15,
            "test_data_templates": [
              "æ¸¬è©¦è¨˜å¸³{index}",
              "ç©©å®šæ€§æ¸¬è©¦{amount}",
              "é•·æ™‚é–“é‹è¡Œæ¸¬è©¦{time}"
            ]
          },
          {
            "operation": "è¨˜éŒ„æŸ¥è©¢",
            "frequency_per_hour": 80,
            "concurrent_users": 8,
            "test_endpoints": [
              "/api/v1/transactions",
              "/api/v1/transactions/dashboard"
            ]
          }
        ],
        "expected_metrics": {
          "success_rate": 0.99,
          "avg_response_time_ms": 1500,
          "max_response_time_ms": 3000,
          "memory_usage_stable": true,
          "no_memory_leaks": true,
          "cpu_usage_threshold": 80,
          "error_recovery_time_ms": 1000
        },
        "monitoring_intervals": {
          "memory_check_seconds": 30,
          "performance_log_seconds": 60,
          "health_check_seconds": 10
        }
      },
      {
        "test_id": "stability_24h_001",
        "scenario": "24å°æ™‚ç©©å®šæ€§æ¸¬è©¦",
        "duration_hours": 24,
        "test_operations": [
          {
            "operation": "åŸºç¤CRUDæ“ä½œ",
            "frequency_per_hour": 200,
            "concurrent_users": 5
          },
          {
            "operation": "æ¨¡å¼åˆ‡æ›æ“ä½œ",
            "frequency_per_hour": 20,
            "concurrent_users": 2
          },
          {
            "operation": "éŒ¯èª¤æ¢å¾©æ¸¬è©¦",
            "frequency_per_hour": 5,
            "concurrent_users": 1
          }
        ],
        "expected_metrics": {
          "system_availability": 0.999,
          "max_downtime_minutes": 5,
          "auto_recovery_time_minutes": 2,
          "data_consistency_maintained": true
        }
      }
    ],

    "stress_and_recovery_tests": [
      {
        "test_id": "stress_001",
        "scenario": "é«˜ä½µç™¼å£“åŠ›æ¸¬è©¦",
        "concurrent_users": 50,
        "duration_minutes": 30,
        "operations_per_user": 10,
        "expected_degradation": {
          "max_response_time_increase": "50%",
          "min_success_rate": 0.95,
          "recovery_time_minutes": 5
        }
      },
      {
        "test_id": "recovery_001",
        "scenario": "æ•…éšœæ¢å¾©æ¸¬è©¦",
        "failure_scenarios": [
          {
            "type": "database_connection_lost",
            "expected_recovery_time": "30s",
            "expected_data_loss": "none"
          },
          {
            "type": "api_service_restart",
            "expected_recovery_time": "60s",
            "expected_in_flight_requests": "graceful_handling"
          }
        ]
      }
    ]
  },

  "final_regression_tests": {
    "complete_functionality_regression": [
      {
        "test_id": "regression_001",
        "scenario": "æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å›æ­¸æ¸¬è©¦",
        "test_suites": [
          "authentication_service_tests",
          "user_management_tests",
          "bookkeeping_core_tests",
          "four_mode_differentiation_tests",
          "error_handling_tests"
        ],
        "expected_results": {
          "all_tests_pass": true,
          "no_regression_detected": true,
          "performance_maintained": true
        }
      }
    ],

    "performance_benchmark_validation": [
      {
        "test_id": "benchmark_001",
        "scenario": "æ•ˆèƒ½åŸºæº–é©—è­‰",
        "benchmarks": [
          {
            "metric": "api_response_time_95th_percentile",
            "target": "2000ms"
          },
          {
            "metric": "concurrent_user_capacity",
            "target": "50_users_95%_success"
          },
          {
            "metric": "data_consistency_under_load",
            "target": "100%_consistency"
          }
        ]
      }
    ],

    "firebase_auth_regression_tests": [
      {
        "test_id": "firebase_regression_001",
        "scenario": "Firebase Authå®Œæ•´å›æ­¸æ¸¬è©¦",
        "test_flows": [
          "user_registration_with_firebase",
          "firebase_token_verification",
          "user_login_with_firebase",
          "token_refresh_mechanism",
          "user_logout_cleanup"
        ],
        "expected_success_rate": "100%"
      }
    ]
  },

  "data_consistency_tests": {
    "cross_layer_data_flow": [
      {
        "test_id": "consistency_001",
        "scenario": "PLâ†’APLâ†’BLâ†’DLè³‡æ–™ä¸€è‡´æ€§",
        "test_data": {
          "pl_input": {
            "amount": "1500",
            "category": "é¤é£²",
            "description": "åˆé¤"
          },
          "expected_apl_format": {
            "amount": 1500,
            "category_id": "cat_food_001",
            "description": "åˆé¤",
            "type": "expense"
          },
          "expected_bl_processing": {
            "amount": 1500,
            "category_id": "cat_food_001",
            "user_id": "user_123",
            "ledger_id": "ledger_456",
            "transaction_date": "2025-09-15T10:00:00Z"
          },
          "expected_dl_storage": {
            "collection": "transactions",
            "document_structure": {
              "amount": 1500,
              "category_id": "cat_food_001",
              "user_id": "user_123",
              "ledger_id": "ledger_456",
              "created_at": "timestamp",
              "updated_at": "timestamp"
            }
          }
        }
      }
    ],

    "data_transformation_tests": [
      {
        "test_id": "transform_001",
        "scenario": "å››æ¨¡å¼è³‡æ–™å·®ç•°åŒ–è½‰æ›",
        "base_data": {
          "amount": 1000,
          "category": "é¤é£²",
          "description": "åˆé¤",
          "categoryId": "cat_food_001",
          "accountId": "acc_main_001",
          "ledgerId": "ledger_main_001",
          "date": "2025-01-26",
          "type": "expense"
        },
        "mode_transformations": {
          "expert": {
            "include_analytics": true,
            "detailed_categorization": true,
            "advanced_fields": ["tax_rate", "receipt_number", "merchant_details"],
            "expected_api_fields": ["detailed_metadata", "advanced_options", "analytics_data"],
            "response_complexity": "high"
          },
          "guiding": {
            "simplified_display": true,
            "tutorial_hints": true,
            "default_values": true,
            "expected_api_fields": ["help_text", "guided_options", "step_instructions"],
            "response_complexity": "low"
          },
          "inertial": {
            "consistent_format": true,
            "standard_fields_only": true,
            "expected_api_fields": ["stable_options", "consistent_layout"],
            "response_complexity": "medium"
          },
          "cultivation": {
            "gamification_elements": true,
            "achievement_tracking": true,
            "motivational_messages": true,
            "expected_api_fields": ["progress_data", "achievement_status", "rewards"],
            "response_complexity": "medium"
          }
        }
      },
      {
        "test_id": "transform_002",
        "scenario": "è·¨æ¨¡å¼è³‡æ–™æ ¼å¼é©—è­‰",
        "base_data": {
          "amount": 250,
          "type": "expense",
          "date": "2025-01-26",
          "description": "æ¨¡å¼è½‰æ›æ¸¬è©¦",
          "categoryId": "test_category",
          "accountId": "test_account"
        },
        "validation_points": [
          "è³‡æ–™å®Œæ•´æ€§ä¿æŒ",
          "æ ¼å¼è½‰æ›æ­£ç¢ºæ€§",
          "æ¨¡å¼ç‰¹å®šæ¬„ä½å­˜åœ¨",
          "APIå›æ‡‰çµæ§‹ä¸€è‡´"
        ]
      }
    ]
  },

  "api_response_format_tests": {
    "dcn_0015_success_response_format": {
      "test_id": "response_success_001",
      "scenario": "DCN-0015çµ±ä¸€æˆåŠŸå›æ‡‰æ ¼å¼é©—è­‰",
      "expected_structure": {
        "success": true,
        "data": "object",
        "error": null,
        "message": "string",
        "metadata": {
          "timestamp": "string",
          "requestId": "string",
          "userMode": "string",
          "apiVersion": "string",
          "processingTimeMs": "number",
          "modeFeatures": "object"
        }
      }
    },
    "dcn_0015_validation_test_cases": {
      "three_layer_validation": {
        "layer1_basic_structure_tests": [
          {
            "test_id": "layer1_001",
            "scenario": "å®Œæ•´åŸºç¤çµæ§‹é©—è­‰",
            "test_response": {
              "success": true,
              "data": {"result": "test"},
              "error": null,
              "message": "æ¸¬è©¦æˆåŠŸ",
              "metadata": {
                "timestamp": "2025-01-27T10:00:00.000Z",
                "requestId": "req_test_001",
                "userMode": "Expert",
                "apiVersion": "v1.0.0",
                "processingTimeMs": 150,
                "modeFeatures": {
                  "detailedAnalytics": true,
                  "advancedOptions": true
                }
              }
            },
            "expected_result": "pass"
          },
          {
            "test_id": "layer1_002",
            "scenario": "ç¼ºå°‘successæ¬„ä½",
            "test_response": {
              "data": {"result": "test"},
              "error": null,
              "message": "æ¸¬è©¦",
              "metadata": {}
            },
            "expected_result": "fail",
            "expected_error": "ç¼ºå°‘æ ¹å±¤ç´šå¿…è¦æ¬„ä½: success"
          }
        ],
        "layer2_deep_content_tests": [
          {
            "test_id": "layer2_001",
            "scenario": "ISO8601æ™‚é–“æˆ³é©—è­‰",
            "test_response": {
              "success": true,
              "data": {"result": "test"},
              "error": null,
              "message": "æ¸¬è©¦æˆåŠŸ",
              "metadata": {
                "timestamp": "2025-01-27T10:00:00.000Z",
                "requestId": "req_test_001",
                "userMode": "Expert",
                "apiVersion": "v1.0.0",
                "processingTimeMs": 150,
                "modeFeatures": {}
              }
            },
            "expected_result": "pass"
          },
          {
            "test_id": "layer2_002",
            "scenario": "éŒ¯èª¤æ™‚é–“æˆ³æ ¼å¼",
            "test_response": {
              "success": true,
              "data": {"result": "test"},
              "error": null,
              "message": "æ¸¬è©¦æˆåŠŸ",
              "metadata": {
                "timestamp": "2025-01-27 10:00:00",
                "requestId": "req_test_001",
                "userMode": "Expert",
                "apiVersion": "v1.0.0",
                "processingTimeMs": 150,
                "modeFeatures": {}
              }
            },
            "expected_result": "fail",
            "expected_error": "timestampæ ¼å¼ä¸ç¬¦åˆISO8601æ¨™æº–"
          }
        ],
        "layer3_business_logic_tests": [
          {
            "test_id": "layer3_001",
            "scenario": "æˆåŠŸå›æ‡‰é‚è¼¯é©—è­‰",
            "test_response": {
              "success": true,
              "data": {"result": "success"},
              "error": null,
              "message": "æ“ä½œæˆåŠŸ",
              "metadata": {
                "timestamp": "2025-01-27T10:00:00.000Z",
                "requestId": "req_test_001",
                "userMode": "Expert",
                "apiVersion": "v1.0.0",
                "processingTimeMs": 150,
                "modeFeatures": {}
              }
            },
            "expected_result": "pass"
          },
          {
            "test_id": "layer3_002",
            "scenario": "å¤±æ•—å›æ‡‰é‚è¼¯é©—è­‰",
            "test_response": {
              "success": false,
              "data": null,
              "error": {
                "code": "VALIDATION_ERROR",
                "message": "é©—è­‰å¤±æ•—",
                "details": {}
              },
              "message": "æ“ä½œå¤±æ•—",
              "metadata": {
                "timestamp": "2025-01-27T10:00:00.000Z",
                "requestId": "req_test_001",
                "userMode": "Expert",
                "apiVersion": "v1.0.0",
                "processingTimeMs": 150,
                "modeFeatures": {}
              }
            },
            "expected_result": "pass"
          }
        ]
      },
      "four_mode_validation_tests": [
        {
          "test_id": "mode_001",
          "scenario": "Expertæ¨¡å¼ç‰¹å®šæ¬„ä½é©—è­‰",
          "user_mode": "Expert",
          "test_response": {
            "success": true,
            "data": {"result": "test"},
            "error": null,
            "message": "æ¸¬è©¦æˆåŠŸ",
            "metadata": {
              "timestamp": "2025-01-27T10:00:00.000Z",
              "requestId": "req_test_001",
              "userMode": "Expert",
              "apiVersion": "v1.0.0",
              "processingTimeMs": 150,
              "modeFeatures": {
                "detailedAnalytics": true,
                "advancedOptions": true,
                "performanceMetrics": true,
                "batchOperations": true,
                "exportFeatures": true
              }
            }
          },
          "expected_result": "pass",
          "expected_mode_score": 100
        },
        {
          "test_id": "mode_002",
          "scenario": "Guidingæ¨¡å¼ç‰¹å®šæ¬„ä½é©—è­‰",
          "user_mode": "Guiding",
          "test_response": {
            "success": true,
            "data": {"result": "test"},
            "error": null,
            "message": "æ¸¬è©¦æˆåŠŸ",
            "metadata": {
              "timestamp": "2025-01-27T10:00:00.000Z",
              "requestId": "req_test_002",
              "userMode": "Guiding",
              "apiVersion": "v1.0.0",
              "processingTimeMs": 150,
              "modeFeatures": {
                "simplifiedInterface": true,
                "helpHints": true,
                "autoSuggestions": true,
                "stepByStepGuide": true,
                "tutorialMode": true
              }
            }
          },
          "expected_result": "pass",
          "expected_mode_score": 100
        }
      ]
    },
    "dcn_0015_error_response_format": {
      "test_id": "response_error_001",
      "scenario": "DCN-0015çµ±ä¸€éŒ¯èª¤å›æ‡‰æ ¼å¼é©—è­‰",
      "expected_structure": {
        "success": false,
        "data": null,
        "error": {
          "code": "string",
          "message": "string",
          "details": "object"
        },
        "message": "string",
        "metadata": {
          "timestamp": "string",
          "requestId": "string",
          "userMode": "string",
          "apiVersion": "string",
          "processingTimeMs": "number",
          "modeFeatures": "object"
        }
      }
    },
    "dcn_0015_mode_specific_response_format": {
      "test_id": "response_mode_001",
      "scenario": "DCN-0015å››æ¨¡å¼å·®ç•°åŒ–å›æ‡‰æ ¼å¼é©—è­‰",
      "test_cases": [
        {
          "mode": "Expert",
          "expected_modeFeatures": {
            "detailedAnalytics": true,
            "advancedOptions": true,
            "performanceMetrics": true,
            "batchOperations": true,
            "exportFeatures": true
          }
        },
        {
          "mode": "Guiding",
          "expected_modeFeatures": {
            "simplifiedInterface": true,
            "helpHints": true,
            "autoSuggestions": true,
            "stepByStepGuide": true,
            "tutorialMode": true
          }
        },
        {
          "mode": "Inertial",
          "expected_modeFeatures": {
            "stabilityMode": true,
            "consistentInterface": true,
            "minimalChanges": true,
            "quickActions": true,
            "familiarLayout": true
          }
        },
        {
          "mode": "Cultivation",
          "expected_modeFeatures": {
            "achievementProgress": true,
            "gamificationElements": true,
            "motivationalTips": true,
            "progressTracking": true,
            "rewardSystem": true
          }
        }
      ]
    }
  }
}