
{
  "metadata": {
    "version": "v1.2.0",
    "created_date": "2025-01-24",
    "last_updated": "2025-01-24",
    "description": "LCAS 2.0 Phase 1 SITæ¸¬è©¦è³‡æ–™é…ç½®æª” - éšæ®µäºŒæ ¸å¿ƒæ¥­å‹™åŠŸèƒ½",
    "test_cases_supported": "TC-SIT-001 to TC-SIT-020",
    "author": "LCAS SQA Team",
    "change_log": [
      {
        "version": "v1.0.0",
        "date": "2025-01-24",
        "changes": "åˆå§‹ç‰ˆæœ¬å»ºç«‹"
      },
      {
        "version": "v1.1.0", 
        "date": "2025-01-24",
        "changes": "éšæ®µä¸€ï¼šåŸºç¤æ¸¬è©¦è³‡æ–™æ¶æ§‹å»ºç«‹å®Œæˆ"
      },
      {
        "version": "v1.2.0",
        "date": "2025-01-24", 
        "changes": "éšæ®µäºŒï¼šæ ¸å¿ƒæ¥­å‹™åŠŸèƒ½æ¸¬è©¦è³‡æ–™å»ºç«‹å®Œæˆ"
      }
    ]
  },
  
  "test_environment": {
    "api_base_url": "https://lcas-api.replit.app/api/v1",
    "timeout_settings": {
      "api_timeout": 5000,
      "database_timeout": 3000,
      "authentication_timeout": 10000
    },
    "retry_settings": {
      "max_retries": 3,
      "retry_delay": 1000
    }
  },

  "authentication_test_data": {
    "valid_users": {
      "expert_mode_user_001": {
        "email": "expert001@lcas.app",
        "password": "ExpertPass123!",
        "display_name": "Expertæ¸¬è©¦ç”¨æˆ¶001",
        "mode": "expert",
        "expected_features": ["advanced", "detailed", "batch", "analytics"],
        "registration_data": {
          "first_name": "Expert",
          "last_name": "User001",
          "phone": "+886912345001",
          "date_of_birth": "1990-01-01",
          "preferred_language": "zh-TW"
        }
      },
      "expert_mode_user_002": {
        "email": "expert002@lcas.app", 
        "password": "ExpertPass456!",
        "display_name": "Expertæ¸¬è©¦ç”¨æˆ¶002",
        "mode": "expert",
        "expected_features": ["advanced", "detailed", "analytics", "export"],
        "registration_data": {
          "first_name": "Expert",
          "last_name": "User002",
          "phone": "+886912345002",
          "date_of_birth": "1988-05-15",
          "preferred_language": "zh-TW"
        }
      },
      "guiding_mode_user_001": {
        "email": "guiding001@lcas.app",
        "password": "GuidingPass123!",
        "display_name": "Guidingæ¸¬è©¦ç”¨æˆ¶001",
        "mode": "guiding",
        "expected_features": ["simple", "guided", "tutorial", "hints"],
        "registration_data": {
          "first_name": "Guiding",
          "last_name": "User001",
          "phone": "+886912345003",
          "date_of_birth": "1995-03-20",
          "preferred_language": "zh-TW"
        }
      },
      "inertial_mode_user_001": {
        "email": "inertial001@lcas.app",
        "password": "InertialPass123!",
        "display_name": "Inertialæ¸¬è©¦ç”¨æˆ¶001", 
        "mode": "inertial",
        "expected_features": ["stable", "consistent", "reliable", "standard"],
        "registration_data": {
          "first_name": "Inertial",
          "last_name": "User001",
          "phone": "+886912345004",
          "date_of_birth": "1985-08-10",
          "preferred_language": "zh-TW"
        }
      },
      "cultivation_mode_user_001": {
        "email": "cultivation001@lcas.app",
        "password": "CultivationPass123!",
        "display_name": "Cultivationæ¸¬è©¦ç”¨æˆ¶001",
        "mode": "cultivation", 
        "expected_features": ["motivation", "achievement", "gamification", "progress"],
        "registration_data": {
          "first_name": "Cultivation",
          "last_name": "User001",
          "phone": "+886912345005",
          "date_of_birth": "1992-12-05",
          "preferred_language": "zh-TW"
        }
      }
    },
    
    "invalid_users": {
      "invalid_email_format": {
        "email": "invalid-email-format",
        "password": "ValidPass123!",
        "expected_error": "EMAIL_FORMAT_INVALID"
      },
      "weak_password": {
        "email": "test@lcas.app",
        "password": "123",
        "expected_error": "PASSWORD_TOO_WEAK"
      },
      "empty_credentials": {
        "email": "",
        "password": "",
        "expected_error": "REQUIRED_FIELDS_MISSING"
      },
      "nonexistent_user": {
        "email": "nonexistent@lcas.app", 
        "password": "NonexistentPass123!",
        "expected_error": "USER_NOT_FOUND"
      },
      "wrong_password": {
        "email": "expert001@lcas.app",
        "password": "WrongPassword123!",
        "expected_error": "INVALID_CREDENTIALS"
      }
    }
  },

  "mode_assessment_test_data": {
    "expert_mode_assessment": {
      "assessment_id": "expert_assessment_001",
      "answers": {
        "financial_experience": "advanced",
        "detail_preference": "detailed",
        "control_preference": "high_control",
        "analysis_preference": "comprehensive",
        "efficiency_preference": "powerful_features"
      },
      "expected_mode": "expert",
      "confidence_score": 0.95,
      "expected_features": ["advanced_analytics", "batch_operations", "detailed_reports", "custom_categories"]
    },
    "guiding_mode_assessment": {
      "assessment_id": "guiding_assessment_001", 
      "answers": {
        "financial_experience": "beginner",
        "detail_preference": "simple",
        "control_preference": "guided",
        "analysis_preference": "basic",
        "efficiency_preference": "easy_to_use"
      },
      "expected_mode": "guiding",
      "confidence_score": 0.90,
      "expected_features": ["step_by_step_guide", "tooltips", "simplified_interface", "default_categories"]
    },
    "inertial_mode_assessment": {
      "assessment_id": "inertial_assessment_001",
      "answers": {
        "financial_experience": "intermediate", 
        "detail_preference": "balanced",
        "control_preference": "stable",
        "analysis_preference": "standard",
        "efficiency_preference": "consistent"
      },
      "expected_mode": "inertial",
      "confidence_score": 0.85,
      "expected_features": ["consistent_interface", "standard_features", "reliable_operations", "balanced_detail"]
    },
    "cultivation_mode_assessment": {
      "assessment_id": "cultivation_assessment_001",
      "answers": {
        "financial_experience": "intermediate",
        "detail_preference": "motivating", 
        "control_preference": "encouraging",
        "analysis_preference": "progress_focused",
        "efficiency_preference": "achievement_oriented"
      },
      "expected_mode": "cultivation",
      "confidence_score": 0.88,
      "expected_features": ["achievement_system", "progress_tracking", "motivational_messages", "gamification"]
    }
  },

  "basic_bookkeeping_test_data": {
    "quick_booking_tests": [
      {
        "test_id": "quick_001",
        "input_text": "åˆé¤150",
        "expected_parsing": {
          "amount": 150,
          "category": "é¤é£²",
          "type": "expense", 
          "description": "åˆé¤",
          "payment_method": "ç¾é‡‘"
        },
        "mode_specific_responses": {
          "expert": "å·²è¨˜éŒ„æ”¯å‡ºï¼šåˆé¤ NT$150 (é¤é£²é¡åˆ¥)",
          "guiding": "âœ… å·²å¹«æ‚¨è¨˜éŒ„ï¼šåˆé¤èŠ±è²»150å…ƒ",
          "inertial": "è¨˜éŒ„å®Œæˆï¼šåˆé¤ 150å…ƒ",
          "cultivation": "ğŸ‰ æ­å–œï¼å®Œæˆä»Šæ—¥ç¬¬1ç­†è¨˜å¸³ï¼šåˆé¤150å…ƒ"
        }
      },
      {
        "test_id": "quick_002", 
        "input_text": "è–ªæ°´35000è½‰å¸³",
        "expected_parsing": {
          "amount": 35000,
          "category": "è–ªè³‡",
          "type": "income",
          "description": "è–ªæ°´",
          "payment_method": "è½‰å¸³"
        },
        "mode_specific_responses": {
          "expert": "å·²è¨˜éŒ„æ”¶å…¥ï¼šè–ªæ°´ NT$35,000 (è½‰å¸³å…¥å¸³)",
          "guiding": "âœ… å¤ªå¥½äº†ï¼è–ªæ°´35,000å…ƒå·²è¨˜éŒ„",
          "inertial": "è¨˜éŒ„å®Œæˆï¼šè–ªæ°´æ”¶å…¥ 35,000å…ƒ",
          "cultivation": "ğŸ’° å¤ªæ£’äº†ï¼è–ªæ°´å…¥å¸³35,000å…ƒï¼Œè²¡å¯Œå¢åŠ ä¸­ï¼"
        }
      },
      {
        "test_id": "quick_003",
        "input_text": "å’–å•¡85ä¿¡ç”¨å¡",
        "expected_parsing": {
          "amount": 85,
          "category": "é¤é£²",
          "type": "expense",
          "description": "å’–å•¡", 
          "payment_method": "ä¿¡ç”¨å¡"
        },
        "mode_specific_responses": {
          "expert": "å·²è¨˜éŒ„æ”¯å‡ºï¼šå’–å•¡ NT$85 (ä¿¡ç”¨å¡æ”¯ä»˜)",
          "guiding": "âœ… å’–å•¡85å…ƒå·²è¨˜éŒ„åˆ°ä¿¡ç”¨å¡",
          "inertial": "è¨˜éŒ„å®Œæˆï¼šå’–å•¡ 85å…ƒ (ä¿¡ç”¨å¡)",
          "cultivation": "â˜• è¨˜å¸³å¥½ç¿’æ…£ï¼å’–å•¡85å…ƒå·²è¨˜éŒ„"
        }
      }
    ],

    "form_booking_tests": [
      {
        "test_id": "form_001",
        "transaction_data": {
          "type": "expense",
          "amount": 1200,
          "category_id": "cat_food_001",
          "category_name": "é¤é£²",
          "account_id": "acc_cash_001", 
          "account_name": "ç¾é‡‘",
          "description": "æ™šé¤èšæœƒ",
          "date": "2025-01-24",
          "time": "19:30",
          "tags": ["èšæœƒ", "æœ‹å‹"],
          "notes": "å…¬å¸åŒäº‹èšé¤",
          "attachments": []
        },
        "expected_result": {
          "transaction_id": "generated_id",
          "status": "success",
          "message": "äº¤æ˜“è¨˜éŒ„æˆåŠŸ"
        }
      },
      {
        "test_id": "form_002",
        "transaction_data": {
          "type": "income", 
          "amount": 5000,
          "category_id": "cat_bonus_001",
          "category_name": "çé‡‘",
          "account_id": "acc_bank_001",
          "account_name": "éŠ€è¡Œå¸³æˆ¶",
          "description": "ç¸¾æ•ˆçé‡‘",
          "date": "2025-01-24",
          "time": "10:00",
          "tags": ["å·¥ä½œ", "ç¸¾æ•ˆ"],
          "notes": "Q4ç¸¾æ•ˆçé‡‘",
          "attachments": []
        },
        "expected_result": {
          "transaction_id": "generated_id",
          "status": "success", 
          "message": "æ”¶å…¥è¨˜éŒ„æˆåŠŸ"
        }
      }
    ]
  },

  "api_endpoints": {
    "authentication": {
      "register": "/auth/register",
      "login": "/auth/login", 
      "logout": "/auth/logout",
      "refresh_token": "/auth/refresh",
      "verify_token": "/auth/verify",
      "reset_password": "/auth/reset-password"
    },
    "user_management": {
      "profile": "/user/profile",
      "update_profile": "/user/profile/update",
      "change_password": "/user/password/change",
      "mode_assessment": "/user/mode-assessment",
      "update_mode": "/user/mode/update"
    },
    "bookkeeping": {
      "quick_booking": "/bookkeeping/quick",
      "create_transaction": "/bookkeeping/transactions",
      "get_transactions": "/bookkeeping/transactions",
      "update_transaction": "/bookkeeping/transactions/{id}",
      "delete_transaction": "/bookkeeping/transactions/{id}"
    }
  },

  "expected_response_formats": {
    "success_response": {
      "success": true,
      "data": {},
      "message": "æ“ä½œæˆåŠŸ",
      "timestamp": "2025-01-24T10:00:00Z"
    },
    "error_response": {
      "success": false,
      "error": {
        "code": "ERROR_CODE",
        "message": "éŒ¯èª¤è¨Šæ¯",
        "details": {}
      },
      "timestamp": "2025-01-24T10:00:00Z"
    }
  },

  "cross_layer_error_handling_tests": {
    "network_errors": [
      {
        "test_id": "error_network_001",
        "scenario": "ç¶²è·¯è¶…æ™‚",
        "mock_error": "NETWORK_TIMEOUT",
        "error_layer": "APL",
        "expected_pl_response": "ç¶²è·¯é€£ç·šé€¾æ™‚ï¼Œè«‹æª¢æŸ¥ç¶²è·¯ç‹€æ…‹å¾Œé‡è©¦",
        "expected_retry_attempts": 3,
        "expected_user_action": "é¡¯ç¤ºé‡è©¦æŒ‰éˆ•",
        "mode_specific_messages": {
          "expert": "ç¶²è·¯è¶…æ™‚ (5s)ï¼Œå»ºè­°æª¢æŸ¥é€£ç·šç‹€æ…‹",
          "guiding": "ç¶²è·¯ä¼¼ä¹æœ‰é»æ…¢ï¼Œè«‹ç¨å¾Œå†è©¦ä¸€æ¬¡",
          "inertial": "é€£ç·šé€¾æ™‚ï¼Œè«‹é‡æ–°å˜—è©¦",
          "cultivation": "ç¶²è·¯å°æ†©ä¸€ä¸‹ï¼Œå†è©¦ä¸€æ¬¡å°±å¥½ï¼"
        }
      },
      {
        "test_id": "error_network_002",
        "scenario": "ä¼ºæœå™¨ç„¡å›æ‡‰",
        "mock_error": "SERVER_UNREACHABLE",
        "error_layer": "APL",
        "expected_pl_response": "ä¼ºæœå™¨æš«æ™‚ç„¡æ³•é€£æ¥ï¼Œè«‹ç¨å¾Œå†è©¦",
        "expected_retry_attempts": 2,
        "expected_user_action": "é¡¯ç¤ºç¨å¾Œé‡è©¦è¨Šæ¯"
      }
    ],

    "authentication_errors": [
      {
        "test_id": "error_auth_001",
        "scenario": "èªè­‰éæœŸ",
        "mock_error": "TOKEN_EXPIRED",
        "error_layer": "BL",
        "expected_pl_response": "ç™»å…¥å·²éæœŸï¼Œè«‹é‡æ–°ç™»å…¥",
        "expected_user_action": "redirectToLogin",
        "expected_retry_attempts": 0,
        "mode_specific_messages": {
          "expert": "JWT Tokenå·²éæœŸï¼Œéœ€è¦é‡æ–°èªè­‰",
          "guiding": "ç™»å…¥æ™‚é–“åˆ°äº†ï¼Œè«‹é‡æ–°ç™»å…¥ç¹¼çºŒä½¿ç”¨",
          "inertial": "ç™»å…¥å·²éæœŸï¼Œè«‹é‡æ–°ç™»å…¥",
          "cultivation": "è©²é‡æ–°å……é›»äº†ï¼è«‹é‡æ–°ç™»å…¥ç¹¼çºŒè¨˜å¸³ä¹‹æ—…"
        }
      },
      {
        "test_id": "error_auth_002",
        "scenario": "æ¬Šé™ä¸è¶³",
        "mock_error": "INSUFFICIENT_PERMISSIONS",
        "error_layer": "BL",
        "expected_pl_response": "æ¬Šé™ä¸è¶³ï¼Œç„¡æ³•åŸ·è¡Œæ­¤æ“ä½œ",
        "expected_user_action": "showPermissionDenied",
        "expected_retry_attempts": 0
      }
    ],

    "validation_errors": [
      {
        "test_id": "error_validation_001",
        "scenario": "è³‡æ–™æ ¼å¼éŒ¯èª¤",
        "mock_error": "VALIDATION_ERROR",
        "error_layer": "APL",
        "expected_pl_response": "è³‡æ–™æ ¼å¼éŒ¯èª¤ï¼Œè«‹æª¢æŸ¥è¼¸å…¥å…§å®¹",
        "expected_error_details": {
          "field": "amount",
          "message": "é‡‘é¡å¿…é ˆç‚ºæ­£æ•¸",
          "value": "-100"
        },
        "expected_user_action": "highlightErrorField",
        "mode_specific_messages": {
          "expert": "æ¬„ä½é©—è­‰å¤±æ•—ï¼šamount (é‡‘é¡å¿…é ˆç‚ºæ­£æ•¸)",
          "guiding": "é‡‘é¡ä¸èƒ½æ˜¯è² æ•¸å“¦ï¼Œè«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—",
          "inertial": "è«‹è¼¸å…¥æœ‰æ•ˆçš„é‡‘é¡æ•¸å­—",
          "cultivation": "æ•¸å­—éœ€è¦æ˜¯æ­£çš„æ‰èƒ½è¨˜å¸³æˆåŠŸå–”ï¼"
        }
      },
      {
        "test_id": "error_validation_002",
        "scenario": "å¿…å¡«æ¬„ä½ç¼ºå¤±",
        "mock_error": "REQUIRED_FIELD_MISSING",
        "error_layer": "APL",
        "expected_pl_response": "è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½",
        "expected_error_details": {
          "missing_fields": ["amount", "category"],
          "message": "é‡‘é¡å’Œé¡åˆ¥ç‚ºå¿…å¡«æ¬„ä½"
        },
        "expected_user_action": "highlightRequiredFields"
      }
    ],

    "business_logic_errors": [
      {
        "test_id": "error_business_001",
        "scenario": "é¤˜é¡ä¸è¶³",
        "mock_error": "INSUFFICIENT_BALANCE",
        "error_layer": "BL",
        "expected_pl_response": "å¸³æˆ¶é¤˜é¡ä¸è¶³ï¼Œç„¡æ³•å®Œæˆæ­¤äº¤æ˜“",
        "expected_error_details": {
          "current_balance": 500,
          "required_amount": 1000,
          "account_name": "ç¾é‡‘å¸³æˆ¶"
        },
        "expected_user_action": "showBalanceWarning",
        "mode_specific_messages": {
          "expert": "ç¾é‡‘å¸³æˆ¶é¤˜é¡ä¸è¶³ï¼šç›®å‰500å…ƒï¼Œéœ€è¦1000å…ƒ",
          "guiding": "éŒ¢åŒ…è£¡çš„éŒ¢ä¸å¤ äº†ï¼Œç›®å‰åªæœ‰500å…ƒ",
          "inertial": "å¸³æˆ¶é¤˜é¡ä¸è¶³ä»¥å®Œæˆæ­¤äº¤æ˜“",
          "cultivation": "å°è±¬æ’²æ»¿éœ€è¦æ›´å¤šé›¶éŒ¢æ‰èƒ½å®Œæˆé€™ç­†äº¤æ˜“ï¼"
        }
      }
    ]
  },

  "performance_test_data": {
    "concurrent_operations": {
      "test_id": "perf_concurrent_001",
      "concurrent_users": 10,
      "operations_per_user": 5,
      "operation_types": ["quick_booking", "form_booking", "transaction_query"],
      "expected_response_time_ms": 2000,
      "expected_success_rate": 0.95
    },

    "load_test_scenarios": [
      {
        "test_id": "load_001",
        "scenario": "é«˜é »è¨˜å¸³æ¸¬è©¦",
        "duration_seconds": 60,
        "requests_per_second": 50,
        "endpoint": "/bookkeeping/quick",
        "expected_avg_response_time_ms": 1500,
        "expected_max_response_time_ms": 3000
      },
      {
        "test_id": "load_002", 
        "scenario": "æ‰¹é‡æŸ¥è©¢æ¸¬è©¦",
        "duration_seconds": 30,
        "requests_per_second": 20,
        "endpoint": "/bookkeeping/transactions",
        "expected_avg_response_time_ms": 1000,
        "expected_max_response_time_ms": 2000
      }
    ]
  },

  "data_consistency_tests": {
    "cross_layer_data_flow": [
      {
        "test_id": "consistency_001",
        "scenario": "PLâ†’APLâ†’BLâ†’DLè³‡æ–™ä¸€è‡´æ€§", 
        "test_data": {
          "pl_input": {
            "amount": "1500",
            "category": "é¤é£²",
            "description": "åˆé¤"
          },
          "expected_apl_format": {
            "amount": 1500,
            "category_id": "cat_food_001",
            "description": "åˆé¤",
            "type": "expense"
          },
          "expected_bl_processing": {
            "amount": 1500,
            "category_id": "cat_food_001", 
            "user_id": "user_123",
            "ledger_id": "ledger_456",
            "transaction_date": "2025-01-24T10:00:00Z"
          },
          "expected_dl_storage": {
            "collection": "transactions",
            "document_structure": {
              "amount": 1500,
              "category_id": "cat_food_001",
              "user_id": "user_123",
              "ledger_id": "ledger_456",
              "created_at": "timestamp",
              "updated_at": "timestamp"
            }
          }
        }
      }
    ],

    "data_transformation_tests": [
      {
        "test_id": "transform_001",
        "scenario": "å››æ¨¡å¼è³‡æ–™å·®ç•°åŒ–è½‰æ›",
        "base_data": {
          "amount": 1000,
          "category": "é¤é£²",
          "description": "åˆé¤"
        },
        "mode_transformations": {
          "expert": {
            "include_analytics": true,
            "detailed_categorization": true,
            "advanced_fields": ["tax_rate", "receipt_number"]
          },
          "guiding": {
            "simplified_display": true,
            "tutorial_hints": true,
            "default_values": true
          },
          "inertial": {
            "consistent_format": true,
            "standard_fields_only": true
          },
          "cultivation": {
            "gamification_elements": true,
            "achievement_tracking": true,
            "motivational_messages": true
          }
        }
      }
    ]
  }
}
