
# LCAS 2.0 產品規格書 (Product Specification)
**版本**: 3.1.0  
**建立日期**: 2025-07-04  
**建立者**: AustinLiao69  
**最後更新**: 2025-08-13 

---

## 目次 (Table of Contents)

1. [產品概述 (Product Overview)](#1-產品概述-product-overview)
   - 1.1 [核心功能](#11-核心功能)
   - 1.2 [核心價值主張](#12-核心價值主張)
   - 1.3 [目標使用者](#13-目標使用者)
   - 1.4 [使用者故事](#14-使用者故事)
     
2. [功能架構 (Feature Architecture)](#2-功能架構-feature-architecture)
   - 2.1 [雙平台策略](#21-雙平台策略)
   - 2.2 [功能對比表](#22-功能對比表)

3. [技術架構 (Technical Architecture)](#3-技術架構-technical-architecture)
   - 3.1 [架構總覽](#31-架構總覽)
   - 3.2 [展示層 (Presentation Layer)](#32-展示層-presentation-layer)
   - 3.3 [應用邏輯層 (AP layer)](#33-應用邏輯層-AP-layer)
   - 3.4 [商業邏輯層 (Business layer)](#34-商業邏輯層-business-layer)
   - 3.5 [資料儲存層 (Data layer)](#35-資料儲存層-data-layer)
 
4. [LINE OA 平台規格](#4-line-oa-平台規格)
   - 4.1 [核心功能](#41-核心功能)

5. [APP 平台規格](#5-app-平台規格)
   - 5.1 [進階功能模組](#51-進階功能模組)
   - 5.2 [專業功能模組](#52-專業功能模組)

6. [平台間整合](#6-平台間整合)
   - 6.1 [資料同步機制](#61-資料同步機制)
   - 6.2 [跨平台功能](#62-跨平台功能)

7. [風險管控](#7-風險管控)
    - 7.1 [技術風險](#71-技術風險)
    - 7.2 [產品風險](#72-產品風險)

---

##  1. 產品概述 (Product Overview)

### 1.1 核心功能
LCAS 2.0 是一個多平台記帳系統，提供 LINE OA 快速記帳與 APP 完整功能，滿足多種的記帳需求。

核心功能如下：
1. 基本記帳(收入、支出、轉帳)
2. 協作帳本(協作、專案)
3. 分類帳戶(現金、銀行、貸款)
4. 報表分析生成
5. 四模式切換
6. 多平台記帳(LINE OA、APP)
7. 備份管理

### 1.2 核心價值主張(Value propostion)

今天，我陪你一起戰鬥！

我們相信，每個人都在自己的戰場上戰鬥，
每一次前進，都無比珍貴。
即使今天只是完成一個小目標，或是克服一點小懶惰，
這都值得讚美，這都值得慶祝。
因為每一步，都是朝著更好的自己邁進。

Sophr是你的夥伴，我們陪你一起面對每個挑戰。

無論你今天走得多快或多慢，
只要你勇敢站起來，你就是英雄。

### 1.3 目標使用者(Target user)

基於**自律動機矩陣**，LCAS 2.0 提供四種個人化記帳體驗模式：

#### 1.3.1 四模式矩陣定義
| 模式名稱 | 動機程度 | 自律程度 | 核心特徵 | 產品策略 |
|----------|----------|----------|----------|----------|
| **專家模式(Expert模式)** | 高 | 高 | 效率、深度分析、完全掌控 | 進階工具、專業報表、多維管理 |
| **慣性模式(Inertia模式)** | 低 | 高 | 美感、簡潔、儀式感 | UX優化、視覺愉悅、流暢體驗 |
| **養成模式(Cultivate模式)** | 高 | 低 | 習慣養成、外部激勵、社群 | 提醒機制、成就系統、協作支持 |
| **引導模式(Guide模式)** | 低 | 低 | 被動引導、輕量參與、覺醒 | 智慧引導、降低門檻、情感觸動 |

#### 1.3.2 模式識別機制

- **問卷測評**：新用戶註冊時進行5道簡易問題評估
- **手動切換**：用戶可隨時在設定中調整模式

#### 1.3.3 模式切換與升級

- **功能解鎖**：依據模式提供對應功能權限
- **個人化調整**：界面風格與互動方式自動適配

### 1.4 使用者故事(User story)
待更新



---

##  2. 功能架構 (Feature Architecture)

### 2.1 雙平台四模式策略

```
LCAS 2.0 四模式生態系統
├── LINE OA 平台 
│   ├── 快速記帳功能 
│   ├── 每日/月/年簡易收支統計 
│   └── 資料庫自動初始化
│
└── APP 平台 (完整功能 + 四模式個人化)
    ├── 基本記帳功能 (與 LINE OA 同步)
    ├── 模式選擇
    │   └── 四模式切換機制
    ├── 四模式專屬功能
    │   ├── 精準控制者模式
    │   │   ├── 多專案帳本管理
    │   │   ├── 深度分析報表
    │   │   └── 協作權限控制
    │   ├── 紀錄習慣者模式
    │   │   ├── 美感記帳介面
    │   │   ├── 個人化主題系統
    │   │   └── 儀式感設計元素
    │   ├── 轉型挑戰者模式
    │   │   ├── 習慣養成提醒
    │   │   └── 預算警示監督
    │   └── 潛在覺醒者模式
    │       ├── 智慧被動引導
    │       ├── 極簡記帳入門
    │       └── 視覺化財務覺醒
    └── 共用專業功能
        ├── 報表產出引擎 (模式化輸出)
        ├── 數據分析工具 (複雜度適配)
        └── 定期備份服務 (智慧化管理)
```

### 2.2 功能對比表

| 功能類別 | LINE OA | APP |
|---------|---------|-----|
| **基礎記帳** | ✅ | ✅ |
| **查詢記錄** | ✅ (簡易) | ✅ (進階) |
| **資料同步** | ✅ | ✅ |
| **專案帳戶** | ❌ | ✅ |
| **分類帳戶** | ❌ | ✅ |
| **預算管理** | ❌ | ✅ |
| **共享帳本** | ❌ | ✅ |
| **報表產出** | ❌ | ✅ |
| **數據分析** | ❌ | ✅ |
| **自動備份** | ❌ | ✅ |

---

##  3. 技術架構 (Technical Architecture)

### 3.1 架構總覽
**架構總覽：LINE OA / APP + Replit + Firebase**

### 3.2 展示層 (Presentation layer)

**定義**：是LCAS 2.0的前端，由LINE OA與APP(iOS, Android)組成

#### 3.2.1 LINE OA（LINE 官方帳號）
- 使用者透過 LINE 傳送文字訊息
- LINE 平台透過 Webhook 將訊息 POST 到商業邏輯層(Business layer)後儲存在資料層(Data layer)
- 使用者收到來自後端的回覆訊息

#### 3.2.2 Mobile App（iOS, Android）
- 使用Flutter開發
- App 透過應用邏輯層(AP layer)的 RESTful API 取得或傳送資料

### 3.3 應用邏輯層 (AP layer)

**定義**：是 APP （展示層）與商業邏輯層(Buseiness layer)之間的橋樑，由標準化的 API 端點與格式規格組成，提供統一的介面規範。

#### 3.3.1 API 架構設計原則
- **RESTful 設計**：遵循 REST 架構原則
- **統一格式**：標準化的請求/回應格式
- **錯誤處理**：一致的錯誤回應機制
- **版本控制**：支援 API 版本管理
- **認證授權**：統一的身份驗證機制

### 3.4 商業邏輯層 (Business layer)

**定義**：是LCAS 2.0的商業邏輯，分類成各模組群，於Replit存放、開發、維運。LINE OA平台可直接呼叫，APP端則須通過AP layer呼叫。

#### 3.4.1 LINE OA模組群（LINE OA module group）
- WH模組接收來自 LINE 平台的 Webhook 請求
- 分析使用者指令（如記帳、查帳、收支統計）
- 呼叫共用模組群進行 Firestore 資料處理
- 將結果回覆給 LINE 使用者
- **技術堆疊**：Node.js + Express + Firebase Admin SDK

#### 3.4.2 APP模組群（APP module group）
- 實作應用邏輯層(AP layer)定義的 RESTful API 端點
- 驗證 Firebase Token 或 JWT以確保身份安全
- 呼叫共用模組群讀寫 Firestore 資料
- 回傳標準化 JSON 結果給前端 App
- **技術堆疊**：Node.js + Express + Firebase SDK

#### 3.4.3 共用模組群（Shared module group）
- 負責管理 Firestore 資料邏輯與共用工具
- 包含資料模型（User、Ledger、GroupLedger、Notification 等）
- 提供日期處理、金額格式轉換、分類解析等工具方法
- 被LINE OA模組群與APP模組群呼叫

### 3.5 資料儲存層(Data layer)

**定義**：在LCAS 2.0負責資料存取、儲存、同步與認證。使用Firebase服務。

#### 3.5.1 Firebase Authentication
- 提供使用者身份驗證（支援 Email、Google、Apple 登入）
- 登入後產生 UID 與 Token
- 用於驗證 API 請求的合法性

#### 3.5.2 Firebase Firestore
- 文件型 NoSQL 資料庫，儲存帳本與用戶資料

#### 3.5.3 Firebase Cloud Storage
- 儲存報表檔案（如 PDF、Excel）
- 提供可下載的檔案連結給使用者（LINE 或 App）

---

##  4. LINE OA 平台

### 4.1 核心功能

#### 4.1.1 自動資料庫初始化與模式識別
**流程**:
1. 使用者加 LINE OA 為好友
2. 系統檢查 Firestore 中是否已有該用戶
3. 自動建立個人化資料庫結構

---

##  5. APP 平台規格

### 5.1 進階功能模組

#### 5.1.1 專案帳戶管理
- **多專案並行**: 一個使用者可建立多個專案帳本
- **專案分類**: 工作專案、個人專案、投資專案等
- **專案預算**: 每個專案獨立的預算管理
- **專案報表**: 獨立的專案收支分析

#### 5.1.2 分類帳戶管理
- **多維度分類**: 依時間、類別、標籤分類
- **自定義分類**: 使用者可建立專屬分類規則
- **交叉分析**: 跨分類的數據分析
- **分類預算**: 每個分類的預算控制

#### 5.1.3 預算管理系統
- **月度預算**: 每月預算設定與追蹤
- **分類預算**: 各支出類別的預算限制
- **專案預算**: 專案別的預算管理
- **預算警示**: 超支預警與通知

#### 5.1.4 共享帳本協作
- **多人協作**: 團隊成員共同記帳
- **權限管理**: 不同角色的操作權限
- **即時同步**: 多人操作的即時同步
- **協作日誌**: 完整的操作歷史記錄

### 5.2 專業功能模組

#### 5.2.1 報表產出引擎
- **標準報表**: 損益表、現金流量表、資產負債表
- **自定義報表**: 使用者自定義報表格式
- **多格式輸出**: PDF、Excel、CSV 格式
- **定期報表**: 自動產生週/月/季/年報表

#### 5.2.2 數據分析工具
- **趨勢分析**: 收支趨勢、分類趨勢分析
- **比較分析**: 不同期間、專案、分類的比較
- **預測模型**: 基於歷史數據的支出預測
- **視覺化圖表**: 多種圖表類型的數據視覺化

#### 5.2.3 定期備份服務
- **自動備份**: 每日自動備份至雲端
- **手動備份**: 使用者主動備份功能
- **備份還原**: 從備份還原資料功能
- **多雲備份**: 支援多個雲端服務商

---

##  6. 平台間整合

### 6.1 資料同步機制
- **即時同步**: Firestore 即時同步兩平台數據
- **衝突解決**: 時間戳記優先的衝突解決機制
- **離線支援**: APP 支援離線記帳，上線後同步

### 6.2 跨平台功能
- **帳號統一**: 統一的 USER_ID 系統
- **功能互補**: LINE OA 快速記帳 + APP 完整功能

---

##  7. 風險管控

### 7.1 技術風險
- **Firestore 成本控制**: 優化查詢與資料結構
- **擴展性問題**: 分散式架構設計
- **API 限制**: LINE API 使用量管控

### 7.2 產品風險
- **功能複雜度**: 分階段推出功能
- **使用者接受度**: 持續使用者回饋收集
- **競爭者威脅**: 差異化功能開發

---