
# 0090. Sprint計畫

**文件版本：** v1.0.0  
**建立日期：** 2025-01-11  
**最後更新：** 2025-01-11  
**負責人：** LCAS PM Team  

---

## 目次

1. [專案概覽](#1-專案概覽)
2. [Sprint架構說明](#2-sprint架構說明)  
3. [Phase 1: 核心進入流程建立](#3-phase-1-核心進入流程建立)
4. [Phase 2: 多帳本與協作功能](#4-phase-2-多帳本與協作功能)
5. [Phase 3: 進階記帳與科目管理](#5-phase-3-進階記帳與科目管理)
6. [Phase 4: 預算管理功能](#6-phase-4-預算管理功能)
7. [Phase 5: 報表分析功能](#7-phase-5-報表分析功能)
8. [Phase 6: AI助理與激勵系統](#8-phase-6-ai助理與激勵系統)
9. [Phase 7: 系統管理與優化](#9-phase-7-系統管理與優化)
10. [風險評估與緩解措施](#10-風險評估與緩解措施)
11. [資源規劃與時程估算](#11-資源規劃與時程估算)
12. [里程碑與驗收標準](#12-里程碑與驗收標準)

---

## 1. 專案概覽

### 1.1 專案目標
LCAS 2.0 是一個全功能的個人與家庭記帳系統，採用四層架構設計（PL-APL-BL-DL），支援LINE OA和APP雙平台操作，提供智慧記帳、多帳本管理、預算控制、報表分析等完整功能。

### 1.2 技術架構
- **PL層（展示層）：** Flutter APP + LINE OA介面
- **APL層（應用邏輯層）：** RESTful API服務
- **BL層（商業邏輯層）：** Node.js模組
- **DL層（資料層）：** Firebase Firestore + Cloud Storage

### 1.3 開發策略
採用敏捷開發方式，以7個Phase漸進式交付，每個Phase專注於特定功能領域，確保用戶價值最大化與技術風險控制。

---

## 2. Sprint架構說明

### 2.1 Phase劃分原則
1. **用戶價值優先：** 從MVP核心功能開始
2. **技術複雜度遞增：** 將高風險功能安排在後期
3. **功能完整性：** 每個Phase交付完整可用功能
4. **依賴關係考量：** 確保前置功能完成後再開發後續功能

### 2.2 四層架構對應
每個Phase均包含完整的四層實作：
- **PL層：** 用戶介面與互動體驗
- **APL層：** API規格設計與實作
- **BL層：** 核心商業邏輯模組
- **DL層：** 資料結構與儲存配置

---

## 3. Phase 1: 核心進入流程建立

### 3.1 Phase目標
建立使用者可以成功註冊、登入、進行基本記帳的完整流程，確保系統核心價值鏈可運行。

### 3.2 功能範圍

#### 3.2.1 PL層（展示層）- 基於6021文件40個畫面
- **S-101:** LINE OA 歡迎頁（統一四模式入口）
- **S-102:** APP 啟動頁
- **S-103:** APP 註冊頁（含四模式評估）
- **S-104:** APP 登入頁
- **S-105:** 忘記密碼頁
- **S-106:** 模式評估問卷頁
- **S-107:** 歡迎完成頁
- **S-108:** 主頁（四模式差異化首頁）
- **S-201:** LINE OA 記帳對話（基本文字記帳）
- **S-202:** APP 記帳主頁
- **S-203:** APP 記帳表單頁（核心記帳功能）

#### 3.2.2 APL層（應用邏輯層）
- **8101:** 認證服務 API 規格（完整實作：註冊、登入、模式評估、密碼重設）
- **8102:** 用戶管理服務 API 規格（完整實作：個人資料、模式切換、偏好設定）
- **8103:** 記帳交易服務 API 規格（完整實作：基本記帳CRUD、統計查詢）

#### 3.2.3 BL層（商業邏輯層）
- **1320. WH.js:** Webhook模組（LINE OA記帳）
- **1309. AM.js:** 帳號管理模組（認證、模式管理）
- **1301. BK.js:** 記帳核心模組（基本記帳功能）
- **1331. DD1.js:** 核心協調模組（科目管理）
- **1311. FS.js:** Firestore操作模組優化

#### 3.2.4 DL層（資料層）
- Firebase Authentication設定
- Firestore基本資料結構建立：users、ledgers、transactions集合
- 四模式用戶設定資料結構

### 3.3 驗收標準
1. **用戶註冊流程：** 完整註冊→模式評估→帳戶建立成功率 ≥ 95%
2. **登入認證：** 登入成功率 ≥ 99%，響應時間 ≤ 2秒
3. **基本記帳：** 記帳功能正常運作，支援收入/支出記錄
4. **LINE OA整合：** Webhook正常接收並處理LINE訊息
5. **四模式支援：** 不同模式用戶看到對應的首頁介面

### 3.4 風險評估
- **高風險：** Firebase設定與LINE OA整合
- **中風險：** 四模式邏輯複雜度
- **低風險：** 基本CRUD功能實作

---

## 4. Phase 2: 多帳本與協作功能

### 4.1 Phase目標
支援多帳本管理和基本協作功能，滿足家庭記帳與團體財務管理需求。

### 4.2 功能範圍

#### 4.2.1 PL層
- **S-301:** 帳本管理主頁
- **S-302:** 建立帳本頁
- **S-303:** 協作管理頁
- **S-304:** 帳戶管理主頁
- **S-305:** 建立帳戶頁

#### 4.2.2 APL層
- **8104:** 帳本管理服務 API 規格（完整實作）
- **8105:** 帳戶管理服務 API 規格（完整實作）

#### 4.2.3 BL層
- **1351. MLS.js:** 多帳本管理模組（完整實作，包含協作功能）
- **1301. BK.js:** 記帳核心模組擴展（支援多帳本、多帳戶）

#### 4.2.4 DL層
- 協作帳本資料結構
- 權限管理資料模型
- 帳戶類型與餘額管理

### 4.3 驗收標準
1. **多帳本管理：** 支援建立、編輯、刪除帳本功能
2. **協作功能：** 支援邀請成員、權限控制、共同記帳
3. **帳戶管理：** 支援多種帳戶類型（現金、銀行、信用卡等）
4. **資料隔離：** 確保不同帳本間資料完全隔離

---

## 5. Phase 3: 進階記帳與科目管理

### 5.1 Phase目標
完整實作進階記帳功能與科目管理，提升記帳效率與準確性。

### 5.2 功能範圍

#### 5.2.1 PL層
- **S-204:** 科目選擇頁
- **S-205:** 帳戶選擇頁
- **S-206:** 帳本選擇頁
- **S-207:** 圖片附加頁
- **S-208:** 重複設定頁
- **S-209:** 記錄管理頁
- **S-210:** 記錄編輯頁
- **S-306:** 科目管理主頁

#### 5.2.2 APL層
- **8106:** 科目管理服務 API 規格（完整實作）

#### 5.2.3 BL層
- **1301. BK.js:** 記帳核心模組完善（附件、重複交易功能完整實作）
- **1331. DD1.js:** 核心協調模組擴展（完整科目管理）
- **1305. SR.js:** 排程提醒模組（重複交易完整實作）

#### 5.2.4 DL層
- 科目階層資料結構
- 附件儲存Cloud Storage配置
- 重複交易排程資料模型

### 5.3 驗收標準
1. **科目管理：** 支援階層式科目結構、自訂科目
2. **附件功能：** 支援圖片上傳、預覽、管理
3. **重複交易：** 支援週期性記錄自動建立
4. **記錄搜尋：** 支援多條件查詢與篩選

---

## 6. Phase 4: 預算管理功能

### 6.1 Phase目標
完整實作預算管理功能，協助用戶進行財務規劃與支出控制。

### 6.2 功能範圍

#### 6.2.1 PL層
- **S-307:** 預算管理主頁
- **S-308:** 建立預算頁

#### 6.2.2 APL層
- **8107:** 預算管理服務 API 規格（完整實作）

#### 6.2.3 BL層
- **1312. BM.js:** 預算管理模組（完整實作）

#### 6.2.4 DL層
- 預算資料結構與追蹤
- 預算警示資料模型

### 6.3 驗收標準
1. **預算設定：** 支援月度、年度預算設定
2. **預算追蹤：** 即時顯示預算執行進度
3. **超支警示：** 預算超支時自動提醒
4. **預算報表：** 提供預算執行分析報表

---

## 7. Phase 5: 報表分析功能

### 7.1 Phase目標
完整實作報表分析功能，提供多維度財務分析與視覺化呈現。

### 7.2 功能範圍

#### 7.2.1 PL層
- **S-211:** 統計圖表頁
- **S-401:** 報表分析主頁
- **S-402:** 報表設定頁
- **S-403:** 圖表展示頁

#### 7.2.2 APL層
- **8108:** 報表分析服務 API 規格（完整實作）

#### 7.2.3 BL層
- **1341. MRA.js:** 報表合併及分析模組（完整實作）

#### 7.2.4 DL層
- 報表快取與效能優化
- 分析維度資料模型

### 7.3 驗收標準
1. **基礎報表：** 收支統計、科目分析、趨勢圖表
2. **自訂報表：** 支援用戶自訂報表條件與格式
3. **資料匯出：** 支援PDF、Excel格式匯出
4. **效能要求：** 報表生成時間 ≤ 5秒

---

## 8. Phase 6: AI助理與激勵系統

### 8.1 Phase目標
整合AI助理提供智慧記帳建議，並建立激勵系統增加用戶黏性。

### 8.2 功能範圍

#### 8.2.1 PL層
- **S-404:** AI分析頁
- **S-501:** 激勵系統主頁
- **S-502:** 成就獎勵頁

#### 8.2.2 APL層
- **8109:** AI 助理服務 API 規格（完整實作）
- **8110:** 激勵系統服務 API 規格（完整實作）

#### 8.2.3 BL層
- **1332. DD2.js:** 智慧處理模組（AI整合）
- **激勵系統模組：** 成就系統、積分機制

#### 8.2.4 DL層
- AI學習資料結構
- 用戶行為追蹤資料模型

### 8.3 驗收標準
1. **AI建議：** 提供記帳科目智慧建議
2. **成就系統：** 多元化成就與獎勵機制
3. **用戶參與：** 提升用戶活躍度與留存率

---

## 9. Phase 7: 系統管理與優化

### 9.1 Phase目標
完善系統管理功能，優化效能與用戶體驗，準備正式上線。

### 9.2 功能範圍

#### 9.2.1 PL層
- **S-503:** 系統設定頁
- **S-601:** 備份管理頁
- **S-602:** 帳戶安全頁

#### 9.2.2 APL層
- **8111:** 系統服務 API 規格（完整實作）
- **8112:** 備份與資料管理服務 API 規格（完整實作）
- **8113:** 通知管理服務 API 規格（完整實作）

#### 9.2.3 BL層
- **1314. BS.js:** 備份服務模組（完整實作）
- **1310. DL.js:** 診斷與日誌模組優化
- **效能優化模組**

#### 9.2.4 DL層
- 系統監控與日誌
- 備份與災難恢復
- 效能優化配置

### 9.3 驗收標準
1. **系統穩定性：** 99.9% 可用性
2. **資料安全：** 完整備份與恢復機制
3. **效能指標：** API響應時間 ≤ 1秒
4. **監控告警：** 完整的系統監控體系

---

## 10. 風險評估與緩解措施

### 10.1 技術風險

#### 10.1.1 高風險項目
1. **Firebase整合複雜度**
   - 風險：設定錯誤導致功能異常
   - 緩解：建立詳細設定文檔，進行充分測試

2. **LINE OA Webhook穩定性**
   - 風險：Webhook失敗影響LINE記帳功能
   - 緩解：建立重試機制與錯誤處理流程

#### 10.1.2 中風險項目
1. **四模式邏輯複雜度**
   - 風險：模式切換邏輯錯誤
   - 緩解：建立完整測試案例與驗證流程

2. **多帳本資料隔離**
   - 風險：資料洩漏或混合
   - 緩解：建立嚴格的資料存取控制機制

### 10.2 專案風險

#### 10.2.1 進度風險
- **風險：** 功能複雜度超出預期
- **緩解：** 採用敏捷開發，及時調整功能範圍

#### 10.2.2 資源風險
- **風險：** 人力資源不足
- **緩解：** 合理安排開發優先序，必要時調整時程

---

## 11. 資源規劃與時程估算

### 11.1 人力配置建議
- **前端工程師：** 2名（Flutter + Web）
- **後端工程師：** 2名（Node.js + Firebase）
- **測試工程師：** 1名
- **產品經理：** 1名
- **系統架構師：** 1名

### 11.2 時程估算

| Phase | 預估工期 | 人力投入 | 風險等級 |
|-------|----------|----------|----------|
| Phase 1 | 6週 | 全力投入 | 高 |
| Phase 2 | 4週 | 全力投入 | 中 |
| Phase 3 | 5週 | 全力投入 | 中 |
| Phase 4 | 3週 | 部分投入 | 低 |
| Phase 5 | 4週 | 部分投入 | 中 |
| Phase 6 | 5週 | 部分投入 | 高 |
| Phase 7 | 3週 | 全力投入 | 中 |

**總計：** 30週（約7.5個月）

---

## 12. 里程碑與驗收標準

### 12.1 Phase里程碑

#### 12.1.1 Phase 1 里程碑
- **M1.1：** 用戶註冊登入功能完成（2週）
- **M1.2：** 基本記帳功能完成（4週）
- **M1.3：** LINE OA整合完成（6週）

#### 12.1.2 Phase 2 里程碑
- **M2.1：** 多帳本基礎功能完成（2週）
- **M2.2：** 協作功能完成（4週）

#### 12.1.3 後續Phase里程碑
（類似結構，每個Phase設定2-3個關鍵里程碑）

### 12.2 整體驗收標準

#### 12.2.1 功能性要求
1. **完整性：** 所有規劃功能正常運作
2. **正確性：** 核心計算邏輯準確無誤
3. **易用性：** 用戶操作直觀流暢

#### 12.2.2 非功能性要求
1. **效能：** API響應時間 ≤ 2秒
2. **可靠性：** 系統可用性 ≥ 99%
3. **安全性：** 通過安全性檢測
4. **擴展性：** 支援用戶數量擴展

---

## 變更記錄

| 版本 | 日期 | 異動內容 | 負責人 |
|------|------|----------|---------|
| v1.0.0 | 2025-01-11 | 初版建立，完整Sprint計畫 | LCAS PM Team |

---

**文件結束**
