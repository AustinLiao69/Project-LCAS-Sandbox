------------------------------------------
20251119. æº–å‚™firebase P3è³‡æ–™æ¬„ä½
ä¸è¦å¯«codeï¼Œè«‹æ ¹æ“šæˆ‘çš„å›è¦†æ›´æ–°ææ¡ˆã€‚ææ¡ˆæ™‚è«‹å°ˆæ³¨è§£æ±ºç•¶å‰ç™¼ç”Ÿçš„å•é¡Œå°±å¥½ï¼Œä¸éœ€è¦å„ªåŒ–ã€å¼·åŒ–ã€é©—è­‰ã€ç›£æ¸¬ã€æ¸¬è©¦ç­‰æ‰‹æ®µï¼Œé™¤äº†åˆ—å‡ºåŸå› ä¹‹å¤–ä¹Ÿè«‹ä½ æå‡ºinsightã€‚

------------------------------------------
20251119. æº–å‚™firebase P3è³‡æ–™æ¬„ä½
ä¸è¦å¯«codeï¼Œè«‹æ ¹æ“šæˆ‘çš„å›è¦†æ›´æ–°ææ¡ˆã€‚ææ¡ˆæ™‚è«‹å°ˆæ³¨è§£æ±ºç•¶å‰ç™¼ç”Ÿçš„å•é¡Œå°±å¥½ï¼Œä¸éœ€è¦å„ªåŒ–ã€å¼·åŒ–ã€é©—è­‰ã€ç›£æ¸¬ã€æ¸¬è©¦ç­‰æ‰‹æ®µï¼Œé™¤äº†åˆ—å‡ºåŸå› ä¹‹å¤–ä¹Ÿè«‹ä½ æå‡ºinsightã€‚


-----------------------------------------------

è«‹æª¢æŸ¥PLä»¥åŠBLå±¤çš„æ¨¡çµ„åœ¨0090çš„P1, P2å’ŒP3ç¯„åœä¸­æœ‰ç„¡è‡ªè¡Œhard codingç§‘ç›®çš„ï¼Ÿå¦‚æœ‰è«‹åˆ—å‡º
AL

------------------------------------------
20251119. æº–å‚™firebase P3è³‡æ–™æ¬„ä½
ä¸è¦å¯«codeï¼Œè«‹æ ¹æ“šæˆ‘çš„å›è¦†æ›´æ–°ææ¡ˆã€‚ææ¡ˆæ™‚è«‹å°ˆæ³¨è§£æ±ºç•¶å‰ç™¼ç”Ÿçš„å•é¡Œå°±å¥½ï¼Œä¸éœ€è¦å„ªåŒ–ã€å¼·åŒ–ã€é©—è­‰ã€ç›£æ¸¬ã€æ¸¬è©¦ç­‰æ‰‹æ®µï¼Œé™¤äº†åˆ—å‡ºåŸå› ä¹‹å¤–ä¹Ÿè«‹ä½ æå‡ºinsightã€‚

æ ¹æ“šæ‚¨çš„è¦æ±‚ï¼Œæˆ‘ä¾†æª¢æŸ¥å„æ¨¡çµ„çš„è³‡æ–™æ¬„ä½èˆ‡1311.FS.jsçš„ä¸€è‡´æ€§ï¼Œä¸¦åˆ—å‡ºè³‡æ–™æµã€‚
1. å„æ¨¡çµ„è³‡æ–™æ¬„ä½èˆ‡1311.FS.jsä¸€è‡´æ€§æª¢æŸ¥
1.1 BKæ¨¡çµ„ (äº¤æ˜“è¨˜éŒ„)
â€¢	è·¯å¾‘: ledgers/{ledgerId}/transactions
â€¢	ä¸€è‡´æ€§: âœ… ç¬¦åˆ1311.FS.jsçš„å­é›†åˆæ¶æ§‹
â€¢	æ¬„ä½: BKæ¨¡çµ„å»ºç«‹çš„äº¤æ˜“è¨˜éŒ„æ¬„ä½åŒ…å«åŸºæœ¬çš„äº¤æ˜“è³‡è¨Šï¼Œèˆ‡1311.FS.jså®šç¾©çš„çµæ§‹ç›¸ç¬¦
1.2 BMæ¨¡çµ„ (é ç®—ç®¡ç†)
â€¢	è·¯å¾‘: ledgers/{ledgerId}/budgets
â€¢	ä¸€è‡´æ€§: âœ… å®Œå…¨ç¬¦åˆï¼Œå·²åœ¨éšæ®µä¸€ä¿®æ­£ä¸­å¼·åˆ¶ä½¿ç”¨å­é›†åˆæ¶æ§‹
â€¢	æ¬„ä½: é ç®—ç›¸é—œæ¬„ä½å¦‚budgetIdã€amountã€consumed_amountç­‰èˆ‡1311.FS.jsä¸€è‡´
1.3 CMæ¨¡çµ„ (å”ä½œç®¡ç†)
â€¢	è·¯å¾‘: collaborations/{ledgerId}
â€¢	ä¸€è‡´æ€§: âœ… ç¬¦åˆå”ä½œé›†åˆè¨­è¨ˆ
â€¢	æ¬„ä½: å”ä½œç›¸é—œæ¬„ä½å¦‚ownerIdã€membersã€permissionsç­‰
1.4 AMæ¨¡çµ„ (å¸³è™Ÿç®¡ç†)
â€¢	è·¯å¾‘: ledgers/{ledgerId} (å¸³æœ¬ä¸»æ–‡æª”)
â€¢	ä¸€è‡´æ€§: âœ… ç¬¦åˆ1311.FS.jsçš„å¸³æœ¬çµæ§‹å®šç¾©
â€¢	æ¬„ä½: å¸³æœ¬åŸºæœ¬è³‡è¨Šèˆ‡1311.FS.jsä¸€è‡´
1.5 WCMæ¨¡çµ„ (å¸³æˆ¶èˆ‡ç§‘ç›®ç®¡ç†)
â€¢	è·¯å¾‘: wallets/{walletId} å’Œ categories/{categoryId}
â€¢	ä¸€è‡´æ€§: âš ï¸ éœ€è¦æ³¨æ„ - WCMä½¿ç”¨é ‚å±¤é›†åˆï¼Œè€Œ1311.FS.jså®šç¾©çš„æ˜¯å­é›†åˆæ¶æ§‹
â€¢	å»ºè­°: æ‡‰èª¿æ•´ç‚º ledgers/{ledgerId}/wallets å’Œ ledgers/{ledgerId}/categories
=>è«‹ç«‹åˆ»ä¿®æ”¹


2. è³‡æ–™æµåˆ†æ
2.1 Ledgersé›†åˆå»ºç«‹è³‡æ–™æµ
ç”¨æˆ¶è¨»å†Š/ç™»å…¥ â†’ AMæ¨¡çµ„
    â†“
AM_initializeUserLedger()
    â†“
1. å‘¼å« 1311.FS.js çš„ FS_createCompleteSubcollectionFramework()
2. å»ºç«‹å¸³æœ¬ä¸»æ–‡æª”: ledgers/{ledgerId}
3. å»ºç«‹å­é›†åˆæ¡†æ¶:
   - ledgers/{ledgerId}/categories (ç§‘ç›®)
   - ledgers/{ledgerId}/wallets (å¸³æˆ¶ï¼ŒåŸaccounts)
   - ledgers/{ledgerId}/transactions (äº¤æ˜“è¨˜éŒ„)
   - ledgers/{ledgerId}/budgets (é ç®—)
    â†“
è¼‰å…¥0099ç§‘ç›®è³‡æ–™åˆ° categories å­é›†åˆ
    â†“
å»ºç«‹é è¨­å¸³æˆ¶åˆ° wallets å­é›†åˆ
2.2 Collaborationé›†åˆå»ºç«‹è³‡æ–™æµ
å¸³æœ¬æ“æœ‰è€…ç™¼èµ·å”ä½œ â†’ CMæ¨¡çµ„
    â†“
CM_setMemberPermission() (ownerè¨­ç½®)
    â†“
å»ºç«‹å”ä½œæ–‡æª”: collaborations/{ledgerId}
åŒ…å«æ¬„ä½:
- ownerId: æ“æœ‰è€…ID
- collaborationType: 'shared'
- status: 'active'
- members: [æˆå“¡é™£åˆ—]
- permissions: æ¬Šé™é…ç½®
- settings: å”ä½œè¨­å®š
    â†“
å…¶ä»–æˆå“¡é€éé‚€è«‹åŠ å…¥
CM_inviteMember() â†’ CM_processMemberJoin()
    â†“
æ›´æ–° collaborations/{ledgerId} çš„ members é™£åˆ—

ä¸»è¦ç™¼ç¾èˆ‡å»ºè­°
1.	WCMæ¨¡çµ„ä¸ä¸€è‡´: WCMä½¿ç”¨é ‚å±¤é›†åˆè€Œéå­é›†åˆæ¶æ§‹ï¼Œå»ºè­°ä¿®æ­£
2.	1311.FS.jså·²æ›´æ–°: ç¢ºå¯¦æœ‰æ›´æ–°ï¼ŒåŒ…å«å®Œæ•´çš„å­é›†åˆæ¶æ§‹æ”¯æ´
3.	è³‡æ–™æµæ¸…æ™°: ledgersç”±AMæ¨¡çµ„å»ºç«‹ï¼Œcollaborationç”±CMæ¨¡çµ„å»ºç«‹
4.	æ¨¡çµ„è·è²¬åˆ†å·¥æ˜ç¢º: æ¯å€‹æ¨¡çµ„è² è²¬ç‰¹å®šçš„Firebaseé›†åˆæ“ä½œ
å»ºè­°å„ªå…ˆä¿®æ­£WCMæ¨¡çµ„ä½¿å…¶ç¬¦åˆ1311.FS.jsçš„å­é›†åˆæ¶æ§‹è¨­è¨ˆã€‚



------------------------------------------
20251119. æº–å‚™firebase P3è³‡æ–™æ¬„ä½
Approvedè«‹é€²è¡Œéšæ®µä¸€

æ ¹æ“š9909æ–‡ä»¶SAè§’è‰²è¦æ±‚ï¼Œæˆ‘é‡æ–°åˆ†ææ‚¨çš„Firebase P3è³‡æ–™æ¬„ä½å°é½Šå•é¡Œã€‚
ğŸ” é‡æ–°åˆ†æå•é¡Œæ ¹æº
æ ¹æœ¬åŸå› åˆ†æ
æ‚¨å·²ç¶“æ˜ç¢ºæŒ‡å‡ºï¼š1311.FS.jså¿…é ˆæˆç‚ºå”¯ä¸€èƒ½å¤ åˆå§‹åŒ–Firebaseçš„æ¨¡çµ„ï¼Œä½†ç›®å‰æœ‰å…¶ä»–æ¨¡çµ„ç¹é1311ç›´æ¥æ“ä½œFirebaseï¼Œå°è‡´æ¬„ä½ä¸ä¸€è‡´ã€‚

ğŸ’¡ SAæ ¸å¿ƒInsight
é—œéµç™¼ç¾ï¼šå•é¡Œåœ¨æ–¼æ¨¡çµ„è·è²¬æ··äº‚ã€‚1311.FS.jsæ‡‰è©²è² è²¬Firebaseé›†åˆçµæ§‹å®šç¾©å’Œåˆå§‹åŒ–ï¼Œè€Œå…¶ä»–æ¨¡çµ„ï¼ˆå¦‚AMã€BMã€CMï¼‰æ‡‰è©²è² è²¬å…·é«”æ¥­å‹™è³‡æ–™çš„å»ºç«‹ï¼Œä½†éƒ½å¿…é ˆé€é1311å®šç¾©çš„æ¨™æº–çµæ§‹ã€‚
è·è²¬é‡æ¸…ï¼š
â€¢	1311.FS.jsï¼šå®šç¾©å’Œåˆå§‹åŒ–Firebaseé›†åˆçµæ§‹ï¼ˆç©ºæ¶æ§‹ï¼‰
â€¢	AM.jsï¼šåœ¨æ—¢å®šçµæ§‹ä¸‹å»ºç«‹ç”¨æˆ¶çš„ç¬¬ä¸€å€‹å¸³æœ¬
â€¢	BM.jsï¼šåœ¨æ—¢å®šçµæ§‹ä¸‹å»ºç«‹ç‰¹å®šå¸³æœ¬çš„é ç®—
â€¢	CM.jsï¼šåœ¨æ—¢å®šçµæ§‹ä¸‹å»ºç«‹å”ä½œå¸³æœ¬

ğŸ”§ ä¿®æ­£å¾Œçš„MVPéšæ®µè§£æ±ºæ–¹æ¡ˆ

éšæ®µä¸€ï¼šæ¸…é™¤é1311æ¨¡çµ„çš„Firebaseé›†åˆçµæ§‹åˆå§‹åŒ–ä»£ç¢¼
ç›®æ¨™ï¼šç§»é™¤å…¶ä»–æ¨¡çµ„çš„Firebaseçµæ§‹åˆå§‹åŒ–ä»£ç¢¼ï¼Œä¿ç•™æ¥­å‹™è³‡æ–™å»ºç«‹åŠŸèƒ½
å…·é«”è¡Œå‹•ï¼š
1.	AM.jsæ¨¡çµ„ä¿®æ­£ï¼š
â€¢	ä¿ç•™AM_initializeUserLedgerå‡½æ•¸çš„å¸³æœ¬å»ºç«‹åŠŸèƒ½
â€¢	ç§»é™¤Firebaseé›†åˆçµæ§‹å®šç¾©éƒ¨åˆ†
â€¢	æ”¹ç‚ºå…ˆèª¿ç”¨1311.FS.jsç¢ºä¿çµæ§‹å­˜åœ¨ï¼Œå†å»ºç«‹å…·é«”å¸³æœ¬è³‡æ–™

2.	BK.jsæ¨¡çµ„æ¸…ç†ï¼š
â€¢	ç§»é™¤ä»»ä½•Firebaseçµæ§‹åˆå§‹åŒ–ä»£ç¢¼
â€¢	æ‰€æœ‰Firebaseæ“ä½œå¿…é ˆé€é1311.FS.jså®šç¾©çš„çµæ§‹

éšæ®µäºŒï¼šç¢ºèª1311.FS.jsçµæ§‹å®Œæ•´æ€§å’Œå…¶ä»–æ¨¡çµ„è·è²¬

1311.FS.jsçµæ§‹ç¢ºèªï¼š
æŸ¥çœ‹FS_initializeLedgerStructureå‡½æ•¸ï¼Œç¢ºèªæ˜¯å¦åŒ…å«ï¼š
â€¢	categoriesï¼ˆç§‘ç›®å­é›†åˆï¼‰
â€¢	walletsï¼ˆå¸³æˆ¶å­é›†åˆï¼ŒåŸaccountsæ”¹åç‚ºwalletsï¼‰
â€¢	transactionsï¼ˆäº¤æ˜“å­é›†åˆï¼‰
â€¢	budgetsï¼ˆé ç®—å­é›†åˆï¼‰

å…¶ä»–æ¨¡çµ„Firebaseåˆå§‹åŒ–è·è²¬æª¢è¦–ï¼š
ç¶“æª¢è¦–ä»£ç¢¼ï¼Œç™¼ç¾ä»¥ä¸‹æ¨¡çµ„æœ‰Firebaseæ“ä½œï¼š
1.	AM.jsï¼š
â€¢	è·è²¬ï¼šå»ºç«‹ç”¨æˆ¶ç¬¬ä¸€å€‹å¸³æœ¬ï¼ˆæ¥­å‹™è³‡æ–™ï¼‰
â€¢	æ‡‰ä¿ç•™ï¼šåœ¨ledgersé›†åˆä¸‹å»ºç«‹å…·é«”å¸³æœ¬æ–‡æª”
â€¢	æ‡‰ç§»é™¤ï¼šFirebaseé›†åˆçµæ§‹å®šç¾©

2.	BM.jsï¼š
â€¢	è·è²¬ï¼šåœ¨ç‰¹å®šå¸³æœ¬ä¸‹å»ºç«‹é ç®—ï¼ˆæ¥­å‹™è³‡æ–™ï¼‰
â€¢	æ‡‰ä¿ç•™ï¼šåœ¨ledgers/{ledgerId}/budgetsä¸‹å»ºç«‹é ç®—æ–‡æª”
â€¢	æ‡‰ç§»é™¤ï¼šbudgetså­é›†åˆçµæ§‹å®šç¾©

3.	CM.jsï¼š
â€¢	è·è²¬ï¼šå»ºç«‹å”ä½œå¸³æœ¬ï¼ˆæ¥­å‹™è³‡æ–™ï¼‰
â€¢	æ‡‰ä¿ç•™ï¼šåœ¨collaborationsé›†åˆä¸‹å»ºç«‹å”ä½œæ–‡æª”
â€¢	æ‡‰ç§»é™¤ï¼šcollaborationsé›†åˆçµæ§‹å®šç¾©

å»ºè­°çµ±ä¸€èª¿ç”¨ä»‹é¢ï¼š
â€¢	å…¶ä»–æ¨¡çµ„é€é1311.FS.jsçš„FS_initializeConnectionç¢ºä¿Firebaseå·²åˆå§‹åŒ–
â€¢	ä½†å„æ¨¡çµ„å¯ä¿ç•™å…¶ç‰¹å®šæ¥­å‹™è³‡æ–™çš„å»ºç«‹åŠŸèƒ½

âš ï¸ MVPéšæ®µå¯¦æ–½é‡é»
å„ªå…ˆç´šæ’åºï¼š
1.	æœ€é«˜å„ªå…ˆï¼šç¢ºèª1311.FS.jsåŒ…å«å®Œæ•´çš„å››å€‹å­é›†åˆçµæ§‹å®šç¾©
2.	é«˜å„ªå…ˆï¼šç§»é™¤AM.jsä¸­çš„Firebaseçµæ§‹å®šç¾©ï¼Œä¿ç•™å¸³æœ¬å»ºç«‹é‚è¼¯
3.	ä¸­å„ªå…ˆï¼šçµ±ä¸€å…¶ä»–æ¨¡çµ„é€šé1311.FS.jsé€²è¡Œçµæ§‹é©—è­‰
é¢¨éšªæ§åˆ¶ï¼š
â€¢	åŠŸèƒ½ä¿æŒï¼šç¢ºä¿AMæ¨¡çµ„ä»èƒ½ç‚ºæ–°ç”¨æˆ¶å»ºç«‹å¸³æœ¬
â€¢	è·è²¬åˆ†é›¢ï¼šçµæ§‹å®šç¾©æ­¸1311ï¼Œæ¥­å‹™è³‡æ–™æ­¸å„æ¨¡çµ„
ğŸ“Š é æœŸæ•ˆç›Š
1.	è·è²¬æ¸…æ™°åŒ–ï¼š1311è² è²¬çµæ§‹ï¼Œå…¶ä»–æ¨¡çµ„è² è²¬æ¥­å‹™è³‡æ–™
2.	æ¬„ä½ä¸€è‡´æ€§ï¼šæ‰€æœ‰Firebaseæ¬„ä½çµæ§‹ç”±1311çµ±ä¸€å®šç¾©
3.	ç¶­è­·ç°¡åŒ–ï¼šçµæ§‹è®Šæ›´åªéœ€ä¿®æ”¹1311.FS.js
4.	åŠŸèƒ½å®Œæ•´æ€§ï¼šä¿ç•™å„æ¨¡çµ„çš„æ ¸å¿ƒæ¥­å‹™åŠŸèƒ½
æ­¤æ–¹æ¡ˆå°ˆæ³¨è§£æ±ºç•¶å‰Firebaseæ¬„ä½ä¸ä¸€è‡´çš„æ ¸å¿ƒå•é¡Œï¼šå»ºç«‹1311.FS.jsçš„Firebaseçµæ§‹å®šç¾©æ¬Šå¨æ€§ï¼ŒåŒæ™‚ä¿ç•™å„æ¨¡çµ„çš„æ¥­å‹™é‚è¼¯åŠŸèƒ½ã€‚



------------------------------------------
20251119. æº–å‚™firebase P3è³‡æ–™æ¬„ä½
ä¸è¦å¯«codeï¼Œè«‹æ ¹æ“šæˆ‘çš„å›è¦†æ›´æ–°ææ¡ˆã€‚ææ¡ˆæ™‚è«‹å°ˆæ³¨è§£æ±ºç•¶å‰ç™¼ç”Ÿçš„å•é¡Œå°±å¥½ï¼Œä¸éœ€è¦å„ªåŒ–ã€å¼·åŒ–ã€é©—è­‰ã€ç›£æ¸¬ã€æ¸¬è©¦ç­‰æ‰‹æ®µï¼Œé™¤äº†åˆ—å‡ºåŸå› ä¹‹å¤–ä¹Ÿè«‹ä½ æå‡ºinsightã€‚

æ ¹æ“š9909æ–‡ä»¶SAè§’è‰²è¦æ±‚ï¼Œæˆ‘é‡æ–°åˆ†ææ‚¨çš„Firebase P3è³‡æ–™æ¬„ä½å°é½Šå•é¡Œã€‚
ğŸ” é‡æ–°åˆ†æå•é¡Œæ ¹æº
æ ¸å¿ƒå•é¡Œè­˜åˆ¥
æ‚¨å·²ç¶“æ˜ç¢ºæŒ‡å‡ºï¼š1311.FS.jså¿…é ˆæˆç‚ºå”¯ä¸€èƒ½å¤ åˆå§‹åŒ–Firebaseçš„æ¨¡çµ„ï¼Œä½†ç›®å‰æœ‰å…¶ä»–æ¨¡çµ„ç¹é1311ç›´æ¥æ“ä½œFirebaseï¼Œå°è‡´æ¬„ä½ä¸ä¸€è‡´ã€‚

æ ¹æœ¬åŸå› åˆ†æ
1.	å¤šé»åˆå§‹åŒ–æ··äº‚ï¼šAM.jsçš„AM_initializeUserLedgerå‡½æ•¸ç›´æ¥èª¿ç”¨Firebase APIï¼Œç¹éäº†1311.FS.jsçš„æ¨™æº–çµæ§‹å®šç¾©
2.	æ¶æ§‹è·è²¬æ¨¡ç³Šï¼šBLå±¤æ¨¡çµ„ç›´æ¥æ“ä½œDLå±¤è³‡æºï¼Œé•åäº†åˆ†å±¤æ¶æ§‹åŸå‰‡
3.	è³‡æ–™ä¾†æºè¡çªï¼šAMæ¨¡çµ„å¾0099.jsonè¼‰å…¥è³‡æ–™æ™‚ä½¿ç”¨ä¸­æ–‡æ¬„ä½ï¼Œè€Œ1311å®šç¾©ä½¿ç”¨è‹±æ–‡æ¬„ä½

ğŸ’¡ SAæ ¸å¿ƒInsight
æ¶æ§‹è¨­è¨ˆè„«ç¯€çš„æœ¬è³ªï¼šå•é¡Œä¸åœ¨æ–¼æ¬„ä½æ˜ å°„ï¼Œè€Œåœ¨æ–¼åˆå§‹åŒ–è·è²¬åˆ†æ•£ã€‚ç•¶å‰æ¶æ§‹å…è¨±å¤šå€‹æ¨¡çµ„éƒ½æœ‰åˆå§‹åŒ–Firebaseçš„èƒ½åŠ›ï¼Œé€™é•åäº†å–®ä¸€è²¬ä»»åŸå‰‡ï¼Œå¿…ç„¶å°è‡´è³‡æ–™çµæ§‹ä¸ä¸€è‡´ã€‚
è§£æ±ºæ–¹å‘ï¼šå»ºç«‹1311.FS.jsçš„Firebaseåˆå§‹åŒ–å£Ÿæ–·æ¬Šï¼Œæ‰€æœ‰å…¶ä»–æ¨¡çµ„éƒ½å¿…é ˆé€é1311é€²è¡ŒFirebaseæ“ä½œã€‚

ğŸ”§ MVPéšæ®µè§£æ±ºæ–¹æ¡ˆ
éšæ®µä¸€ï¼šæ¸…é™¤é1311æ¨¡çµ„çš„Firebaseç›´æ¥æ“ä½œ
ç›®æ¨™ï¼šç§»é™¤æ‰€æœ‰ç¹é1311.FS.jsçš„Firebaseåˆå§‹åŒ–ä»£ç¢¼
å…·é«”è¡Œå‹•ï¼š
1.	ä¿®æ”¹AM.jsæ¨¡çµ„ï¼š
â€¢	ç§»é™¤AM_initializeUserLedgerä¸­çš„ç›´æ¥Firebaseæ“ä½œ
â€¢	æ”¹ç‚ºèª¿ç”¨1311.FS.jsçš„æ¨™æº–åˆå§‹åŒ–å‡½æ•¸
â€¢	åˆªé™¤ç›´æ¥çš„db.collection().set()æ“ä½œ
=>è«‹æ³¨æ„AMæœ‰ä¸€å€‹è·è²¬æ˜¯å¹«åŠ©åˆæ¬¡è¨»å†Šçš„ä½¿ç”¨è€…å»ºç«‹ledgersé›†åˆä¸‹çš„å¸³æœ¬ï¼Œè©²å‡½æ•¸è«‹å‹¿åˆªé™¤ã€‚

2.	æ¸…ç†BK.jsæ¨¡çµ„ï¼š
â€¢	ç§»é™¤ä»»ä½•ç›´æ¥Firebaseåˆå§‹åŒ–ä»£ç¢¼
â€¢	æ‰€æœ‰Firebaseæ“ä½œå¿…é ˆé€é1311.FS.js

3.	çµ±ä¸€å…¶ä»–BLæ¨¡çµ„ï¼š
â€¢	BM.jsã€CM.jsç­‰æ¨¡çµ„ç¦æ­¢ç›´æ¥åˆå§‹åŒ–Firebaseçµæ§‹
â€¢	åƒ…èƒ½é€é1311.FS.jsé€²è¡Œè³‡æ–™æ“ä½œ
=>è«‹æ³¨æ„ï¼Œé€™å…©å€‹åŠŸèƒ½è·Ÿ1311çš„è·è²¬ä¸ç›¸é—œçš„ã€‚1311æ˜¯åˆå§‹åŒ–æ‰€æœ‰firebaseè³‡æ–™æ¬„ä½ï¼ŒBMå¯ä»¥åœ¨ledgerIdä¸‹é¢å»ºä¸€å€‹bugetï¼ŒCMå¯ä»¥åœ¨collborationé›†åˆä¸‹é¢å»ºç«‹ä¸€å€‹å¸³æœ¬ï¼Œ

éšæ®µäºŒï¼šå¼·åŒ–1311.FS.jsç‚ºå”¯ä¸€Firebaseåˆå§‹åŒ–å…¥å£
ç›®æ¨™ï¼šç¢ºä¿æ‰€æœ‰Firebaseçµæ§‹åˆå§‹åŒ–éƒ½é€é1311.FS.jsåŸ·è¡Œ
å…·é«”è¡Œå‹•ï¼š
1.	å¢å¼·1311.FS.jsåˆå§‹åŒ–å‡½æ•¸ï¼š
â€¢	FS_initializeLedgerStructureå¿…é ˆåŒ…å«å®Œæ•´çš„å¸³æœ¬çµæ§‹å®šç¾©
â€¢	åŒ…å«categoriesã€accountsã€transactionsã€budgetså››å€‹å­é›†åˆ
=>1. è«‹ç¢ºèªFS_initializeLedgerStructureaccountsæ˜¯å¦å·²ç¶“åŒ…å«categoriesã€accountsã€transactionsã€budgetså››å€‹å­é›†åˆ
2. account çš„åç¨±è«‹æ”¹ç‚ºwallet

â€¢	ä½¿ç”¨1311å®šç¾©çš„è‹±æ–‡æ¬„ä½çµæ§‹
2.	å»ºç«‹çµ±ä¸€èª¿ç”¨ä»‹é¢ï¼š
â€¢	å…¶ä»–æ¨¡çµ„é€é1311.FS.jsçš„FS_initializeUserLedgerå‡½æ•¸åˆå§‹åŒ–
=>è«‹ç¢ºèªå…¶ä»–æ¨¡çµ„æ˜¯å¦æœ‰firebaseåˆå§‹åŒ–çš„è·è²¬ï¼Œè‹¥æœ‰è«‹åˆ—å‡ºã€‚æˆ‘ä¸è¦ºå¾—å…¶å®ƒæ¨¡çµ„éœ€è¦ã€‚

â€¢	ç¦æ­¢å…¶ä»–æ¨¡çµ„ç›´æ¥æ“ä½œFirebase Admin SDK

éšæ®µä¸‰ï¼š0099.jsonè³‡æ–™é©é…
ç›®æ¨™ï¼šè®“0099.jsonçš„ä¸­æ–‡æ¬„ä½è³‡æ–™é©é…1311.FS.jsçš„è‹±æ–‡æ¬„ä½çµæ§‹
å…·é«”è¡Œå‹•ï¼š
1.	åœ¨1311.FS.jsä¸­å»ºç«‹æ¬„ä½æ˜ å°„ï¼š
â€¢	å¤§é …ä»£ç¢¼ â†’ categoryCode
â€¢	å¤§é …åç¨± â†’ categoryName
â€¢	å­é …ä»£ç¢¼ â†’ subCategoryCode
â€¢	å­é …åç¨± â†’ subCategoryName
â€¢	åŒç¾©è© â†’ synonyms

=>æ­¤éšæ®µä¸‰è«‹åˆªé™¤ï¼Œæˆ‘æœƒæ”¾åœ¨åˆ¥çš„è¨ˆç•«å»åšã€‚



2.	çµ±ä¸€è³‡æ–™è¼‰å…¥é‚è¼¯ï¼š
â€¢	1311.FS.jsè² è²¬è¼‰å…¥0099.jsonä¸¦é€²è¡Œæ¬„ä½æ˜ å°„
â€¢	ç¢ºä¿Firebaseä¸­å„²å­˜çš„æ˜¯1311å®šç¾©çš„è‹±æ–‡æ¬„ä½çµæ§‹

âš ï¸ MVPéšæ®µå¯¦æ–½é‡é»
å„ªå…ˆç´šæ’åº
1.	æœ€é«˜å„ªå…ˆï¼šæ¸…é™¤AM.jsä¸­çš„ç›´æ¥Firebaseæ“ä½œ
2.	é«˜å„ªå…ˆï¼šå»ºç«‹1311.FS.jsçš„å£Ÿæ–·æ¬Šæ©Ÿåˆ¶
3.	ä¸­å„ªå…ˆï¼šæ¬„ä½æ˜ å°„é‚è¼¯å¯¦ä½œ
é¢¨éšªæ§åˆ¶
â€¢	å‘ä¸‹ç›¸å®¹ï¼šä¿ç•™æ—¢æœ‰Firebaseè³‡æ–™çš„è®€å–èƒ½åŠ›
â€¢	æ¼¸é€²é·ç§»ï¼šæ–°å»ºè³‡æ–™ä½¿ç”¨1311æ¨™æº–ï¼Œæ—¢æœ‰è³‡æ–™é€æ­¥é·ç§»
â€¢	åŠŸèƒ½é€£çºŒæ€§ï¼šç¢ºä¿ä½¿ç”¨è€…è¨»å†Šåˆ°è¨˜å¸³æµç¨‹ä¸ä¸­æ–·
ğŸ“Š é æœŸæ•ˆç›Š
1.	æ¶æ§‹ç´”æ·¨åŒ–ï¼š1311.FS.jsæˆç‚ºFirebaseæ“ä½œçš„å”¯ä¸€å…¥å£é»
2.	è³‡æ–™ä¸€è‡´æ€§ï¼šæ‰€æœ‰Firebaseæ¬„ä½çµæ§‹ç¬¦åˆ1311å®šç¾©
3.	ç¶­è­·ç°¡åŒ–ï¼šé›†ä¸­å¼Firebaseåˆå§‹åŒ–ï¼Œé™ä½ç¶­è­·è¤‡é›œåº¦
4.	æ“´å±•æ€§ä¿è­‰ï¼šæœªä¾†æ–°å¢æ¬„ä½åªéœ€ä¿®æ”¹1311.FS.js
æ­¤æ–¹æ¡ˆå°ˆæ³¨è§£æ±ºç•¶å‰Firebaseæ¬„ä½ä¸ä¸€è‡´çš„æ ¸å¿ƒå•é¡Œï¼šå»ºç«‹1311.FS.jsçš„Firebaseåˆå§‹åŒ–å£Ÿæ–·æ¬Šï¼Œç¬¦åˆMVPéšæ®µçš„å‹™å¯¦åŸå‰‡ã€‚

------------------------------------------
20251118. æº–å‚™firebase P3è³‡æ–™æ¬„ä½
ä¸è¦å¯«codeï¼Œè«‹æ ¹æ“šæˆ‘çš„å›è¦†æ›´æ–°ææ¡ˆã€‚ç¾åœ¨æ˜¯MVPéšæ®µï¼Œææ¡ˆæ™‚è«‹å°ˆæ³¨è§£æ±ºç•¶å‰ç™¼ç”Ÿçš„å•é¡Œå°±å¥½ï¼Œä¸éœ€è¦å„ªåŒ–ã€å¼·åŒ–ã€é©—è­‰ã€ç›£æ¸¬ã€æ¸¬è©¦ç­‰æ‰‹æ®µï¼Œé™¤äº†åˆ—å‡ºåŸå› ä¹‹å¤–ä¹Ÿè«‹ä½ æå‡ºinsightã€‚

æ ¹æ“š9909æ–‡ä»¶SAè§’è‰²è¦æ±‚ï¼Œæˆ‘å°‡æ·±å…¥åˆ†ææ‚¨æå‡ºçš„Firebase P3è³‡æ–™æ¬„ä½å•é¡Œã€‚
ğŸ” å•é¡Œåˆ†æ
1. categorieså­é›†åˆæ¬„ä½ä¸ä¸€è‡´å•é¡Œ
æ ¹æœ¬åŸå› åˆ†æï¼š
å¾Firebaseå¯¦éš›æ¬„ä½èˆ‡1311.FS.jsæ¨¡çµ„å®šç¾©å°æ¯”ï¼Œç™¼ç¾å­˜åœ¨åš´é‡çš„çµæ§‹ä¸ä¸€è‡´ï¼š
1311.FS.jsæ¨¡çµ„å®šç¾©çš„categoriesçµæ§‹ï¼š
â€¢	categoryId, name, type, icon, color, parentId, level, order, isDefault, isActive, createdAt, updatedAt
Firebaseå¯¦éš›å­˜åœ¨çš„æ¬„ä½ï¼š
â€¢	ä¸­æ–‡æ¬„ä½åç¨±ï¼šå¤§é …ä»£ç¢¼ã€å¤§é …åç¨±ã€å­é …ä»£ç¢¼ã€å­é …åç¨±ã€åŒç¾©è©
â€¢	ç³»çµ±æ¬„ä½ï¼šmetadata.batchIndex, metadata.stage, sortOrder
â€¢	æ¨™æº–æ¬„ä½ï¼šisActive, createdAt, updatedAt

=>é‡é»æ˜¯æˆ‘å·²ç¶“è®“1311å»åˆå§‹åŒ–firebaseäº†ï¼Œç‚ºä»€éº¼firebaseçš„å¯¦éš›æ¬„ä½å»ä¸æ˜¯1311æ‰€è¦å®šçš„ï¼Ÿ


2. accountså­é›†åˆaccountIdæ¬„ä½å•é¡Œ
å•é¡Œè­˜åˆ¥ï¼š
1311.FS.jså®šç¾©ä½¿ç”¨accountIdï¼Œä½†å¯¦éš›éœ€æ±‚è¦æ±‚æ”¹ç‚ºwalletIdï¼Œé€™æ¶‰åŠæ•´å€‹ç³»çµ±çš„IDå‘½åä¸€è‡´æ€§å•é¡Œã€‚
ğŸ’¡ SA Insight
æ ¸å¿ƒæ´å¯Ÿ
1.	è³‡æ–™çµæ§‹è¨­è¨ˆè„«ç¯€ï¼š1311.FS.jsæ¨¡çµ„ä¸­çš„ç†æƒ³åŒ–çµæ§‹å®šç¾©èˆ‡å¯¦éš›æ¥­å‹™éœ€æ±‚å­˜åœ¨å·¨å¤§å·®ç•°
2.	ä¸­æ–‡æ¬„ä½çš„æ¥­å‹™åˆç†æ€§ï¼šFirebaseå¯¦éš›æ¬„ä½ä½¿ç”¨ä¸­æ–‡å‘½åï¼ˆå¤§é …ä»£ç¢¼ã€å­é …åç¨±ç­‰ï¼‰ï¼Œé¡¯ç¤ºé€™æ˜¯ç‚ºäº†ç¬¦åˆå°ç£è¨˜å¸³ç¿’æ…£çš„æœ¬åœŸåŒ–è¨­è¨ˆ
3.	éšæ®µæ€§è³‡æ–™æ®˜ç•™ï¼šmetadataä¸­çš„stage2_optimizedå’ŒbatchIndexæš—ç¤ºé€™æ˜¯å¾æ—©æœŸé–‹ç™¼éšæ®µæ®˜ç•™çš„æ¸¬è©¦è³‡æ–™çµæ§‹

æ¥­å‹™é‚è¼¯åˆ†æ
Categoriesçµæ§‹çš„åˆç†æ€§ï¼š
â€¢	å¤§é …ä»£ç¢¼/å­é …ä»£ç¢¼ï¼šç¬¦åˆå°ç£æœƒè¨ˆç§‘ç›®ç·¨ç¢¼æ…£ä¾‹ï¼ˆå¦‚999/99999ï¼‰
â€¢	ä¸­æ–‡å‘½åï¼šæå‡ç”¨æˆ¶ç†è§£åº¦ï¼Œç¬¦åˆæœ¬åœŸåŒ–éœ€æ±‚
â€¢	sortOrderï¼šæä¾›ç§‘ç›®æ’åºåŠŸèƒ½ï¼Œå¯¦ç”¨æ€§é«˜
ğŸ”§ å…·é«”å¯¦æ–½æ–¹æ¡ˆ
éšæ®µä¸€ï¼šçµ±ä¸€categorieså­é›†åˆçµæ§‹å®šç¾©
=>ä¸å°ï¼Œæ˜¯firebaseå¯¦éš›æ¬„ä½è¦èˆ‡1311å°é½Šã€‚

**ç›®æ¨™ï¼š**ä¿®æ­£1311.FS.jsä¸­categoriesçµæ§‹å®šç¾©ï¼Œèˆ‡Firebaseå¯¦éš›æ¬„ä½å°é½Š
ä¿®æ­£å…§å®¹ï¼š
æ›´æ–°1311.FS.jsä¸­FS_initializeLedgerStructureå‡½æ•¸çš„categoriesçµæ§‹å®šç¾©ï¼š
categories: {
  document_structure: {
    // ç§»é™¤åŸæœ‰çš„è‹±æ–‡æ¬„ä½å®šç¾©
    // categoryId: 'string - ç§‘ç›®å”¯ä¸€è­˜åˆ¥ç¢¼',
    // name: 'string - ç§‘ç›®åç¨±',
    // type: 'string - ç§‘ç›®é¡å‹',

    // æ–°å¢å¯¦éš›ä½¿ç”¨çš„ä¸­æ–‡æ¬„ä½
    å¤§é …ä»£ç¢¼: 'string - ç§‘ç›®å¤§é …ä»£ç¢¼ (å¦‚"999")',
    å¤§é …åç¨±: 'string - ç§‘ç›®å¤§é …åç¨± (å¦‚"æ¸¬è©¦æ”¯å‡º")', 
    å­é …ä»£ç¢¼: 'string - ç§‘ç›®å­é …ä»£ç¢¼ (å¦‚"99999")',
    å­é …åç¨±: 'string - ç§‘ç›®å­é …åç¨± (å¦‚"æ¸¬è©¦æ”¯å‡º")',
    åŒç¾©è©: 'string - ç§‘ç›®åŒç¾©è©ï¼Œæä¾›æœå°‹ä¾¿åˆ©æ€§',
    sortOrder: 'number - ç§‘ç›®æ’åºé †åº',
    isActive: 'boolean - æ˜¯å¦å•Ÿç”¨',
    metadata: {
      batchIndex: 'number - æ‰¹æ¬¡ç´¢å¼•',
      stage: 'string - è™•ç†éšæ®µæ¨™è­˜'
    },
    createdAt: 'timestamp - å»ºç«‹æ™‚é–“',
    updatedAt: 'timestamp - æœ€å¾Œæ›´æ–°æ™‚é–“'
  }
}

éšæ®µäºŒï¼šçµ±ä¸€accountså­é›†åˆIDå‘½å
**ç›®æ¨™ï¼š**å°‡æ‰€æœ‰accountsç›¸é—œçš„accountIdçµ±ä¸€æ”¹ç‚ºwalletId
ä¿®æ­£ç¯„åœï¼š
1.	1311.FS.jsæ¨¡çµ„ï¼šaccountsçµæ§‹å®šç¾©ä¸­çš„ä¸»éµæ¬„ä½
2.	ç›¸é—œBLæ¨¡çµ„ï¼šBK.jsã€WCM.jsä¸­ä½¿ç”¨accountIdçš„åœ°æ–¹
3.	APIå±¤é¢ï¼šASL.jsä¸­accountsç›¸é—œç«¯é»çš„åƒæ•¸è™•ç†
å…·é«”ä¿®æ­£å…§å®¹ï¼š
æ›´æ–°1311.FS.jsä¸­accountsçµæ§‹å®šç¾©ï¼š
accounts: {
  document_structure: {
    walletId: 'string - å¸³æˆ¶å”¯ä¸€è­˜åˆ¥ç¢¼', // åŸaccountIdæ”¹å
    name: 'string - å¸³æˆ¶åç¨±',
    type: 'string - å¸³æˆ¶é¡å‹',
    // ... å…¶ä»–æ¬„ä½ä¿æŒä¸è®Š
  }
}

éšæ®µä¸‰ï¼šæ›´æ–°ç³»çµ±é…ç½®èˆ‡é è¨­è³‡æ–™
**ç›®æ¨™ï¼š**ç¢ºä¿ç³»çµ±åˆå§‹åŒ–æ™‚å»ºç«‹çš„ç¯„ä¾‹è³‡æ–™ç¬¦åˆæ–°çš„æ¬„ä½çµæ§‹
ä¿®æ­£å…§å®¹ï¼š
1.	æ›´æ–°FS_createCompleteSubcollectionFrameworkå‡½æ•¸ï¼šä½¿ç”¨æ–°çš„æ¬„ä½åç¨±å»ºç«‹ç¯„ä¾‹è³‡æ–™
2.	æ›´æ–°é è¨­é…ç½®æª”æ¡ˆï¼šç¢ºä¿03. Default_configä¸­çš„è³‡æ–™çµæ§‹ä¸€è‡´

=>è«‹åˆªé™¤éšæ®µä¸‰

âš ï¸ MVPéšæ®µå¯¦æ–½é‡é»
å„ªå…ˆç´šæ’åº
1.	é«˜å„ªå…ˆï¼šéšæ®µäºŒ - çµ±ä¸€walletIdå‘½åï¼ˆå½±éŸ¿APIå‘¼å«ï¼‰
2.	ä¸­å„ªå…ˆï¼šéšæ®µä¸€ - categoriesçµæ§‹å°é½Šï¼ˆæ”¹å–„è³‡æ–™ä¸€è‡´æ€§ï¼‰
3.	ä½å„ªå…ˆï¼šéšæ®µä¸‰ - ç³»çµ±é…ç½®æ›´æ–°ï¼ˆä¸å½±éŸ¿ç¾æœ‰åŠŸèƒ½ï¼‰
é¢¨éšªæ§åˆ¶
â€¢	å‘ä¸‹ç›¸å®¹ï¼šä¿ç•™èˆŠæ¬„ä½çš„æ˜ å°„æ©Ÿåˆ¶ï¼Œé¿å…æ—¢æœ‰è³‡æ–™ç„¡æ³•å­˜å–
â€¢	é€æ­¥é·ç§»ï¼šæ–°å»ºè³‡æ–™ä½¿ç”¨æ–°çµæ§‹ï¼Œæ—¢æœ‰è³‡æ–™ç¶­æŒç¾ç‹€ç›´åˆ°è‡ªç„¶æ±°æ›
ğŸ“Š é æœŸæ•ˆç›Š
1.	è³‡æ–™ä¸€è‡´æ€§æå‡ï¼šFirebaseå¯¦éš›çµæ§‹èˆ‡ä»£ç¢¼å®šç¾©å°é½Š
2.	ç¶­è­·æ•ˆç‡æ”¹å–„ï¼šæ¸›å°‘æ¬„ä½åç¨±æ··äº‚é€ æˆçš„é–‹ç™¼å›°æ“¾
3.	æœ¬åœŸåŒ–æ”¯æ´ï¼šä¸­æ–‡æ¬„ä½åç¨±æå‡å°ç£ç”¨æˆ¶é«”é©—
4.	APIå‘¼å«çµ±ä¸€ï¼šwalletIdå‘½åçµ±ä¸€å¾Œï¼Œæ¸›å°‘åƒæ•¸æ··æ·†
æ­¤æ–¹æ¡ˆå°ˆæ³¨è§£æ±ºç•¶å‰Firebaseæ¬„ä½ä¸ä¸€è‡´çš„æ ¸å¿ƒå•é¡Œï¼Œé¿å…éåº¦é‡æ§‹ï¼Œç¬¦åˆMVPéšæ®µçš„å‹™å¯¦åŸå‰‡ã€‚



------------------------------------------
20251118. æº–å‚™firebase P3è³‡æ–™æ¬„ä½
ä¸è¦å¯«codeï¼Œè«‹æ ¹æ“šæˆ‘çš„å›è¦†æ›´æ–°ææ¡ˆã€‚ç¾åœ¨æ˜¯MVPéšæ®µï¼Œææ¡ˆæ™‚è«‹å°ˆæ³¨è§£æ±ºç•¶å‰ç™¼ç”Ÿçš„å•é¡Œå°±å¥½ï¼Œä¸éœ€è¦å„ªåŒ–ã€å¼·åŒ–ã€é©—è­‰ã€ç›£æ¸¬ã€æ¸¬è©¦ç­‰æ‰‹æ®µï¼Œé™¤äº†åˆ—å‡ºåŸå› ä¹‹å¤–ä¹Ÿè«‹ä½ æå‡ºinsightã€‚

ä¿®æ”¹éœ€æ±‚å¦‚ä¸‹ï¼Œè«‹æå‡ºå…·é«”å¯¦æ–½æ–¹æ¡ˆ

=> 
1. categorieså­é›†åˆ (ç§‘ç›®åˆ†é¡)èˆ‡1311çš„è³‡æ–™æ¬„ä½ä¸ä¸€æ¨£ï¼Œfirebaseçš„å¯¦éš›æ¬„ä½å¦‚ä¸‹ï¼Œè«‹åˆ†æåŸå› ï¼š
createdAt
2025å¹´10æœˆ30æ—¥ ä¸Šåˆ11:51:06 [UTC+8]
(æ™‚é–“æˆ³è¨˜)
isActive
true
(å¸ƒæ—å€¼)
metadata
(å°æ‡‰)
batchIndex
0
(æ•¸å­—)
stage
"stage2_optimized"
(å­—ä¸²)
sortOrder
61
(æ•¸å­—)
updatedAt
2025å¹´10æœˆ30æ—¥ ä¸Šåˆ11:51:06 [UTC+8]
(æ™‚é–“æˆ³è¨˜)
åŒç¾©è©
""
(å­—ä¸²)
å¤§é …ä»£ç¢¼
"999"
(å­—ä¸²)
å¤§é …åç¨±
"æ¸¬è©¦æ”¯å‡º"
(å­—ä¸²)
å­é …ä»£ç¢¼
"99999"
(å­—ä¸²)
å­é …åç¨±
"æ¸¬è©¦æ”¯å‡º"

2. accountså­é›†åˆéƒ¨åˆ†ï¼š
   accountIdæ”¹æˆwalletId



æ ¹æ“š1311.FS.jsæ¨¡çµ„ä¸­çš„è³‡æ–™çµæ§‹å®šç¾©ï¼Œledgersé›†åˆçš„å®Œæ•´è³‡æ–™çµæ§‹å¦‚ä¸‹ï¼š
ledgersé›†åˆä¸»è¦æ–‡æª”çµæ§‹
ledgers/{ledgerId}/
â”œâ”€â”€ ledgerId: string              // å¸³æœ¬å”¯ä¸€è­˜åˆ¥ç¢¼ (èˆ‡æ–‡æª”IDç›¸åŒ)
â”œâ”€â”€ name: string                  // å¸³æœ¬åç¨± (å¦‚"å€‹äººè¨˜å¸³æœ¬", "å°ˆæ¡ˆæ”¯å‡º")
â”œâ”€â”€ type: string                  // å¸³æœ¬é¡å‹: "personal"|"project"|"category"|"shared"
â”œâ”€â”€ description: string           // å¸³æœ¬æè¿°èªªæ˜
â”œâ”€â”€ owner_id: string              // å¸³æœ¬æ“æœ‰è€…ID (å°æ‡‰usersé›†åˆ)
â”œâ”€â”€ members: array                // å¸³æœ¬æˆå“¡åˆ—è¡¨ (ç”¨æˆ¶IDé™£åˆ—)
â”œâ”€â”€ currency: string              // é è¨­è²¨å¹£å–®ä½ (å¦‚"TWD", "USD")
â”œâ”€â”€ timezone: string              // æ™‚å€è¨­å®š (å¦‚"Asia/Taipei")
â”œâ”€â”€ settings: object              // å¸³æœ¬è¨­å®š
â”œâ”€â”€ createdAt: timestamp          // å»ºç«‹æ™‚é–“
â”œâ”€â”€ updatedAt: timestamp          // æœ€å¾Œæ›´æ–°æ™‚é–“
â”œâ”€â”€ archived: boolean             // æ˜¯å¦å·²æ­¸æª”
â””â”€â”€ status: string                // å¸³æœ¬ç‹€æ…‹: "active"|"completed"|"archived"

ledgersé›†åˆçš„å­é›†åˆçµæ§‹
1. transactionså­é›†åˆ (äº¤æ˜“è¨˜éŒ„)
ledgers/{ledgerId}/transactions/{transactionId}/
â”œâ”€â”€ transactionId: string         // äº¤æ˜“å”¯ä¸€è­˜åˆ¥ç¢¼
â”œâ”€â”€ ledgerId: string             // äº¤æ˜“æ‰€å±¬å¸³æœ¬ID
â”œâ”€â”€ amount: number               // äº¤æ˜“é‡‘é¡
â”œâ”€â”€ type: string                 // äº¤æ˜“é¡å‹: "income"|"expense"
â”œâ”€â”€ description: string          // äº¤æ˜“æè¿°
â”œâ”€â”€ categoryId: string           // ç§‘ç›®ID
â”œâ”€â”€ categoryName: string         // ç§‘ç›®åç¨±
â”œâ”€â”€ accountId: string            // å¸³æˆ¶ID
â”œâ”€â”€ date: string                 // äº¤æ˜“æ—¥æœŸ (YYYY-MM-DDæ ¼å¼)
â”œâ”€â”€ userId: string               // è¨˜å¸³ç”¨æˆ¶ID
â”œâ”€â”€ source: string               // è¨˜å¸³ä¾†æº: "manual"|"quick"|"import"
â”œâ”€â”€ createdAt: timestamp         // å»ºç«‹æ™‚é–“
â””â”€â”€ updatedAt: timestamp         // æœ€å¾Œæ›´æ–°æ™‚é–“

2. categorieså­é›†åˆ (ç§‘ç›®åˆ†é¡)
ledgers/{ledgerId}/categories/{categoryId}/
â”œâ”€â”€ categoryId: string           // ç§‘ç›®å”¯ä¸€è­˜åˆ¥ç¢¼
â”œâ”€â”€ name: string                 // ç§‘ç›®åç¨±
â”œâ”€â”€ type: string                 // ç§‘ç›®é¡å‹: "income"|"expense"
â”œâ”€â”€ icon: string                 // ç§‘ç›®åœ–ç¤º emoji
â”œâ”€â”€ color: string                // ç§‘ç›®é¡è‰² hex code
â”œâ”€â”€ parentId: string             // çˆ¶ç§‘ç›®ID (å¯é¸ï¼Œæ”¯æ´å¤šå±¤ç´š)
â”œâ”€â”€ level: number                // ç§‘ç›®å±¤ç´š (1ç‚ºé ‚å±¤)
â”œâ”€â”€ order: number                // æ’åºé †åº
â”œâ”€â”€ isDefault: boolean           // æ˜¯å¦ç‚ºé è¨­ç§‘ç›®
â”œâ”€â”€ isActive: boolean            // æ˜¯å¦å•Ÿç”¨
â”œâ”€â”€ createdAt: timestamp         // å»ºç«‹æ™‚é–“
â””â”€â”€ updatedAt: timestamp         // æœ€å¾Œæ›´æ–°æ™‚é–“

â€¢	å¤§é …ä»£ç¢¼ â†’ categoryCode
â€¢	å¤§é …åç¨± â†’ categoryName
â€¢	å­é …ä»£ç¢¼ â†’ subCategoryCode
â€¢	å­é …åç¨± â†’ subCategoryName
â€¢	åŒç¾©è© â†’ synonyms


3. accountså­é›†åˆ (å¸³æˆ¶ç®¡ç†)
ledgers/{ledgerId}/accounts/{accountId}/
â”œâ”€â”€ accountId: string            // å¸³æˆ¶å”¯ä¸€è­˜åˆ¥ç¢¼
â”œâ”€â”€ name: string                 // å¸³æˆ¶åç¨±
â”œâ”€â”€ type: string                 // å¸³æˆ¶é¡å‹: "cash"|"bank"|"credit"|"investment"|"other"
â”œâ”€â”€ icon: string                 // å¸³æˆ¶åœ–ç¤º emoji
â”œâ”€â”€ color: string                // å¸³æˆ¶é¡è‰² hex code
â”œâ”€â”€ currency: string             // è²¨å¹£å–®ä½
â”œâ”€â”€ currentBalance: number       // ç•¶å‰é¤˜é¡
â”œâ”€â”€ isDefault: boolean           // æ˜¯å¦ç‚ºé è¨­å¸³æˆ¶
â”œâ”€â”€ isActive: boolean            // æ˜¯å¦å•Ÿç”¨
â”œâ”€â”€ createdAt: timestamp         // å»ºç«‹æ™‚é–“
â””â”€â”€ updatedAt: timestamp         // æœ€å¾Œæ›´æ–°æ™‚é–“

4. budgetså­é›†åˆ (é ç®—ç®¡ç†)
ledgers/{ledgerId}/budgets/{budgetId}/
â”œâ”€â”€ budgetId: string             // é ç®—å”¯ä¸€è­˜åˆ¥ç¢¼
â”œâ”€â”€ ledgerId: string             // é ç®—æ‰€å±¬å¸³æœ¬ID
â”œâ”€â”€ name: string                 // é ç®—åç¨±
â”œâ”€â”€ type: string                 // é ç®—é¡å‹: "monthly"|"yearly"|"quarterly"|"project"|"category"
â”œâ”€â”€ total_amount: number         // é ç®—ç¸½é‡‘é¡
â”œâ”€â”€ consumed_amount: number      // å·²ä½¿ç”¨é‡‘é¡
â”œâ”€â”€ currency: string             // è²¨å¹£å–®ä½
â”œâ”€â”€ startDate: timestamp         // é ç®—é–‹å§‹æ—¥æœŸ
â”œâ”€â”€ endDate: timestamp           // é ç®—çµæŸæ—¥æœŸ
â”œâ”€â”€ allocation: array            // é ç®—åˆ†é¡é…ç½®
â”œâ”€â”€ alert_rules: object          // è­¦ç¤ºè¦å‰‡è¨­å®š
â”œâ”€â”€ createdBy: string            // å»ºç«‹è€…ID
â”œâ”€â”€ createdAt: timestamp         // å»ºç«‹æ™‚é–“
â”œâ”€â”€ updatedAt: timestamp         // æœ€å¾Œæ›´æ–°æ™‚é–“
â””â”€â”€ status: string               // é ç®—ç‹€æ…‹: "active"|"completed"|"archived"
ä¸»è¦è¨­å®šçµæ§‹
settingsç‰©ä»¶çµæ§‹
settings: {
  allowNegativeBalance: boolean,    // æ˜¯å¦å…è¨±è² é¤˜é¡
  autoCategories: boolean,          // æ˜¯å¦è‡ªå‹•åˆ†é¡
  reminderSettings: object,         // æé†’è¨­å®š
  privacyMode: boolean             // éš±ç§æ¨¡å¼
}
é€™å€‹çµæ§‹æ”¯æ´å®Œæ•´çš„å¸³æœ¬ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¤šç”¨æˆ¶å”ä½œã€å®Œæ•´çš„è¨˜å¸³åŠŸèƒ½ã€é ç®—ç®¡ç†ç­‰ï¼Œæ˜¯LCAS 2.0ç³»çµ±çš„æ ¸å¿ƒè³‡æ–™æ¶æ§‹ã€‚



