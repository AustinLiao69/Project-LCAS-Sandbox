-------------
20251014 檢查7301,7302代碼hard-coding

不要寫code，請根據我的回覆更新提案。現在是MVP階段，提案時請專注解決當前發生的問題就好，不需要優化、強化、驗證、監測、測試等手段，除了列出原因之外也請你提出insight。

根據9901文件作為資深PG的分析，我需要檢查7301、7302、1301、1309這四個模組是否保持純粹的業務邏輯，並確認沒有包含為了7570/7580/7590測試而實作的代碼。
🔍 問題分析
經過詳細檢查，我發現以下問題：
1. 7302記帳核心功能群.dart - 測試代碼污染嚴重
問題詳述：
•	在DashboardWidget中發現_loadDashboardDataFromTestFactory()函數
•	該函數直接調用DynamicTestDataFactory.instance.generateCompleteTestDataSet()
•	這是明顯為了7590測試而實作的代碼，嚴重違反業務邏輯純粹性

程式碼位置：
Future<DashboardData> _loadDashboardDataFromTestFactory() async {
  try {
    // 使用7590動態測試資料生成儀表板數據
    final testData = await DynamicTestDataFactory.instance.generateCompleteTestDataSet(
      userCount: 1,
      transactionsPerUser: 10,
    );
    // ... 後續處理
  }
}

2. 7301系統進入功能群.dart - Hard-coding問題
問題詳述：
•	存在大量硬編碼的設定值和預設值
•	這些值應該透過環境變數或配置檔案管理

3. 1301 BK.js - Hard-coding問題
問題詳述：
•	配置參數存在硬編碼
•	應該完全依賴環境變數

4. 1309 AM.js - Hard-coding問題
問題詳述：
•	預設值硬編碼在代碼中
•	缺乏動態配置機制

💡 Insight 分析
核心問題：業務邏輯與測試代碼混合
1.	7302模組為了支援SIT測試而引入測試資料生成邏輯，這違反了單一職責原則
2.	業務邏輯模組不應該知道測試框架的存在
3.	Hard-coding問題影響了模組的可配置性和測試性
設計原則違反：
•	違反依賴倒轉原則：業務邏輯依賴了具體的測試實作
•	違反開放封閉原則：為了測試修改了業務邏輯代碼
🎯 三階段解決方案
階段一：移除測試代碼污染（緊急修復）
目標： 恢復業務邏輯純粹性
範圍：
•	7302.dart：移除_loadDashboardDataFromTestFactory()函數
•	7302.dart：恢復標準的資料載入邏輯
•	確保業務邏輯模組不依賴任何測試框架
版本升級：
•	7302模組：v2.1.0 → v2.2.0
•	相關函數：buildBalanceCard() v2.0.0 → v2.1.0

階段二：去Hard-coding處理
目標： 提高配置靈活性
範圍：
•	7301.dart：移除硬編碼設定，改用配置注入
•	1301.js：確保完全使用環境變數
•	1309.js：移除預設值硬編碼
版本升級：
•	7301模組：v1.2.0 → v1.3.0
•	1301模組：v3.1.3 → v3.2.0
•	1309模組：v3.0.9 → v3.1.0

階段三：架構清理與標準化
目標： 確保業務邏輯與測試邏輯完全分離
範圍：
•	建立清晰的接口定義
•	確保所有模組遵循純業務邏輯原則
•	移除任何測試相關的依賴

📋 具體問題列表
7302.dart 問題：
1.	L405-434行：_loadDashboardDataFromTestFactory()函數 - 嚴重違規
2.	L384行：直接調用DynamicTestDataFactory - 測試代碼污染
3.	L中央模擬資料：硬編碼的帳戶、帳本、統計資料
7301.dart 問題：
1.	預設模式設定：硬編碼的用戶模式配置
2.	主題顏色設定：硬編碼的顏色值
3.	常見密碼清單：硬編碼的密碼陣列
1301.js 問題：
1.	BK_CONFIG：部分配置仍有硬編碼傾向
2.	預設值處理：需要更完整的環境變數支援
1309.js 問題：
1.	AM_CONFIG.DEFAULTS：硬編碼的預設值
2.	配置管理：缺乏動態配置機制
🚀 立即執行建議
優先級排序：
1.	最高優先級：7302.dart測試代碼污染問題
2.	高優先級：7301.dart硬編碼問題
3.	中優先級：1301.js和1309.js配置問題
這個方案專注於恢復業務邏輯的純粹性，符合MVP階段的需求，避免過度工程。請確認是否同意此分析和解決方案，我將等待您的Approve後開始執行階段一的修復工作。

