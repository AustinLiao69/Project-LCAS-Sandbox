
# 0016. Sprint計畫 - LCAS 2.0 敏捷開發規劃

**版本**: 1.0.0  
**建立日期**: 2025-01-28  
**建立者**: LCAS PM Team  
**最後更新**: 2025-01-28  

---

## 目次 (Table of Contents)

### 1. [專案概述](#1-專案概述)
### 2. [MVP功能分析](#2-mvp功能分析)
### 3. [敏捷開發三階段規劃](#3-敏捷開發三階段規劃)
### 4. [第一階段代碼實作清單](#4-第一階段代碼實作清單)
### 5. [技術架構與版本策略](#5-技術架構與版本策略)
### 6. [風險管控與里程碑](#6-風險管控與里程碑)

---

## 1. 專案概述

### 1.1 專案目標
基於LCAS 2.0產品規格，採用敏捷開發方式，分三個階段實現完整的多平台記帳系統，包含LINE OA快速記帳與APP完整功能。

### 1.2 開發原則
- **MVP驅動**：優先實現核心價值功能
- **三層架構**：PL (Presentation Layer)、APL (Application Layer)、BL (Business Layer)
- **四模式支援**：Expert、Inertial、Cultivation、Guiding模式
- **敏捷迭代**：每個Sprint 2-4週，可交付可測試的功能增量

### 1.3 參考文件
- [0015. Product_SPEC_LCAS_2.0.md](0015.%20Product_SPEC_LCAS_2.0.md) - 產品規格書
- [8020. API list.md](../80.%20Flutter_PRD_APL/8020.%20API%20list.md) - API規格清單
- [1001. Replit_Business layer.md](../10.%20Replit_PRD_BL/1001.%20Replit_Buseinss%20layer.md) - 後端業務邏輯

---

## 2. MVP功能分析

### 2.1 MVP核心價值判斷

基於「今天，我陪你一起戰鬥！」的核心價值主張，MVP應該具備以下特質：
- **立即可用**：新用戶能在5分鐘內開始記帳
- **習慣養成**：提供足夠的激勵機制支持長期使用
- **個人化體驗**：四模式理論的基礎實現

### 2.2 MVP功能清單

#### 2.2.1 核心認證與模式評估 (P0)
```
✅ 用戶註冊與登入
✅ 模式評估問卷 (5道問題)
✅ 四模式基礎UI適配
✅ 跨平台帳號綁定 (LINE OA ↔ APP)
```

#### 2.2.2 基礎記帳功能 (P0)
```
✅ LINE OA 快速記帳 ("午餐 150")
✅ APP 完整記帳表單
✅ 基本科目管理 (收入/支出/轉帳)
✅ 帳戶管理 (現金/銀行/信用卡)
✅ 交易記錄查詢與編輯
```

#### 2.2.3 基礎統計與視覺化 (P0)
```
✅ 今日/本月收支統計
✅ 簡易圖表展示 (圓餅圖/長條圖)
✅ 四模式差異化呈現
```

#### 2.2.4 協作與管理基礎 (P1)
```
⭕ 基礎帳本管理
⭕ 簡易預算設定
⭕ 基本協作功能 (邀請/權限)
```

#### 2.2.5 系統支援功能 (P1)
```
⭕ 資料備份與還原
⭕ 基礎通知提醒
⭕ 幫助文檔與客服
```

### 2.3 MVP排除功能

**暫不納入MVP的功能**：
- 複雜報表生成 (PDF/Excel匯出)
- 進階AI助理功能
- 深度數據分析與預測
- 複雜的協作工作流程
- 第三方服務整合 (銀行API等)

---

## 3. 敏捷開發三階段規劃

### 3.1 第一階段：核心MVP建立 (8週)

#### Sprint 1-2: 認證與模式系統 (4週)
**目標**: 建立用戶認證與四模式評估基礎

**交付物**:
- ✅ 用戶註冊/登入系統
- ✅ 模式評估問卷與判定邏輯
- ✅ 四模式基礎UI框架
- ✅ LINE OA - APP 帳號綁定

**驗收標準**:
- 新用戶可在3分鐘內完成註冊並確定模式
- 四種模式有明顯不同的UI呈現
- LINE OA與APP資料完全同步

#### Sprint 3-4: 記帳核心功能 (4週)
**目標**: 實現基本記帳與查詢功能

**交付物**:
- ✅ LINE OA 智能文字解析記帳
- ✅ APP 完整記帳表單
- ✅ 基礎科目與帳戶管理
- ✅ 交易記錄CRUD操作
- ✅ 即時資料同步機制

**驗收標準**:
- LINE OA 文字解析準確率 >90%
- APP記帳流程 <30秒完成
- 雙平台資料一致性100%

### 3.2 第二階段：功能擴展與優化 (6週)

#### Sprint 5-6: 管理功能模組 (4週)
**目標**: 完善帳本、預算、協作管理

**交付物**:
- ⭕ 多帳本管理系統
- ⭕ 基礎預算設定與監控
- ⭕ 協作邀請與權限管理
- ⭕ 四模式差異化深度實現

#### Sprint 7: 分析與報表基礎 (2週)
**目標**: 提供基本數據分析能力

**交付物**:
- ⭕ 基礎統計圖表
- ⭕ 收支趨勢分析
- ⭕ 簡易報表生成

### 3.3 第三階段：進階功能與整合 (4週)

#### Sprint 8-9: 系統完善與整合 (4週)
**目標**: 完善系統支援功能

**交付物**:
- ⭕ 激勵系統與成就機制
- ⭕ 通知與提醒系統
- ⭕ 資料備份與還原
- ⭕ 客服與幫助系統
- ⭕ 效能優化與安全加固

---

## 4. 第一階段代碼實作清單

### 4.1 Presentation Layer (PL) - Flutter前端

#### 核心認證與模式評估
```
優先級 P0 (第1-2週)：
├── 7301. 用戶註冊頁面.dart
├── 7302. 用戶登入頁面.dart  
├── 7303. 模式評估問卷頁面.dart
├── 7304. 忘記密碼頁面.dart
└── 7399. 認證狀態管理.dart (Provider/Bloc)
```

#### 基礎記帳功能
```
優先級 P0 (第2-3週)：
├── 7305. 記帳主頁.dart
├── 7306. 快速記帳表單.dart
├── 7307. 科目選擇器.dart
├── 7308. 帳戶選擇器.dart
├── 7309. 交易記錄列表.dart
└── 7310. 基礎統計圖表.dart
```

#### 四模式UI適配
```
優先級 P1 (第3-4週)：
├── 7311. 模式切換管理器.dart
├── 7312. Expert模式UI組件.dart
├── 7313. Inertial模式UI組件.dart
├── 7314. Cultivation模式UI組件.dart
├── 7315. Guiding模式UI組件.dart
└── 7399. 主題與樣式管理.dart
```

### 4.2 Application Layer (APL) - API路由

#### 認證服務API路由
```
優先級 P0 (第1週)：
├── 8301. 認證服務.dart (已存在，需補強)
│   ├── POST /auth/register
│   ├── POST /auth/login  
│   ├── POST /auth/forgot-password
│   ├── POST /auth/reset-password
│   └── POST /users/assessment
```

#### 記帳核心API路由
```
優先級 P0 (第2週)：
├── 8303. 記帳交易服務.dart (已存在，需補強)
│   ├── POST /transactions/quick (LINE OA)
│   ├── POST /transactions (完整記帳)
│   ├── GET /transactions/dashboard
│   ├── GET /transactions/recent
│   └── GET /transactions/statistics
```

#### 管理功能API路由
```
優先級 P1 (第3週)：
├── 8305. 帳戶管理服務.dart (新增)
│   ├── GET /accounts
│   ├── POST /accounts
│   └── GET /accounts/{id}/balance
├── 8306. 科目管理服務.dart (新增)
│   ├── GET /categories
│   ├── POST /categories
│   └── GET /categories/tree
```

#### 系統服務API路由
```
優先級 P1 (第4週)：
├── 8311. 系統服務.dart (新增)
│   ├── GET /system/app-info
│   ├── GET /system/health
│   └── GET /system/config
```

### 4.3 Business Layer (BL) - 後端模組

#### 核心認證模組
```
優先級 P0 (第1週)：
├── 1309. AM.js (已存在，需升級v3.0.0)
│   ├── registerUser() v2.1.0
│   ├── loginUser() v2.1.0
│   ├── resetPassword() v2.0.0
│   ├── validateToken() v2.1.0
│   └── assessUserMode() v1.0.0 (新增)
```

#### 記帳核心模組
```
優先級 P0 (第1-2週)：
├── 1301. BK.js (已存在，需升級v3.0.0)
│   ├── createTransaction() v2.1.0
│   ├── updateTransaction() v2.1.0
│   ├── getTransactions() v2.1.0
│   ├── deleteTransaction() v2.0.0
│   └── getTransactionStats() v2.0.0
├── 1315. LBK.js (已存在，需升級v3.0.0)
│   ├── parseQuickInput() v2.1.0
│   ├── createQuickTransaction() v2.1.0
│   └── validateQuickInput() v2.0.0
```

#### Webhook處理模組
```
優先級 P0 (第2週)：
├── 1320. WH.js (已存在，需升級v3.0.0)
│   ├── handleLineWebhook() v2.1.0
│   ├── processQuickText() v2.0.0
│   ├── verifySignature() v2.1.0
│   └── sendResponse() v2.0.0
```

#### 科目與帳戶管理
```
優先級 P1 (第3週)：
├── 1331. DD1.js (已存在，需升級v3.0.0)
│   ├── getCategories() v2.1.0
│   ├── createCategory() v2.0.0
│   ├── getCategoryTree() v1.0.0 (新增)
│   └── validateCategory() v2.0.0
├── 1302. AC.js (新增v1.0.0)
│   ├── getAccounts() v1.0.0
│   ├── createAccount() v1.0.0
│   ├── getAccountBalance() v1.0.0
│   └── validateAccount() v1.0.0
```

#### 帳本管理模組
```
優先級 P1 (第3-4週)：
├── 1351. MLS.js (已存在，需升級v3.0.0)
│   ├── getLedgers() v2.1.0
│   ├── createLedger() v2.0.0
│   ├── getDefaultLedger() v2.0.0
│   └── validateLedgerAccess() v2.1.0
```

#### 系統支援模組
```
優先級 P1 (第4週)：
├── 1310. DL.js (已存在，需升級v3.0.0)
│   ├── logTransaction() v2.1.0
│   ├── logError() v2.0.0
│   └── getSystemHealth() v1.0.0 (新增)
├── 1311. FS.js (已存在，需升級v3.0.0)
│   ├── saveTransaction() v2.1.0
│   ├── queryTransactions() v2.1.0
│   └── backupData() v2.0.0
```

---

## 5. 技術架構與版本策略

### 5.1 實作順序建議

#### 第1週：認證基礎
1. **BL**: 升級AM.js，新增模式評估功能
2. **APL**: 補強8301認證服務API
3. **PL**: 實作註冊、登入、評估頁面

#### 第2週：記帳核心
1. **BL**: 升級BK.js、LBK.js、WH.js
2. **APL**: 補強8303記帳交易API
3. **PL**: 實作記帳主頁、表單頁面

#### 第3週：管理功能
1. **BL**: 新增AC.js，升級DD1.js、MLS.js
2. **APL**: 新增8305、8306管理服務API
3. **PL**: 實作科目、帳戶選擇器

#### 第4週：系統整合
1. **BL**: 升級DL.js、FS.js系統模組
2. **APL**: 新增8311系統服務API
3. **PL**: 四模式UI適配與整合測試

### 5.2 版本升級策略

#### 模組版次規劃
- **Major升級 (3.0.0)**: 新增MVP核心功能
- **Minor升級 (x.1.0)**: 函數功能增強
- **Patch升級 (x.x.1)**: Bug修復與優化

#### 函數版次規劃
- **v2.1.0**: MVP功能增強版本
- **v2.0.0**: 穩定基礎版本
- **v1.0.0**: 新增功能版本

### 5.3 四模式差異化實現策略

| 模式 | 實現重點 | 技術策略 |
|------|----------|----------|
| **Expert** | 完整功能、專業工具 | 完整API回應、進階UI組件 |
| **Inertial** | 固定流程、穩定體驗 | 標準化回應、流暢操作 |
| **Cultivation** | 習慣養成、激勵系統 | 進度追蹤、成就通知 |
| **Guiding** | 極簡引導、輔助提示 | 簡化回應、智能引導 |

---

## 6. 風險管控與里程碑

### 6.1 主要風險識別

#### 技術風險
- **四模式複雜度**: API回應需根據模式調整，增加實現複雜度
- **跨平台同步**: LINE OA與APP資料一致性維護
- **效能瓶頸**: Firestore查詢成本與響應速度

#### 業務風險
- **用戶接受度**: 四模式理論的實際效果驗證
- **功能完整性**: MVP功能是否足以支撐產品價值
- **競爭壓力**: 市場競爭產品的功能追趕

### 6.2 風險緩解措施

1. **技術風險緩解**:
   - 採用分層架構，模式邏輯集中管理
   - 建立完整的API測試覆蓋
   - 實施資料庫查詢優化策略

2. **業務風險緩解**:
   - 每個Sprint結束進行用戶訪談
   - 建立A/B測試機制驗證四模式效果
   - 保持敏捷響應，快速調整產品方向

### 6.3 關鍵里程碑

| 里程碑 | 時間點 | 成功標準 | 責任人 |
|--------|--------|----------|--------|
| **M1: 認證系統完成** | 第2週末 | 用戶可註冊登入並完成模式評估 | PG + PM |
| **M2: 基礎記帳完成** | 第4週末 | LINE OA + APP 記帳功能完整可用 | PG + SQA |
| **M3: 管理功能完成** | 第6週末 | 帳戶、科目、帳本管理功能就緒 | PG + BA |
| **M4: MVP完整交付** | 第8週末 | 所有MVP功能通過用戶驗收測試 | PM + SQA |

### 6.4 品質控制機制

#### 開發階段品質控制
- **Code Review**: 所有代碼必須經過同儕審查
- **自動化測試**: 單元測試覆蓋率 >80%
- **API測試**: 所有API端點自動化測試

#### 用戶驗收控制
- **Sprint Demo**: 每Sprint結束進行功能演示
- **用戶測試**: 邀請目標用戶進行使用測試
- **四模式驗證**: 確保每種模式都有良好使用體驗

---

## 結論

本Sprint計劃基於LCAS 2.0的核心價值主張「今天，我陪你一起戰鬥！」，採用MVP驅動的敏捷開發方式，分三階段實現完整的多平台記帳系統。

**第一階段重點**是建立核心MVP功能，確保用戶能夠立即開始使用並體驗到產品價值。通過嚴格的版本控制、風險管控和品質保證機制，確保每個Sprint都能交付高品質、可測試的功能增量。

**成功關鍵**在於四模式理論的成功實現和用戶接受度驗證，這將決定LCAS 2.0的產品競爭力和市場表現。

---

**文件版本**: 1.0.0  
**最後更新**: 2025-01-28  
**下次審查**: 第一階段Sprint 2結束後
