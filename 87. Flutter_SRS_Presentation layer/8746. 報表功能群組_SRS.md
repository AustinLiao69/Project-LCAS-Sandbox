# 8746. 報表功能群組_SRS

**文件編號**: 8746-SRS-GROUP  
**版本**: v2.1.0  
**建立日期**: 2025-08-07  
**建立者**: LCAS SA Team  
**最後更新**: 2025-08-12

---

## 目次

1. [群組概述](#1-群組概述)
2. [頁面功能總覽](#2-頁面功能總覽)
3. [API端點對照表](#3-api端點對照表)
4. [功能目的](#4-功能目的)
5. [使用者故事](#5-使用者故事)
6. [前置條件](#6-前置條件)
7. [功能流程](#7-功能流程)
8. [輸入項目](#8-輸入項目)
9. [輸出項目](#9-輸出項目)
10. [驗證規則](#10-驗證規則)
11. [錯誤處理](#11-錯誤處理)
12. [UI元件與排版需求](#12-ui元件與排版需求)
13. [頁面詳細規格](#13-頁面詳細規格)
14. [整合驗收標準](#14-整合驗收標準)
15. [版本記錄](#15-版本記錄)

---

## 1. 群組概述

### 1.1 群組定位
報表功能群組是LCAS 2.0 Flutter應用程式的**企業級商業智慧視覺化中心**，提供完整的財務報表產出、自訂報表設計、多格式匯出、報表分享等功能的**視覺設計需求**，支援個人、家庭、企業等多場景的報表分析視覺化體驗。

### 1.2 群組範圍
本群組整合以下10個報表功能頁面的視覺設計規格：
- **P046 報表中心頁面**：報表功能總覽控制台的視覺化設計
- **P047 標準報表頁面**：預設財務報表產出的視覺引導
- **P048 自訂報表設計**：報表設計器與編輯工具的視覺介面
- **P049 報表預覽頁面**：報表產出預覽的視覺化展示
- **P050 報表匯出頁面**：多格式匯出功能的視覺設計
- **P051 報表範本頁面**：報表範本管理的視覺系統
- **P052 報表分享頁面**：報表分享功能的視覺介面
- **P053 報表歷史頁面**：報表產出歷史的視覺呈現
- **P054 報表設定頁面**：報表系統設定的視覺配置
- **P055 報表分析頁面**：進階資料分析的視覺化設計

### 1.3 視覺設計原則
- **多元報表視覺化**：支援標準報表與自訂報表的豐富視覺呈現
- **智慧設計器視覺**：直觀的拖拉式報表設計工具視覺介面
- **多格式匯出視覺**：清晰的匯出選項與進度指示視覺設計
- **四模式差異化視覺**：針對不同使用者模式提供適配的報表視覺體驗

---

## 2. 頁面功能總覽

| 頁面編號 | 頁面名稱 | 主要視覺功能 | 四模式差異重點 | 使用頻率 |
|----------|----------|-------------|----------------|----------|
| **P046** | 報表中心頁面 | 報表功能總覽儀表板、快速報表產生、報表統計 | 報表選項豐富度 | 高 |
| **P047** | 標準報表頁面 | 報表類型選擇器、參數設定、即時產生 | 報表類型多樣性 | 高 |
| **P048** | 自訂報表設計 | 拖拉式設計器、元件庫、即時預覽 | 設計功能複雜度 | 中 |
| **P049** | 報表預覽頁面 | 報表畫布、編輯工具、版面調整 | 預覽功能完整度 | 高 |
| **P050** | 報表匯出頁面 | 格式選擇器、品質設定、進度指示 | 匯出選項多樣性 | 中 |
| **P051** | 報表範本頁面 | 範本庫、預覽縮圖、套用介面 | 範本管理功能 | 中 |
| **P052** | 報表分享頁面 | 分享選項、權限設定、連結產生 | 分享方式多樣性 | 低 |
| **P053** | 報表歷史頁面 | 歷史列表、版本控制、搜尋篩選 | 歷史記錄詳細度 | 低 |
| **P054** | 報表設定頁面 | 系統偏好、預設值、通知設定 | 設定選項完整度 | 低 |
| **P055** | 報表分析頁面 | 進階圖表、數據洞察、趨勢分析 | 分析功能深度 | 中 |

### 2.1 群組視覺流程關係圖
```
P046 報表中心頁面 (視覺化報表樞紐)
    ↓ 標準報表導航    ↓ 自訂設計    ↓ 範本管理
P047 標準報表 ←→ P048 自訂設計 ←→ P051 報表範本
    ↓ 預覽生成      ↓ 預覽編輯      ↓ 套用預覽
P049 報表預覽 ←→ P050 報表匯出 ←→ P052 報表分享
    ↓             ↓ 匯出歷史      ↓ 分享記錄
P054 報表設定 ←→ P053 報表歷史 ←→ P055 報表分析
    ↑________________↑________________↑
          整合報表管理與分析視覺化
```

---

## 3. API端點對照表

### 3.1 完整API對應關係（確保按鈕與API連結正確）

| 頁面編號 | 頁面名稱 | 對應API編號 | API路徑 | HTTP方法 | 主要按鈕功能 |
|----------|----------|-------------|---------|----------|-------------|
| **P046** | 報表中心頁面 | **F022** | GET /app/reports/dashboard | GET | 「重新整理」按鈕 |
| **P046** | 報表中心頁面 | **F022** | GET /app/reports/list | GET | 「載入清單」按鈕 |
| **P047** | 標準報表頁面 | **F022** | POST /app/reports/generate | POST | 「產生報表」按鈕 |
| **P047** | 標準報表頁面 | **F022** | GET /app/reports/templates | GET | 「選擇範本」按鈕 |
| **P048** | 自訂報表設計 | **F023** | POST /app/reports/custom | POST | 「建立報表」按鈕 |
| **P048** | 自訂報表設計 | **F023** | PUT /app/reports/design | PUT | 「儲存設計」按鈕 |
| **P049** | 報表預覽頁面 | **F022** | GET /app/reports/preview | GET | 「載入預覽」按鈕 |
| **P049** | 報表預覽頁面 | **F022** | PUT /app/reports/edit | PUT | 「編輯報表」按鈕 |
| **P050** | 報表匯出頁面 | **F024** | POST /app/reports/export | POST | 「開始匯出」按鈕 |
| **P050** | 報表匯出頁面 | **F024** | GET /app/reports/download | GET | 「下載檔案」按鈕 |
| **P051** | 報表範本頁面 | **F023** | GET /app/reports/templates | GET | 「載入範本」按鈕 |
| **P051** | 報表範本頁面 | **F023** | POST /app/reports/template | POST | 「新增範本」按鈕 |
| **P052** | 報表分享頁面 | **F024** | POST /app/reports/share | POST | 「建立分享」按鈕 |
| **P052** | 報表分享頁面 | **F024** | GET /app/reports/shared | GET | 「查看分享」按鈕 |
| **P053** | 報表歷史頁面 | **F022** | GET /app/reports/history | GET | 「載入歷史」按鈕 |
| **P053** | 報表歷史頁面 | **F022** | DELETE /app/reports/delete | DELETE | 「刪除報表」按鈕 |
| **P054** | 報表設定頁面 | **F023** | PUT /app/reports/settings | PUT | 「儲存設定」按鈕 |
| **P054** | 報表設定頁面 | **F023** | GET /app/reports/preferences | GET | 「載入偏好」按鈕 |
| **P055** | 報表分析頁面 | **F024** | GET /app/reports/analytics | GET | 「載入分析」按鈕 |
| **P055** | 報表分析頁面 | **F024** | POST /app/reports/insight | POST | 「產生洞察」按鈕 |

---

## 4. 功能目的

### 4.1 群組整體視覺設計目的
報表功能群組作為LCAS 2.0的**企業級商業智慧視覺化中心**，致力於：
- **報表產出視覺化**：提供直觀的報表產生與管理視覺介面
- **設計工具視覺化**：打造易用的拖拉式報表設計器視覺體驗
- **多格式匯出視覺**：清晰的匯出流程與進度指示視覺設計
- **智慧分析視覺化**：豐富的數據洞察與趨勢分析視覺呈現

### 4.2 四模式視覺差異化目的

#### 精準控制者模式
- 提供完整的報表設計工具與進階分析功能視覺介面
- 顯示豐富的報表統計分析與詳細的設定選項
- 支援複雜的自訂報表設計與精確的視覺化控制

#### 紀錄習慣者模式  
- 打造優雅美觀的報表管理視覺體驗
- 重視視覺化呈現與報表美學設計的精緻介面
- 簡化報表設定但保持視覺品質的優美設計

#### 轉型挑戰者模式
- 融入目標導向的報表分析與財務改善視覺元素
- 提供積極的財務表現回饋與改善建議視覺化
- 強調報表與財務目標達成關聯性的視覺設計

#### 潛在覺醒者模式
- 極簡化的報表操作流程與介面視覺設計
- 提供智慧預設的報表範本與自動化建議
- 降低報表使用門檻，鼓勵財務分析習慣的視覺引導

---

## 5. 使用者故事

### 5.1 核心使用者故事

**作為財務管理者**，我希望能透過直觀的視覺介面快速產生財務報表，以便了解當前的財務狀況與趨勢。

**作為資料分析師**，我希望能透過豐富的視覺化工具設計自訂報表，以便滿足特定的業務分析需求。

**作為企業主管**，我希望能透過清晰的視覺介面分享報表給團隊成員，以便進行財務決策討論。

**作為個人使用者**，我希望能透過簡潔的視覺流程匯出報表為不同格式，以便保存或分享給他人。

### 5.2 四模式使用者故事

#### 精準控制者 (Controller)
> "作為精準控制者，我希望能透過完整詳細的報表管理視覺介面掌控每個報表細節，包括複雜的自訂報表設計器、精確的數據分析圖表、詳細的匯出選項設定，以及完整的報表統計視覺化展示。"

#### 紀錄習慣者 (Logger)  
> "作為紀錄習慣者，我希望報表管理過程透過美觀且愉悅的視覺設計呈現，有優雅的報表範本選擇、美麗的統計圖表展示、精緻的報表分享介面，讓報表產生成為生活中的美好視覺體驗。"

#### 轉型挑戰者 (Struggler)
> "作為轉型挑戰者，我希望報表功能的視覺設計能幫助我實現財務目標，提供明確的財務改善追蹤視覺化、預算執行的激勵元素，並在財務表現改善時給予積極的視覺化鼓勵。"

#### 潛在覺醒者 (Sleeper)
> "作為潛在覺醒者，我希望報表管理功能的視覺設計非常簡單直觀，有智慧的自動報表建議視覺提示，一鍵就能產生基礎報表，不需要複雜的自訂設計或進階分析視覺化。"

---

## 6. 前置條件

### 6.1 視覺設計前置條件
- 已完成9005 Flutter Presentation Layer PRD的設計系統定義
- 四模式色彩與字型系統已建立完成
- 報表專用視覺元件庫已準備就緒
- 圖表視覺化組件已初始化完成

### 6.2 功能前置條件
- 使用者已成功通過認證流程群組（P001-P005）
- 已完成基本的使用者設定與模式選擇
- 具備記帳資料以供報表產生使用
- 相關API端點已就緒並可正常呼叫

---

## 7. 功能流程

### 7.1 主要報表管理視覺流程

#### 7.1.1 標準報表產生視覺流程（P046, P047）
```
1. 進入報表中心頁面視覺引導
   ├── 顯示報表功能總覽儀表板
   ├── 展示快速報表產生按鈕群組
   ├── 呈現報表統計卡片視覺化
   └── 顯示最近報表與推薦範本

2. 標準報表產生專屬視覺設定
   ├── 報表類型選擇卡片（收支分析/預算執行/趨勢分析）
   ├── 時間範圍設定面板與快速選擇按鈕
   └── 參數配置介面與即時預覽功能

3. 報表產生確認視覺回饋
   ├── 資料處理進度條與狀態指示
   ├── 報表產生成功視覺確認
   ├── 預覽縮圖顯示與快速操作
   └── 匯出分享選項視覺化呈現
```

#### 7.1.2 自訂報表設計視覺流程（P048, P051）
```
1. 自訂報表設計器視覺化
   ├── 拖拉式設計畫布與網格輔助線
   ├── 元件庫面板與分類選擇器
   ├── 屬性設定面板與即時調整
   └── 即時預覽窗格與多種檢視模式

2. 報表元件配置視覺管理
   ├── 圖表類型選擇器與預覽縮圖
   ├── 資料綁定介面與欄位選擇器
   ├── 樣式設定面板與視覺化調整
   └── 版面配置工具與對齊輔助

3. 範本管理視覺處理
   ├── 範本庫瀏覽與分類篩選
   ├── 範本預覽與套用確認介面
   ├── 自訂範本儲存與命名對話框
   └── 範本分享與權限設定視覺化
```

#### 7.1.3 四模式差異化視覺流程

**精準控制者模式視覺特色：**
- **完整設計工具視覺**：提供所有可用的報表設計與分析視覺化功能
- **詳細統計視覺機制**：支援多維度的報表統計分析設定視覺界面
- **複雜匯出選項**：多格式匯出設定與進階配置視覺化

**紀錄習慣者模式視覺特色：**
- **優雅報表視覺流程**：重視報表產生的流暢性與美感的視覺設計
- **美觀範本動畫**：精美的報表範本選擇與套用動畫效果
- **簡化設計視覺選項**：隱藏過於技術性的設計選項，保持視覺簡潔

**轉型挑戰者模式視覺特色：**
- **目標導向視覺流程**：每個報表操作都與財務目標達成視覺化相關聯
- **激勵回饋視覺機制**：即時顯示財務改善進度的視覺元素
- **成就元素視覺整合**：在流程中加入財務成就與獎勵的視覺化元素

**潛在覺醒者模式視覺特色：**
- **極簡化視覺流程**：最少步驟完成報表產生的簡潔視覺設計
- **智慧預設視覺值**：自動選擇適合的報表範本與參數的視覺提示
- **一鍵操作視覺**：提供快捷的報表產生選項大按鈕設計

---

## 8. 輸入項目

### 8.1 群組共通輸入視覺設計

| 輸入類別 | 視覺設計要求 | 四模式差異 | 無障礙需求 |
|----------|-------------|------------|------------|
| **報表基本** | 報表名稱輸入框：圓角8px，高度56px | 字體大小依模式調整 | 螢幕閱讀器標籤 |
| **報表基本** | 報表類型選擇器：卡片式設計，視覺圖示區分 | 選項數量依模式調整 | 高對比度支援 |
| **報表基本** | 時間範圍設定：日曆選擇器，快速選項按鈕 | 複雜度依模式調整 | 日期格式語音提示 |
| **報表基本** | 資料來源選擇：下拉式選單，帳本預覽 | 潛在覺醒者使用預設值 | 來源變化語音播報 |
| **設計參數** | 圖表類型選擇：圖示網格，即時預覽 | 選項豐富度依模式調整 | 圖表類型語音說明 |
| **設計參數** | 色彩配置：調色盤選擇器，自訂色彩輸入 | 設定詳細度依模式調整 | 色彩對比度檢查 |
| **匯出設定** | 格式選擇：多選卡片式設計，格式預覽 | 選項數量依模式調整 | 格式特性語音確認 |
| **匯出設定** | 品質設定：滑桿控制器，檔案大小預估 | 設定精確度依模式調整 | 品質等級語音提示 |

---

## 9. 輸出項目

### 9.1 群組共通輸出視覺設計

| 輸出類別 | 視覺呈現方式 | 設計要求 | 四模式差異 |
|----------|-------------|----------|------------|
| **報表資料** | 報表預覽畫布：縮放功能，版面網格 | 高品質渲染 | 預覽詳細度依模式調整 |
| **統計圖表** | 互動式圖表：滑鼠懸停效果，圖例說明 | 響應式設計 | 圖表複雜度依模式調整 |
| **報表清單** | 報表卡片列表：縮圖預覽，快速操作 | 清晰的識別設計 | 列表資訊密度依模式調整 |
| **匯出狀態** | 進度指示器：百分比顯示，剩餘時間估計 | 即時狀態更新 | 進度詳細度依模式調整 |
| **範本庫** | 範本網格：預覽縮圖，分類標籤 | 視覺化分類 | 範本數量依模式調整 |
| **分析洞察** | 洞察卡片：重點數據，改善建議 | 清晰的重點標示 | 洞察深度依模式調整 |
| **分享資訊** | 分享連結卡片：QR碼，權限顯示 | 快速識別設計 | 分享選項依模式調整 |
| **歷史記錄** | 時間軸列表：版本標記，操作記錄 | 專業記錄視覺 | 歷史詳細度依模式調整 |
| **操作回饋** | Toast通知：成功/錯誤顏色區分，自動消失 | 自動消失機制 | 所有模式保持一致 |

---

## 10. 驗證規則

### 10.1 視覺化驗證設計

#### 10.1.1 報表參數驗證視覺回饋
- **即時驗證**：輸入框邊框顏色變化（紅色錯誤、綠色正確）
- **視覺圖示**：輸入框右側顯示驗證狀態圖示
- **錯誤提示**：輸入框下方顯示錯誤訊息，紅色文字

#### 10.1.2 報表設計驗證視覺指示
```css
.report-design-input {
  border: 2px solid #E0E0E0;
  border-radius: 8px;
  transition: all 0.3s ease;
}

.report-design-input.valid {
  border-color: #4CAF50;
  background: #E8F5E9;
}

.report-design-input.invalid {
  border-color: #F44336;
  background: #FFEBEE;
}

.design-validation-message {
  font-size: 12px;
  margin-top: 4px;
  padding-left: 8px;
}

.design-validation-message.error {
  color: #F44336;
}

.design-validation-message.success {
  color: #4CAF50;
}
```

#### 10.1.3 四模式驗證視覺差異

| 模式 | 錯誤提示風格 | 成功指示風格 | 驗證詳細度 |
|----------|-------------|-------------|------------|
| **精準控制者** | 詳細技術說明，錯誤代碼顯示 | 詳細成功狀態報告 | 完整規則說明 |
| **紀錄習慣者** | 優雅的錯誤提示動畫 | 美觀的成功動畫效果 | 平衡的提示資訊 |
| **轉型挑戰者** | 正面鼓勵的錯誤提示 | 積極的成就感回饋 | 目標導向的提示 |
| **潛在覺醒者** | 簡化的錯誤說明 | 溫和的成功提示 | 基本必要資訊 |

---

## 11. 錯誤處理

### 11.1 錯誤狀態視覺設計

#### 11.1.1 錯誤訊息視覺層級

| 錯誤嚴重度 | 視覺設計 | 顏色方案 | 圖示選擇 | 顯示方式 |
|----------|----------|----------|----------|----------|
| **資料不足錯誤** | 全屏遮罩對話框 | 橘黃色主色調 | 📊 資料圖示 | 模態對話框 |
| **設計參數錯誤** | 頁面頂部警告條 | 橘紅色漸變 | ⚠️ 警告圖示 | 固定警告條 |
| **匯出格式錯誤** | 輸入框錯誤狀態 | 淺紅色邊框 | 📤 匯出圖示 | 內聯提示 |
| **操作成功** | 綠色成功提示 | 綠色系主色調 | ✅ 成功圖示 | Toast通知 |

#### 11.1.2 四模式錯誤處理視覺差異

**精準控制者模式：**
```css
.controller-report-error {
  background: linear-gradient(135deg, #FFEBEE, #FFCDD2);
  border: 1px solid #F44336;
  border-left: 4px solid #D32F2F;
  padding: 16px;
  font-size: 14px;
  line-height: 1.4;
  border-radius: 8px;
}

.report-error-details {
  margin-top: 12px;
  font-size: 12px;
  color: #666;
  font-family: monospace;
  background: #F5F5F5;
  padding: 8px;
  border-radius: 4px;
}
```

**紀錄習慣者模式：**
```css
.logger-report-error {
  background: linear-gradient(135deg, #FFEBEE, #FCE4EC);
  border-radius: 16px;
  padding: 24px;
  box-shadow: 0 4px 12px rgba(244, 67, 54, 0.15);
  animation: gentleShake 0.5s ease-in-out;
}

@keyframes gentleShake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}
```

**轉型挑戰者模式：**
```css
.struggler-report-error {
  background: #FFF3E0;
  border: 2px solid #FF9800;
  border-radius: 12px;
  padding: 20px;
  position: relative;
}

.report-motivational-error-icon {
  position: absolute;
  top: -10px;
  right: 16px;
  font-size: 24px;
}

.report-motivational-message {
  color: #E65100;
  font-weight: 600;
  margin-bottom: 8px;
}

.report-motivational-message::before {
  content: "📊 ";
  margin-right: 8px;
}
```

**潛在覺醒者模式：**
```css
.sleeper-report-error {
  background: #FFEBEE;
  border-radius: 16px;
  padding: 32px;
  text-align: center;
  font-size: 18px;
}

.report-simple-error-icon {
  font-size: 48px;
  margin-bottom: 16px;
  display: block;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}
```

---

## 12. UI元件與排版需求

### 12.1 報表管理專用視覺元件

#### 12.1.1 報表中心儀表板組件設計
```css
/* 報表統計卡片 */
.report-stats-card {
  background: linear-gradient(135deg, #FFFFFF, #F8F9FA);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 16px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.report-stats-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
}

.stats-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.stats-title {
  font-size: 14px;
  color: #666;
  font-weight: 500;
}

.stats-icon {
  width: 24px;
  height: 24px;
  color: #2196F3;
}

.stats-value {
  font-size: 28px;
  font-weight: 700;
  color: #1976D2;
  margin-bottom: 4px;
}

.stats-change {
  font-size: 12px;
  display: flex;
  align-items: center;
  gap: 4px;
}

.stats-change.positive {
  color: #4CAF50;
}

.stats-change.negative {
  color: #F44336;
}
```

#### 12.1.2 報表類型選擇器組件
```css
/* 報表類型卡片選擇器 */
.report-type-selector {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin-bottom: 24px;
}

.report-type-card {
  background: #FFFFFF;
  border: 2px solid #E0E0E0;
  border-radius: 12px;
  padding: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
  text-align: center;
}

.report-type-card:hover {
  border-color: #2196F3;
  background: #F3F8FF;
}

.report-type-card.selected {
  border-color: #1976D2;
  background: #E3F2FD;
}

.report-type-icon {
  width: 48px;
  height: 48px;
  margin: 0 auto 12px;
  background: #2196F3;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  color: white;
}

.report-type-title {
  font-size: 16px;
  font-weight: 600;
  color: #212121;
  margin-bottom: 8px;
}

.report-type-description {
  font-size: 14px;
  color: #757575;
  line-height: 1.4;
}
```

#### 12.1.3 報表設計器畫布組件
```css
/* 拖拉式報表設計器 */
.report-designer-container {
  display: flex;
  height: 100vh;
  background: #F5F5F5;
}

.designer-sidebar {
  width: 280px;
  background: #FFFFFF;
  border-right: 1px solid #E0E0E0;
  overflow-y: auto;
}

.designer-canvas-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.designer-toolbar {
  height: 60px;
  background: #FFFFFF;
  border-bottom: 1px solid #E0E0E0;
  display: flex;
  align-items: center;
  padding: 0 20px;
  gap: 12px;
}

.designer-canvas {
  flex: 1;
  background: #FAFAFA;
  position: relative;
  overflow: auto;
  padding: 20px;
}

.report-canvas {
  background: #FFFFFF;
  border: 1px solid #E0E0E0;
  border-radius: 8px;
  min-height: 600px;
  position: relative;
  margin: 0 auto;
  max-width: 800px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.canvas-grid {
  background-image: 
    linear-gradient(to right, #F0F0F0 1px, transparent 1px),
    linear-gradient(to bottom, #F0F0F0 1px, transparent 1px);
  background-size: 20px 20px;
}
```

#### 12.1.4 四模式報表卡片差異設計

**精準控制者模式：**
```css
.controller-report-card {
  --mode-primary: #1976D2;
  --mode-accent: #0D47A1;
  padding: 16px;
  font-size: 14px;
}

.controller-report-metrics {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
  margin-top: 16px;
}

.controller-report-metric {
  text-align: center;
  padding: 8px;
  background: rgba(25, 118, 210, 0.05);
  border-radius: 6px;
}

.controller-metric-value {
  font-size: 12px;
  font-weight: 700;
  color: var(--mode-primary);
}

.controller-metric-label {
  font-size: 10px;
  color: #757575;
  margin-top: 2px;
}
```

**紀錄習慣者模式：**
```css
.logger-report-card {
  --mode-primary: #6A1B9A;
  --mode-accent: #AD85C6;
  background: linear-gradient(135deg, 
    rgba(255,255,255,0.98), 
    rgba(248,245,250,0.98));
  border-left: 6px solid transparent;
  border-image: linear-gradient(135deg, 
    var(--mode-primary), 
    var(--mode-accent)) 1;
  padding: 28px;
}

.logger-report-preview {
  background: linear-gradient(135deg, 
    rgba(106, 27, 154, 0.1), 
    rgba(173, 133, 198, 0.1));
  border-radius: 12px;
  padding: 16px;
  margin: 16px 0;
}

.logger-report-title {
  text-align: center;
  margin-top: 20px;
}

.logger-report-value {
  font-size: 20px;
  font-weight: 700;
  background: linear-gradient(135deg, 
    var(--mode-primary), 
    var(--mode-accent));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
```

**轉型挑戰者模式：**
```css
.struggler-report-card {
  --mode-primary: #E65100;
  --mode-accent: #FF8A65;
  position: relative;
}

.struggler-report-card::after {
  content: "📊";
  position: absolute;
  top: 20px;
  right: 20px;
  font-size: 28px;
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-10px); }
  60% { transform: translateY(-5px); }
}

.struggler-financial-progress {
  background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
  border: 2px solid var(--mode-primary);
  border-radius: 12px;
  padding: 16px;
  margin-top: 16px;
  text-align: center;
}

.struggler-progress-text {
  font-size: 16px;
  font-weight: 600;
  color: var(--mode-primary);
  margin-bottom: 8px;
}

.struggler-motivational-text {
  background: linear-gradient(135deg, 
    var(--mode-primary), 
    var(--mode-accent));
  color: white;
  padding: 12px;
  border-radius: 8px;
  margin-top: 12px;
  font-size: 14px;
  font-weight: 600;
}
```

**潛在覺醒者模式：**
```css
.sleeper-report-card {
  --mode-primary: #388E3C;
  --mode-accent: #81C784;
  font-size: 20px;
  padding: 32px;
}

.sleeper-simple-preview {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 24px 0;
}

.sleeper-preview-icon {
  font-size: 36px;
  margin-right: 16px;
}

.sleeper-preview-text {
  font-size: 24px;
  font-weight: 600;
  color: var(--mode-primary);
}

.sleeper-report-summary {
  text-align: center;
  margin-top: 20px;
}

.sleeper-summary-value {
  font-size: 28px;
  font-weight: 700;
  color: var(--mode-primary);
}

.sleeper-summary-label {
  font-size: 18px;
  color: #757575;
  margin-top: 8px;
}
```

### 12.2 報表預覽與匯出視覺元件

#### 12.2.1 報表預覽介面設計
```css
.report-preview-container {
  display: grid;
  grid-template-columns: 1fr 300px;
  height: 100vh;
  background: #F5F5F5;
}

.preview-main {
  padding: 20px;
  overflow-y: auto;
}

.preview-sidebar {
  background: #FFFFFF;
  border-left: 1px solid #E0E0E0;
  padding: 20px;
  overflow-y: auto;
}

.preview-toolbar {
  background: #FFFFFF;
  padding: 12px 20px;
  border-bottom: 1px solid #E0E0E0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.preview-controls {
  display: flex;
  gap: 8px;
  align-items: center;
}

.zoom-control {
  display: flex;
  align-items: center;
  gap: 8px;
  background: #F5F5F5;
  padding: 6px 12px;
  border-radius: 6px;
}

.report-preview {
  background: #FFFFFF;
  border-radius: 8px;
  padding: 40px;
  margin: 20px auto;
  max-width: 800px;
  min-height: 1000px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}
```

---

## 13. 頁面詳細規格

### 13.1 P046 報表中心頁面視覺規格

#### 13.1.1 頁面視覺佈局結構
```
┌─────────────────────────────────────┐
│ 📊 報表中心               ⚙️🔔  │ ← 頁面標題列
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │     報表功能總覽               │ │ ← 功能卡片
│ │   📈────25個──📊 已建立        │ │
│ │ 標準: 18個 | 自訂: 7個         │ │
│ │   📤本月匯出 🔗本月分享       │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 🚀 快速建立                        │ ← 快速操作
│ ┌───┐ ┌───┐ ┌───┐ ┌───┐         │
│ │📊 │ │📈 │ │📋 │ │🎨 │         │
│ │標準│ │趨勢│ │範本│ │自訂│         │
│ └───┘ └───┘ └───┘ └───┘         │
├─────────────────────────────────────┤
│ 📋 最近報表                        │ ← 報表列表
│ ┌─────────────────────────────────┐ │
│ │ 📊 月度收支分析    [📤匯出] │ │
│ │ 📅 2025-01-27 | 📊 PDF 2.1MB   │ │
│ │ 👁️ 已檢視3次 | 📤 已分享      │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 📈 預算執行報告    [👁️檢視] │ │
│ │ 📅 2025-01-26 | 📊 Excel 850KB │ │
│ │ 👁️ 已檢視1次 | 🔒 私人      │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

#### 13.1.2 四模式視覺差異
- **精準控制者**：顯示完整統計數據、詳細報表資訊、多維度分析選項
- **紀錄習慣者**：美觀的漸層卡片、優雅的動畫效果、簡潔的資訊呈現
- **轉型挑戰者**：突出顯示財務改善、報表效果、激勵性文案
- **潛在覺醒者**：大卡片設計、簡化資訊顯示、溫和的顏色搭配

### 13.2 P048 自訂報表設計頁面視覺規格

#### 13.2.1 設計器介面視覺設計
```
自訂報表設計器介面：
┌─────────────────────────────────────┐
│ 🎨 自訂報表設計器                  │
├─────────────────────────────────────┤
│ 元件庫        │      設計畫布      │
│ ┌───────────┐ │ ┌─────────────────┐ │
│ │📊 圖表    │ │ │                │ │
│ │  長條圖   │ │ │    [拖拉區域]    │ │
│ │  圓餅圖   │ │ │                │ │
│ │  線圖     │ │ │   網格輔助線     │ │
│ │📋 表格    │ │ │                │ │
│ │  資料表   │ │ │                │ │
│ │  摘要表   │ │ └─────────────────┘ │
│ │📝 文字    │ │                    │
│ │  標題     │ │    屬性設定面板     │
│ │  說明     │ │ ┌─────────────────┐ │
│ └───────────┘ │ │ 🎯 元件屬性     │ │
│               │ │ 標題: [______] │ │
│               │ │ 顏色: [🎨]     │ │
│               │ │ 大小: [____]   │ │
│               │ └─────────────────┘ │
└─────────────────────────────────────┘
```

#### 13.2.2 四模式設計器差異
- **精準控制者**：完整元件庫、詳細屬性設定、進階配置選項
- **紀錄習慣者**：美觀範本選擇、視覺化屬性調整、優雅的預覽
- **轉型挑戰者**：目標導向範本、財務改善圖表、激勵元素整合
- **潛在覺醒者**：簡化元件選擇、智慧預設配置、大按鈕操作

### 13.3 P050 報表匯出頁面視覺規格

#### 13.3.1 匯出介面設計
```
┌─────────────────────────────────────┐
│ 📤 報表匯出                        │
│ 報表：「月度收支分析」              │
│ 預覽：📊 [縮圖預覽]                │
├─────────────────────────────────────┤
│ 📄 匯出格式                        │
│ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐    │
│ │📄   │ │📊   │ │📋   │ │🖼️   │    │
│ │PDF  │ │Excel│ │CSV  │ │PNG  │    │
│ │✓選中│ │     │ │     │ │     │    │
│ └─────┘ └─────┘ └─────┘ └─────┘    │
├─────────────────────────────────────┤
│ ⚙️ 匯出設定                        │
│ 📏 頁面大小: [A4 ▼]               │
│ 📐 方向: ○直向 ●橫向              │
│ 🎨 品質: ●高品質 ○標準 ○壓縮      │
│ 🔒 密碼保護: ☑️ [________]        │
├─────────────────────────────────────┤
│ 📊 檔案預估                        │
│ 大小: ~2.3MB | 頁數: 5頁          │
│ 預計時間: 30秒                     │
│                                    │
│ [取消] [開始匯出]                  │
└─────────────────────────────────────┘
```

#### 13.3.2 四模式匯出差異
- **精準控制者**：完整匯出選項、詳細設定、多格式同時匯出
- **紀錄習慣者**：美觀的格式選擇、優雅的進度動畫
- **轉型挑戰者**：快速匯出選項、目標相關格式建議
- **潛在覺醒者**：一鍵匯出、智慧預設格式、大按鈕設計

---

## 14. 整合驗收標準

### 14.1 視覺設計驗收標準

#### 14.1.1 四模式視覺一致性檢查
- [ ] **精準控制者模式**：所有報表管理按鈕正確連結對應API端點
- [ ] **紀錄習慣者模式**：美觀設計不影響API功能調用正確性
- [ ] **轉型挑戰者模式**：激勵性視覺元素正確搭配功能按鈕
- [ ] **潛在覺醒者模式**：簡化視覺設計仍能正確執行完整功能

#### 14.1.2 API連結驗收清單
- [ ] **F022標準報表API**：P046-P047-P049-P053頁面按鈕正確調用
- [ ] **F023自訂報表API**：P048-P051-P054頁面設計按鈕正確執行
- [ ] **F024報表匯出API**：P050-P052-P055頁面匯出功能正常

#### 14.1.3 視覺無障礙驗收標準
- [ ] **WCAG 2.1 AA色彩對比**：所有文字與背景對比度≥4.5:1
- [ ] **觸控目標尺寸**：所有按鈕觸控區域≥44pt×44pt
- [ ] **螢幕閱讀器支援**：所有報表元素有適當語意標籤
- [ ] **鍵盤導航**：Tab鍵可依邏輯順序導航所有報表介面
- [ ] **焦點指示**：所有可互動元素有清晰的焦點視覺指示

### 14.2 視覺設計品質驗收

#### 14.2.1 報表功能視覺化準確性
- [ ] **報表預覽**：預覽內容與最終輸出視覺一致
- [ ] **圖表渲染**：所有圖表類型正確顯示和互動
- [ ] **匯出進度**：匯出過程視覺指示準確無誤
- [ ] **設計器操作**：拖拉操作視覺回饋即時準確

#### 14.2.2 四模式視覺差異驗收
- [ ] **功能完整度差異**：各模式報表功能顯示符合設計
- [ ] **視覺複雜度階梯**：Controller > Logger > Struggler > Sleeper
- [ ] **色彩主題一致性**：各模式色彩主題正確應用
- [ ] **字型大小階梯**：14px > 16px > 16px > 18px 符合設計

#### 14.2.3 互動體驗驗收
- [ ] **動畫流暢度**：所有報表動畫在60fps下流暢運行
- [ ] **回饋即時性**：按鈕點擊後100ms內有視覺回饋
- [ ] **載入狀態**：API調用期間有適當的載入視覺指示
- [ ] **錯誤處理**：報表錯誤狀態有清晰的視覺化表達

---

## 15. 版本記錄

| 版本 | 日期 | 修改者 | 修改內容 |
|------|------|--------|----------|
| **v2.1.0** | **2025-01-27** | **LCAS SA Team** | **🔧 重要修正：轉換為產品視覺設計需求文件** |
|  |  |  | **• 移除所有技術實作代碼，專注視覺設計需求** |
|  |  |  | **• 確保API端點對照表與按鈕連結的正確性** |
|  |  |  | **• 強化四模式報表視覺差異化設計規範** |
|  |  |  | **• 專注於使用者介面與視覺體驗需求** |
|  |  |  | **• 對齊9005 PRD文件的視覺設計定位與原則** |
|  |  |  | **• 詳細定義報表管理專用視覺元件與樣式** |
| **v2.0.0** | **2025-08-07** | **LCAS SA Team** | **🎉 初版：報表功能群組SRS建立** |
|  |  |  | **• 整合P046-P055十個報表功能頁面規格** |
|  |  |  | **• 建立API端點對照表（F022-F024）** |
|  |  |  | **• 設計四模式差異化報表管理體驗** |
|  |  |  | **• 建立完整的報表設計與匯出機制** |

### 15.1 v2.1.0修正重點摘要

#### 15.1.1 移除的技術實作內容
- ❌ 刪除所有技術實作代碼與API詳細規格
- ❌ 移除複雜的報表生成算法實作細節
- ❌ 移除詳細的圖表渲染技術實作
- ❌ 移除ReportGenerator等技術類別

#### 15.1.2 保留並強化的視覺設計內容
- ✅ **API對照表**：確保按鈕與API端點連結正確性
- ✅ **視覺設計規範**：詳細的UI元件與CSS樣式定義
- ✅ **四模式差異**：清晰的報表視覺差異化設計指引
- ✅ **使用者體驗**：完整的報表管理視覺流程設計

#### 15.1.3 新增的視覺設計重點
- 🎨 詳細的CSS樣式規範與報表視覺元件定義
- 🎨 四模式的報表管理視覺差異化實作指引
- 🎨 完整的報表設計器介面與匯出流程設計規範
- 🎨 報表預覽與分析功能的視覺設計要求

#### 15.1.4 確保的API連結正確性
- 🔗 所有20個API端點功能與對應按鈕功能正確連結
- 🔗 報表中心、標準報表、自訂設計、匯出分享等功能按鈕API呼叫正確
- 🔗 四模式下相同功能按鈕均能正確調用對應API
- 🔗 API調用成功/失敗狀態的視覺回饋設計完整

---

## 備註

### 📌 報表功能群組視覺特色
- **多元報表視覺化**：支援標準與自訂報表的豐富視覺呈現方式
- **智慧設計器視覺**：直觀的拖拉式報表設計工具與即時預覽
- **多格式匯出視覺**：清晰的格式選擇與匯出進度視覺指示
- **四模式適配視覺**：針對不同使用者需求的報表管理視覺差異化

### 🎯 視覺設計目標達成度
- ✅ **API連結正確性**：所有按鈕與對應API端點連結準確無誤
- ✅ **四模式差異化**：完整的報表管理視覺差異化設計規範
- ✅ **使用者體驗**：直觀易用的報表管理視覺介面設計
- ✅ **設計一致性**：符合9005 PRD的設計系統要求
- ✅ **視覺無障礙**：完整的WCAG 2.1 AA標準視覺支援

### 🚀 下一步視覺開發重點
1. **報表視覺元件實作**：依據設計規範實作報表專用視覺元件
2. **四模式視覺測試**：驗證各模式的報表管理視覺體驗差異
3. **API整合視覺測試**：確保按鈕功能與API呼叫的視覺回饋正確
4. **設計器視覺最佳化**：確保拖拉式設計器的視覺互動效能
5. **響應式報表介面**：確保各裝置尺寸下的報表視覺體驗

---

**🎉 報表功能群組SRS v2.1.0 - 專注視覺設計需求，確保API連結正確性！**