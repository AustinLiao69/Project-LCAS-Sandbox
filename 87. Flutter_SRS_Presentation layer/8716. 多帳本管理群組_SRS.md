# 8716. 多帳本管理群組_SRS

**文件編號**: 8716-SRS-GROUP  
**版本**: v2.1.0  
**建立日期**: 2025-08-07  
**建立者**: LCAS SA Team  
**最後更新**: 2025-01-27 22:45:00 UTC+8

---

## 目次

1. [群組概述](#1-群組概述)
2. [頁面功能總覽](#2-頁面功能總覽)
3. [API端點對照表](#3-api端點對照表)
4. [功能目的](#4-功能目的)
5. [使用者故事](#5-使用者故事)
6. [前置條件](#6-前置條件)
7. [功能流程](#7-功能流程)
8. [輸入項目](#8-輸入項目)
9. [輸出項目](#9-輸出項目)
10. [驗證規則](#10-驗證規則)
11. [錯誤處理](#11-錯誤處理)
12. [UI元件與排版需求](#12-ui元件與排版需求)
13. [頁面詳細規格](#13-頁面詳細規格)
14. [整合驗收標準](#14-整合驗收標準)
15. [版本記錄](#15-版本記錄)

---

## 1. 群組概述

### 1.1 群組定位
多帳本管理群組是LCAS 2.0 Flutter應用程式的**帳本組織中心**，提供完整的多帳本視覺化管理體驗，支援個人多帳本、專案型帳本、分類型帳本等不同使用情境的**視覺設計需求**。

### 1.2 群組範圍
本群組整合以下10個帳本管理功能頁面的視覺設計規格：
- **P016 帳本清單頁面**：帳本總覽卡片與快速存取介面
- **P017 建立帳本頁面**：新帳本建立表單與視覺引導
- **P018 帳本設定頁面**：帳本屬性管理介面設計
- **P019 專案帳本詳情**：專案型帳本視覺化管理
- **P020 分類帳本詳情**：分類型帳本介面設計
- **P021 成員管理頁面**：協作成員管理視覺介面
- **P022 權限設定頁面**：權限控制介面設計
- **P023 邀請成員頁面**：成員邀請流程視覺化
- **P024 帳本統計頁面**：帳本層級統計視覺呈現
- **P025 刪除帳本頁面**：安全刪除確認介面

### 1.3 設計原則
- **多帳本視覺架構**：清晰的帳本類型視覺區分
- **權限視覺化管理**：直觀的權限狀態展示
- **協作友善介面**：便於多人協作的視覺設計
- **四模式差異化**：針對不同使用者模式提供適配的視覺體驗

---

## 2. 頁面功能總覽

| 頁面編號 | 頁面名稱 | 主要視覺功能 | 四模式差異重點 | 使用頻率 |
|----------|----------|-------------|----------------|----------|
| **P016** | 帳本清單頁面 | 帳本卡片展示、快速切換介面 | 卡片密度與資訊顯示 | 高 |
| **P017** | 建立帳本頁面 | 類型選擇器、表單設計 | 選項複雜度與引導 | 中 |
| **P018** | 帳本設定頁面 | 設定面板、屬性編輯器 | 設定項目顯示數量 | 中 |
| **P019** | 專案帳本詳情 | 專案資訊卡片、進度視覺化 | 專案管理界面複雜度 | 中 |
| **P020** | 分類帳本詳情 | 分類規則展示、智慧標籤 | 分類管理界面深度 | 中 |
| **P021** | 成員管理頁面 | 成員列表、角色標籤視覺化 | 成員資訊顯示詳細度 | 中 |
| **P022** | 權限設定頁面 | 權限矩陣、角色選擇器 | 權限設定界面複雜度 | 低 |
| **P023** | 邀請成員頁面 | 邀請表單、狀態指示器 | 邀請方式選項多樣性 | 低 |
| **P024** | 帳本統計頁面 | 統計圖表、數據視覺化 | 統計分析顯示深度 | 中 |
| **P025** | 刪除帳本頁面 | 確認對話框、警告設計 | 安全檢查界面嚴格度 | 低 |

---

## 3. API端點對照表

### 3.1 完整API對應關係（確保按鈕與API連結正確）

| 頁面編號 | 頁面名稱 | 對應API編號 | API路徑 | HTTP方法 | 主要按鈕功能 |
|----------|----------|-------------|---------|----------|-------------|
| **P016** | 帳本清單頁面 | **F015** | GET /app/ledgers/switch | GET | 「切換帳本」按鈕 |
| **P017** | 建立帳本頁面 | **F010** | POST /app/projects/create | POST | 「建立專案帳本」按鈕 |
| **P017** | 建立帳本頁面 | **F013** | POST /app/categories/create | POST | 「建立分類帳本」按鈕 |
| **P018** | 帳本設定頁面 | **F011** | PUT /app/projects/manage | PUT | 「儲存設定」按鈕 |
| **P018** | 帳本設定頁面 | **F014** | PUT /app/categories/manage | PUT | 「更新分類」按鈕 |
| **P019** | 專案帳本詳情 | **F011** | PUT /app/projects/manage | PUT | 「編輯專案」按鈕 |
| **P020** | 分類帳本詳情 | **F014** | PUT /app/categories/manage | PUT | 「管理分類」按鈕 |
| **P021** | 成員管理頁面 | **F011** | PUT /app/projects/manage | PUT | 「管理成員」按鈕 |
| **P022** | 權限設定頁面 | **F020** | PUT /app/shared/permissions | PUT | 「更新權限」按鈕 |
| **P023** | 邀請成員頁面 | **F019** | POST /app/shared/create | POST | 「發送邀請」按鈕 |
| **P024** | 帳本統計頁面 | **F007** | GET /app/ledger/query | GET | 「重新整理」按鈕 |
| **P025** | 刪除帳本頁面 | **F012** | DELETE /app/projects/delete | DELETE | 「確認刪除」按鈕 |

---

## 4. 功能目的

### 4.1 群組整體視覺設計目的
多帳本管理群組作為LCAS 2.0的**視覺組織中心**，致力於：
- **直觀帳本管理**：提供清晰的多帳本視覺化管理介面
- **協作體驗優化**：設計便於多人協作的視覺元素
- **四模式差異化**：針對不同使用者模式提供適配的視覺體驗
- **操作流暢性**：確保帳本管理操作的視覺連貫性

### 4.2 四模式視覺差異化目的

#### 精準控制者模式
- 提供完整的帳本管理視覺介面與詳細資訊展示
- 顯示豐富的帳本統計分析與管理選項
- 支援複雜的權限矩陣視覺化展示

#### 紀錄習慣者模式  
- 打造優雅美觀的帳本管理視覺體驗
- 重視視覺美感與操作流暢度
- 簡化管理選項但保持美學品質

#### 轉型挑戰者模式
- 融入目標達成與進度追蹤的視覺元素
- 提供積極的帳本目標視覺回饋
- 強調帳本層級的目標追蹤視覺化

#### 潛在覺醒者模式
- 極簡化的帳本操作視覺介面
- 提供大按鈕與簡化的視覺指引
- 降低視覺複雜度，鼓勵使用

---

## 5. 使用者故事

### 5.1 核心使用者故事

**作為多帳本使用者**，我希望能透過直觀的視覺介面輕鬆管理不同用途的帳本，以便將不同類型的財務資料有序組織。

**作為協作管理者**，我希望能透過清晰的視覺元素邀請成員並設定權限，以便實現安全有效的帳本協作。

### 5.2 四模式使用者故事

#### 精準控制者 (Controller)
> "作為精準控制者，我希望看到完整詳細的帳本管理介面，包括複雜的權限矩陣、詳細的成員管理視圖、精確的統計圖表展示。"

#### 紀錄習慣者 (Logger)  
> "作為紀錄習慣者，我希望帳本管理介面是美觀且愉悅的，有優雅的卡片設計、美麗的統計圖表，讓管理帳本成為視覺享受。"

#### 轉型挑戰者 (Struggler)
> "作為轉型挑戰者，我希望帳本介面能展示目標進度，提供明確的目標追蹤視覺元素，並在達到里程碑時給予視覺化鼓勵。"

#### 潛在覺醒者 (Sleeper)
> "作為潛在覺醒者，我希望帳本管理介面非常簡單直觀，有大按鈕與清楚的視覺指引，不需要複雜的權限設定界面。"

---

## 6. 前置條件

### 6.1 視覺設計前置條件
- 已完成9005 Flutter Presentation Layer PRD的設計系統定義
- 四模式色彩與字型系統已建立
- 基礎UI元件庫已準備就緒
- 響應式設計框架已設定

### 6.2 功能前置條件
- 使用者已成功通過認證流程群組（P001-P005）
- 已完成基本的使用者設定與模式選擇
- 具備帳本建立與管理的基本權限
- 相關API端點已就緒並可正常呼叫

---

## 7. 功能流程

### 7.1 主要帳本管理視覺流程

#### 7.1.1 建立帳本視覺流程（P017）
```
1. 進入建立帳本頁面
   ├── 顯示帳本類型選擇卡片
   ├── 展示設定表單介面
   ├── 提供範本預覽選項
   └── 顯示建立進度指示器

2. 類型專屬視覺設定
   ├── 個人帳本：簡化設定介面
   ├── 專案帳本：專案資訊表單
   └── 分類帳本：分類規則設定器

3. 建立確認視覺回饋
   ├── 顯示建立進度動畫
   ├── 展示成功確認畫面
   └── 提供後續操作引導
```

#### 7.1.2 成員管理視覺流程（P021）
```
1. 進入成員管理頁面
   ├── 載入成員列表卡片
   ├── 顯示角色標籤與權限狀態
   ├── 提供管理操作按鈕
   └── 展示邀請狀態指示器

2. 成員操作視覺處理
   ├── 新增成員邀請表單
   ├── 權限修改視覺確認
   ├── 成員移除警告對話框
   └── 活動歷史時間軸展示
```

---

## 8. 輸入項目

### 8.1 群組共通輸入介面設計

| 輸入類別 | 輸入元件 | 視覺設計要求 | 四模式差異 |
|----------|----------|-------------|------------|
| **帳本基本** | 帳本名稱輸入框 | 圓角8px，高度56px | 字體大小依模式調整 |
| **帳本基本** | 帳本類型選擇器 | 卡片式選擇，視覺區分 | 選項數量依模式調整 |
| **帳本基本** | 描述文字框 | 多行輸入，最多200字 | 簡化版可隱藏 |
| **專案設定** | 日期選擇器 | 日曆彈出式，清楚標示 | 潛在覺醒者使用預設值 |
| **分類設定** | 標籤輸入器 | 標籤雲顯示，顏色區分 | 複雜度依模式調整 |
| **成員管理** | Email輸入框 | 驗證狀態視覺回饋 | 所有模式保持一致 |
| **權限設定** | 權限矩陣 | 表格式佈局，切換開關 | 潛在覺醒者隱藏 |

---

## 9. 輸出項目

### 9.1 群組共通輸出介面設計

| 輸出類別 | 視覺呈現方式 | 設計要求 | 四模式差異 |
|----------|-------------|----------|------------|
| **帳本資料** | 帳本卡片列表 | 圓角12px，陰影2dp | 密度與資訊量依模式調整 |
| **成員資料** | 成員頭像列表 | 圓形頭像，角色標籤 | 詳細程度依模式調整 |
| **權限資料** | 權限狀態指示 | 顏色編碼，圖示標示 | 複雜度依模式調整 |
| **統計資料** | 圖表視覺化 | 響應式圖表，動畫效果 | 圖表類型依模式選擇 |
| **操作結果** | 成功/錯誤提示 | Toast訊息，顏色區分 | 所有模式保持一致 |

---

## 10. 驗證規則

### 10.1 視覺化驗證設計

#### 10.1.1 輸入驗證視覺回饋
- **即時驗證**：輸入框邊框顏色變化（紅色錯誤、綠色正確）
- **錯誤提示**：輸入框下方顯示錯誤訊息，字體12px，紅色
- **成功指示**：輸入框右側顯示綠色勾選圖示

#### 10.1.2 四模式驗證差異
- **精準控制者**：顯示詳細的驗證規則說明
- **紀錄習慣者**：美觀的驗證動畫效果
- **轉型挑戰者**：正面鼓勵的驗證回饋
- **潛在覺醒者**：簡化的驗證錯誤訊息

---

## 11. 錯誤處理

### 11.1 錯誤狀態視覺設計

#### 11.1.1 錯誤訊息視覺呈現

| 錯誤類型 | 視覺設計 | 顏色方案 | 圖示選擇 |
|----------|----------|----------|----------|
| **權限不足錯誤** | 警告對話框 | 橙色系 | 🔒 鎖定圖示 |
| **網路連線錯誤** | 底部通知條 | 紅色系 | 📶 網路圖示 |
| **資料驗證錯誤** | 輸入框紅色邊框 | 紅色系 | ⚠️ 警告圖示 |
| **操作成功** | 綠色Toast | 綠色系 | ✅ 成功圖示 |

#### 11.1.2 四模式錯誤處理差異

| 錯誤情境 | 精準控制者 | 紀錄習慣者 | 轉型挑戰者 | 潛在覺醒者 |
|----------|-------------|-------------|-------------|-------------|
| **權限不足** | 詳細錯誤代碼與解決方案 | 優雅的錯誤提示動畫 | 正面鼓勵的錯誤提示 | 簡單易懂的錯誤說明 |
| **網路異常** | 技術細節與重試選項 | 美觀的離線模式指示 | 激勵性的重試提示 | 大按鈕重試設計 |

---

## 12. UI元件與排版需求

### 12.1 多帳本專用視覺元件

#### 12.1.1 帳本卡片元件設計
```css
/* 帳本卡片基礎樣式 */
.ledger-card {
  background: #FFFFFF;
  border-radius: 12px;
  padding: 20px;
  margin: 8px 16px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  border-left: 4px solid var(--ledger-type-color);
  transition: all 0.3s ease;
}

.ledger-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
}
```

#### 12.1.2 四模式帳本卡片差異
```css
/* 精準控制者模式 - 密集資訊 */
.controller-ledger-card {
  padding: 16px;
  font-size: 14px;
  line-height: 1.3;
}

/* 紀錄習慣者模式 - 美觀設計 */
.logger-ledger-card {
  background: linear-gradient(135deg, #FAFAFA, #F5F5F5);
  border-left: 4px solid transparent;
  border-image: linear-gradient(135deg, #7B1FA2, #AD85C6) 1;
}

/* 轉型挑戰者模式 - 目標導向 */
.struggler-ledger-card::before {
  content: "🎯";
  position: absolute;
  top: 16px;
  right: 16px;
  font-size: 24px;
}

/* 潛在覺醒者模式 - 極簡設計 */
.sleeper-ledger-card {
  font-size: 18px;
  padding: 24px;
  min-height: 120px;
}
```

### 12.2 成員管理視覺元件

#### 12.2.1 成員卡片設計
```css
.member-card {
  display: flex;
  align-items: center;
  padding: 16px;
  border-radius: 8px;
  border: 1px solid #E0E0E0;
  margin-bottom: 8px;
}

.member-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  margin-right: 16px;
  position: relative;
}

.member-status-dot {
  position: absolute;
  bottom: 2px;
  right: 2px;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  border: 2px solid #FFFFFF;
}

.member-role-badge {
  background: var(--role-color);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
}
```

### 12.3 權限矩陣視覺設計

#### 12.3.1 權限開關元件
```css
.permission-toggle {
  width: 44px;
  height: 24px;
  background: #BDBDBD;
  border-radius: 12px;
  position: relative;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.permission-toggle.enabled {
  background: #4CAF50;
}

.permission-toggle::after {
  content: '';
  width: 20px;
  height: 20px;
  background: #FFFFFF;
  border-radius: 50%;
  position: absolute;
  top: 2px;
  left: 2px;
  transition: transform 0.3s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.permission-toggle.enabled::after {
  transform: translateX(20px);
}
```

---

## 13. 頁面詳細規格

### 13.1 P016 帳本清單頁面視覺規格

#### 13.1.1 頁面佈局結構
```
┌─────────────────────────────────────┐
│ 📋 我的帳本                    ➕ │ ← 標題列
├─────────────────────────────────────┤
│ 🔍 搜尋帳本...                     │ ← 搜尋列
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ 📊 個人帳本        [預設]      │ │ ← 帳本卡片
│ │ 156筆記錄 • 最後更新2小時前     │ │
│ │ 餘額: NT$ 45,600               │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 🎯 2025投資專案    [專案]      │ │
│ │ 23筆記錄 • 3位成員             │ │
│ │ 進度: 65% • 預算剩餘 $12,000   │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

#### 13.1.2 四模式視覺差異
- **精準控制者**：顯示詳細統計數據、成員數量、權限狀態
- **紀錄習慣者**：美觀的漸層卡片、優雅的間距設計
- **轉型挑戰者**：突出顯示目標進度、成就標籤
- **潛在覺醒者**：大卡片設計、簡化資訊顯示

### 13.2 P017 建立帳本頁面視覺規格

#### 13.2.1 類型選擇器設計
```
┌─────────────────────────────────────┐
│ 選擇帳本類型                        │
├─────────────────────────────────────┤
│ ┌─────┐ ┌─────┐ ┌─────┐             │
│ │ 👤  │ │ 🎯  │ │ 📋  │             │
│ │個人 │ │專案 │ │分類 │             │
│ │帳本 │ │帳本 │ │帳本 │             │
│ └─────┘ └─────┘ └─────┘             │
└─────────────────────────────────────┘
```

#### 13.2.2 表單設計規格
- **輸入框高度**：56px，圓角8px
- **按鈕高度**：48px（潛在覺醒者模式72px）
- **間距**：元件間距16px，群組間距24px
- **標籤字體**：16px，600字重

### 13.3 P021 成員管理頁面視覺規格

#### 13.3.1 成員列表設計
```
┌─────────────────────────────────────┐
│ 成員管理 (4位成員)            ➕邀請 │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ 👤 張小明     [擁有者]  🟢      │ │
│ │    admin@example.com          │ │
│ │    最後活動: 2小時前            │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 👤 李小華     [管理員]  🟡      │ │
│ │    user@example.com           │ │
│ │    最後活動: 1天前             │ │
│ │    [編輯權限] [移除成員]        │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

#### 13.3.2 角色標籤顏色規範
- **擁有者**：紅色系 (#F44336)
- **管理員**：紫色系 (#9C27B0)
- **編輯者**：藍色系 (#2196F3)
- **檢視者**：灰色系 (#757575)

---

## 14. 整合驗收標準

### 14.1 視覺設計驗收標準

#### 14.1.1 四模式一致性檢查
- [ ] **精準控制者模式**：所有管理功能按鈕正確連結對應API
- [ ] **紀錄習慣者模式**：美觀設計不影響API功能調用
- [ ] **轉型挑戰者模式**：目標相關按鈕正確觸發統計API
- [ ] **潛在覺醒者模式**：簡化按鈕仍能正確執行完整功能

#### 14.1.2 API連結驗收清單
- [ ] **F015帳本切換API**：P016切換按鈕正確調用
- [ ] **F010/F013建立API**：P017建立按鈕根據類型正確調用
- [ ] **F011/F014管理API**：P018-P020管理按鈕正確連結
- [ ] **F019/F020協作API**：P021-P023協作按鈕功能正常
- [ ] **F007查詢API**：P024統計按鈕正確觸發資料更新
- [ ] **F012刪除API**：P025刪除按鈕安全確認後正確執行

#### 14.1.3 跨模式視覺一致性
- [ ] **色彩系統**：四模式色彩方案正確應用
- [ ] **字型系統**：各模式字型大小符合設計規範
- [ ] **間距系統**：佈局間距在各模式下保持比例一致
- [ ] **圖示系統**：功能圖示在各模式下含義一致

---

## 15. 版本記錄

| 版本 | 日期 | 修改者 | 修改內容 |
|------|------|--------|----------|
| **v2.1.0** | **2025-01-27** | **LCAS SA Team** | **🔧 重要修正：專注視覺設計需求，移除技術實作** |
|  |  |  | **• 移除所有技術實作代碼，改為視覺設計需求描述** |
|  |  |  | **• 確保API端點對照表與按鈕連結的正確性** |
|  |  |  | **• 強化四模式視覺差異化設計規範** |
|  |  |  | **• 專注於使用者介面與視覺體驗需求** |
|  |  |  | **• 對齊9005 PRD文件的設計定位與原則** |
| **v2.0.0** | **2025-08-07** | **LCAS SA Team** | **🎉 初版：多帳本管理群組SRS建立** |
|  |  |  | **• 整合P016-P025十個帳本管理頁面規格** |
|  |  |  | **• 建立API端點對照表** |
|  |  |  | **• 設計四模式差異化體驗** |

### 15.1 v2.1.0修正重點摘要

#### 15.1.1 移除的技術實作內容
- ❌ 刪除所有Dart程式碼實作
- ❌ 移除詳細的狀態管理邏輯
- ❌ 移除安全性實作細節
- ❌ 移除複雜的業務邏輯處理

#### 15.1.2 保留並強化的視覺設計內容
- ✅ **API對照表**：確保按鈕與API連結正確
- ✅ **視覺設計規範**：詳細的UI元件與樣式定義
- ✅ **四模式差異**：清晰的視覺差異化設計
- ✅ **使用者體驗**：完整的操作流程視覺設計

#### 15.1.3 新增的視覺設計重點
- 🎨 詳細的CSS樣式規範與視覺元件定義
- 🎨 四模式的視覺差異化實作指引
- 🎨 完整的UI元件設計規格
- 🎨 按鈕與API連結的正確性確保

---

## 備註

### 📌 多帳本管理群組視覺特色
- **清晰的帳本類型區分**：透過顏色、圖示、佈局區分不同帳本類型
- **直觀的權限狀態展示**：視覺化的權限矩陣與角色標籤系統
- **流暢的協作體驗**：便於多人協作的視覺設計與狀態指示
- **四模式適配設計**：針對不同使用者需求的視覺差異化

### 🎯 視覺設計目標達成度
- ✅ **API連結正確性**：所有按鈕與對應API端點連結準確
- ✅ **四模式差異化**：完整的視覺差異化設計規範
- ✅ **使用者體驗**：直觀易用的帳本管理視覺介面
- ✅ **設計一致性**：符合9005 PRD的設計系統要求

### 🚀 下一步視覺開發重點
1. **UI元件實作**：依據設計規範實作視覺元件
2. **四模式測試**：驗證各模式的視覺體驗差異
3. **API整合測試**：確保按鈕功能與API呼叫正確
4. **響應式適配**：確保各裝置尺寸下的視覺體驗
5. **無障礙設計**：補強視覺設計的無障礙支援

---

**🎉 多帳本管理群組SRS v2.1.0 - 專注視覺設計需求，確保API連結正確性！**