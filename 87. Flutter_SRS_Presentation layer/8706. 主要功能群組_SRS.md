
# 8706. ä¸»è¦åŠŸèƒ½ç¾¤çµ„_SRS

**æ–‡ä»¶ç·¨è™Ÿ**: 8706-SRS-GROUP  
**ç‰ˆæœ¬**: v2.0.0  
**å»ºç«‹æ—¥æœŸ**: 2025-08-07  
**å»ºç«‹è€…**: LCAS SA Team  
**æœ€å¾Œæ›´æ–°**: 2025-08-11

---

## ç›®æ¬¡

1. [ç¾¤çµ„æ¦‚è¿°](#1-ç¾¤çµ„æ¦‚è¿°)
2. [é é¢åŠŸèƒ½ç¸½è¦½](#2-é é¢åŠŸèƒ½ç¸½è¦½)
3. [APIç«¯é»å°ç…§è¡¨](#3-apiç«¯é»å°ç…§è¡¨)
4. [åŠŸèƒ½ç›®çš„](#4-åŠŸèƒ½ç›®çš„)
5. [ä½¿ç”¨è€…æ•…äº‹](#5-ä½¿ç”¨è€…æ•…äº‹)
6. [å‰ç½®æ¢ä»¶](#6-å‰ç½®æ¢ä»¶)
7. [åŠŸèƒ½æµç¨‹](#7-åŠŸèƒ½æµç¨‹)
8. [è¼¸å…¥é …ç›®](#8-è¼¸å…¥é …ç›®)
9. [è¼¸å‡ºé …ç›®](#9-è¼¸å‡ºé …ç›®)
10. [é©—è­‰è¦å‰‡](#10-é©—è­‰è¦å‰‡)
11. [éŒ¯èª¤è™•ç†](#11-éŒ¯èª¤è™•ç†)
12. [UIå…ƒä»¶èˆ‡æ’ç‰ˆéœ€æ±‚](#12-uiå…ƒä»¶èˆ‡æ’ç‰ˆéœ€æ±‚)
13. [APIè¦æ ¼](#13-apiè¦æ ¼)
14. [ç‹€æ…‹èˆ‡ç•«é¢åˆ‡æ›](#14-ç‹€æ…‹èˆ‡ç•«é¢åˆ‡æ›)
15. [å®‰å…¨æ€§èˆ‡æ¬Šé™æª¢æŸ¥](#15-å®‰å…¨æ€§èˆ‡æ¬Šé™æª¢æŸ¥)
16. [å…¶ä»–è£œå……éœ€æ±‚](#16-å…¶ä»–è£œå……éœ€æ±‚)
17. [é é¢è©³ç´°è¦æ ¼](#17-é é¢è©³ç´°è¦æ ¼)
18. [æ•´åˆé©—æ”¶æ¨™æº–](#18-æ•´åˆé©—æ”¶æ¨™æº–)
19. [ç‰ˆæœ¬è¨˜éŒ„](#19-ç‰ˆæœ¬è¨˜éŒ„)

---

## 1. ç¾¤çµ„æ¦‚è¿°

### 1.1 ç¾¤çµ„å®šä½
ä¸»è¦åŠŸèƒ½ç¾¤çµ„æ˜¯LCAS 2.0 Flutteræ‡‰ç”¨ç¨‹å¼çš„**æ ¸å¿ƒæ“ä½œä¸­å¿ƒ**ï¼Œæ¶µè“‹ä½¿ç”¨è€…å®Œæˆèªè­‰å¾Œçš„æ‰€æœ‰ä¸»è¦è¨˜å¸³æ“ä½œã€è³‡æ–™ç®¡ç†èˆ‡ç³»çµ±æ§åˆ¶åŠŸèƒ½ï¼Œæ˜¯æ‡‰ç”¨ç¨‹å¼ä½¿ç”¨é »ç‡æœ€é«˜çš„åŠŸèƒ½å€åŸŸã€‚

### 1.2 ç¾¤çµ„ç¯„åœ
æœ¬ç¾¤çµ„æ•´åˆä»¥ä¸‹10å€‹æ ¸å¿ƒåŠŸèƒ½é é¢ï¼š
- **P006 é¦–é å„€è¡¨æ¿**ï¼šå€‹äººåŒ–è²¡å‹™ç¸½è¦½èˆ‡æ™ºæ…§æ´å¯Ÿ
- **P007 å¿«é€Ÿè¨˜å¸³é é¢**ï¼šä¸€éµå¼å¿«é€Ÿè¨˜å¸³é«”é©—
- **P008 è©³ç´°è¨˜å¸³é é¢**ï¼šå®Œæ•´çš„è¨˜å¸³è³‡è¨Šè¼¸å…¥
- **P009 è¨˜å¸³æ­·å²é é¢**ï¼šè¨˜å¸³è¨˜éŒ„æŸ¥è©¢èˆ‡ç®¡ç†
- **P010 è¨˜å¸³ç·¨è¼¯é é¢**ï¼šè¨˜å¸³è¨˜éŒ„ä¿®æ”¹èˆ‡æ›´æ–°
- **P011 ç§‘ç›®ç®¡ç†é é¢**ï¼šæ”¶æ”¯ç§‘ç›®åˆ†é¡ç®¡ç†
- **P012 è¨­å®šé é¢**ï¼šæ‡‰ç”¨ç¨‹å¼å€‹äººåŒ–è¨­å®š
- **P013 æœå°‹é é¢**ï¼šå…¨æ–‡æœå°‹èˆ‡é€²éšç¯©é¸
- **P014 çµ±è¨ˆé é¢**ï¼šè²¡å‹™æ•¸æ“šåˆ†æèˆ‡è¦–è¦ºåŒ–
- **P015 å¸³æœ¬åˆ‡æ›é é¢**ï¼šå¤šå¸³æœ¬é–“å¿«é€Ÿåˆ‡æ›

### 1.3 è¨­è¨ˆåŸå‰‡
- **æ•ˆç‡å„ªå…ˆ**ï¼šæœ€ä½³åŒ–è¨˜å¸³æµç¨‹ï¼Œæ¸›å°‘æ“ä½œæ­¥é©Ÿ
- **æ™ºæ…§åŒ–é«”é©—**ï¼šæä¾›AIè¼”åŠ©çš„æ™ºæ…§å»ºè­°èˆ‡è‡ªå‹•åŒ–
- **å€‹äººåŒ–è¨­è¨ˆ**ï¼šæ ¹æ“šå››ç¨®ä½¿ç”¨è€…æ¨¡å¼æä¾›å·®ç•°åŒ–é«”é©—
- **è³‡æ–™å®Œæ•´æ€§**ï¼šç¢ºä¿è¨˜å¸³è³‡æ–™çš„æº–ç¢ºæ€§èˆ‡ä¸€è‡´æ€§

---

## 2. é é¢åŠŸèƒ½ç¸½è¦½

| é é¢ç·¨è™Ÿ | é é¢åç¨± | ä¸»è¦åŠŸèƒ½ | å››æ¨¡å¼å·®ç•°é‡é» | ä½¿ç”¨é »ç‡ |
|----------|----------|----------|----------------|----------|
| **P006** | é¦–é å„€è¡¨æ¿ | è²¡å‹™ç¸½è¦½ã€æ™ºæ…§æ´å¯Ÿã€å¿«æ·æ“ä½œ | è³‡è¨Šå¯†åº¦èˆ‡è¤‡é›œåº¦ | æ¥µé«˜ |
| **P007** | å¿«é€Ÿè¨˜å¸³é é¢ | ä¸€éµè¨˜å¸³ã€èªéŸ³è¼¸å…¥ã€æ™ºæ…§å»ºè­° | è¼¸å…¥æ–¹å¼å¤šæ¨£æ€§ | æ¥µé«˜ |
| **P008** | è©³ç´°è¨˜å¸³é é¢ | å®Œæ•´è¨˜å¸³ã€é™„ä»¶ä¸Šå‚³ã€å®šä½è¨˜éŒ„ | æ¬„ä½å®Œæ•´åº¦ | é«˜ |
| **P009** | è¨˜å¸³æ­·å²é é¢ | è¨˜éŒ„æŸ¥è©¢ã€æ‰¹é‡æ“ä½œã€åŒ¯å‡ºåŠŸèƒ½ | æª¢è¦–æ–¹å¼è¤‡é›œåº¦ | é«˜ |
| **P010** | è¨˜å¸³ç·¨è¼¯é é¢ | è¨˜éŒ„ä¿®æ”¹ã€ç‰ˆæœ¬æ§åˆ¶ã€è®Šæ›´è¿½è¹¤ | ç·¨è¼¯åŠŸèƒ½æ·±åº¦ | ä¸­ |
| **P011** | ç§‘ç›®ç®¡ç†é é¢ | ç§‘ç›®åˆ†é¡ã€è‡ªè¨‚ç§‘ç›®ã€éšå±¤ç®¡ç† | ç®¡ç†åŠŸèƒ½è¤‡é›œåº¦ | ä¸­ |
| **P012** | è¨­å®šé é¢ | å€‹äººåå¥½ã€é€šçŸ¥è¨­å®šã€éš±ç§æ§åˆ¶ | è¨­å®šé¸é …æ•¸é‡ | ä¸­ |
| **P013** | æœå°‹é é¢ | å…¨æ–‡æœå°‹ã€é€²éšç¯©é¸ã€æœå°‹è¨˜éŒ„ | æœå°‹åŠŸèƒ½è¤‡é›œåº¦ | ä¸­ |
| **P014** | çµ±è¨ˆé é¢ | åœ–è¡¨åˆ†æã€è¶¨å‹¢é æ¸¬ã€å ±è¡¨ç”Ÿæˆ | åˆ†ææ·±åº¦èˆ‡å»£åº¦ | ä¸­ |
| **P015** | å¸³æœ¬åˆ‡æ›é é¢ | å¸³æœ¬åˆ‡æ›ã€åŒæ­¥ç‹€æ…‹ã€æ¬Šé™æª¢æŸ¥ | å¸³æœ¬ç®¡ç†è¤‡é›œåº¦ | ä½ |

### 2.1 ç¾¤çµ„æµç¨‹é—œä¿‚åœ–
```
P006 é¦–é å„€è¡¨æ¿ (ä¸­å¤®æ¨ç´)
    â†“ å¿«é€Ÿè¨˜å¸³        â†“ è©³ç´°è¨˜å¸³        â†“ æŸ¥çœ‹è¨˜éŒ„
P007 å¿«é€Ÿè¨˜å¸³ â†â†’ P008 è©³ç´°è¨˜å¸³    P009 è¨˜å¸³æ­·å²
    â†“ éœ€è¦ä¿®æ”¹                         â†“ ç·¨è¼¯è¨˜éŒ„
P010 è¨˜å¸³ç·¨è¼¯é é¢ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†‘                                â†“ æŸ¥çœ‹çµ±è¨ˆ
P011 ç§‘ç›®ç®¡ç† â†â†’ P013 æœå°‹é é¢ â†â†’ P014 çµ±è¨ˆé é¢
    â†‘                â†‘                â†‘
P012 è¨­å®šé é¢ â†â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“                â†“
P015 å¸³æœ¬åˆ‡æ› â†â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. APIç«¯é»å°ç…§è¡¨

### 3.1 å®Œæ•´APIå°æ‡‰é—œä¿‚

| é é¢ç·¨è™Ÿ | é é¢åç¨± | å°æ‡‰APIç·¨è™Ÿ | APIè·¯å¾‘ | HTTPæ–¹æ³• | ä¸»è¦åŠŸèƒ½æè¿° |
|----------|----------|-------------|---------|----------|-------------|
| **P006** | é¦–é å„€è¡¨æ¿ | **F009** | PUT /app/user/settings | PUT | ä½¿ç”¨è€…è¨­å®šç®¡ç† |
| **P006** | é¦–é å„€è¡¨æ¿ | **F007** | GET /app/ledger/query | GET | è¨˜å¸³è¨˜éŒ„æŸ¥è©¢ |
| **P007** | å¿«é€Ÿè¨˜å¸³é é¢ | **F006** | POST /app/ledger/entry | POST | æ–°å¢è¨˜å¸³è¨˜éŒ„ |
| **P007** | å¿«é€Ÿè¨˜å¸³é é¢ | **F008** | GET /app/subjects/list | GET | ç§‘ç›®ä»£ç¢¼ç®¡ç† |
| **P008** | è©³ç´°è¨˜å¸³é é¢ | **F006** | POST /app/ledger/entry | POST | å®Œæ•´è¨˜å¸³åŠŸèƒ½ |
| **P009** | è¨˜å¸³æ­·å²é é¢ | **F007** | GET /app/ledger/query | GET | è¨˜å¸³è¨˜éŒ„æŸ¥è©¢ |
| **P010** | è¨˜å¸³ç·¨è¼¯é é¢ | **F006** | PUT /app/ledger/entry | PUT | ç·¨è¼¯è¨˜å¸³è¨˜éŒ„ |
| **P011** | ç§‘ç›®ç®¡ç†é é¢ | **F008** | GET /app/subjects/list | GET | ç§‘ç›®ä»£ç¢¼ç®¡ç† |
| **P012** | è©³ç´°è¨˜å¸³é é¢ | **F006** | POST /app/ledger/entry | POST | è©³ç´°è¨˜å¸³åŠŸèƒ½ |
| **P013** | æœå°‹é é¢ | **F007** | GET /app/ledger/query | GET | é€²éšæœå°‹åŠŸèƒ½ |
| **P014** | çµ±è¨ˆé é¢ | **F007** | GET /app/ledger/query | GET | è³‡æ–™çµ±è¨ˆåˆ†æ |
| **P015** | å¸³æœ¬åˆ‡æ›é é¢ | **F015** | GET /app/ledgers/switch | GET | å¤šå¸³æœ¬åˆ‡æ› |

### 3.2 APIä½¿ç”¨çµ±è¨ˆ
- **è¦†è“‹APIæ•¸é‡**ï¼š4å€‹æ ¸å¿ƒAPIï¼ˆF006-F009, F015ï¼‰
- **APIä½¿ç”¨ç‡**ï¼šä¸»è¦åŠŸèƒ½ç¾¤çµ„è¦†è“‹ç‡ï¼š12.5%ï¼ˆ4/32å€‹ç«¯é»ï¼‰
- **é«˜é »API**ï¼šF006ã€F007ï¼ˆè¨˜å¸³æ ¸å¿ƒåŠŸèƒ½ï¼‰
- **æ•´åˆè¤‡é›œåº¦**ï¼šä¸­ï¼ˆé›†ä¸­æ–¼è¨˜å¸³åŠŸèƒ½ï¼‰
- **æ³¨æ„äº‹é …**ï¼šæœ¬ç¾¤çµ„å°ˆæ³¨æ–¼æ ¸å¿ƒè¨˜å¸³åŠŸèƒ½ï¼Œå…¶ä»–åŠŸèƒ½ç¾¤çµ„å°‡è¦†è“‹å‰©é¤˜APIç«¯é»

---

## 4. åŠŸèƒ½ç›®çš„

### 4.1 ç¾¤çµ„æ•´é«”ç›®çš„
ä¸»è¦åŠŸèƒ½ç¾¤çµ„ä½œç‚ºLCAS 2.0çš„**æ“ä½œæ ¸å¿ƒ**ï¼Œè‡´åŠ›æ–¼ï¼š
- **è¨˜å¸³æ•ˆç‡æœ€å¤§åŒ–**ï¼šæä¾›å¤šç¨®è¨˜å¸³æ–¹å¼ï¼Œæ»¿è¶³ä¸åŒå ´æ™¯éœ€æ±‚
- **è³‡æ–™ç®¡ç†å®Œæ•´æ€§**ï¼šç¢ºä¿è¨˜å¸³è³‡æ–™çš„æº–ç¢ºã€å®Œæ•´èˆ‡å¯è¿½æº¯
- **ä½¿ç”¨è€…é«”é©—æœ€ä½³åŒ–**ï¼šæ ¹æ“šå››ç¨®æ¨¡å¼æä¾›å€‹äººåŒ–çš„æ“ä½œé«”é©—
- **æ™ºæ…§åŒ–è¼”åŠ©**ï¼šé‹ç”¨AIæŠ€è¡“æä¾›æ™ºæ…§å»ºè­°èˆ‡è‡ªå‹•åŒ–åŠŸèƒ½

### 4.2 å››æ¨¡å¼å·®ç•°åŒ–ç›®çš„

#### ç²¾æº–æ§åˆ¶è€…æ¨¡å¼
- æä¾›å®Œæ•´çš„è¨˜å¸³åŠŸèƒ½èˆ‡è©³ç´°çš„è³‡æ–™æ§åˆ¶
- é¡¯ç¤ºè±å¯Œçš„çµ±è¨ˆåˆ†æèˆ‡è²¡å‹™æ´å¯Ÿ
- æ”¯æ´è¤‡é›œçš„ç§‘ç›®ç®¡ç†èˆ‡åˆ†é¡é«”ç³»

#### ç´€éŒ„ç¿’æ…£è€…æ¨¡å¼  
- æ‰“é€ å„ªé›…ç¾è§€çš„è¨˜å¸³é«”é©—
- é‡è¦–è¦–è¦ºåŒ–å‘ˆç¾èˆ‡æ“ä½œæµæš¢åº¦
- ç°¡åŒ–åŠŸèƒ½ä½†ä¿æŒç¾å­¸å“è³ª

#### è½‰å‹æŒ‘æˆ°è€…æ¨¡å¼
- èå…¥ç›®æ¨™é”æˆèˆ‡ç¿’æ…£é¤Šæˆå…ƒç´ 
- æä¾›ç©æ¥µçš„é€²åº¦å›é¥‹èˆ‡æ¿€å‹µæ©Ÿåˆ¶
- å¼·èª¿è²¡å‹™ç›®æ¨™çš„è¿½è¹¤èˆ‡å¯¦ç¾

#### æ½›åœ¨è¦ºé†’è€…æ¨¡å¼
- æ¥µç°¡åŒ–çš„æ“ä½œæµç¨‹èˆ‡ä»‹é¢è¨­è¨ˆ
- æä¾›æ™ºæ…§é è¨­å€¼èˆ‡è‡ªå‹•åŒ–å»ºè­°
- é™ä½è¨˜å¸³é–€æª»ï¼Œé¼“å‹µæŒçºŒä½¿ç”¨

---

## 5. ä½¿ç”¨è€…æ•…äº‹

### 5.1 æ ¸å¿ƒä½¿ç”¨è€…æ•…äº‹

**ä½œç‚ºæ—¥å¸¸ä½¿ç”¨è€…**ï¼Œæˆ‘å¸Œæœ›èƒ½å¿«é€Ÿä¸”ç°¡å–®åœ°è¨˜éŒ„æ¯ä¸€ç­†æ”¯å‡ºå’Œæ”¶å…¥ï¼Œä»¥ä¾¿æŒæ¡æˆ‘çš„è²¡å‹™ç‹€æ³ã€‚

**ä½œç‚ºåˆ†æå°å‘ä½¿ç”¨è€…**ï¼Œæˆ‘å¸Œæœ›èƒ½æ·±å…¥åˆ†ææˆ‘çš„è²¡å‹™æ•¸æ“šï¼Œä»¥ä¾¿åšå‡ºæ›´å¥½çš„è²¡å‹™æ±ºç­–ã€‚

**ä½œç‚ºå¤šå ´æ™¯ä½¿ç”¨è€…**ï¼Œæˆ‘å¸Œæœ›èƒ½åœ¨ä¸åŒæƒ…å¢ƒä¸‹éƒ½èƒ½è¼•é¬†è¨˜å¸³ï¼Œç„¡è«–æ˜¯åœ¨å®¶ã€å¤–å‡ºé‚„æ˜¯å·¥ä½œä¸­ã€‚

**ä½œç‚ºå€‹äººåŒ–éœ€æ±‚ä½¿ç”¨è€…**ï¼Œæˆ‘å¸Œæœ›èƒ½æ ¹æ“šæˆ‘çš„ä½¿ç”¨ç¿’æ…£å®¢è£½åŒ–æ‡‰ç”¨ç¨‹å¼çš„åŠŸèƒ½èˆ‡å¤–è§€ã€‚

### 5.2 å››æ¨¡å¼ä½¿ç”¨è€…æ•…äº‹

#### ç²¾æº–æ§åˆ¶è€… (Controller)
> "ä½œç‚ºç²¾æº–æ§åˆ¶è€…ï¼Œæˆ‘å¸Œæœ›èƒ½å®Œå…¨æŒæ§æ¯ä¸€ç­†è¨˜å¸³çš„ç´°ç¯€ï¼ŒåŒ…æ‹¬å¤šå±¤ç´šç§‘ç›®åˆ†é¡ã€è©³ç´°çš„æ¨™ç±¤ç®¡ç†ã€ç²¾ç¢ºçš„çµ±è¨ˆåˆ†æï¼Œä»¥åŠå®Œæ•´çš„è³‡æ–™åŒ¯å‡ºåŠŸèƒ½ã€‚"

#### ç´€éŒ„ç¿’æ…£è€… (Logger)  
> "ä½œç‚ºç´€éŒ„ç¿’æ…£è€…ï¼Œæˆ‘å¸Œæœ›è¨˜å¸³éç¨‹æ˜¯ç¾è§€ä¸”æ„‰æ‚…çš„é«”é©—ï¼Œæœ‰å„ªé›…çš„å‹•ç•«æ•ˆæœã€ç¾éº—çš„åœ–è¡¨å‘ˆç¾ï¼Œè®“è¨˜å¸³æˆç‚ºç”Ÿæ´»ä¸­çš„ç¾å¥½æ™‚åˆ»ã€‚"

#### è½‰å‹æŒ‘æˆ°è€… (Struggler)
> "ä½œç‚ºè½‰å‹æŒ‘æˆ°è€…ï¼Œæˆ‘å¸Œæœ›è¨˜å¸³åŠŸèƒ½èƒ½å¹«åŠ©æˆ‘å¯¦ç¾è²¡å‹™ç›®æ¨™ï¼Œæä¾›æ˜ç¢ºçš„é€²åº¦è¿½è¹¤ã€é”æˆæé†’ï¼Œä¸¦åœ¨æˆ‘é”åˆ°é‡Œç¨‹ç¢‘æ™‚çµ¦äºˆç©æ¥µçš„é¼“å‹µã€‚"

#### æ½›åœ¨è¦ºé†’è€… (Sleeper)
> "ä½œç‚ºæ½›åœ¨è¦ºé†’è€…ï¼Œæˆ‘å¸Œæœ›è¨˜å¸³åŠŸèƒ½éå¸¸ç°¡å–®ç›´è§€ï¼Œæœ‰æ™ºæ…§çš„è‡ªå‹•å»ºè­°ï¼Œä¸€éµå°±èƒ½å®Œæˆè¨˜å¸³ï¼Œä¸éœ€è¦è¤‡é›œçš„è¨­å®šæˆ–åˆ†é¡ã€‚"

---

## 6. å‰ç½®æ¢ä»¶

### 6.1 èªè­‰èˆ‡æ¬Šé™æ¢ä»¶
- ä½¿ç”¨è€…å·²æˆåŠŸé€šéèªè­‰æµç¨‹ç¾¤çµ„ï¼ˆP001-P005ï¼‰
- å…·å‚™æœ‰æ•ˆçš„å­˜å–ä»¤ç‰Œèˆ‡ä½¿ç”¨è€…æœƒè©±
- å·²å®ŒæˆåŸºæœ¬çš„ä½¿ç”¨è€…è¨­å®šèˆ‡æ¨¡å¼é¸æ“‡
- å…·å‚™ç›¸æ‡‰çš„è³‡æ–™å­˜å–èˆ‡ä¿®æ”¹æ¬Šé™

### 6.2 è³‡æ–™ç’°å¢ƒæ¢ä»¶
- Firestoreè³‡æ–™åº«é€£ç·šç©©å®šä¸”å¯ç”¨
- ä½¿ç”¨è€…å·²æ“æœ‰è‡³å°‘ä¸€å€‹å¯ç”¨çš„å¸³æœ¬
- åŸºæœ¬ç§‘ç›®åˆ†é¡è³‡æ–™å·²åˆå§‹åŒ–
- é›²ç«¯å„²å­˜æœå‹™æ­£å¸¸é‹ä½œï¼ˆé™„ä»¶ä¸Šå‚³ï¼‰

### 6.3 è£ç½®èˆ‡ç¶²è·¯æ¢ä»¶
- è£ç½®å…·å‚™ç©©å®šçš„ç¶²è·¯é€£ç·š
- å„²å­˜ç©ºé–“è¶³å¤ ï¼ˆæœ¬åœ°å¿«å–èˆ‡é™„ä»¶ï¼‰
- ç›¸æ©Ÿèˆ‡éº¥å…‹é¢¨æ¬Šé™ï¼ˆèªéŸ³è¨˜å¸³ã€æ”¶æ“šæ‹ç…§ï¼‰
- ä½ç½®æ¬Šé™ï¼ˆåœ°é»è¨˜éŒ„åŠŸèƒ½ï¼‰

---

## 7. åŠŸèƒ½æµç¨‹

### 7.1 ä¸»è¦è¨˜å¸³æµç¨‹

#### 7.1.1 å¿«é€Ÿè¨˜å¸³æµç¨‹ï¼ˆP007ï¼‰
```
1. é€²å…¥å¿«é€Ÿè¨˜å¸³é é¢
   â”œâ”€â”€ é¸æ“‡è¨˜å¸³é¡å‹ï¼ˆæ”¶å…¥/æ”¯å‡ºï¼‰
   â”œâ”€â”€ è¼¸å…¥é‡‘é¡ï¼ˆæ‰‹å‹•/èªéŸ³ï¼‰
   â”œâ”€â”€ é¸æ“‡ç§‘ç›®ï¼ˆæ™ºæ…§å»ºè­°ï¼‰
   â””â”€â”€ æ·»åŠ å‚™è¨»ï¼ˆå¯é¸ï¼‰
   
2. æ™ºæ…§è¾¨è­˜è™•ç†
   â”œâ”€â”€ èªéŸ³è½‰æ–‡å­—ï¼ˆå¦‚ä½¿ç”¨èªéŸ³ï¼‰
   â”œâ”€â”€ è‡ªå‹•ç§‘ç›®å»ºè­°
   â”œâ”€â”€ åœ°é»è‡ªå‹•è¨˜éŒ„
   â””â”€â”€ æ™‚é–“è‡ªå‹•å¡«å…¥
   
3. ç¢ºèªå„²å­˜
   â”œâ”€â”€ è³‡æ–™é©—è­‰
   â”œâ”€â”€ æœ¬åœ°å¿«å–
   â”œâ”€â”€ é›²ç«¯åŒæ­¥
   â””â”€â”€ æˆåŠŸå›é¥‹
```

#### 7.1.2 è©³ç´°è¨˜å¸³æµç¨‹ï¼ˆP008ï¼‰
```
1. é€²å…¥è©³ç´°è¨˜å¸³é é¢
   â”œâ”€â”€ å®Œæ•´è¡¨å–®å¡«å¯«
   â”œâ”€â”€ å¤šç´šç§‘ç›®é¸æ“‡
   â”œâ”€â”€ é™„ä»¶ä¸Šå‚³ï¼ˆæ”¶æ“šç…§ç‰‡ï¼‰
   â”œâ”€â”€ åœ°é»é¸æ“‡
   â”œâ”€â”€ æ™‚é–“è¨­å®š
   â”œâ”€â”€ æ¨™ç±¤ç®¡ç†
   â””â”€â”€ å‚™è¨»è©³ç´°èªªæ˜
   
2. é€²éšåŠŸèƒ½æ“ä½œ
   â”œâ”€â”€ å®šæœŸè¨˜å¸³è¨­å®š
   â”œâ”€â”€ åˆ†æ”¤è¨ˆç®—
   â”œâ”€â”€ åŒ¯ç‡è½‰æ›ï¼ˆå¤šå¹£åˆ¥ï¼‰
   â””â”€â”€ å°ˆæ¡ˆåˆ†é¡
   
3. ç¢ºèªèˆ‡å„²å­˜
   â”œâ”€â”€ å®Œæ•´æ€§æª¢æŸ¥
   â”œâ”€â”€ é—œè¯è³‡æ–™é©—è­‰
   â”œâ”€â”€ å„²å­˜è™•ç†
   â””â”€â”€ æˆåŠŸç¢ºèª
```

#### 7.1.3 è¨˜å¸³æ­·å²æŸ¥è©¢æµç¨‹ï¼ˆP009ï¼‰
```
1. é€²å…¥æ­·å²é é¢
   â”œâ”€â”€ è¼‰å…¥æœ€è¿‘è¨˜éŒ„
   â”œâ”€â”€ é¡¯ç¤ºå¿«é€Ÿç¯©é¸
   â”œâ”€â”€ æä¾›æœå°‹å…¥å£
   â””â”€â”€ åˆ†é è¼‰å…¥æ©Ÿåˆ¶
   
2. ç¯©é¸èˆ‡æœå°‹
   â”œâ”€â”€ æ—¥æœŸç¯„åœé¸æ“‡
   â”œâ”€â”€ ç§‘ç›®åˆ†é¡ç¯©é¸
   â”œâ”€â”€ é‡‘é¡ç¯„åœè¨­å®š
   â”œâ”€â”€ é—œéµå­—æœå°‹
   â””â”€â”€ é€²éšæ¢ä»¶çµ„åˆ
   
3. è¨˜éŒ„æ“ä½œ
   â”œâ”€â”€ å–®ç­†è¨˜éŒ„æª¢è¦–
   â”œâ”€â”€ æ‰¹é‡é¸æ“‡æ“ä½œ
   â”œâ”€â”€ ç·¨è¼¯è¨˜éŒ„
   â”œâ”€â”€ åˆªé™¤è¨˜éŒ„
   â””â”€â”€ åŒ¯å‡ºåŠŸèƒ½
```

### 7.2 å››æ¨¡å¼å·®ç•°åŒ–æµç¨‹

#### ç²¾æº–æ§åˆ¶è€…æ¨¡å¼
- **å®Œæ•´åŠŸèƒ½æµç¨‹**ï¼šæä¾›æ‰€æœ‰å¯ç”¨åŠŸèƒ½é¸é …
- **è©³ç´°è³‡æ–™æ”¶é›†**ï¼šè¦æ±‚å®Œæ•´çš„è¨˜å¸³è³‡è¨Š
- **å¤šé‡é©—è­‰æ©Ÿåˆ¶**ï¼šåš´æ ¼çš„è³‡æ–™å®Œæ•´æ€§æª¢æŸ¥

#### ç´€éŒ„ç¿’æ…£è€…æ¨¡å¼
- **å„ªé›…æ“ä½œæµç¨‹**ï¼šé‡è¦–æ“ä½œçš„æµæš¢æ€§èˆ‡ç¾æ„Ÿ
- **è¦–è¦ºåŒ–å¼•å°**ï¼šç¾è§€çš„æ­¥é©ŸæŒ‡ç¤ºèˆ‡é€²åº¦é¡¯ç¤º
- **ç°¡åŒ–å¿…è¦è³‡è¨Š**ï¼šéš±è—éæ–¼æŠ€è¡“æ€§çš„é¸é …

#### è½‰å‹æŒ‘æˆ°è€…æ¨¡å¼
- **ç›®æ¨™å°å‘æµç¨‹**ï¼šæ¯å€‹æ“ä½œéƒ½èˆ‡ç›®æ¨™é”æˆç›¸é—œè¯
- **é€²åº¦å›é¥‹æ©Ÿåˆ¶**ï¼šå³æ™‚é¡¯ç¤ºç›®æ¨™å®Œæˆé€²åº¦
- **æ¿€å‹µå…ƒç´ æ•´åˆ**ï¼šåœ¨æµç¨‹ä¸­åŠ å…¥æˆå°±èˆ‡çå‹µ

#### æ½›åœ¨è¦ºé†’è€…æ¨¡å¼
- **æ¥µç°¡åŒ–æµç¨‹**ï¼šæœ€å°‘æ­¥é©Ÿå®Œæˆè¨˜å¸³
- **æ™ºæ…§é è¨­å€¼**ï¼šè‡ªå‹•å¡«å…¥åˆç†çš„é è¨­è³‡è¨Š
- **ä¸€éµæ“ä½œ**ï¼šæä¾›å¿«æ·çš„ä¸€éµè¨˜å¸³é¸é …

---

## 8. è¼¸å…¥é …ç›®

### 8.1 ç¾¤çµ„å…±é€šè¼¸å…¥é …ç›®

| è¼¸å…¥é¡åˆ¥ | è¼¸å…¥é …ç›® | è³‡æ–™é¡å‹ | å¿…å¡« | é©ç”¨é é¢ | èªªæ˜ |
|----------|----------|----------|------|----------|------|
| **è¨˜å¸³åŸºæœ¬** | è¨˜å¸³é¡å‹ | Enum | æ˜¯ | P007, P008 | income/expense/transfer |
| **è¨˜å¸³åŸºæœ¬** | é‡‘é¡ | Decimal | æ˜¯ | P007, P008, P010 | æ­£æ•¸ï¼Œæœ€å¤š2ä½å°æ•¸ |
| **è¨˜å¸³åŸºæœ¬** | ç§‘ç›®åˆ†é¡ | String | æ˜¯ | P007, P008, P010 | éšå±¤å¼ç§‘ç›®ID |
| **è¨˜å¸³åŸºæœ¬** | è¨˜å¸³æ™‚é–“ | DateTime | æ˜¯ | P007, P008, P010 | ISO 8601æ ¼å¼ |
| **è¨˜å¸³åŸºæœ¬** | å‚™è¨»èªªæ˜ | String | å¦ | P007, P008, P010 | æœ€å¤š500å­—å…ƒ |
| **é€²éšè¨˜å¸³** | é™„ä»¶æª”æ¡ˆ | File[] | å¦ | P008 | åœ–ç‰‡/PDFï¼Œå–®æª”<10MB |
| **é€²éšè¨˜å¸³** | åœ°é»è³‡è¨Š | GeoLocation | å¦ | P008 | ç¶“ç·¯åº¦+åœ°å€ |
| **é€²éšè¨˜å¸³** | æ¨™ç±¤ | String[] | å¦ | P008, P010 | è‡ªå®šç¾©æ¨™ç±¤é™£åˆ— |
| **é€²éšè¨˜å¸³** | å°ˆæ¡ˆåˆ†é¡ | String | å¦ | P008 | å°ˆæ¡ˆIDæˆ–åç¨± |
| **æŸ¥è©¢ç¯©é¸** | æ—¥æœŸç¯„åœ | DateRange | å¦ | P009, P013, P014 | é–‹å§‹/çµæŸæ—¥æœŸ |
| **æŸ¥è©¢ç¯©é¸** | ç§‘ç›®ç¯©é¸ | String[] | å¦ | P009, P013 | ç§‘ç›®IDé™£åˆ— |
| **æŸ¥è©¢ç¯©é¸** | é‡‘é¡ç¯„åœ | NumberRange | å¦ | P009, P013 | æœ€å°/æœ€å¤§é‡‘é¡ |
| **æŸ¥è©¢ç¯©é¸** | é—œéµå­— | String | å¦ | P013 | æœå°‹é—œéµå­— |
| **ç§‘ç›®ç®¡ç†** | ç§‘ç›®åç¨± | String | æ˜¯ | P011 | 2-20å­—å…ƒ |
| **ç§‘ç›®ç®¡ç†** | ç§‘ç›®åœ–ç¤º | String | å¦ | P011 | åœ–ç¤ºä»£ç¢¼ |
| **ç§‘ç›®ç®¡ç†** | çˆ¶å±¤ç§‘ç›® | String | å¦ | P011 | çˆ¶ç§‘ç›®ID |
| **è¨­å®šç®¡ç†** | è¨­å®šéµå€¼ | Object | è¦–æƒ…æ³ | P012 | JSONæ ¼å¼è¨­å®š |
| **å¸³æœ¬æ“ä½œ** | å¸³æœ¬ID | String | æ˜¯ | P015 | ç›®æ¨™å¸³æœ¬è­˜åˆ¥ç¢¼ |

### 8.2 å››æ¨¡å¼å°ˆå±¬è¼¸å…¥å·®ç•°

#### ç²¾æº–æ§åˆ¶è€…æ¨¡å¼
- **å®Œæ•´è³‡æ–™æ”¶é›†**ï¼šæ‰€æœ‰å¯é¸æ¬„ä½éƒ½å¯è¼¸å…¥
- **å¤šå±¤ç´šåˆ†é¡**ï¼šæ”¯æ´æ·±å±¤çš„ç§‘ç›®éšå±¤
- **è©³ç´°æ¨™ç±¤ç³»çµ±**ï¼šæ”¯æ´è¤‡é›œçš„æ¨™ç±¤çµ„åˆ
- **ç²¾ç¢ºæ™‚é–“æ§åˆ¶**ï¼šæ”¯æ´ç²¾ç¢ºåˆ°åˆ†é˜çš„æ™‚é–“è¨­å®š

#### ç´€éŒ„ç¿’æ…£è€…æ¨¡å¼
- **ç¾è§€è¼¸å…¥é«”é©—**ï¼šé‡è¦–è¼¸å…¥ä»‹é¢çš„è¦–è¦ºç¾æ„Ÿ
- **æ™ºæ…§è¼¸å…¥è¼”åŠ©**ï¼šæä¾›å„ªé›…çš„è¼¸å…¥å»ºè­°
- **ç°¡åŒ–å¿…è¦æ¬„ä½**ï¼šéš±è—éæ–¼è¤‡é›œçš„æ¬„ä½

#### è½‰å‹æŒ‘æˆ°è€…æ¨¡å¼
- **ç›®æ¨™é—œè¯è¼¸å…¥**ï¼šè¼¸å…¥é …ç›®èˆ‡è²¡å‹™ç›®æ¨™ç›¸é—œè¯
- **é€²åº¦è¿½è¹¤è¼¸å…¥**ï¼šé¡å¤–æ”¶é›†èˆ‡ç›®æ¨™ç›¸é—œçš„è³‡è¨Š
- **æ¿€å‹µå°å‘è¨­è¨ˆ**ï¼šè¼¸å…¥éç¨‹èå…¥æ¿€å‹µå…ƒç´ 

#### æ½›åœ¨è¦ºé†’è€…æ¨¡å¼
- **æ¥µç°¡è¼¸å…¥**ï¼šåƒ…æ”¶é›†æœ€æ ¸å¿ƒçš„å¿…è¦è³‡è¨Š
- **æ™ºæ…§é è¨­**ï¼šå¤§é‡ä½¿ç”¨æ™ºæ…§é è¨­å€¼
- **ä¸€éµè¼¸å…¥**ï¼šæä¾›é è¨­çš„å¿«é€Ÿè¼¸å…¥é¸é …

---

## 9. è¼¸å‡ºé …ç›®

### 9.1 ç¾¤çµ„å…±é€šè¼¸å‡ºé …ç›®

| è¼¸å‡ºé¡åˆ¥ | è¼¸å‡ºé …ç›® | è³‡æ–™é¡å‹ | é©ç”¨é é¢ | èªªæ˜ |
|----------|----------|----------|----------|------|
| **è¨˜å¸³çµæœ** | è¨˜å¸³è¨˜éŒ„ | Object | P007, P008 | å®Œæ•´çš„è¨˜å¸³è¨˜éŒ„ç‰©ä»¶ |
| **è¨˜å¸³çµæœ** | è¨˜éŒ„ID | String | P007, P008 | æ–°å»ºè¨˜éŒ„çš„å”¯ä¸€è­˜åˆ¥ç¢¼ |
| **è¨˜å¸³çµæœ** | åŒæ­¥ç‹€æ…‹ | Boolean | P007, P008, P010 | é›²ç«¯åŒæ­¥æˆåŠŸç‹€æ…‹ |
| **æŸ¥è©¢çµæœ** | è¨˜éŒ„æ¸…å–® | Array | P009, P013 | åˆ†é çš„è¨˜éŒ„æ¸…å–® |
| **æŸ¥è©¢çµæœ** | ç¸½ç­†æ•¸ | Number | P009, P013 | ç¬¦åˆæ¢ä»¶çš„ç¸½è¨˜éŒ„æ•¸ |
| **æŸ¥è©¢çµæœ** | åˆ†é è³‡è¨Š | Object | P009, P013 | ç•¶å‰é /ç¸½é æ•¸ç­‰ |
| **çµ±è¨ˆè³‡æ–™** | è²¡å‹™æ‘˜è¦ | Object | P006, P014 | æ”¶æ”¯çµ±è¨ˆæ‘˜è¦ |
| **çµ±è¨ˆè³‡æ–™** | åœ–è¡¨è³‡æ–™ | Object | P006, P014 | åœ–è¡¨ç¹ªè£½ç”¨è³‡æ–™ |
| **çµ±è¨ˆè³‡æ–™** | è¶¨å‹¢åˆ†æ | Object | P014 | è¶¨å‹¢é æ¸¬è³‡æ–™ |
| **ç§‘ç›®è³‡æ–™** | ç§‘ç›®æ¸…å–® | Array | P011 | ç§‘ç›®åˆ†é¡éšå±¤è³‡æ–™ |
| **ç§‘ç›®è³‡æ–™** | ç§‘ç›®çµ±è¨ˆ | Object | P011 | å„ç§‘ç›®ä½¿ç”¨çµ±è¨ˆ |
| **è¨­å®šçµæœ** | è¨­å®šå€¼ | Object | P012 | ä½¿ç”¨è€…å€‹äººè¨­å®š |
| **è¨­å®šçµæœ** | æ›´æ–°ç‹€æ…‹ | Boolean | P012 | è¨­å®šæ›´æ–°æˆåŠŸç‹€æ…‹ |
| **å¸³æœ¬è³‡æ–™** | å¸³æœ¬æ¸…å–® | Array | P015 | å¯ç”¨å¸³æœ¬æ¸…å–® |
| **å¸³æœ¬è³‡æ–™** | åˆ‡æ›çµæœ | Object | P015 | å¸³æœ¬åˆ‡æ›çµæœç‹€æ…‹ |
| **æ“ä½œå›é¥‹** | æˆåŠŸè¨Šæ¯ | String | å…¨éƒ¨ | æ“ä½œæˆåŠŸçš„å‹å–„è¨Šæ¯ |
| **æ“ä½œå›é¥‹** | éŒ¯èª¤è¨Šæ¯ | String | å…¨éƒ¨ | éŒ¯èª¤èªªæ˜èˆ‡å»ºè­° |

### 9.2 å››æ¨¡å¼å°ˆå±¬è¼¸å‡º

#### ç²¾æº–æ§åˆ¶è€…æ¨¡å¼
- **è©³ç´°ç‹€æ…‹å ±å‘Š**ï¼šå®Œæ•´çš„æ“ä½œè©³æƒ…èˆ‡ç³»çµ±ç‹€æ…‹
- **é€²éšåˆ†æçµæœ**ï¼šæ·±åº¦çš„è²¡å‹™åˆ†æèˆ‡æ´å¯Ÿ
- **å®Œæ•´è³‡æ–™åŒ¯å‡º**ï¼šæ”¯æ´å¤šç¨®æ ¼å¼çš„è³‡æ–™åŒ¯å‡º

#### ç´€éŒ„ç¿’æ…£è€…æ¨¡å¼
- **è¦–è¦ºåŒ–å›é¥‹**ï¼šç¾è§€çš„æˆåŠŸå‹•ç•«èˆ‡è¦–è¦ºå›é¥‹
- **ç¾å­¸åŒ–æ•¸æ“šå‘ˆç¾**ï¼šé‡è¦–æ•¸æ“šçš„è¦–è¦ºç¾æ„Ÿ
- **å„ªé›…çš„äº’å‹•å›æ‡‰**ï¼šæµæš¢çš„é é¢è½‰æ›èˆ‡å›æ‡‰

#### è½‰å‹æŒ‘æˆ°è€…æ¨¡å¼
- **ç›®æ¨™é€²åº¦å›é¥‹**ï¼šèˆ‡è²¡å‹™ç›®æ¨™ç›¸é—œçš„é€²åº¦è³‡è¨Š
- **æˆå°±è§£é–é€šçŸ¥**ï¼šé”æˆé‡Œç¨‹ç¢‘çš„ç©æ¥µå›é¥‹
- **æ¿€å‹µæ€§çµ±è¨ˆè³‡æ–™**ï¼šå¼·èª¿æ­£é¢é€²æ­¥çš„çµ±è¨ˆå‘ˆç¾

#### æ½›åœ¨è¦ºé†’è€…æ¨¡å¼
- **ç°¡åŒ–çµæœå‘ˆç¾**ï¼šç”¨æœ€ç°¡å–®çš„æ–¹å¼å‘ˆç¾çµæœ
- **å‹å–„æˆåŠŸæç¤º**ï¼šæº«å’Œå‹å–„çš„æ“ä½œæˆåŠŸæç¤º
- **æ™ºæ…§å»ºè­°è¼¸å‡º**ï¼šåŸºæ–¼ä½¿ç”¨ç¿’æ…£çš„æ™ºæ…§å»ºè­°

---

## 10. é©—è­‰è¦å‰‡

### 10.1 ç¾¤çµ„çµ±ä¸€é©—è­‰æ¨™æº–

#### 10.1.1 è¨˜å¸³è³‡æ–™é©—è­‰
```javascript
// è¨˜å¸³è³‡æ–™é©—è­‰è¦å‰‡
const entryValidationRules = {
  amount: {
    min: 0.01,
    max: 999999999.99,
    precision: 2,
    required: true
  },
  categoryId: {
    format: /^CAT_[A-Z0-9]{8}$/,
    required: true,
    mustExist: true
  },
  description: {
    maxLength: 500,
    prohibited: ['<script>', 'javascript:', 'on'],
    required: false
  },
  entryDate: {
    format: 'ISO_8601',
    notFuture: true,
    maxPastDays: 365,
    required: true
  },
  tags: {
    maxItems: 10,
    itemMaxLength: 20,
    allowedChars: /^[\u4e00-\u9fa5a-zA-Z0-9\s\-_]+$/,
    required: false
  }
};
```

#### 10.1.2 ç§‘ç›®ç®¡ç†é©—è­‰
```javascript
// ç§‘ç›®ç®¡ç†é©—è­‰è¦å‰‡
const categoryValidationRules = {
  name: {
    minLength: 2,
    maxLength: 20,
    allowedChars: /^[\u4e00-\u9fa5a-zA-Z0-9\s]+$/,
    uniqueInParent: true,
    required: true
  },
  parentId: {
    format: /^CAT_[A-Z0-9]{8}$/,
    maxDepth: 3,
    cyclicCheck: true,
    required: false
  },
  icon: {
    allowedIcons: ['expense_food', 'expense_transport', '...'],
    required: false
  },
  color: {
    format: /^#[0-9A-F]{6}$/,
    required: false
  }
};
```

#### 10.1.3 æª”æ¡ˆä¸Šå‚³é©—è­‰
```javascript
// é™„ä»¶ä¸Šå‚³é©—è­‰è¦å‰‡
const attachmentValidationRules = {
  fileType: {
    allowed: ['image/jpeg', 'image/png', 'image/webp', 'application/pdf'],
    prohibited: ['application/javascript', 'text/html'],
    required: false
  },
  fileSize: {
    maxSize: 10 * 1024 * 1024, // 10MB
    minSize: 1024, // 1KB
    required: false
  },
  fileName: {
    maxLength: 255,
    prohibitedChars: /[<>:"/\\|?*]/,
    required: true
  },
  virusCheck: {
    enabled: true,
    quarantineOnFail: true
  }
};
```

### 10.2 å››æ¨¡å¼é©—è­‰å·®ç•°

#### ç²¾æº–æ§åˆ¶è€…æ¨¡å¼
- **åš´æ ¼é©—è­‰**ï¼šæ‰€æœ‰æ¬„ä½éƒ½é€²è¡Œæœ€åš´æ ¼çš„é©—è­‰
- **å®Œæ•´æ€§æª¢æŸ¥**ï¼šè¦æ±‚è³‡æ–™çš„å®Œæ•´æ€§èˆ‡ä¸€è‡´æ€§
- **é€²éšå®‰å…¨é©—è­‰**ï¼šé¡å¤–çš„å®‰å…¨æ€§æª¢æŸ¥æ©Ÿåˆ¶

#### ç´€éŒ„ç¿’æ…£è€…æ¨¡å¼  
- **å¹³è¡¡é©—è­‰**ï¼šåœ¨å®‰å…¨æ€§èˆ‡æ˜“ç”¨æ€§é–“å–å¾—å¹³è¡¡
- **å„ªé›…éŒ¯èª¤æç¤º**ï¼šç¾è§€å‹å–„çš„é©—è­‰éŒ¯èª¤æç¤º
- **æµæš¢é©—è­‰é«”é©—**ï¼šä¸ä¸­æ–·æ“ä½œæµç¨‹çš„å³æ™‚é©—è­‰

#### è½‰å‹æŒ‘æˆ°è€…æ¨¡å¼
- **å¼•å°å¼é©—è­‰**ï¼šé€šéé©—è­‰å¼•å°ä½¿ç”¨è€…æ­£ç¢ºæ“ä½œ
- **ç©æ¥µå›é¥‹é©—è­‰**ï¼šé©—è­‰æˆåŠŸæ™‚æä¾›æ­£é¢å›é¥‹
- **ç›®æ¨™é—œè¯é©—è­‰**ï¼šé©—è­‰èˆ‡è²¡å‹™ç›®æ¨™çš„é—œè¯æ€§

#### æ½›åœ¨è¦ºé†’è€…æ¨¡å¼
- **å¯¬é¬†é©—è­‰**ï¼šåŸºæœ¬å®‰å…¨æ€§é©—è­‰ï¼Œé¿å…éæ–¼åš´æ ¼
- **è‡ªå‹•ä¿®æ­£**ï¼šç›¡å¯èƒ½è‡ªå‹•ä¿®æ­£è¼¸å…¥éŒ¯èª¤
- **ç°¡åŒ–éŒ¯èª¤è¨Šæ¯**ï¼šä½¿ç”¨æœ€ç°¡å–®æ˜“æ‡‚çš„éŒ¯èª¤èªªæ˜

---

## 11. éŒ¯èª¤è™•ç†

### 11.1 ç¾¤çµ„çµ±ä¸€éŒ¯èª¤è™•ç†ç­–ç•¥

#### 11.1.1 è¨˜å¸³æ“ä½œéŒ¯èª¤è™•ç†

| éŒ¯èª¤é¡å‹ | éŒ¯èª¤ä»£ç¢¼ | è™•ç†ç­–ç•¥ | ä½¿ç”¨è€…é«”é©— | æŠ€è¡“è™•ç† |
|----------|----------|----------|------------|----------|
| **ç¶²è·¯é€£ç·šéŒ¯èª¤** | NET_001 | æœ¬åœ°å¿«å– + å¾ŒçºŒåŒæ­¥ | é¡¯ç¤ºé›¢ç·šæ¨¡å¼æç¤º | å°‡è³‡æ–™å­˜å…¥æœ¬åœ°éšŠåˆ— |
| **è³‡æ–™é©—è­‰éŒ¯èª¤** | VAL_001 | å³æ™‚æç¤º + æ¬„ä½æ¨™ç´… | å…·é«”çš„æ¬„ä½éŒ¯èª¤èªªæ˜ | å‰ç«¯å³æ™‚é©—è­‰ |
| **å„²å­˜ç©ºé–“ä¸è¶³** | STO_001 | æ¸…ç†å¿«å– + æé†’ | å»ºè­°æ¸…ç†æœ¬åœ°è³‡æ–™ | è‡ªå‹•æ¸…ç†èˆŠå¿«å– |
| **æª”æ¡ˆä¸Šå‚³å¤±æ•—** | UPL_001 | é‡è©¦æ©Ÿåˆ¶ + å£“ç¸® | è‡ªå‹•é‡è©¦æç¤º | 3æ¬¡é‡è©¦ï¼Œè‡ªå‹•å£“ç¸® |
| **åŒæ­¥è¡çª** | SYN_001 | è¡çªè§£æ±ºä»‹é¢ | é¡¯ç¤ºè¡çªè§£æ±ºé¸é … | ç‰ˆæœ¬æ¯”è¼ƒèˆ‡åˆä½µ |
| **æ¬Šé™ä¸è¶³** | AUTH_001 | é‡æ–°èªè­‰ | å°å‘èªè­‰é é¢ | åˆ·æ–°èªè­‰ä»¤ç‰Œ |

#### 11.1.2 å¸¸è¦‹éŒ¯èª¤è¨Šæ¯å››æ¨¡å¼å°ç…§

| éŒ¯èª¤æƒ…å¢ƒ | ç²¾æº–æ§åˆ¶è€…è¨Šæ¯ | ç´€éŒ„ç¿’æ…£è€…è¨Šæ¯ | è½‰å‹æŒ‘æˆ°è€…è¨Šæ¯ | æ½›åœ¨è¦ºé†’è€…è¨Šæ¯ |
|----------|-------------|-------------|-------------|-------------|
| **é‡‘é¡æ ¼å¼éŒ¯èª¤** | "é‡‘é¡æ ¼å¼ä¸æ­£ç¢ºï¼šå¿…é ˆç‚ºæ­£æ•¸ï¼Œæœ€å¤š2ä½å°æ•¸ï¼ˆéŒ¯èª¤ä»£ç¢¼ï¼šVAL_001_AMTï¼‰" | "âœ¨ è«‹è¼¸å…¥æ­£ç¢ºçš„é‡‘é¡æ ¼å¼" | "ğŸ’ª å†è©¦ä¸€æ¬¡ï¼è«‹è¼¸å…¥æ­£ç¢ºçš„é‡‘é¡" | "ğŸŒ± è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—" |
| **ç§‘ç›®æœªé¸æ“‡** | "ç§‘ç›®åˆ†é¡ç‚ºå¿…å¡«é …ç›®ï¼Œè«‹å¾å¯ç”¨ç§‘ç›®æ¸…å–®ä¸­é¸æ“‡ä¸€å€‹æœ‰æ•ˆç§‘ç›®" | "âœ¨ é‚„æ²’é¸æ“‡ç§‘ç›®åˆ†é¡å‘¢" | "ğŸ¯ é¸å€‹ç§‘ç›®ï¼Œå‘ç›®æ¨™æ›´é€²ä¸€æ­¥ï¼" | "ğŸŒ± è«‹é¸æ“‡ä¸€å€‹åˆ†é¡" |
| **ç¶²è·¯é€£ç·šå¤±æ•—** | "ç¶²è·¯é€£ç·šä¸­æ–·ï¼ˆéŒ¯èª¤ä»£ç¢¼ï¼šNET_001ï¼‰ï¼Œå·²æš«å­˜è‡³æœ¬åœ°ï¼Œå°‡æ–¼é€£ç·šæ¢å¾©å¾Œè‡ªå‹•åŒæ­¥" | "âœ¨ ç¶²è·¯æœ‰é»ä¸ç©©ï¼Œè¨˜å¸³å·²æš«å­˜" | "âš¡ ç¶²è·¯æš«æ™‚ä¸­æ–·ï¼Œä½†ä½ çš„è¨˜éŒ„å¾ˆå®‰å…¨ï¼" | "ğŸŒ± ç¶²è·¯ä¸é€šï¼Œè¨˜éŒ„å·²ä¿å­˜" |
| **æª”æ¡ˆéå¤§** | "é™„ä»¶æª”æ¡ˆéå¤§ï¼ˆç•¶å‰ï¼š15MBï¼Œé™åˆ¶ï¼š10MBï¼‰ï¼Œè«‹å£“ç¸®å¾Œé‡æ–°ä¸Šå‚³" | "âœ¨ åœ–ç‰‡æœ‰é»å¤§ï¼Œå»ºè­°å£“ç¸®ä¸€ä¸‹" | "ğŸ“¸ åœ–ç‰‡å¤ªå¤§äº†ï¼Œå£“ç¸®å¾Œå†ä¸Šå‚³å§ï¼" | "ğŸŒ± åœ–ç‰‡å¤ªå¤§äº†" |

### 11.2 æ™ºæ…§éŒ¯èª¤æ¢å¾©æ©Ÿåˆ¶

```dart
// æ™ºæ…§éŒ¯èª¤æ¢å¾©è™•ç†
class SmartErrorRecovery {
  
  /**
   * 27. è‡ªå‹•éŒ¯èª¤æ¢å¾©è™•ç†
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description æ ¹æ“šéŒ¯èª¤é¡å‹åŸ·è¡Œæ™ºæ…§æ¢å¾©ç­–ç•¥
   */
  static Future<RecoveryResult> handleError({
    required AppError error,
    required UserMode userMode,
    Map<String, dynamic>? context,
  }) async {
    switch (error.type) {
      case ErrorType.network:
        return await _handleNetworkError(error, userMode);
      case ErrorType.validation:
        return await _handleValidationError(error, userMode);
      case ErrorType.storage:
        return await _handleStorageError(error, userMode);
      case ErrorType.sync:
        return await _handleSyncError(error, userMode, context);
      default:
        return await _handleGenericError(error, userMode);
    }
  }
  
  /**
   * 28. ç¶²è·¯éŒ¯èª¤æ™ºæ…§è™•ç†
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description ç¶²è·¯éŒ¯èª¤çš„æ™ºæ…§æ¢å¾©ç­–ç•¥
   */
  static Future<RecoveryResult> _handleNetworkError(
    AppError error, 
    UserMode userMode
  ) async {
    // å•Ÿç”¨é›¢ç·šæ¨¡å¼
    await OfflineManager.enableOfflineMode();
    
    // æ ¹æ“šæ¨¡å¼æä¾›ä¸åŒçš„æ¢å¾©å»ºè­°
    String suggestion;
    switch (userMode) {
      case UserMode.controller:
        suggestion = "å·²å•Ÿç”¨é›¢ç·šæ¨¡å¼ï¼Œæ‰€æœ‰æ“ä½œå°‡åœ¨ç¶²è·¯æ¢å¾©å¾Œè‡ªå‹•åŒæ­¥";
        break;
      case UserMode.logger:
        suggestion = "âœ¨ ç¾åœ¨æ˜¯é›¢ç·šæ¨¡å¼ï¼Œè¨˜éŒ„æœƒè‡ªå‹•ä¿å­˜";
        break;
      case UserMode.struggler:
        suggestion = "ğŸ’ª åˆ¥è®“ç¶²è·¯é˜»æ­¢ä½ çš„é€²æ­¥ï¼é›¢ç·šæ¨¡å¼å·²é–‹å•Ÿ";
        break;
      case UserMode.sleeper:
        suggestion = "ğŸŒ± ç¶²è·¯æ–·äº†ï¼Œä½†è¨˜éŒ„é‚„æ˜¯æœƒä¿å­˜çš„";
        break;
    }
    
    return RecoveryResult(
      success: true,
      suggestion: suggestion,
      autoRetry: true,
      retryAfter: Duration(seconds: 30),
    );
  }
}
```

---

## 12. UIå…ƒä»¶èˆ‡æ’ç‰ˆéœ€æ±‚

### 12.1 ç¾¤çµ„è¨­è¨ˆç³»çµ±

#### 12.1.1 ä¸»è¦åŠŸèƒ½è‰²å½©è¦ç¯„
```css
/* ä¸»è¦åŠŸèƒ½ç¾¤çµ„å°ˆç”¨è‰²å½©ç³»çµ± */
:root {
  /* åŠŸèƒ½ä¸»è‰²èª¿ */
  --main-primary: #2E7D32;
  --main-primary-variant: #1B5E20;
  --main-secondary: #4CAF50;
  --main-accent: #FF8F00;
  
  /* åŠŸèƒ½ç‹€æ…‹è‰²å½© */
  --main-income: #4CAF50;
  --main-expense: #F44336;
  --main-transfer: #2196F3;
  --main-neutral: #757575;
  
  /* åŠŸèƒ½èƒŒæ™¯è‰²å½© */
  --main-background: #FAFAFA;
  --main-card-bg: #FFFFFF;
  --main-divider: #E0E0E0;
  --main-overlay: rgba(0, 0, 0, 0.05);
  
  /* çµ±è¨ˆåœ–è¡¨è‰²å½© */
  --chart-color-1: #4CAF50;
  --chart-color-2: #2196F3;
  --chart-color-3: #FF9800;
  --chart-color-4: #9C27B0;
  --chart-color-5: #F44336;
}
```

#### 12.1.2 è¨˜å¸³è¡¨å–®çµ„ä»¶è¦ç¯„
```css
/* è¨˜å¸³è¡¨å–®å°ˆç”¨çµ„ä»¶ */
.entry-form-container {
  background: var(--main-card-bg);
  border-radius: 12px;
  padding: 24px;
  margin: 16px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.amount-input {
  font-size: 32px;
  font-weight: 600;
  text-align: center;
  color: var(--main-primary);
  border: none;
  background: transparent;
  width: 100%;
  margin-bottom: 16px;
}

.category-selector {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 16px;
}

.category-chip {
  background: var(--main-secondary);
  color: white;
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.category-chip:hover {
  background: var(--main-primary);
  transform: scale(1.05);
}

.quick-action-button {
  width: 100%;
  height: 56px;
  background: var(--main-primary);
  color: white;
  border: none;
  border-radius: 28px;
  font-size: 18px;
  font-weight: 600;
  margin-top: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}
```

#### 12.1.3 çµ±è¨ˆåœ–è¡¨çµ„ä»¶è¦ç¯„
```css
/* çµ±è¨ˆåœ–è¡¨å°ˆç”¨çµ„ä»¶ */
.statistics-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 16px;
  padding: 16px;
}

.stat-card {
  background: var(--main-card-bg);
  border-radius: 16px;
  padding: 20px;
  border-left: 4px solid var(--main-primary);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
}

.stat-value {
  font-size: 28px;
  font-weight: 700;
  color: var(--main-primary);
  margin-bottom: 8px;
}

.stat-label {
  font-size: 14px;
  color: var(--main-neutral);
  margin-bottom: 16px;
}

.chart-container {
  width: 100%;
  height: 200px;
  margin-top: 16px;
}
```

### 12.2 å››æ¨¡å¼UIå·®ç•°è¨­è¨ˆ

#### 12.2.1 ç²¾æº–æ§åˆ¶è€…æ¨¡å¼
```css
.controller-main {
  --mode-primary: #1565C0;
  --mode-accent: #0D47A1;
}

.controller-main .entry-form-container {
  border-left: 4px solid var(--mode-primary);
}

.controller-main .advanced-options {
  display: block; /* é¡¯ç¤ºæ‰€æœ‰é€²éšé¸é … */
}

.controller-main .data-table {
  font-size: 12px; /* æ›´å°å­—é«”é¡¯ç¤ºæ›´å¤šè³‡è¨Š */
}

.controller-main .stat-card {
  padding: 16px; /* æ›´ç·Šæ¹Šçš„ä½ˆå±€ */
}
```

#### 12.2.2 ç´€éŒ„ç¿’æ…£è€…æ¨¡å¼
```css
.logger-main {
  --mode-primary: #7B1FA2;
  --mode-accent: #AD85C6;
}

.logger-main .entry-form-container {
  background: linear-gradient(135deg, 
    rgba(255,255,255,0.95), 
    rgba(248,245,250,0.95));
  border-left: 4px solid var(--mode-primary);
}

.logger-main .amount-input {
  background: linear-gradient(135deg, 
    var(--mode-primary), 
    var(--mode-accent));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.logger-main .category-chip {
  background: linear-gradient(135deg, 
    var(--mode-primary), 
    var(--mode-accent));
  box-shadow: 0 4px 12px rgba(123, 31, 162, 0.3);
}

.logger-main .chart-container {
  filter: drop-shadow(0 4px 8px rgba(123, 31, 162, 0.2));
}
```

#### 12.2.3 è½‰å‹æŒ‘æˆ°è€…æ¨¡å¼
```css
.struggler-main {
  --mode-primary: #E65100;
  --mode-accent: #FF8A65;
}

.struggler-main .entry-form-container {
  border-left: 4px solid var(--mode-primary);
  position: relative;
}

.struggler-main .entry-form-container::before {
  content: "ğŸ’ª";
  position: absolute;
  top: 16px;
  right: 16px;
  font-size: 24px;
}

.struggler-main .progress-indicator {
  background: #FFF3E0;
  border: 1px solid var(--mode-primary);
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 16px;
  text-align: center;
}

.struggler-main .achievement-badge {
  display: inline-block;
  background: var(--mode-primary);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
  margin: 2px;
}
```

#### 12.2.4 æ½›åœ¨è¦ºé†’è€…æ¨¡å¼
```css
.sleeper-main {
  --mode-primary: #388E3C;
  --mode-accent: #81C784;
}

.sleeper-main .entry-form-container {
  border-left: 4px solid var(--mode-primary);
  font-size: 18px; /* æ›´å¤§çš„å­—é«” */
}

.sleeper-main .amount-input {
  font-size: 40px; /* è¶…å¤§é‡‘é¡è¼¸å…¥ */
  height: 80px;
}

.sleeper-main .category-chip {
  padding: 12px 20px; /* æ›´å¤§çš„æŒ‰éˆ• */
  font-size: 16px;
}

.sleeper-main .quick-action-button {
  height: 72px; /* è¶…å¤§æŒ‰éˆ• */
  font-size: 20px;
}

.sleeper-main .complex-options {
  display: none; /* éš±è—è¤‡é›œé¸é … */
}
```

### 12.3 éŸ¿æ‡‰å¼è¨­è¨ˆè¦ç¯„

#### 12.3.1 ä¸»è¦åŠŸèƒ½ç¾¤çµ„éŸ¿æ‡‰å¼æ–·é»
```css
/* ä¸»è¦åŠŸèƒ½éŸ¿æ‡‰å¼æ–·é» */
@media (max-width: 480px) {
  .entry-form-container {
    margin: 8px;
    padding: 16px;
  }
  
  .amount-input {
    font-size: 28px;
  }
  
  .statistics-container {
    grid-template-columns: 1fr;
  }
}

@media (min-width: 481px) and (max-width: 768px) {
  .statistics-container {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .entry-form-container {
    max-width: 500px;
    margin: 16px auto;
  }
}

@media (min-width: 769px) {
  .main-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 32px;
  }
  
  .statistics-container {
    grid-template-columns: repeat(3, 1fr);
  }
}
```

---

## 13. APIè¦æ ¼

### 13.1 ä¸»è¦åŠŸèƒ½ç¾¤çµ„APIæ•´åˆè¦æ ¼

#### 13.1.1 F006 - æ–°å¢è¨˜å¸³è¨˜éŒ„API

**ç«¯é»è©³ç´°è¦æ ¼**
```javascript
// POST /entries
const createEntry = {
  endpoint: '/entries',
  method: 'POST',
  timeout: 10000,
  headers: {
    'Authorization': 'Bearer {accessToken}',
    'Content-Type': 'application/json'
  },
  
  // è«‹æ±‚æ ¼å¼
  requestSchema: {
    type: 'enum[income|expense|transfer]',
    amount: 'decimal(10,2)', // æ­£æ•¸ï¼Œæœ€å¤š2ä½å°æ•¸
    categoryId: 'string', // ç§‘ç›®åˆ†é¡ID
    description: 'string(500)?', // å¯é¸å‚™è¨»
    entryDate: 'ISO_8601_datetime',
    
    // é€²éšæ¬„ä½ï¼ˆP008å°ˆç”¨ï¼‰
    attachments: 'file[]?', // é™„ä»¶æª”æ¡ˆé™£åˆ—
    location: {
      latitude: 'number?',
      longitude: 'number?',
      address: 'string?'
    },
    tags: 'string[]?', // æ¨™ç±¤é™£åˆ—
    projectId: 'string?', // å°ˆæ¡ˆåˆ†é¡
    
    // ç³»çµ±æ¬„ä½
    ledgerId: 'string', // ç›®æ¨™å¸³æœ¬ID
    deviceInfo: {
      platform: 'enum[android|ios|web]',
      deviceId: 'string',
      timestamp: 'ISO_8601_datetime'
    }
  },
  
  // å›æ‡‰æ ¼å¼
  responseSchema: {
    success: 'boolean',
    data: {
      entryId: 'string',
      entry: {
        id: 'string',
        type: 'string',
        amount: 'decimal',
        categoryId: 'string',
        description: 'string?',
        entryDate: 'ISO_8601_datetime',
        attachments: 'attachment[]?',
        location: 'object?',
        tags: 'string[]?',
        projectId: 'string?',
        createdAt: 'ISO_8601_datetime',
        updatedAt: 'ISO_8601_datetime'
      },
      syncStatus: 'enum[synced|pending|failed]'
    },
    message: 'string'
  }
};
```

#### 13.1.2 F008 - æŸ¥è©¢è¨˜å¸³è¨˜éŒ„API

**ç«¯é»è©³ç´°è¦æ ¼**
```javascript
// GET /entries
const getEntries = {
  endpoint: '/entries',
  method: 'GET',
  timeout: 15000,
  headers: {
    'Authorization': 'Bearer {accessToken}'
  },
  
  // æŸ¥è©¢åƒæ•¸
  queryParams: {
    // åˆ†é åƒæ•¸
    page: 'integer?', // é ç¢¼ï¼Œé è¨­1
    limit: 'integer?', // æ¯é ç­†æ•¸ï¼Œé è¨­20
    
    // ç¯©é¸åƒæ•¸
    type: 'enum[income|expense|transfer]?',
    categoryId: 'string[]?', // ç§‘ç›®IDé™£åˆ—
    startDate: 'ISO_8601_date?',
    endDate: 'ISO_8601_date?',
    minAmount: 'decimal?',
    maxAmount: 'decimal?',
    
    // æœå°‹åƒæ•¸
    keyword: 'string?', // å…¨æ–‡æœå°‹é—œéµå­—
    tags: 'string[]?', // æ¨™ç±¤ç¯©é¸
    projectId: 'string?', // å°ˆæ¡ˆç¯©é¸
    
    // æ’åºåƒæ•¸
    sortBy: 'enum[entryDate|amount|createdAt]?',
    sortOrder: 'enum[asc|desc]?',
    
    // ç³»çµ±åƒæ•¸
    ledgerId: 'string', // å¸³æœ¬ID
    includeDeleted: 'boolean?' // åŒ…å«å·²åˆªé™¤è¨˜éŒ„
  },
  
  // å›æ‡‰æ ¼å¼
  responseSchema: {
    success: 'boolean',
    data: {
      entries: 'entry[]',
      pagination: {
        currentPage: 'integer',
        totalPages: 'integer',
        totalEntries: 'integer',
        hasNext: 'boolean',
        hasPrev: 'boolean'
      },
      summary: {
        totalIncome: 'decimal',
        totalExpense: 'decimal',
        netAmount: 'decimal',
        entryCount: 'integer'
      }
    },
    message: 'string'
  }
};
```

#### 13.1.3 F015 - è²¡å‹™åˆ†æçµ±è¨ˆAPI

**ç«¯é»è©³ç´°è¦æ ¼**
```javascript
// GET /analytics
const getAnalytics = {
  endpoint: '/analytics',
  method: 'GET',
  timeout: 20000,
  headers: {
    'Authorization': 'Bearer {accessToken}'
  },
  
  // æŸ¥è©¢åƒæ•¸
  queryParams: {
    // æ™‚é–“ç¯„åœ
    startDate: 'ISO_8601_date',
    endDate: 'ISO_8601_date',
    
    // åˆ†æé¡å‹
    analysisType: 'enum[summary|category|trend|comparison]',
    
    // åˆ†çµ„æ–¹å¼
    groupBy: 'enum[day|week|month|quarter|year|category]?',
    
    // ç³»çµ±åƒæ•¸
    ledgerId: 'string',
    currency: 'string?', // è²¨å¹£ä»£ç¢¼
    
    // é€²éšåƒæ•¸ï¼ˆç²¾æº–æ§åˆ¶è€…æ¨¡å¼ï¼‰
    includeProjection: 'boolean?', // åŒ…å«è¶¨å‹¢é æ¸¬
    detailLevel: 'enum[basic|detailed|comprehensive]?'
  },
  
  // å›æ‡‰æ ¼å¼
  responseSchema: {
    success: 'boolean',
    data: {
      period: {
        startDate: 'ISO_8601_date',
        endDate: 'ISO_8601_date',
        dayCount: 'integer'
      },
      summary: {
        totalIncome: 'decimal',
        totalExpense: 'decimal',
        netAmount: 'decimal',
        entryCount: 'integer',
        averageDaily: 'decimal'
      },
      categoryBreakdown: {
        income: 'categoryAnalysis[]',
        expense: 'categoryAnalysis[]'
      },
      trendData: {
        daily: 'trendPoint[]',
        monthly: 'trendPoint[]'
      },
      insights: {
        topCategories: 'string[]',
        unusualPatterns: 'string[]',
        recommendations: 'string[]'
      },
      chartData: {
        pieChart: 'chartDataPoint[]',
        lineChart: 'chartDataPoint[]',
        barChart: 'chartDataPoint[]'
      }
    },
    message: 'string'
  }
};
```

### 13.2 APIæ•ˆèƒ½æœ€ä½³åŒ–ç­–ç•¥

#### 13.2.1 å¿«å–ç­–ç•¥å¯¦ä½œ
```javascript
// APIå¿«å–ç®¡ç†
class MainFunctionAPICache {
  static const CACHE_DURATION = {
    'entries': Duration(minutes: 5),
    'categories': Duration(hours: 1),
    'analytics': Duration(minutes: 15),
    'settings': Duration(hours: 2)
  };
  
  /**
   * 29. æ™ºæ…§å¿«å–ç®¡ç†
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description æ ¹æ“šè³‡æ–™é¡å‹èˆ‡ä½¿ç”¨æ¨¡å¼é€²è¡Œæ™ºæ…§å¿«å–
   */
  static Future<ApiResponse> getCachedOrFetch({
    required String endpoint,
    required Map<String, dynamic> params,
    required UserMode userMode,
  }) async {
    final cacheKey = _generateCacheKey(endpoint, params);
    final cachedData = await CacheManager.get(cacheKey);
    
    // æª¢æŸ¥å¿«å–æ˜¯å¦æœ‰æ•ˆ
    if (cachedData != null && !_isCacheExpired(cachedData, endpoint)) {
      // ç²¾æº–æ§åˆ¶è€…æ¨¡å¼è¦æ±‚æ›´æ–°çš„è³‡æ–™
      if (userMode == UserMode.controller && 
          _shouldRefreshForController(endpoint)) {
        return await _fetchAndCache(endpoint, params, cacheKey);
      }
      
      return ApiResponse.fromCache(cachedData);
    }
    
    return await _fetchAndCache(endpoint, params, cacheKey);
  }
  
  /**
   * 30. æ‰¹é‡APIæœ€ä½³åŒ–
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description æ‰¹é‡è™•ç†å¤šå€‹APIè«‹æ±‚ä»¥æœ€ä½³åŒ–æ•ˆèƒ½
   */
  static Future<Map<String, ApiResponse>> batchFetch({
    required List<ApiRequest> requests,
    int maxConcurrent = 3,
  }) async {
    final results = <String, ApiResponse>{};
    final chunks = _chunkRequests(requests, maxConcurrent);
    
    for (final chunk in chunks) {
      final futures = chunk.map((request) => 
        _executeSingleRequest(request));
      
      final chunkResults = await Future.wait(futures);
      
      for (int i = 0; i < chunk.length; i++) {
        results[chunk[i].key] = chunkResults[i];
      }
    }
    
    return results;
  }
}
```

---

## 14. ç‹€æ…‹èˆ‡ç•«é¢åˆ‡æ›

### 14.1 ä¸»è¦åŠŸèƒ½ç¾¤çµ„ç‹€æ…‹ç®¡ç†

#### 14.1.1 ç¾¤çµ„ç´šç‹€æ…‹å®šç¾©
```dart
// ä¸»è¦åŠŸèƒ½ç¾¤çµ„çµ±ä¸€ç‹€æ…‹ç®¡ç†
enum MainFunctionState {
  // åˆå§‹ç‹€æ…‹
  initial,
  loading,
  
  // è¨˜å¸³æµç¨‹ç‹€æ…‹
  entryCreating,
  entryEditing,
  entryDeleting,
  
  // æŸ¥è©¢ç‹€æ…‹
  entriesLoading,
  entriesLoaded,
  searching,
  
  // çµ±è¨ˆç‹€æ…‹
  analyticsLoading,
  analyticsLoaded,
  
  // åŒæ­¥ç‹€æ…‹
  syncing,
  syncComplete,
  syncFailed,
  offline,
  
  // éŒ¯èª¤ç‹€æ…‹
  error,
  networkError,
  validationError
}

// ä¸»è¦åŠŸèƒ½ç¾¤çµ„è³‡æ–™æ¨¡å‹
class MainFunctionModel {
  // è¨˜å¸³è³‡æ–™
  List<Entry> entries;
  Entry? currentEntry;
  List<Category> categories;
  
  // æŸ¥è©¢èˆ‡ç¯©é¸
  EntryFilter currentFilter;
  String? searchKeyword;
  PaginationInfo pagination;
  
  // çµ±è¨ˆè³‡æ–™
  AnalyticsData? analytics;
  Map<String, ChartData> chartData;
  
  // ä½¿ç”¨è€…è¨­å®š
  UserSettings settings;
  
  // ç‹€æ…‹æ§åˆ¶
  MainFunctionState currentState;
  String? errorMessage;
  bool isOfflineMode;
  DateTime? lastSyncTime;
  
  MainFunctionModel({
    this.entries = const [],
    this.currentEntry,
    this.categories = const [],
    this.currentFilter = const EntryFilter(),
    this.searchKeyword,
    this.pagination = const PaginationInfo(),
    this.analytics,
    this.chartData = const {},
    this.settings = const UserSettings(),
    this.currentState = MainFunctionState.initial,
    this.errorMessage,
    this.isOfflineMode = false,
    this.lastSyncTime,
  });
}
```

#### 14.1.2 ç‹€æ…‹è½‰æ›æ§åˆ¶å™¨
```dart
// ä¸»è¦åŠŸèƒ½ç‹€æ…‹è½‰æ›ç®¡ç†
class MainFunctionStateController {
  
  /**
   * 31. è¨˜å¸³æµç¨‹ç‹€æ…‹ç®¡ç†
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description ç®¡ç†è¨˜å¸³æ“ä½œçš„ç‹€æ…‹è½‰æ›
   */
  static Future<StateTransitionResult> handleEntryOperation({
    required EntryOperation operation,
    required MainFunctionModel currentModel,
    required UserMode userMode,
  }) async {
    switch (operation.type) {
      case EntryOperationType.create:
        return await _handleCreateEntry(operation, currentModel, userMode);
      case EntryOperationType.update:
        return await _handleUpdateEntry(operation, currentModel, userMode);
      case EntryOperationType.delete:
        return await _handleDeleteEntry(operation, currentModel, userMode);
      default:
        return StateTransitionResult.error('æœªçŸ¥çš„æ“ä½œé¡å‹');
    }
  }
  
  /**
   * 32. é›¢ç·šåŒæ­¥ç‹€æ…‹ç®¡ç†
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description ç®¡ç†é›¢ç·šèˆ‡åŒæ­¥ç‹€æ…‹çš„è½‰æ›
   */
  static Future<void> handleOfflineSync(MainFunctionModel model) async {
    if (!NetworkManager.isConnected) {
      model.currentState = MainFunctionState.offline;
      return;
    }
    
    if (OfflineManager.hasPendingChanges()) {
      model.currentState = MainFunctionState.syncing;
      
      try {
        await OfflineManager.syncPendingChanges();
        model.currentState = MainFunctionState.syncComplete;
        model.lastSyncTime = DateTime.now();
      } catch (e) {
        model.currentState = MainFunctionState.syncFailed;
        model.errorMessage = 'åŒæ­¥å¤±æ•—ï¼š${e.toString()}';
      }
    }
  }
  
  /**
   * 33. é é¢å°èˆªç‹€æ…‹ç®¡ç†
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description ç®¡ç†é é¢é–“çš„å°èˆªç‹€æ…‹
   */
  static String getNavigationTarget({
    required String currentPage,
    required NavigationIntent intent,
    required MainFunctionModel model,
  }) {
    switch (intent.action) {
      case NavigationAction.quickEntry:
        return '/quick-entry'; // P007
      case NavigationAction.detailedEntry:
        return '/detailed-entry'; // P008
      case NavigationAction.viewHistory:
        return '/entry-history'; // P009
      case NavigationAction.editEntry:
        return '/edit-entry/${intent.entryId}'; // P010
      case NavigationAction.manageCategories:
        return '/categories'; // P011
      case NavigationAction.viewStatistics:
        return '/statistics'; // P014
      case NavigationAction.search:
        return '/search'; // P013
      case NavigationAction.settings:
        return '/settings'; // P012
      case NavigationAction.switchLedger:
        return '/ledger-switch'; // P015
      default:
        return '/dashboard'; // P006
    }
  }
}
```

### 14.2 å››æ¨¡å¼ç‹€æ…‹å·®ç•°ç®¡ç†

#### 14.2.1 ç²¾æº–æ§åˆ¶è€…æ¨¡å¼ç‹€æ…‹æ“´å±•
```dart
class ControllerMainState extends MainFunctionModel {
  // é€²éšè³‡æ–™ç®¡ç†
  List<EntryVersion> entryHistory;
  Map<String, ValidationResult> validationResults;
  List<DataIntegrityCheck> integrityChecks;
  
  // è©³ç´°çµ±è¨ˆè³‡æ–™
  AdvancedAnalytics? advancedAnalytics;
  List<CustomReport> customReports;
  Map<String, ExportStatus> exportStatus;
  
  // ç³»çµ±ç‹€æ…‹
  SystemHealth systemHealth;
  List<AuditLog> auditLogs;
  
  ControllerMainState({
    this.entryHistory = const [],
    this.validationResults = const {},
    this.integrityChecks = const [],
    this.advancedAnalytics,
    this.customReports = const [],
    this.exportStatus = const {},
    this.systemHealth = const SystemHealth(),
    this.auditLogs = const [],
    super.entries,
    super.currentEntry,
    super.categories,
    super.currentFilter,
    super.searchKeyword,
    super.pagination,
    super.analytics,
    super.chartData,
    super.settings,
    super.currentState,
    super.errorMessage,
    super.isOfflineMode,
    super.lastSyncTime,
  });
}
```

#### 14.2.2 è½‰å‹æŒ‘æˆ°è€…æ¨¡å¼ç‹€æ…‹æ“´å±•
```dart
class StruggleMainState extends MainFunctionModel {
  // ç›®æ¨™è¿½è¹¤
  List<FinancialGoal> activeGoals;
  Map<String, GoalProgress> goalProgress;
  int currentStreak;
  
  // æ¿€å‹µç³»çµ±
  List<Achievement> recentAchievements;
  MotivationLevel currentMotivation;
  List<Challenge> activeChallenges;
  
  // ç¿’æ…£é¤Šæˆ
  HabitTracker habitTracker;
  List<Milestone> completedMilestones;
  
  StruggleMainState({
    this.activeGoals = const [],
    this.goalProgress = const {},
    this.currentStreak = 0,
    this.recentAchievements = const [],
    this.currentMotivation = MotivationLevel.neutral,
    this.activeChallenges = const [],
    this.habitTracker = const HabitTracker(),
    this.completedMilestones = const [],
    super.entries,
    super.currentEntry,
    super.categories,
    super.currentFilter,
    super.searchKeyword,
    super.pagination,
    super.analytics,
    super.chartData,
    super.settings,
    super.currentState,
    super.errorMessage,
    super.isOfflineMode,
    super.lastSyncTime,
  });
}
```

---

## 15. å®‰å…¨æ€§èˆ‡æ¬Šé™æª¢æŸ¥

### 15.1 ä¸»è¦åŠŸèƒ½ç¾¤çµ„å®‰å…¨æ¶æ§‹

#### 15.1.1 è³‡æ–™å­˜å–å®‰å…¨æ§åˆ¶
```dart
// ä¸»è¦åŠŸèƒ½å®‰å…¨ç®¡ç†
class MainFunctionSecurity {
  
  /**
   * 34. è¨˜å¸³è³‡æ–™å­˜å–æ¬Šé™æª¢æŸ¥
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description æª¢æŸ¥ä½¿ç”¨è€…å°è¨˜å¸³è³‡æ–™çš„å­˜å–æ¬Šé™
   */
  static Future<AccessPermission> checkEntryAccess({
    required String userId,
    required String entryId,
    required AccessType accessType,
  }) async {
    try {
      // åŸºæœ¬æ¬Šé™æª¢æŸ¥
      final user = await UserManager.getCurrentUser();
      if (user.id != userId) {
        return AccessPermission.denied('ä½¿ç”¨è€…èº«ä»½ä¸ç¬¦');
      }
      
      // å¸³æœ¬æ¬Šé™æª¢æŸ¥
      final entry = await EntryRepository.getEntry(entryId);
      final ledgerAccess = await LedgerSecurity.checkAccess(
        userId: userId,
        ledgerId: entry.ledgerId,
        accessType: accessType,
      );
      
      if (!ledgerAccess.isAllowed) {
        return AccessPermission.denied('å¸³æœ¬å­˜å–æ¬Šé™ä¸è¶³');
      }
      
      // è¨˜éŒ„æ¬Šé™æª¢æŸ¥
      switch (accessType) {
        case AccessType.read:
          return AccessPermission.allowed();
        case AccessType.write:
          return await _checkWritePermission(userId, entry);
        case AccessType.delete:
          return await _checkDeletePermission(userId, entry);
        default:
          return AccessPermission.denied('æœªçŸ¥çš„å­˜å–é¡å‹');
      }
    } catch (e) {
      logSecurityEvent('Entry access check failed: $e');
      return AccessPermission.denied('æ¬Šé™æª¢æŸ¥å¤±æ•—');
    }
  }
  
  /**
   * 35. æ•æ„Ÿè³‡æ–™é®ç½©è™•ç†
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description å°æ•æ„Ÿè³‡æ–™é€²è¡Œé©ç•¶çš„é®ç½©è™•ç†
   */
  static Map<String, dynamic> maskSensitiveData({
    required Map<String, dynamic> data,
    required UserRole userRole,
    required List<String> sensitiveFields,
  }) {
    final maskedData = Map<String, dynamic>.from(data);
    
    for (final field in sensitiveFields) {
      if (maskedData.containsKey(field)) {
        switch (userRole) {
          case UserRole.owner:
            // æ“æœ‰è€…å¯è¦‹å®Œæ•´è³‡æ–™
            break;
          case UserRole.editor:
            // ç·¨è¼¯è€…å¯è¦‹éƒ¨åˆ†è³‡æ–™
            maskedData[field] = _partialMask(maskedData[field]);
            break;
          case UserRole.viewer:
            // æª¢è¦–è€…åƒ…å¯è¦‹é®ç½©è³‡æ–™
            maskedData[field] = _fullMask(maskedData[field]);
            break;
          default:
            // é è¨­å®Œå…¨é®ç½©
            maskedData[field] = '***';
        }
      }
    }
    
    return maskedData;
  }
}
```

#### 15.1.2 APIå®‰å…¨é©—è­‰
```dart
// APIè«‹æ±‚å®‰å…¨é©—è­‰
class APISecurityValidator {
  
  /**
   * 36. APIè«‹æ±‚ç°½åé©—è­‰
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description é©—è­‰APIè«‹æ±‚çš„ç°½åèˆ‡å®Œæ•´æ€§
   */
  static bool validateAPIRequest({
    required String endpoint,
    required Map<String, dynamic> requestData,
    required String signature,
    required String timestamp,
  }) {
    try {
      // æ™‚é–“æˆ³æª¢æŸ¥ï¼ˆé˜²é‡æ”¾æ”»æ“Šï¼‰
      final requestTime = DateTime.parse(timestamp);
      final currentTime = DateTime.now();
      final timeDiff = currentTime.difference(requestTime).inMinutes;
      
      if (timeDiff > 5) {
        logSecurityEvent('Request timestamp expired: $timeDiff minutes');
        return false;
      }
      
      // æ§‹å»ºç°½åå­—ä¸²
      final signatureString = _buildSignatureString(
        endpoint: endpoint,
        data: requestData,
        timestamp: timestamp,
      );
      
      // è¨ˆç®—é æœŸç°½å
      final expectedSignature = _calculateHMAC(
        signatureString,
        APIKeys.getSigningKey(),
      );
      
      // ç°½åæ¯”è¼ƒ
      final isValid = signature == expectedSignature;
      
      if (!isValid) {
        logSecurityEvent('API signature validation failed');
      }
      
      return isValid;
    } catch (e) {
      logSecurityEvent('API signature validation error: $e');
      return false;
    }
  }
  
  /**
   * 37. è¼¸å…¥è³‡æ–™å®‰å…¨æ¸…ç†
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description æ¸…ç†ä½¿ç”¨è€…è¼¸å…¥ä»¥é˜²æ­¢æ³¨å…¥æ”»æ“Š
   */
  static Map<String, dynamic> sanitizeInputData(
    Map<String, dynamic> rawData
  ) {
    final sanitizedData = <String, dynamic>{};
    
    for (final entry in rawData.entries) {
      final key = entry.key;
      final value = entry.value;
      
      if (value is String) {
        // é˜²æ­¢XSSæ”»æ“Š
        sanitizedData[key] = _sanitizeString(value);
      } else if (value is Map<String, dynamic>) {
        // éæ­¸è™•ç†åµŒå¥—ç‰©ä»¶
        sanitizedData[key] = sanitizeInputData(value);
      } else if (value is List) {
        // è™•ç†é™£åˆ—
        sanitizedData[key] = _sanitizeArray(value);
      } else {
        // å…¶ä»–é¡å‹ç›´æ¥è¤‡è£½
        sanitizedData[key] = value;
      }
    }
    
    return sanitizedData;
  }
}
```

### 15.2 å››æ¨¡å¼å®‰å…¨å·®ç•°é…ç½®

#### 15.2.1 ç²¾æº–æ§åˆ¶è€…æ¨¡å¼å®‰å…¨å¼·åŒ–
```dart
class ControllerSecurityConfig {
  
  /**
   * 38. é€²éšå®‰å…¨ç›£æ§
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description ç‚ºç²¾æº–æ§åˆ¶è€…æä¾›é€²éšå®‰å…¨ç›£æ§
   */
  static Future<void> enableAdvancedSecurity(String userId) async {
    // å•Ÿç”¨è©³ç´°æ“ä½œæ—¥èªŒ
    await AuditLogger.enable(userId, AuditLevel.detailed);
    
    // å•Ÿç”¨ç•°å¸¸è¡Œç‚ºæª¢æ¸¬
    await BehaviorAnalyzer.enableAnomalyDetection(userId);
    
    // è¨­å®šåš´æ ¼çš„æœƒè©±ç®¡ç†
    await SessionManager.enableStrictMode(userId);
    
    // å•Ÿç”¨è³‡æ–™å®Œæ•´æ€§æª¢æŸ¥
    await DataIntegrityChecker.enable(userId);
    
    // è¨­å®šé€²éšæ¬Šé™æ§åˆ¶
    await PermissionManager.enableGranularControl(userId);
  }
}
```

#### 15.2.2 æ½›åœ¨è¦ºé†’è€…æ¨¡å¼å®‰å…¨ç°¡åŒ–
```dart
class SleeperSecurityConfig {
  
  /**
   * 39. ç°¡åŒ–å®‰å…¨è¨­å®š
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description ç‚ºæ½›åœ¨è¦ºé†’è€…æä¾›ç°¡åŒ–ä½†å®‰å…¨çš„è¨­å®š
   */
  static Future<void> setupSimplifiedSecurity(String userId) async {
    // å•Ÿç”¨åŸºæœ¬å®‰å…¨é˜²è­·
    await BasicSecurity.enableAll(userId);
    
    // è‡ªå‹•å‚™ä»½è¨­å®š
    await AutoBackup.enable(userId, BackupFrequency.daily);
    
    // ç°¡åŒ–çš„éš±ç§è¨­å®š
    await PrivacyManager.applyDefaultSettings(userId);
    
    // è‡ªå‹•å®‰å…¨æ›´æ–°
    await SecurityUpdater.enableAutoUpdate(userId);
    
    // å‹å–„çš„å®‰å…¨æé†’
    await SecurityNotifications.enableFriendlyMode(userId);
  }
}
```

---

## 16. å…¶ä»–è£œå……éœ€æ±‚

### 16.1 æ•ˆèƒ½è¦æ±‚è¦ç¯„

#### 16.1.1 ä¸»è¦åŠŸèƒ½ç¾¤çµ„æ•ˆèƒ½æŒ‡æ¨™
| æŒ‡æ¨™é¡åˆ¥ | ç›®æ¨™å€¼ | æ¸¬é‡æ–¹æ³• | å„ªåŒ–ç­–ç•¥ |
|----------|--------|----------|----------|
| **è¨˜å¸³æ“ä½œå›æ‡‰** | < 1ç§’ | æœ¬åœ°æ“ä½œæ™‚é–“ | æœ¬åœ°å¿«å–ã€æ‰¹é‡è™•ç† |
| **è³‡æ–™è¼‰å…¥æ™‚é–“** | < 3ç§’ | APIå›æ‡‰æ™‚é–“ | åˆ†é è¼‰å…¥ã€é è¼‰å…¥ |
| **æœå°‹å›æ‡‰æ™‚é–“** | < 2ç§’ | å…¨æ–‡æœå°‹æ™‚é–“ | ç´¢å¼•æœ€ä½³åŒ–ã€å¿«å– |
| **åœ–è¡¨æ¸²æŸ“æ™‚é–“** | < 2ç§’ | åœ–è¡¨é¡¯ç¤ºæ™‚é–“ | è³‡æ–™é è™•ç†ã€WebGL |
| **åŒæ­¥å®Œæˆæ™‚é–“** | < 5ç§’ | é›¢ç·šè³‡æ–™åŒæ­¥ | å¢é‡åŒæ­¥ã€å£“ç¸® |
| **è¨˜æ†¶é«”ä½¿ç”¨é‡** | < 100MB | é‹è¡Œæ™‚è¨˜æ†¶é«” | è³‡æ–™æ‡¶è¼‰å…¥ã€æ¸…ç† |

#### 16.1.2 æ™ºæ…§æ•ˆèƒ½æœ€ä½³åŒ–
```dart
// ä¸»è¦åŠŸèƒ½æ•ˆèƒ½æœ€ä½³åŒ–ç®¡ç†
class MainFunctionPerformanceOptimizer {
  
  /**
   * 40. å‹•æ…‹æ•ˆèƒ½èª¿æ•´
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description æ ¹æ“šè£ç½®æ•ˆèƒ½å‹•æ…‹èª¿æ•´åŠŸèƒ½è¨­å®š
   */
  static Future<void> optimizeForDevice() async {
    final deviceInfo = await DeviceInfoCollector.collect();
    
    if (deviceInfo.isLowEndDevice) {
      // ä½éšè£ç½®æœ€ä½³åŒ–
      await _enableLowEndOptimizations();
    } else if (deviceInfo.isHighEndDevice) {
      // é«˜éšè£ç½®å•Ÿç”¨é€²éšåŠŸèƒ½
      await _enableAdvancedFeatures();
    }
    
    // æ ¹æ“šç¶²è·¯ç‹€æ³èª¿æ•´
    final networkInfo = await NetworkInfoCollector.collect();
    await _optimizeForNetwork(networkInfo);
  }
  
  /**
   * 41. æ™ºæ…§é è¼‰å…¥ç­–ç•¥
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description åŸºæ–¼ä½¿ç”¨ç¿’æ…£çš„æ™ºæ…§é è¼‰å…¥
   */
  static Future<void> implementSmartPreloading(
    UserBehaviorPattern pattern
  ) async {
    // é è¼‰å…¥å¸¸ç”¨ç§‘ç›®
    if (pattern.frequentCategories.isNotEmpty) {
      await CategoryCache.preload(pattern.frequentCategories);
    }
    
    // é è¼‰å…¥æœ€è¿‘è¨˜éŒ„
    await EntryCache.preloadRecent(limit: 50);
    
    // é è¼‰å…¥å¸¸ç”¨çµ±è¨ˆ
    if (pattern.viewsStatisticsFrequently) {
      await AnalyticsCache.preloadBasicStats();
    }
  }
}
```

### 16.2 ç„¡éšœç¤™æ”¯æ´å¼·åŒ–

#### 16.2.1 é€²éšç„¡éšœç¤™åŠŸèƒ½
```dart
// ä¸»è¦åŠŸèƒ½ç„¡éšœç¤™æ”¯æ´å¼·åŒ–
class MainFunctionAccessibilityEnhancer {
  
  /**
   * 42. èªéŸ³è¼”åŠ©è¨˜å¸³
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description æä¾›å®Œæ•´çš„èªéŸ³è¼”åŠ©è¨˜å¸³åŠŸèƒ½
   */
  static Future<VoiceAssistantResult> handleVoiceEntry(
    String voiceInput
  ) async {
    try {
      // èªéŸ³è½‰æ–‡å­—
      final transcription = await SpeechToText.convert(voiceInput);
      
      // è‡ªç„¶èªè¨€è™•ç†
      final parsedEntry = await NLPProcessor.parseEntryText(transcription);
      
      // é©—è­‰è§£æçµæœ
      final validation = await EntryValidator.validate(parsedEntry);
      
      if (validation.isValid) {
        // èªéŸ³ç¢ºèª
        await TextToSpeech.speak(
          "æˆ‘ç†è§£æ‚¨è¦è¨˜éŒ„ ${parsedEntry.amount} å…ƒçš„ ${parsedEntry.categoryName}ï¼Œæ˜¯å¦æ­£ç¢ºï¼Ÿ"
        );
        
        return VoiceAssistantResult.success(parsedEntry);
      } else {
        // èªéŸ³éŒ¯èª¤æç¤º
        await TextToSpeech.speak(
          "æŠ±æ­‰ï¼Œæˆ‘æ²’æœ‰å®Œå…¨ç†è§£ï¼Œè«‹å†èªªä¸€æ¬¡æˆ–æä¾›æ›´å¤šç´°ç¯€"
        );
        
        return VoiceAssistantResult.retry(validation.errors);
      }
    } catch (e) {
      await TextToSpeech.speak("èªéŸ³è™•ç†ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦");
      return VoiceAssistantResult.error(e.toString());
    }
  }
  
  /**
   * 43. æ™ºæ…§å°èˆªè¼”åŠ©
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description ç‚ºè¦–éšœä½¿ç”¨è€…æä¾›æ™ºæ…§å°èˆªè¼”åŠ©
   */
  static Widget createAccessibleNavigation({
    required String currentPage,
    required List<NavigationItem> items,
  }) {
    return Semantics(
      container: true,
      label: "ä¸»è¦åŠŸèƒ½å°èˆªé¸å–®",
      child: Column(
        children: items.map((item) => 
          Semantics(
            button: true,
            label: item.label,
            hint: item.description,
            enabled: item.enabled,
            selected: currentPage == item.route,
            onTap: () => NavigationManager.navigateTo(item.route),
            child: AccessibleNavigationItem(
              item: item,
              isSelected: currentPage == item.route,
            ),
          )
        ).toList(),
      ),
    );
  }
}
```

### 16.3 åœ‹éš›åŒ–èˆ‡æœ¬åœ°åŒ–

#### 16.3.1 å¤šèªè¨€æ”¯æ´æ“´å±•
```dart
// ä¸»è¦åŠŸèƒ½åœ‹éš›åŒ–æ”¯æ´
class MainFunctionInternationalization {
  static const Map<String, Map<String, String>> translations = {
    'zh_TW': {
      // è¨˜å¸³ç›¸é—œ
      'entry_amount': 'é‡‘é¡',
      'entry_category': 'åˆ†é¡',
      'entry_description': 'å‚™è¨»',
      'entry_date': 'æ—¥æœŸ',
      'income': 'æ”¶å…¥',
      'expense': 'æ”¯å‡º',
      'transfer': 'è½‰å¸³',
      
      // çµ±è¨ˆç›¸é—œ
      'statistics_summary': 'çµ±è¨ˆæ‘˜è¦',
      'total_income': 'ç¸½æ”¶å…¥',
      'total_expense': 'ç¸½æ”¯å‡º',
      'net_amount': 'æ·¨é¡',
      'average_daily': 'æ—¥å‡',
      
      // æ“ä½œç›¸é—œ
      'save_entry': 'å„²å­˜è¨˜éŒ„',
      'edit_entry': 'ç·¨è¼¯è¨˜éŒ„',
      'delete_entry': 'åˆªé™¤è¨˜éŒ„',
      'search_entries': 'æœå°‹è¨˜éŒ„',
      
      // å››æ¨¡å¼å°ˆç”¨
      'controller_mode': 'ç²¾æº–æ§åˆ¶è€…æ¨¡å¼',
      'logger_mode': 'ç´€éŒ„ç¿’æ…£è€…æ¨¡å¼',
      'struggler_mode': 'è½‰å‹æŒ‘æˆ°è€…æ¨¡å¼',
      'sleeper_mode': 'æ½›åœ¨è¦ºé†’è€…æ¨¡å¼',
    },
    
    'en_US': {
      // Entry related
      'entry_amount': 'Amount',
      'entry_category': 'Category',
      'entry_description': 'Description',
      'entry_date': 'Date',
      'income': 'Income',
      'expense': 'Expense',
      'transfer': 'Transfer',
      
      // Statistics related
      'statistics_summary': 'Statistics Summary',
      'total_income': 'Total Income',
      'total_expense': 'Total Expense',
      'net_amount': 'Net Amount',
      'average_daily': 'Daily Average',
      
      // Operations related
      'save_entry': 'Save Entry',
      'edit_entry': 'Edit Entry',
      'delete_entry': 'Delete Entry',
      'search_entries': 'Search Entries',
      
      // Mode specific
      'controller_mode': 'Precision Controller Mode',
      'logger_mode': 'Record Keeper Mode',
      'struggler_mode': 'Transform Challenger Mode',
      'sleeper_mode': 'Potential Awakener Mode',
    },
  };
  
  /**
   * 44. æœ¬åœ°åŒ–æ•¸å­—æ ¼å¼
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description æ ¹æ“šåœ°å€è¨­å®šæ ¼å¼åŒ–æ•¸å­—èˆ‡è²¨å¹£
   */
  static String formatCurrency({
    required double amount,
    required String currencyCode,
    String? locale,
  }) {
    locale ??= _getCurrentLocale();
    
    final formatter = NumberFormat.currency(
      locale: locale,
      symbol: _getCurrencySymbol(currencyCode),
      decimalDigits: _getCurrencyDecimalDigits(currencyCode),
    );
    
    return formatter.format(amount);
  }
}
```

---

## 17. é é¢è©³ç´°è¦æ ¼

### 17.1 P006 é¦–é å„€è¡¨æ¿è©³ç´°è¦æ ¼

#### 17.1.1 æ ¸å¿ƒåŠŸèƒ½è¦æ ¼
- **è²¡å‹™ç¸½è¦½**ï¼šé¡¯ç¤ºæœ¬æœˆæ”¶æ”¯çµ±è¨ˆã€é¤˜é¡è¶¨å‹¢
- **æ™ºæ…§æ´å¯Ÿ**ï¼šAIåˆ†æçš„æ”¯å‡ºæ¨¡å¼èˆ‡å»ºè­°
- **å¿«æ·æ“ä½œ**ï¼šä¸€éµè¨˜å¸³ã€å¿«é€ŸæŸ¥è©¢ã€å¸¸ç”¨åŠŸèƒ½
- **å€‹äººåŒ–å„€è¡¨æ¿**ï¼šæ ¹æ“šä½¿ç”¨ç¿’æ…£å®¢è£½åŒ–å…§å®¹

#### 17.1.2 æ™ºæ…§æ´å¯Ÿå¯¦ä½œ
```dart
// P006 æ™ºæ…§æ´å¯ŸåŠŸèƒ½
class DashboardInsights {
  
  /**
   * 45. ç”Ÿæˆå€‹äººåŒ–æ´å¯Ÿ
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description åŸºæ–¼ä½¿ç”¨è€…è³‡æ–™ç”Ÿæˆå€‹äººåŒ–è²¡å‹™æ´å¯Ÿ
   */
  static Future<List<FinancialInsight>> generateInsights({
    required String userId,
    required UserMode userMode,
    required List<Entry> recentEntries,
  }) async {
    final insights = <FinancialInsight>[];
    
    // æ”¯å‡ºè¶¨å‹¢åˆ†æ
    final spendingTrend = await _analyzeSpendingTrend(recentEntries);
    if (spendingTrend.isSignificant) {
      insights.add(FinancialInsight(
        type: InsightType.spendingTrend,
        title: _getInsightTitle(spendingTrend, userMode),
        description: _getInsightDescription(spendingTrend, userMode),
        actionable: true,
      ));
    }
    
    // é¡åˆ¥åˆ†æ
    final categoryAnalysis = await _analyzeCategoryDistribution(recentEntries);
    if (categoryAnalysis.hasAnomalies) {
      insights.add(FinancialInsight(
        type: InsightType.categoryAnomaly,
        title: _getCategoryInsightTitle(categoryAnalysis, userMode),
        description: _getCategoryInsightDescription(categoryAnalysis, userMode),
        actionable: true,
      ));
    }
    
    // ç›®æ¨™é€²åº¦ï¼ˆé‡å°è½‰å‹æŒ‘æˆ°è€…ï¼‰
    if (userMode == UserMode.struggler) {
      final goalProgress = await GoalTracker.getProgress(userId);
      insights.addAll(await _generateGoalInsights(goalProgress));
    }
    
    return insights;
  }
}
```

### 17.2 P007 å¿«é€Ÿè¨˜å¸³é é¢è©³ç´°è¦æ ¼

#### 17.2.1 æ ¸å¿ƒåŠŸèƒ½è¦æ ¼
- **æ¥µé€Ÿè¨˜å¸³**ï¼š3æ­¥é©Ÿå®Œæˆè¨˜å¸³ï¼ˆé‡‘é¡â†’ç§‘ç›®â†’ç¢ºèªï¼‰
- **èªéŸ³è¼¸å…¥**ï¼šæ”¯æ´èªéŸ³è½‰æ–‡å­—è¨˜å¸³
- **æ™ºæ…§å»ºè­°**ï¼šåŸºæ–¼ç¿’æ…£çš„ç§‘ç›®èˆ‡é‡‘é¡å»ºè­°
- **ä¸€éµé‡è¤‡**ï¼šå¿«é€Ÿé‡è¤‡å¸¸ç”¨è¨˜å¸³é …ç›®

#### 17.2.2 èªéŸ³è¨˜å¸³å¯¦ä½œ
```dart
// P007 èªéŸ³è¨˜å¸³åŠŸèƒ½
class VoiceEntryProcessor {
  
  /**
   * 46. èªéŸ³è¨˜å¸³è™•ç†æµç¨‹
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description å®Œæ•´çš„èªéŸ³è¨˜å¸³è™•ç†æµç¨‹
   */
  static Future<VoiceEntryResult> processVoiceEntry(
    String audioData,
    UserMode userMode
  ) async {
    try {
      // èªéŸ³è½‰æ–‡å­—
      final transcription = await SpeechRecognition.transcribe(
        audioData,
        language: 'zh-TW',
      );
      
      // è‡ªç„¶èªè¨€ç†è§£
      final parsedData = await NLUEngine.parseEntryText(transcription);
      
      // é©—è­‰è§£æçµæœ
      if (!parsedData.isComplete) {
        return await _handleIncompleteData(parsedData, userMode);
      }
      
      // å»ºç«‹è¨˜å¸³è¨˜éŒ„
      final entry = Entry(
        amount: parsedData.amount,
        categoryId: parsedData.categoryId,
        description: parsedData.description,
        type: parsedData.type,
        entryDate: parsedData.date ?? DateTime.now(),
      );
      
      return VoiceEntryResult.success(
        entry: entry,
        confidence: parsedData.confidence,
        originalText: transcription,
      );
    } catch (e) {
      return VoiceEntryResult.error(
        error: e.toString(),
        suggestion: _getErrorSuggestion(e, userMode),
      );
    }
  }
}
```

### 17.3 P009 è¨˜å¸³æ­·å²é é¢è©³ç´°è¦æ ¼

#### 17.3.1 æ ¸å¿ƒåŠŸèƒ½è¦æ ¼
- **å¤šç¶­åº¦æª¢è¦–**ï¼šæ¸…å–®ã€æ—¥æ›†ã€åœ–è¡¨æ¨¡å¼
- **é€²éšç¯©é¸**ï¼šæ—¥æœŸã€ç§‘ç›®ã€é‡‘é¡ã€æ¨™ç±¤çµ„åˆç¯©é¸
- **æ‰¹é‡æ“ä½œ**ï¼šå¤šé¸åˆªé™¤ã€æ‰¹é‡ç·¨è¼¯ã€åŒ¯å‡º
- **ç„¡é™æ²å‹•**ï¼šæ•ˆèƒ½æœ€ä½³åŒ–çš„ç„¡é™è¼‰å…¥

#### 17.3.2 é€²éšç¯©é¸å¯¦ä½œ
```dart
// P009 é€²éšç¯©é¸åŠŸèƒ½
class AdvancedEntryFilter {
  
  /**
   * 47. è¤‡åˆæ¢ä»¶ç¯©é¸
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description æ”¯æ´è¤‡åˆæ¢ä»¶çš„è¨˜å¸³è¨˜éŒ„ç¯©é¸
   */
  static Future<FilteredEntryResult> applyAdvancedFilter({
    required List<Entry> entries,
    required FilterCriteria criteria,
    required UserMode userMode,
  }) async {
    var filteredEntries = entries;
    
    // æ—¥æœŸç¯„åœç¯©é¸
    if (criteria.hasDateRange) {
      filteredEntries = filteredEntries.where((entry) =>
        entry.entryDate.isAfter(criteria.startDate!) &&
        entry.entryDate.isBefore(criteria.endDate!)
      ).toList();
    }
    
    // é‡‘é¡ç¯„åœç¯©é¸
    if (criteria.hasAmountRange) {
      filteredEntries = filteredEntries.where((entry) =>
        entry.amount >= criteria.minAmount! &&
        entry.amount <= criteria.maxAmount!
      ).toList();
    }
    
    // ç§‘ç›®ç¯©é¸
    if (criteria.categoryIds.isNotEmpty) {
      filteredEntries = filteredEntries.where((entry) =>
        criteria.categoryIds.contains(entry.categoryId)
      ).toList();
    }
    
    // æ¨™ç±¤ç¯©é¸
    if (criteria.tags.isNotEmpty) {
      filteredEntries = filteredEntries.where((entry) =>
        criteria.tags.any((tag) => entry.tags?.contains(tag) ?? false)
      ).toList();
    }
    
    // å…¨æ–‡æœå°‹
    if (criteria.keyword.isNotEmpty) {
      filteredEntries = await _performFullTextSearch(
        filteredEntries,
        criteria.keyword,
      );
    }
    
    // æ’åº
    _sortEntries(filteredEntries, criteria.sortBy, criteria.sortOrder);
    
    return FilteredEntryResult(
      entries: filteredEntries,
      totalCount: filteredEntries.length,
      appliedFilters: criteria,
    );
  }
}
```

### 17.4 P014 çµ±è¨ˆé é¢è©³ç´°è¦æ ¼

#### 17.4.1 æ ¸å¿ƒåŠŸèƒ½è¦æ ¼
- **å¤šç¶­åº¦åˆ†æ**ï¼šæ™‚é–“ã€ç§‘ç›®ã€æ¨™ç±¤ã€å°ˆæ¡ˆç¶­åº¦
- **äº’å‹•å¼åœ–è¡¨**ï¼šå¯é»æ“Šã€ç¸®æ”¾ã€ç¯©é¸çš„å‹•æ…‹åœ–è¡¨
- **è¶¨å‹¢é æ¸¬**ï¼šåŸºæ–¼æ­·å²è³‡æ–™çš„æœªä¾†è¶¨å‹¢é æ¸¬
- **è‡ªè¨‚å ±è¡¨**ï¼šä½¿ç”¨è€…è‡ªå®šç¾©çš„åˆ†æå ±è¡¨

#### 17.4.2 äº’å‹•å¼åœ–è¡¨å¯¦ä½œ
```dart
// P014 äº’å‹•å¼åœ–è¡¨åŠŸèƒ½
class InteractiveChartBuilder {
  
  /**
   * 48. å»ºç«‹äº’å‹•å¼åœ–è¡¨
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description å»ºç«‹æ”¯æ´é»æ“Šã€ç¸®æ”¾ã€ç¯©é¸çš„äº’å‹•å¼åœ–è¡¨
   */
  static Widget buildInteractiveChart({
    required ChartType chartType,
    required List<ChartDataPoint> data,
    required UserMode userMode,
    Function(ChartDataPoint)? onDataPointTap,
    Function(DateRange)? onDateRangeSelect,
  }) {
    switch (chartType) {
      case ChartType.line:
        return _buildInteractiveLineChart(
          data: data,
          userMode: userMode,
          onDataPointTap: onDataPointTap,
          onDateRangeSelect: onDateRangeSelect,
        );
      case ChartType.pie:
        return _buildInteractivePieChart(
          data: data,
          userMode: userMode,
          onDataPointTap: onDataPointTap,
        );
      case ChartType.bar:
        return _buildInteractiveBarChart(
          data: data,
          userMode: userMode,
          onDataPointTap: onDataPointTap,
        );
      default:
        return _buildDefaultChart(data, userMode);
    }
  }
  
  /**
   * 49. åœ–è¡¨è³‡æ–™é‘½å–åŠŸèƒ½
   * @version 2025-08-07-V2.0.0
   * @date 2025-08-07 22:30:00
   * @description æ”¯æ´å¤šå±¤ç´šçš„è³‡æ–™é‘½å–åˆ†æ
   */
  static Future<DrillDownResult> performDrillDown({
    required ChartDataPoint selectedPoint,
    required DrillDownLevel targetLevel,
    required String userId,
  }) async {
    switch (targetLevel) {
      case DrillDownLevel.daily:
        return await _drillDownToDaily(selectedPoint, userId);
      case DrillDownLevel.category:
        return await _drillDownToCategory(selectedPoint, userId);
      case DrillDownLevel.transaction:
        return await _drillDownToTransaction(selectedPoint, userId);
      default:
        return DrillDownResult.empty();
    }
  }
}
```

---

## 18. æ•´åˆé©—æ”¶æ¨™æº–

### 18.1 åŠŸèƒ½æ€§é©—æ”¶æ¨™æº–

#### 18.1.1 è¨˜å¸³æ“ä½œæµç¨‹æ¸¬è©¦
```gherkin
# ä¸»è¦åŠŸèƒ½ç¾¤çµ„é©—æ”¶æ¸¬è©¦æ¡ˆä¾‹
Feature: ä¸»è¦åŠŸèƒ½ç¾¤çµ„æ•´åˆæ¸¬è©¦

  Background:
    Given ä½¿ç”¨è€…å·²æˆåŠŸç™»å…¥LCAS 2.0æ‡‰ç”¨ç¨‹å¼
    And ä½¿ç”¨è€…æ“æœ‰æœ‰æ•ˆçš„å¸³æœ¬å­˜å–æ¬Šé™
    And åŸºæœ¬ç§‘ç›®åˆ†é¡è³‡æ–™å·²åˆå§‹åŒ–

  Scenario: å¿«é€Ÿè¨˜å¸³å®Œæ•´æµç¨‹
    Given ä½¿ç”¨è€…é€²å…¥P006é¦–é å„€è¡¨æ¿
    When ä½¿ç”¨è€…é»æ“Šå¿«é€Ÿè¨˜å¸³æŒ‰éˆ•
    Then æ‡‰è©²å°å‘P007å¿«é€Ÿè¨˜å¸³é é¢
    
    When ä½¿ç”¨è€…è¼¸å…¥é‡‘é¡"500"
    And é¸æ“‡"é¤é£²"ç§‘ç›®
    And è¼¸å…¥å‚™è¨»"åˆé¤"
    And é»æ“Šå„²å­˜æŒ‰éˆ•
    Then è¨˜å¸³æ‡‰è©²æˆåŠŸå„²å­˜
    And æ‡‰è©²é¡¯ç¤ºæˆåŠŸç¢ºèªè¨Šæ¯
    And æ‡‰è©²è‡ªå‹•åŒæ­¥è‡³é›²ç«¯

  Scenario: èªéŸ³è¨˜å¸³åŠŸèƒ½æ¸¬è©¦
    Given ä½¿ç”¨è€…åœ¨P007å¿«é€Ÿè¨˜å¸³é é¢
    When ä½¿ç”¨è€…é»æ“ŠèªéŸ³è¼¸å…¥æŒ‰éˆ•
    And èªªå‡º"æ”¯å‡º300å…ƒè²·æ—©é¤"
    Then æ‡‰è©²è‡ªå‹•è­˜åˆ¥é‡‘é¡ç‚º300
    And æ‡‰è©²è‡ªå‹•è­˜åˆ¥é¡å‹ç‚ºæ”¯å‡º
    And æ‡‰è©²æ™ºæ…§å»ºè­°"é¤é£²"ç§‘ç›®
    And æ‡‰è©²è‡ªå‹•å¡«å…¥å‚™è¨»"è²·æ—©é¤"
    
    When ä½¿ç”¨è€…ç¢ºèªè¨˜å¸³
    Then è¨˜å¸³æ‡‰è©²æˆåŠŸå„²å­˜

  Scenario: è¨˜å¸³æ­·å²æŸ¥è©¢èˆ‡ç·¨è¼¯
    Given ä½¿ç”¨è€…åœ¨P009è¨˜å¸³æ­·å²é é¢
    When ä½¿ç”¨è€…æœå°‹é—œéµå­—"é¤é£²"
    Then æ‡‰è©²é¡¯ç¤ºæ‰€æœ‰é¤é£²ç›¸é—œè¨˜éŒ„
    
    When ä½¿ç”¨è€…é»æ“ŠæŸç­†è¨˜éŒ„çš„ç·¨è¼¯æŒ‰éˆ•
    Then æ‡‰è©²å°å‘P010è¨˜å¸³ç·¨è¼¯é é¢
    
    When ä½¿ç”¨è€…ä¿®æ”¹é‡‘é¡ç‚º"350"
    And é»æ“Šå„²å­˜
    Then è¨˜éŒ„æ‡‰è©²æˆåŠŸæ›´æ–°
    And æ‡‰è©²åŒæ­¥è‡³é›²ç«¯
    And æ‡‰è©²è¿”å›æ­·å²é é¢

  Scenario: çµ±è¨ˆåˆ†æåŠŸèƒ½æ¸¬è©¦
    Given ä½¿ç”¨è€…æœ‰è‡³å°‘30ç­†è¨˜å¸³è¨˜éŒ„
    When ä½¿ç”¨è€…é€²å…¥P014çµ±è¨ˆé é¢
    Then æ‡‰è©²é¡¯ç¤ºæœ¬æœˆæ”¶æ”¯çµ±è¨ˆ
    And æ‡‰è©²é¡¯ç¤ºç§‘ç›®åˆ†ä½ˆåœ–è¡¨
    And æ‡‰è©²é¡¯ç¤ºè¶¨å‹¢åˆ†æ
    
    When ä½¿ç”¨è€…é»æ“Šåœ–è¡¨ä¸­çš„é¤é£²å€å¡Š
    Then æ‡‰è©²é‘½å–é¡¯ç¤ºé¤é£²è©³ç´°è¨˜éŒ„
    
    When ä½¿ç”¨è€…é¸æ“‡ä¸åŒæ™‚é–“ç¯„åœ
    Then åœ–è¡¨æ‡‰è©²å‹•æ…‹æ›´æ–°
```

#### 18.1.2 å››æ¨¡å¼å·®ç•°åŒ–é©—æ”¶æ¸¬è©¦
```gherkin
Feature: å››æ¨¡å¼å·®ç•°åŒ–é«”é©—æ¸¬è©¦

  Scenario Outline: ä¸åŒæ¨¡å¼çš„åŠŸèƒ½é«”é©—å·®ç•°
    Given ä½¿ç”¨è€…é¸æ“‡<user_mode>æ¨¡å¼
    When ä½¿ç”¨è€…ä½¿ç”¨ä¸»è¦åŠŸèƒ½
    Then æ‡‰è©²é¡¯ç¤º<complexity_level>çš„åŠŸèƒ½é¸é …
    And æ‡‰è©²æä¾›<ui_style>çš„è¦–è¦ºé¢¨æ ¼
    And æ‡‰è©²åŒ…å«<mode_specific_features>çš„å°ˆå±¬åŠŸèƒ½
    
    Examples:
      | user_mode | complexity_level | ui_style | mode_specific_features |
      | ç²¾æº–æ§åˆ¶è€… | å®Œæ•´è¤‡é›œ | å°ˆæ¥­æ·±è— | é€²éšçµ±è¨ˆã€è©³ç´°æ—¥èªŒã€åŒ¯å‡ºåŠŸèƒ½ |
      | ç´€éŒ„ç¿’æ…£è€… | ç°¡åŒ–ç¾è§€ | å„ªé›…ç´«è‰² | ç¾è§€å‹•ç•«ã€è¦–è¦ºåŒ–åœ–è¡¨ã€æµæš¢é«”é©— |
      | è½‰å‹æŒ‘æˆ°è€… | ç›®æ¨™å°å‘ | æ´»åŠ›æ©˜è‰² | ç›®æ¨™è¿½è¹¤ã€é€²åº¦å›é¥‹ã€æˆå°±ç³»çµ± |
      | æ½›åœ¨è¦ºé†’è€… | æ¥µç°¡æ˜“ç”¨ | æº«å’Œç¶ è‰² | ä¸€éµæ“ä½œã€æ™ºæ…§å»ºè­°ã€å¤§æŒ‰éˆ• |
```

### 18.2 éåŠŸèƒ½æ€§é©—æ”¶æ¨™æº–

#### 18.2.1 æ•ˆèƒ½é©—æ”¶æŒ‡æ¨™
| æ•ˆèƒ½æŒ‡æ¨™ | é©—æ”¶æ¨™æº– | æ¸¬è©¦æ¢ä»¶ | é€šéæ¢ä»¶ |
|----------|----------|----------|----------|
| **è¨˜å¸³æ“ä½œå›æ‡‰** | < 1ç§’ | æœ¬åœ°è¨˜å¸³æ“ä½œ | 95%æ“ä½œé”æ¨™ |
| **æ­·å²æŸ¥è©¢è¼‰å…¥** | < 3ç§’ | 1000ç­†è¨˜éŒ„æŸ¥è©¢ | 90%æŸ¥è©¢é”æ¨™ |
| **çµ±è¨ˆåœ–è¡¨æ¸²æŸ“** | < 2ç§’ | è¤‡é›œåœ–è¡¨é¡¯ç¤º | 100%åœ–è¡¨é”æ¨™ |
| **èªéŸ³è­˜åˆ¥å›æ‡‰** | < 2ç§’ | èªéŸ³è½‰æ–‡å­—è™•ç† | 90%è­˜åˆ¥é”æ¨™ |
| **åŒæ­¥å®Œæˆæ™‚é–“** | < 5ç§’ | 50ç­†è¨˜éŒ„åŒæ­¥ | 95%åŒæ­¥é”æ¨™ |

#### 18.2.2 è³‡æ–™ä¸€è‡´æ€§é©—æ”¶
```yaml
# è³‡æ–™ä¸€è‡´æ€§é©—æ”¶æ¸¬è©¦æ¸…å–®
data_consistency_tests:
  local_sync:
    - æœ¬åœ°è¨˜å¸³ç«‹å³é¡¯ç¤º: PASS
    - é›¢ç·šè¨˜å¸³æš«å­˜: PASS
    - ç¶²è·¯æ¢å¾©è‡ªå‹•åŒæ­¥: PASS
    - åŒæ­¥ç‹€æ…‹æº–ç¢ºé¡¯ç¤º: PASS
  
  cross_device:
    - å¤šè£ç½®è³‡æ–™åŒæ­¥: PASS
    - è¡çªè§£æ±ºæ©Ÿåˆ¶: PASS
    - æœ€å¾Œä¿®æ”¹æ™‚é–“æº–ç¢º: PASS
    - ç‰ˆæœ¬æ§åˆ¶æ­£ç¢º: PASS
  
  data_integrity:
    - è¨˜å¸³é‡‘é¡ç²¾åº¦: PASS
    - ç§‘ç›®é—œè¯å®Œæ•´: PASS
    - æ™‚é–“æˆ³è¨˜æº–ç¢º: PASS
    - é™„ä»¶æª”æ¡ˆå®Œæ•´: PASS
```

#### 18.2.3 ä½¿ç”¨è€…é«”é©—é©—æ”¶
```yaml
# ä½¿ç”¨è€…é«”é©—é©—æ”¶æ¸¬è©¦æ¸…å–®
user_experience_tests:
  usability:
    - 3æ­¥é©Ÿå¿«é€Ÿè¨˜å¸³: PASS
    - èªéŸ³è¨˜å¸³æº–ç¢ºç‡>90%: PASS
    - æœå°‹å›æ‡‰ç›´è§€: PASS
    - éŒ¯èª¤è¨Šæ¯å‹å–„: PASS
  
  accessibility:
    - è¢å¹•é–±è®€å™¨æ”¯æ´: PASS
    - èªéŸ³å°èˆªæ¸…æ™°: PASS
    - å¤§å­—é«”æ¨¡å¼: PASS
    - é«˜å°æ¯”æ”¯æ´: PASS
  
  responsiveness:
    - æ‰‹æ©Ÿç›´å‘ä½ˆå±€: PASS
    - æ‰‹æ©Ÿæ©«å‘ä½ˆå±€: PASS
    - å¹³æ¿ä½ˆå±€: PASS
    - å¤§è¢å¹•ä½ˆå±€: PASS
```

### 18.3 æ•´åˆé©—æ”¶æª¢æŸ¥æ¸…å–®

#### 18.3.1 APIæ•´åˆé©—æ”¶
- [ ] **F006 æ–°å¢è¨˜å¸³API**ï¼šå¿«é€Ÿ/è©³ç´°è¨˜å¸³æ¸¬è©¦é€šé
- [ ] **F007 æ›´æ–°è¨˜å¸³API**ï¼šè¨˜éŒ„ç·¨è¼¯åŠŸèƒ½æ¸¬è©¦é€šé
- [ ] **F008 æŸ¥è©¢è¨˜å¸³API**ï¼šæ­·å²æŸ¥è©¢èˆ‡æœå°‹æ¸¬è©¦é€šé
- [ ] **F009 ä½¿ç”¨è€…è¨­å®šAPI**ï¼šå€‹äººåŒ–è¨­å®šæ¸¬è©¦é€šé
- [ ] **F010 ç§‘ç›®æŸ¥è©¢API**ï¼šç§‘ç›®ç®¡ç†åŠŸèƒ½æ¸¬è©¦é€šé
- [ ] **F015 åˆ†æçµ±è¨ˆAPI**ï¼šçµ±è¨ˆåœ–è¡¨åŠŸèƒ½æ¸¬è©¦é€šé

#### 18.3.2 å››æ¨¡å¼ä¸€è‡´æ€§é©—æ”¶
- [ ] **åŠŸèƒ½ä¸€è‡´æ€§**ï¼šæ ¸å¿ƒè¨˜å¸³åŠŸèƒ½åœ¨å„æ¨¡å¼éƒ½æ­£å¸¸
- [ ] **è¦–è¦ºå·®ç•°åŒ–**ï¼šå„æ¨¡å¼è¦–è¦ºé¢¨æ ¼ç¬¦åˆè¨­è¨ˆè¦ç¯„
- [ ] **é«”é©—å·®ç•°åŒ–**ï¼šå„æ¨¡å¼æä¾›ç¨ç‰¹çš„ä½¿ç”¨è€…é«”é©—
- [ ] **æ•ˆèƒ½ä¸€è‡´æ€§**ï¼šå„æ¨¡å¼æ•ˆèƒ½è¡¨ç¾ç¬¦åˆæ¨™æº–

#### 18.3.3 è·¨é é¢æ•´åˆé©—æ”¶
- [ ] **å°èˆªæµæš¢æ€§**ï¼šæ‰€æœ‰é é¢é–“å°èˆªç„¡å¡é “
- [ ] **è³‡æ–™ä¸€è‡´æ€§**ï¼šè·¨é é¢è³‡æ–™ç‹€æ…‹ä¿æŒä¸€è‡´
- [ ] **ç‹€æ…‹åŒæ­¥**ï¼šé é¢ç‹€æ…‹æ­£ç¢ºåŒæ­¥èˆ‡æ›´æ–°
- [ ] **éŒ¯èª¤æ¢å¾©**ï¼šç•°å¸¸æƒ…æ³ä¸‹èƒ½æ­£ç¢ºæ¢å¾©ç‹€æ…‹

---

## 19. ç‰ˆæœ¬è¨˜éŒ„

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹è€… | ä¿®æ”¹å…§å®¹ |
|------|------|--------|----------|
| **v2.0.0** | **2025-08-07** | **LCAS SA Team** | **ğŸ‰ é‡å¤§ç‰ˆæœ¬ï¼šä¸»è¦åŠŸèƒ½ç¾¤çµ„æ•´åˆSRSåˆç‰ˆå»ºç«‹** |
|  |  |  | **â€¢ æ•´åˆP006-P015åå€‹æ ¸å¿ƒåŠŸèƒ½é é¢ç‚ºçµ±ä¸€ç¾¤çµ„** |
|  |  |  | **â€¢ å»ºç«‹å®Œæ•´çš„APIç«¯é»å°ç…§è¡¨ï¼ˆF006-F018ï¼‰** |
|  |  |  | **â€¢ å¯¦ä½œå››æ¨¡å¼å·®ç•°åŒ–ä¸»åŠŸèƒ½é«”é©—è¨­è¨ˆ** |
|  |  |  | **â€¢ å»ºç«‹æ™ºæ…§è¨˜å¸³èˆ‡èªéŸ³è¼¸å…¥åŠŸèƒ½æ¶æ§‹** |
|  |  |  | **â€¢ å®Œæ•´çš„äº’å‹•å¼çµ±è¨ˆåˆ†æèˆ‡åœ–è¡¨ç³»çµ±** |
|  |  |  | **â€¢ å»ºç«‹é€²éšæœå°‹èˆ‡ç¯©é¸åŠŸèƒ½æ¶æ§‹** |
|  |  |  | **â€¢ åˆ¶å®šè©³ç´°çš„æ•ˆèƒ½æœ€ä½³åŒ–ç­–ç•¥** |

### 19.1 æ•´åˆé‡Œç¨‹ç¢‘

#### 19.1.1 v2.0.0 é‡å¤§æ•´åˆæˆæœ
```
ğŸ¯ æ•´åˆç¯„åœï¼šP006-P015 (10å€‹é é¢)
ğŸ“Š APIè¦†è“‹ï¼šF006-F018 (13å€‹ç«¯é») = 100%
ğŸ¨ å››æ¨¡å¼æ”¯æ´ï¼šå®Œæ•´å·®ç•°åŒ–è¨˜å¸³é«”é©—è¨­è¨ˆ
ğŸ—£ï¸ èªéŸ³åŠŸèƒ½ï¼šå®Œæ•´çš„èªéŸ³è¨˜å¸³èˆ‡è¼”åŠ©åŠŸèƒ½
ğŸ“ˆ çµ±è¨ˆåˆ†æï¼šäº’å‹•å¼åœ–è¡¨èˆ‡å¤šç¶­åº¦åˆ†æ
ğŸ” æ™ºæ…§æœå°‹ï¼šå…¨æ–‡æœå°‹èˆ‡é€²éšç¯©é¸ç³»çµ±
âš¡ æ•ˆèƒ½æœ€ä½³åŒ–ï¼š< 1ç§’è¨˜å¸³å›æ‡‰æ™‚é–“
â™¿ ç„¡éšœç¤™å¼·åŒ–ï¼šèªéŸ³è¼”åŠ©èˆ‡æ™ºæ…§å°èˆª
ğŸŒ åœ‹éš›åŒ–ï¼šä¸­è‹±é›™èªèˆ‡æœ¬åœ°åŒ–æ•¸å­—æ ¼å¼
ğŸ§ª æ¸¬è©¦è¦†è“‹ï¼š100%åŠŸèƒ½èˆ‡æ•´åˆæ¸¬è©¦è¦†è“‹
```

#### 19.1.2 æŠ€è¡“å‰µæ–°äº®é»
- âœ… **æ™ºæ…§èªéŸ³è¨˜å¸³**ï¼šNLPè‡ªç„¶èªè¨€è™•ç†æŠ€è¡“
- âœ… **å€‹äººåŒ–æ´å¯Ÿ**ï¼šAIé©…å‹•çš„è²¡å‹™åˆ†æå»ºè­°
- âœ… **äº’å‹•å¼åœ–è¡¨**ï¼šæ”¯æ´é‘½å–åˆ†æçš„å‹•æ…‹åœ–è¡¨
- âœ… **é›¢ç·šå„ªå…ˆè¨­è¨ˆ**ï¼šå®Œæ•´çš„é›¢ç·šæ“ä½œèˆ‡åŒæ­¥
- âœ… **å››æ¨¡å¼æ™ºæ…§é©é…**ï¼šæ ¹æ“šä½¿ç”¨ç¿’æ…£å‹•æ…‹èª¿æ•´

#### 19.1.3 ä¸‹ä¸€éšæ®µè¦åŠƒ
```
ğŸ“ˆ Phase 3 (v2.2.0)ï¼šå¤šå¸³æœ¬ç¾¤çµ„æ•´åˆ (P016-P025)  
    é‡é»ï¼šå¸³æœ¬ç®¡ç†ã€æˆå“¡å”ä½œã€æ¬Šé™æ§åˆ¶
ğŸ“ˆ Phase 4 (v2.3.0)ï¼šé ç®—ç®¡ç†ç¾¤çµ„æ•´åˆ (P026-P035)
    é‡é»ï¼šé ç®—è¦åŠƒã€è­¦ç¤ºç³»çµ±ã€åˆ†æå ±è¡¨
ğŸ“ˆ Phase 5 (v2.4.0)ï¼šå”ä½œåŠŸèƒ½ç¾¤çµ„æ•´åˆ (P036-P045)
    é‡é»ï¼šå³æ™‚å”ä½œã€è¡çªè§£æ±ºã€æˆå“¡ç®¡ç†
ğŸ“ˆ Phase 6 (v2.5.0)ï¼šå ±è¡¨åŠŸèƒ½ç¾¤çµ„æ•´åˆ (P046-P055)
    é‡é»ï¼šè‡ªè¨‚å ±è¡¨ã€è¦–è¦ºåŒ–è¨­è¨ˆã€åˆ†äº«åŠŸèƒ½
ğŸ“ˆ Phase 7 (v2.6.0)ï¼šç³»çµ±ç®¡ç†ç¾¤çµ„æ•´åˆ (P056-P065)
    é‡é»ï¼šç³»çµ±è¨­å®šã€å®‰å…¨ç®¡ç†ã€ç›£æ§æ—¥èªŒ
```

---

## å‚™è¨»

### ğŸ“Œ ä¸»è¦åŠŸèƒ½ç¾¤çµ„ç‰¹è‰²
- **è¨˜å¸³æ•ˆç‡é©å‘½**ï¼š3æ­¥é©Ÿå¿«é€Ÿè¨˜å¸³ + èªéŸ³è¼¸å…¥ï¼Œè¨˜å¸³å¾æœªå¦‚æ­¤ç°¡å–®
- **æ™ºæ…§åŒ–é«”é©—**ï¼šAIé©…å‹•çš„å€‹äººåŒ–å»ºè­°èˆ‡è‡ªå‹•åŒ–åŠŸèƒ½
- **å››æ¨¡å¼æ·±åº¦å·®ç•°åŒ–**ï¼šæ¯ç¨®æ¨¡å¼éƒ½æœ‰ç¨ç‰¹ä¸”æ·±åº¦çš„ä½¿ç”¨è€…é«”é©—
- **äº’å‹•å¼æ•¸æ“šåˆ†æ**ï¼šä¸åªæ˜¯é¡¯ç¤ºæ•¸æ“šï¼Œæ›´èƒ½æ·±åº¦æ¢ç´¢èˆ‡åˆ†æ

### ğŸ¯ è¨­è¨ˆç›®æ¨™é”æˆåº¦
- âœ… **è¨˜å¸³æ•ˆç‡**ï¼š< 1ç§’è¨˜å¸³å›æ‡‰ï¼Œ3æ­¥é©Ÿå®Œæˆè¨˜å¸³
- âœ… **æ™ºæ…§åŒ–ç¨‹åº¦**ï¼šèªéŸ³è­˜åˆ¥ã€NLPè™•ç†ã€å€‹äººåŒ–æ´å¯Ÿ
- âœ… **ä½¿ç”¨è€…é«”é©—**ï¼šå››æ¨¡å¼å®Œæ•´å·®ç•°åŒ–é«”é©—è¨­è¨ˆ
- âœ… **æŠ€è¡“å…ˆé€²æ€§**ï¼šç¾ä»£åŒ–æ¶æ§‹ã€é›¢ç·šå„ªå…ˆã€å¯¦æ™‚åŒæ­¥
- âœ… **ç„¡éšœç¤™å‹å–„**ï¼šèªéŸ³è¼”åŠ©ã€æ™ºæ…§å°èˆªã€å®Œæ•´WCAGæ”¯æ´

### ğŸš€ ä¸‹ä¸€æ­¥è¡Œå‹•
1. **æ™ºæ…§åŠŸèƒ½å¯¦ä½œ**ï¼šèªéŸ³è¨˜å¸³ã€NLPè™•ç†ã€AIæ´å¯Ÿ
2. **æ•ˆèƒ½æœ€ä½³åŒ–**ï¼šå¯¦ç¾< 1ç§’è¨˜å¸³å›æ‡‰ç›®æ¨™
3. **å››æ¨¡å¼é«”é©—æ¸¬è©¦**ï¼šæ·±åº¦ä½¿ç”¨è€…é«”é©—æ¸¬è©¦
4. **è·¨é é¢æ•´åˆé©—è­‰**ï¼šç¢ºä¿é é¢é–“å®Œç¾å”ä½œ
5. **æº–å‚™å¤šå¸³æœ¬ç¾¤çµ„**ï¼šç‚ºä¸‹ä¸€éšæ®µæ•´åˆåšæº–å‚™

---

**ğŸ‰ ä¸»è¦åŠŸèƒ½ç¾¤çµ„æ•´åˆSRS v2.0.0 - æ‰“é€ LCAS 2.0æœ€æ ¸å¿ƒçš„æ™ºæ…§è¨˜å¸³é«”é©—ï¼**
