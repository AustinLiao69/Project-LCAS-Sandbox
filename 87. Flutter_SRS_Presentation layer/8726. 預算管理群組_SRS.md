# 8726. 預算管理群組_SRS

**文件編號**: 8726-SRS-GROUP  
**版本**: v2.1.0  
**建立日期**: 2025-08-07  
**建立者**: LCAS SA Team  
**最後更新**: 2025-01-27 

---

## 目次

1. [群組概述](#1-群組概述)
2. [頁面功能總覽](#2-頁面功能總覽)
3. [API端點對照表](#3-api端點對照表)
4. [功能目的](#4-功能目的)
5. [使用者故事](#5-使用者故事)
6. [前置條件](#6-前置條件)
7. [功能流程](#7-功能流程)
8. [輸入項目](#8-輸入項目)
9. [輸出項目](#9-輸出項目)
10. [驗證規則](#10-驗證規則)
11. [錯誤處理](#11-錯誤處理)
12. [UI元件與排版需求](#12-ui元件與排版需求)
13. [頁面詳細規格](#13-頁面詳細規格)
14. [整合驗收標準](#14-整合驗收標準)
15. [版本記錄](#15-版本記錄)

---

## 1. 群組概述

### 1.1 群組定位
預算管理群組是LCAS 2.0 Flutter應用程式的**財務規劃中心視覺介面**，提供完整的預算規劃、追蹤、分析與控制功能的**視覺設計需求**，支援個人預算、專案預算、分類預算等不同層級的預算管理視覺化。

### 1.2 群組範圍
本群組整合以下10個預算管理功能頁面的視覺設計規格：
- **P026 預算總覽頁面**：預算全景與快速狀態檢視的視覺化設計
- **P027 建立預算頁面**：新預算建立與初始設定的視覺引導
- **P028 預算詳情頁面**：單一預算詳細管理的視覺介面
- **P029 預算編輯頁面**：預算屬性與規則修改的視覺設計
- **P030 預算警示頁面**：預算超支與異常警示的視覺化
- **P031 預算分析頁面**：預算績效深度分析的視覺呈現
- **P032 預算歷史頁面**：歷史預算記錄與趨勢的視覺設計
- **P033 預算比較頁面**：多預算比較分析的視覺化
- **P034 預算範本頁面**：預算範本管理的視覺系統
- **P035 預算報表頁面**：預算專用報表的視覺設計

### 1.3 視覺設計原則
- **多層級預算視覺化**：清晰的帳本級、科目級、專案級預算視覺區分
- **智慧預警視覺設計**：主動預算監控與及時警示的視覺化機制
- **目標導向視覺體驗**：結合財務目標的預算規劃視覺體系
- **四模式差異化視覺**：針對不同使用者模式提供適配的視覺體驗

---

## 2. 頁面功能總覽

| 頁面編號 | 頁面名稱 | 主要視覺功能 | 四模式差異重點 | 使用頻率 |
|----------|----------|-------------|----------------|----------|
| **P026** | 預算總覽頁面 | 預算全景視覺化、狀態監控介面、快速導航 | 視覺複雜度與資訊密度 | 高 |
| **P027** | 建立預算頁面 | 預算類型選擇器、目標設定表單、規則配置界面 | 設定選項完整度與引導 | 中 |
| **P028** | 預算詳情頁面 | 詳細預算資訊卡片、進度追蹤視覺化、子項管理 | 資訊詳細度與佈局 | 高 |
| **P029** | 預算編輯頁面 | 預算調整介面、規則修改表單、歷史記錄視覺化 | 編輯功能複雜度 | 中 |
| **P030** | 預算警示頁面 | 超支警示視覺化、異常檢測介面、處理建議 | 警示敏感度與視覺強度 | 中 |
| **P031** | 預算分析頁面 | 績效分析圖表、趨勢預測視覺化、優化建議 | 分析深度與圖表複雜度 | 中 |
| **P032** | 預算歷史頁面 | 歷史記錄列表、版本追蹤、變更日誌視覺化 | 歷史詳細度 | 低 |
| **P033** | 預算比較頁面 | 多預算比較圖表、基準分析、差異報告視覺化 | 比較複雜度 | 低 |
| **P034** | 預算範本頁面 | 範本管理介面、快速建立、共享範本視覺化 | 範本多樣性與管理 | 低 |
| **P035** | 預算報表頁面 | 專業報表視覺化、自訂格式、匯出分享介面 | 報表複雜度 | 中 |

### 2.1 群組視覺流程關係圖
```
P026 預算總覽頁面 (視覺化中央樞紐)
    ↓ 建立預算視覺引導    ↓ 檢視詳情導航    ↓ 警示處理
P027 建立預算 ←→ P028 預算詳情 ←→ P030 預算警示
    ↓ 使用範本        ↓ 編輯修改        ↓ 分析優化
P034 預算範本 ←→ P029 預算編輯 ←→ P031 預算分析
    ↓                ↓                ↓ 歷史追蹤
P035 預算報表 ←→ P033 預算比較 ←→ P032 預算歷史
    ↑________________↑________________↑
          整合分析與報表生成視覺化
```

---

## 3. API端點對照表

### 3.1 完整API對應關係（確保按鈕與API連結正確）

| 頁面編號 | 頁面名稱 | 對應API編號 | API路徑 | HTTP方法 | 主要按鈕功能 |
|----------|----------|-------------|---------|----------|-------------|
| **P026** | 預算總覽頁面 | **F036** | GET /budgets/overview | GET | 「重新整理」按鈕 |
| **P026** | 預算總覽頁面 | **F037** | GET /budgets/status | GET | 「檢查狀態」按鈕 |
| **P027** | 建立預算頁面 | **F038** | POST /budgets | POST | 「建立預算」按鈕 |
| **P027** | 建立預算頁面 | **F039** | GET /budget-templates | GET | 「選擇範本」按鈕 |
| **P028** | 預算詳情頁面 | **F040** | GET /budgets/:id | GET | 「載入詳情」按鈕 |
| **P028** | 預算詳情頁面 | **F041** | GET /budgets/:id/progress | GET | 「更新進度」按鈕 |
| **P029** | 預算編輯頁面 | **F042** | PUT /budgets/:id | PUT | 「儲存變更」按鈕 |
| **P029** | 預算編輯頁面 | **F043** | GET /budgets/:id/history | GET | 「檢視歷史」按鈕 |
| **P030** | 預算警示頁面 | **F044** | GET /budgets/alerts | GET | 「載入警示」按鈕 |
| **P030** | 預算警示頁面 | **F045** | PUT /budgets/alerts/:id | PUT | 「處理警示」按鈕 |
| **P031** | 預算分析頁面 | **F046** | GET /budgets/:id/analytics | GET | 「執行分析」按鈕 |
| **P031** | 預算分析頁面 | **F047** | GET /budgets/trends | GET | 「趨勢分析」按鈕 |
| **P032** | 預算歷史頁面 | **F048** | GET /budgets/history | GET | 「載入歷史」按鈕 |
| **P032** | 預算歷史頁面 | **F049** | GET /budgets/:id/versions | GET | 「版本記錄」按鈕 |
| **P033** | 預算比較頁面 | **F050** | POST /budgets/compare | POST | 「執行比較」按鈕 |
| **P033** | 預算比較頁面 | **F051** | GET /budgets/benchmarks | GET | 「載入基準」按鈕 |
| **P034** | 預算範本頁面 | **F052** | GET /budget-templates | GET | 「載入範本」按鈕 |
| **P034** | 預算範本頁面 | **F053** | POST /budget-templates | POST | 「建立範本」按鈕 |
| **P035** | 預算報表頁面 | **F054** | POST /budgets/reports | POST | 「生成報表」按鈕 |
| **P035** | 預算報表頁面 | **F055** | GET /budgets/reports/:id | GET | 「下載報表」按鈕 |

---

## 4. 功能目的

### 4.1 群組整體視覺設計目的
預算管理群組作為LCAS 2.0的**財務規劃中心視覺介面**，致力於：
- **主動財務控制視覺化**：從被動記帳轉向主動預算管理的視覺體驗
- **目標導向規劃視覺**：結合財務目標的預算規劃視覺體系
- **智慧預警視覺系統**：及時發現預算偏差與財務風險的視覺化
- **數據驅動決策視覺支援**：基於預算分析的財務決策視覺化支援

### 4.2 四模式視覺差異化目的

#### 精準控制者模式
- 提供完整的預算管理視覺介面與詳細的分析工具展示
- 顯示豐富的預算統計分析與績效指標視覺化
- 支援複雜的多層級預算與精確控制機制的視覺呈現

#### 紀錄習慣者模式  
- 打造優雅美觀的預算管理視覺體驗
- 重視視覺化呈現與操作流暢度的美學設計
- 簡化預算設定但保持美學品質的視覺介面

#### 轉型挑戰者模式
- 融入目標達成與進度追蹤的視覺元素
- 提供積極的預算達成回饋與激勵機制的視覺化
- 強調預算實現與財務目標關聯性的視覺設計

#### 潛在覺醒者模式
- 極簡化的預算操作流程與介面視覺設計
- 提供智慧預設值與自動化預算建議的視覺支援
- 降低預算管理門檻，鼓勵養成預算習慣的視覺引導

---

## 5. 使用者故事

### 5.1 核心使用者故事

**作為財務規劃者**，我希望能透過直觀的視覺介面設定清楚的預算目標並追蹤執行進度，以便實現更好的財務控制。

**作為預算管理者**，我希望能及時收到視覺化的預算警示並獲得調整建議，以便避免超支並優化支出結構。

**作為目標追求者**，我希望能將預算與財務目標透過視覺化方式連結，以便更有動力執行預算計畫。

**作為數據分析者**，我希望能透過豐富的視覺化圖表深入分析預算績效並預測趨勢，以便做出更明智的財務決策。

### 5.2 四模式使用者故事

#### 精準控制者 (Controller)
> "作為精準控制者，我希望能透過完整詳細的預算管理視覺介面完全掌控每個預算的細節設定，包括複雜的多層級預算視覺化、精確的警示機制圖表、詳細的績效分析儀表板，以及完整的預算資料視覺化展示。"

#### 紀錄習慣者 (Logger)  
> "作為紀錄習慣者，我希望預算管理過程透過美觀且愉悅的視覺設計呈現，有優雅的預算進度動畫、美麗的分析圖表、精緻的卡片設計，讓預算規劃成為生活中的美好視覺體驗。"

#### 轉型挑戰者 (Struggler)
> "作為轉型挑戰者，我希望預算功能的視覺設計能幫助我實現財務目標，提供明確的預算達成追蹤視覺化、超越提醒的激勵元素，並在我達到預算里程碑時給予積極的視覺化鼓勵。"

#### 潛在覺醒者 (Sleeper)
> "作為潛在覺醒者，我希望預算管理功能的視覺設計非常簡單直觀，有智慧的自動預算建議視覺提示，一鍵就能完成預算建立與追蹤，不需要複雜的分析或報表視覺化。"

---

## 6. 前置條件

### 6.1 視覺設計前置條件
- 已完成9005 Flutter Presentation Layer PRD的設計系統定義
- 四模式色彩與字型系統已建立完成
- 預算管理專用視覺元件庫已準備就緒
- 圖表與視覺化組件已初始化完成

### 6.2 功能前置條件
- 使用者已成功通過認證流程群組（P001-P005）
- 已完成基本的使用者設定與模式選擇
- 具備預算建立與管理的基本權限
- 相關API端點已就緒並可正常呼叫

---

## 7. 功能流程

### 7.1 主要預算管理視覺流程

#### 7.1.1 建立預算視覺流程（P027）
```
1. 進入建立預算頁面視覺引導
   ├── 顯示預算類型選擇卡片（月度/季度/年度/專案）
   ├── 展示目標設定表單與視覺引導
   ├── 呈現範本選擇器與預覽
   └── 顯示警示規則配置界面

2. 預算類型專屬視覺設定
   ├── 月度預算：科目分配圓餅圖、滾動更新視覺
   ├── 專案預算：專案關聯卡片、里程碑視覺設定
   └── 年度預算：季度分解圖表、調整機制視覺化

3. 建立確認視覺回饋
   ├── 資料驗證進度條
   ├── 歷史資料分析載入動畫
   ├── 預算建立成功視覺回饋
   └── 監控啟動狀態指示
```

#### 7.1.2 預算監控視覺流程（P026, P030）
```
1. 預算狀態監控視覺化
   ├── 即時進度圓環圖顯示
   ├── 超支風險警示視覺元素
   ├── 趨勢分析圖表呈現
   └── 警示觸發檢查狀態指示

2. 警示處理視覺機制
   ├── 警示等級顏色編碼顯示
   ├── 通知發送狀態視覺回饋
   ├── 處理建議卡片呈現
   └── 使用者回應記錄視覺化

3. 調整建議視覺提供
   ├── 超支原因分析圖表
   ├── 調整方案選項卡片
   ├── 預測調整影響視覺化
   └── 確認執行調整視覺流程
```

#### 7.1.3 四模式差異化視覺流程

**精準控制者模式視覺特色：**
- **完整分析視覺介面**：提供所有可用的預算分析視覺化功能
- **詳細監控視覺機制**：支援細粒度的預算監控設定視覺界面
- **複雜圖表展示**：多維度預算分析圖表與數據視覺化

**紀錄習慣者模式視覺特色：**
- **優雅操作視覺流程**：重視操作的流暢性與美感的視覺設計
- **美觀引導動畫**：精美的步驟指示與進度顯示動畫
- **簡化分析視覺選項**：隱藏過於技術性的分析，保持視覺簡潔

**轉型挑戰者模式視覺特色：**
- **目標導向視覺流程**：每個預算操作都與目標達成視覺化相關聯
- **進度回饋視覺機制**：即時顯示預算目標完成進度的視覺元素
- **激勵元素視覺整合**：在流程中加入成就與獎勵的視覺化元素

**潛在覺醒者模式視覺特色：**
- **極簡化視覺流程**：最少步驟完成預算管理的簡潔視覺設計
- **智慧預設視覺值**：自動填入合理預算設定的視覺提示
- **一鍵操作視覺**：提供快捷的預算建立選項大按鈕設計

---

## 8. 輸入項目

### 8.1 群組共通輸入視覺設計

| 輸入類別 | 視覺設計要求 | 四模式差異 | 無障礙需求 |
|----------|-------------|------------|------------|
| **預算基本** | 預算名稱輸入框：圓角8px，高度56px | 字體大小依模式調整 | 螢幕閱讀器標籤 |
| **預算基本** | 預算類型選擇器：卡片式設計，視覺圖示區分 | 選項數量依模式調整 | 高對比度支援 |
| **預算基本** | 目標金額輸入：大字體顯示，即時格式化 | 字體大小依模式調整 | 數字格式語音提示 |
| **預算基本** | 期間選擇器：日曆彈出式，清楚標示 | 潛在覺醒者使用預設值 | 日期範圍語音提示 |
| **科目分配** | 科目預算分配：拖拉式圓餅圖調整 | 複雜度依模式調整 | 觸控輔助支援 |
| **科目分配** | 分配比例：滑桿控制，即時視覺回饋 | 精確度依模式調整 | 數值變化語音播報 |
| **警示設定** | 警示閾值：視覺化滑桿，顏色漸變指示 | 設定詳細度依模式調整 | 閾值設定語音確認 |
| **警示設定** | 警示類型：多選卡片式設計 | 選項數量依模式調整 | 選擇狀態語音提示 |

---

## 9. 輸出項目

### 9.1 群組共通輸出視覺設計

| 輸出類別 | 視覺呈現方式 | 設計要求 | 四模式差異 |
|----------|-------------|----------|------------|
| **預算資料** | 預算卡片列表：圓角12px，漸變背景 | 響應式卡片佈局 | 密度與資訊量依模式調整 |
| **狀態監控** | 進度圓環圖：動畫效果，顏色編碼 | 即時數據更新 | 複雜度依模式調整 |
| **警示資料** | 警示通知卡片：顏色分級，圖示標示 | 優先級視覺區分 | 警示詳細度依模式調整 |
| **分析資料** | 績效分析圖表：多種圖表類型支援 | 互動式圖表設計 | 圖表複雜度依模式選擇 |
| **歷史資料** | 時間軸視覺化：垂直時間軸設計 | 清晰的時間標示 | 詳細程度依模式調整 |
| **比較資料** | 對比圖表：並排比較設計 | 差異突出顯示 | 比較維度依模式調整 |
| **範本資料** | 範本預覽卡片：縮圖預覽設計 | 快速識別設計 | 範本數量依模式調整 |
| **報表資料** | 報表預覽：PDF風格預覽 | 專業報表視覺 | 報表複雜度依模式調整 |
| **操作回饋** | Toast通知：成功/錯誤顏色區分 | 自動消失機制 | 所有模式保持一致 |

---

## 10. 驗證規則

### 10.1 視覺化驗證設計

#### 10.1.1 預算資料驗證視覺回饋
- **即時驗證**：輸入框邊框顏色變化（紅色錯誤、綠色正確）
- **視覺圖示**：輸入框右側顯示驗證狀態圖示
- **錯誤提示**：輸入框下方顯示錯誤訊息，紅色文字

#### 10.1.2 預算金額驗證視覺指示
```css
.budget-amount-input {
  border: 2px solid #E0E0E0;
  border-radius: 8px;
  transition: all 0.3s ease;
}

.budget-amount-input.valid {
  border-color: #4CAF50;
  background: #E8F5E9;
}

.budget-amount-input.invalid {
  border-color: #F44336;
  background: #FFEBEE;
}

.validation-message {
  font-size: 12px;
  margin-top: 4px;
  padding-left: 8px;
}

.validation-message.error {
  color: #F44336;
}

.validation-message.success {
  color: #4CAF50;
}
```

#### 10.1.3 四模式驗證視覺差異

| 模式 | 錯誤提示風格 | 成功指示風格 | 驗證詳細度 |
|----------|-------------|-------------|------------|
| **精準控制者** | 詳細技術說明，錯誤代碼顯示 | 詳細成功狀態報告 | 完整規則說明 |
| **紀錄習慣者** | 優雅的錯誤提示動畫 | 美觀的成功動畫效果 | 平衡的提示資訊 |
| **轉型挑戰者** | 正面鼓勵的錯誤提示 | 積極的成就感回饋 | 目標導向的提示 |
| **潛在覺醒者** | 簡化的錯誤說明 | 溫和的成功提示 | 基本必要資訊 |

---

## 11. 錯誤處理

### 11.1 錯誤狀態視覺設計

#### 11.1.1 錯誤訊息視覺層級

| 錯誤嚴重度 | 視覺設計 | 顏色方案 | 圖示選擇 | 顯示方式 |
|----------|----------|----------|----------|----------|
| **嚴重錯誤** | 全屏遮罩對話框 | 紅色系主色調 | ⛔ 禁止圖示 | 模態對話框 |
| **預算超支** | 頁面頂部警告條 | 橘紅色漸變 | 💰 預算圖示 | 固定警告條 |
| **資料驗證錯誤** | 輸入框錯誤狀態 | 淺紅色邊框 | ⚠️ 警告圖示 | 內聯提示 |
| **操作成功** | 綠色成功提示 | 綠色系主色調 | ✅ 成功圖示 | Toast通知 |

#### 11.1.2 四模式錯誤處理視覺差異

**精準控制者模式：**
```css
.controller-error {
  background: linear-gradient(135deg, #FFEBEE, #FFCDD2);
  border: 1px solid #F44336;
  border-left: 4px solid #D32F2F;
  padding: 16px;
  font-size: 14px;
  line-height: 1.4;
  border-radius: 8px;
}

.error-details {
  margin-top: 12px;
  font-size: 12px;
  color: #666;
  font-family: monospace;
  background: #F5F5F5;
  padding: 8px;
  border-radius: 4px;
}
```

**紀錄習慣者模式：**
```css
.logger-error {
  background: linear-gradient(135deg, #FFEBEE, #FCE4EC);
  border-radius: 16px;
  padding: 24px;
  box-shadow: 0 4px 12px rgba(244, 67, 54, 0.15);
  animation: gentleShake 0.5s ease-in-out;
}

@keyframes gentleShake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}
```

**轉型挑戰者模式：**
```css
.struggler-error {
  background: #FFF3E0;
  border: 2px solid #FF9800;
  border-radius: 12px;
  padding: 20px;
  position: relative;
}

.motivational-error-icon {
  position: absolute;
  top: -10px;
  right: 16px;
  font-size: 24px;
}

.motivational-message {
  color: #E65100;
  font-weight: 600;
  margin-bottom: 8px;
}

.motivational-message::before {
  content: "💪 ";
  margin-right: 8px;
}
```

**潛在覺醒者模式：**
```css
.sleeper-error {
  background: #FFEBEE;
  border-radius: 16px;
  padding: 32px;
  text-align: center;
  font-size: 18px;
}

.simple-error-icon {
  font-size: 48px;
  margin-bottom: 16px;
  display: block;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}
```

---

## 12. UI元件與排版需求

### 12.1 預算管理專用視覺元件

#### 12.1.1 預算卡片組件設計
```css
/* 預算卡片基礎樣式 */
.budget-card {
  background: #FFFFFF;
  border-radius: 16px;
  padding: 24px;
  margin: 12px 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  border-left: 6px solid var(--budget-type-color);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.budget-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, 
    var(--budget-type-color), 
    transparent);
}

.budget-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
}

.budget-card.status-healthy {
  border-left-color: #4CAF50;
}

.budget-card.status-warning {
  border-left-color: #FF9800;
}

.budget-card.status-danger {
  border-left-color: #F44336;
}

.budget-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 20px;
}

.budget-title {
  font-size: 20px;
  font-weight: 700;
  color: #212121;
  margin-bottom: 4px;
}

.budget-type-badge {
  background: rgba(25, 118, 210, 0.1);
  color: #1976D2;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
}
```

#### 12.1.2 預算進度視覺元件
```css
/* 預算進度圓環組件 */
.budget-progress-circle {
  width: 120px;
  height: 120px;
  position: relative;
  margin: 0 auto 20px;
}

.progress-circle-svg {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
}

.progress-circle-bg {
  fill: none;
  stroke: #E0E0E0;
  stroke-width: 8;
}

.progress-circle-fill {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 1s ease-in-out;
}

.progress-circle-fill.healthy {
  stroke: #4CAF50;
}

.progress-circle-fill.warning {
  stroke: #FF9800;
}

.progress-circle-fill.danger {
  stroke: #F44336;
}

.progress-circle-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

.progress-percentage {
  font-size: 24px;
  font-weight: 700;
  color: #212121;
  line-height: 1;
}

.progress-label {
  font-size: 12px;
  color: #757575;
  margin-top: 4px;
}
```

#### 12.1.3 四模式預算卡片差異設計

**精準控制者模式：**
```css
.controller-budget-card {
  --mode-primary: #1565C0;
  --mode-accent: #0D47A1;
  padding: 16px;
  font-size: 14px;
}

.controller-metrics-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
  margin-top: 16px;
}

.controller-metric-item {
  text-align: center;
  padding: 8px;
  background: rgba(21, 101, 192, 0.05);
  border-radius: 6px;
}

.controller-metric-value {
  font-size: 14px;
  font-weight: 700;
  color: var(--mode-primary);
}

.controller-metric-label {
  font-size: 10px;
  color: #757575;
  margin-top: 2px;
}
```

**紀錄習慣者模式：**
```css
.logger-budget-card {
  --mode-primary: #7B1FA2;
  --mode-accent: #AD85C6;
  background: linear-gradient(135deg, 
    rgba(255,255,255,0.98), 
    rgba(248,245,250,0.98));
  border-left: 6px solid transparent;
  border-image: linear-gradient(135deg, 
    var(--mode-primary), 
    var(--mode-accent)) 1;
  padding: 28px;
}

.logger-progress-container {
  background: linear-gradient(135deg, 
    rgba(123, 31, 162, 0.1), 
    rgba(173, 133, 198, 0.1));
  border-radius: 12px;
  padding: 16px;
  margin: 16px 0;
}

.logger-amount-display {
  text-align: center;
  margin-top: 20px;
}

.logger-amount-value {
  font-size: 24px;
  font-weight: 700;
  background: linear-gradient(135deg, 
    var(--mode-primary), 
    var(--mode-accent));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
```

**轉型挑戰者模式：**
```css
.struggler-budget-card {
  --mode-primary: #E65100;
  --mode-accent: #FF8A65;
  position: relative;
}

.struggler-budget-card::after {
  content: "🎯";
  position: absolute;
  top: 20px;
  right: 20px;
  font-size: 28px;
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-10px); }
  60% { transform: translateY(-5px); }
}

.struggler-achievement-section {
  background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
  border: 2px solid var(--mode-primary);
  border-radius: 12px;
  padding: 16px;
  margin-top: 16px;
  text-align: center;
}

.struggler-progress-message {
  font-size: 16px;
  font-weight: 600;
  color: var(--mode-primary);
  margin-bottom: 8px;
}

.struggler-motivational-text {
  background: linear-gradient(135deg, 
    var(--mode-primary), 
    var(--mode-accent));
  color: white;
  padding: 12px;
  border-radius: 8px;
  margin-top: 12px;
  font-size: 14px;
  font-weight: 600;
}
```

**潛在覺醒者模式：**
```css
.sleeper-budget-card {
  --mode-primary: #388E3C;
  --mode-accent: #81C784;
  font-size: 20px;
  padding: 32px;
}

.sleeper-simple-progress {
  height: 24px;
  background: #E0E0E0;
  border-radius: 12px;
  overflow: hidden;
  margin: 24px 0;
  position: relative;
}

.sleeper-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, 
    var(--mode-primary), 
    var(--mode-accent));
  border-radius: 12px;
  transition: width 1s ease-in-out;
}

.sleeper-amounts {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 20px;
}

.sleeper-spent-amount {
  font-size: 28px;
  font-weight: 700;
  color: var(--mode-primary);
}

.sleeper-total-amount {
  font-size: 24px;
  color: #757575;
}

.sleeper-status-emoji {
  font-size: 36px;
  margin-left: 16px;
}
```

### 12.2 預算警示視覺元件

#### 12.2.1 警示卡片設計
```css
.budget-alert-card {
  border-radius: 12px;
  padding: 20px;
  margin: 12px 16px;
  position: relative;
  overflow: hidden;
}

.alert-card.critical {
  background: linear-gradient(135deg, #FFEBEE, #FFCDD2);
  border-left: 6px solid #F44336;
  animation: criticalPulse 2s infinite;
}

.alert-card.warning {
  background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
  border-left: 6px solid #FF9800;
}

.alert-card.info {
  background: linear-gradient(135deg, #E3F2FD, #BBDEFB);
  border-left: 6px solid #2196F3;
}

@keyframes criticalPulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.4); }
  50% { box-shadow: 0 0 0 10px rgba(244, 67, 54, 0); }
}

.alert-header {
  display: flex;
  align-items: center;
  margin-bottom: 12px;
}

.alert-icon {
  width: 24px;
  height: 24px;
  margin-right: 12px;
  font-size: 18px;
}

.alert-title {
  font-size: 16px;
  font-weight: 600;
  color: #212121;
  flex: 1;
}

.alert-timestamp {
  font-size: 12px;
  color: #757575;
}

.alert-content {
  font-size: 14px;
  color: #424242;
  line-height: 1.4;
  margin-bottom: 16px;
}

.alert-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.alert-action-button {
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.alert-action-primary {
  background: #1976D2;
  color: white;
}

.alert-action-secondary {
  background: transparent;
  color: #1976D2;
  border: 1px solid #1976D2;
}
```

---

## 13. 頁面詳細規格

### 13.1 P026 預算總覽頁面視覺規格

#### 13.1.1 頁面視覺佈局結構
```
┌─────────────────────────────────────┐
│ 💰 預算總覽               ⚙️🔔  │ ← 頁面標題列
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │     本月預算執行概況             │ │ ← 總覽卡片
│ │   ○────75%────○ 總進度         │ │
│ │ 已支出: $18,750 / 預算: $25,000 │ │
│ │   🟢健康 🟡警告 🔴超支         │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 📊 預算狀態分布                    │ ← 快速統計
│ ┌───┐ ┌───┐ ┌───┐ ┌───┐         │
│ │ 3 │ │ 2 │ │ 1 │ │ 0 │         │
│ │健康│ │警告│ │危險│ │超支│         │
│ └───┘ └───┘ └───┘ └───┘         │
├─────────────────────────────────────┤
│ 📋 預算清單                        │ ← 預算列表
│ ┌─────────────────────────────────┐ │
│ │ 🍽️ 餐飲預算      [健康] 60%   │ │
│ │ 已用: $1,800 / 預算: $3,000    │ │
│ │ ████████████░░░░░░░░             │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 🚗 交通預算      [警告] 85%   │ │
│ │ 已用: $2,550 / 預算: $3,000    │ │
│ │ ████████████████████░░░░         │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

#### 13.1.2 四模式視覺差異
- **精準控制者**：顯示詳細統計數據、精確百分比、多維度分析圖表
- **紀錄習慣者**：美觀的漸層卡片、優雅的動畫效果、簡潔的資訊呈現
- **轉型挑戰者**：突出顯示目標進度、成就標籤、激勵性文案
- **潛在覺醒者**：大卡片設計、簡化資訊顯示、溫和的顏色搭配

### 13.2 P027 建立預算頁面視覺規格

#### 13.2.1 預算類型選擇器視覺設計
```
┌─────────────────────────────────────┐
│ 📝 建立新預算                      │
├─────────────────────────────────────┤
│ 選擇預算類型                        │
├─────────────────────────────────────┤
│ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐    │
│ │ 📅  │ │ 📊  │ │ 📈  │ │ 🎯  │    │
│ │月度 │ │季度 │ │年度 │ │專案 │    │
│ │預算 │ │預算 │ │預算 │ │預算 │    │
│ └─────┘ └─────┘ └─────┘ └─────┘    │
├─────────────────────────────────────┤
│ 預算基本設定                        │
│ 預算名稱: [                       ] │
│ 目標金額: [     NT$ 25,000        ] │
│ 預算期間: [2025/02 - 2025/02]      │
├─────────────────────────────────────┤
│ 科目分配 (拖拉調整比例)             │
│     ┌─ 餐飲 30% ─┐                 │
│     │  交通 20%   │  其他           │
│     └─ 娛樂 15% ─┘  35%            │
├─────────────────────────────────────┤
│        [ 建立預算 ]                 │
└─────────────────────────────────────┘
```

#### 13.2.2 四模式表單差異設計
- **精準控制者**：完整12欄位設定，詳細警示規則，進階選項
- **紀錄習慣者**：美觀4欄位表單，優雅的動畫引導
- **轉型挑戰者**：目標導向6欄位，激勵元素整合，進度追蹤
- **潛在覺醒者**：極簡2欄位，智慧預設值，大按鈕設計

### 13.3 P030 預算警示頁面視覺規格

#### 13.3.1 警示中心視覺設計
```
┌─────────────────────────────────────┐
│ 🚨 預算警示中心          [3個警示] │
├─────────────────────────────────────┤
│ ⚡ 緊急警示                        │
│ ┌─────────────────────────────────┐ │
│ │ 🔴 餐飲預算超支        [緊急]   │ │
│ │ 目前支出: $3,200 (預算: $3,000) │ │
│ │ 超支金額: $200 (6.7%)           │ │
│ │ 建議: 減少外食或調整預算額度     │ │
│ │ [ 調整預算 ] [ 查看詳情 ]        │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ ⚠️ 一般警示                        │
│ ┌─────────────────────────────────┐ │
│ │ 🟡 交通預算接近上限     [警告]  │ │
│ │ 目前支出: $2,550 (預算: $3,000)  │ │
│ │ 使用率: 85% (距離上限: $450)     │ │
│ │ 建議: 注意剩餘額度，考慮步行     │ │
│ │ [ 記住提醒 ] [ 忽略此次 ]        │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ ℹ️ 資訊提示                        │
│ ┌─────────────────────────────────┐ │
│ │ 🔵 娛樂預算執行良好     [正常]  │ │
│ │ 目前支出: $450 (預算: $1,500)    │ │
│ │ 使用率: 30% (表現優秀！)         │ │
│ │ [ 查看詳情 ]                    │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

#### 13.3.2 四模式警示差異
- **精準控制者**：完整警示設定、詳細分析報告、精確數據
- **紀錄習慣者**：美觀警示動畫、優雅的提示設計
- **轉型挑戰者**：激勵性警示文案、正面的改善建議
- **潛在覺醒者**：簡化警示訊息、溫和的提醒方式

### 13.4 P031 預算分析頁面視覺規格

#### 13.4.1 分析儀表板視覺設計
```
┌─────────────────────────────────────┐
│ 📊 預算分析報告                    │
├─────────────────────────────────────┤
│ 📈 支出趨勢分析                    │
│ ┌─────────────────────────────────┐ │
│ │     支出 vs 預算 (本月)          │ │
│ │ $                               │ │
│ │ 4000                           │ │
│ │ 3000 ████▓▓▓▓▓▓▓ 預算線         │ │
│ │ 2000 ████████▓▓                │ │
│ │ 1000 ████████████ 實際支出      │ │
│ │    0 ┬───┬───┬───┬───┬          │ │
│ │     W1  W2  W3  W4  本週        │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 🎯 目標達成分析                    │
│ ┌─────────────────────────────────┐ │
│ │ 預算控制成功率: 75%              │ │
│ │ ████████████████████░░░░░        │ │
│ │                                │ │
│ │ 各科目表現:                     │ │
│ │ 🟢 餐飲: 90% (優秀)             │ │
│ │ 🟡 交通: 85% (良好)             │ │
│ │ 🔴 娛樂: 120% (需改善)          │ │
│ └─────────────────────────────────┘ │
├─────────────────────────────────────┤
│ 💡 智慧建議                        │
│ • 娛樂支出超標，建議下週減少20%     │
│ • 餐飲預算有餘額，可適度調整        │
│ • 整體控制良好，繼續保持！          │
└─────────────────────────────────────┘
```

#### 13.4.2 四模式分析差異
- **精準控制者**：複雜多維度圖表、詳細統計分析、預測模型
- **紀錄習慣者**：美觀的圖表設計、流暢的視覺動畫
- **轉型挑戰者**：目標導向分析、成就追蹤、激勵回饋
- **潛在覺醒者**：簡化圖表、重點摘要、易懂建議

---

## 14. 整合驗收標準

### 14.1 視覺設計驗收標準

#### 14.1.1 四模式視覺一致性檢查
- [ ] **精準控制者模式**：所有預算管理按鈕正確連結對應API端點
- [ ] **紀錄習慣者模式**：美觀設計不影響API功能調用正確性
- [ ] **轉型挑戰者模式**：激勵性視覺元素正確搭配功能按鈕
- [ ] **潛在覺醒者模式**：簡化視覺設計仍能正確執行完整功能

#### 14.1.2 API連結驗收清單
- [ ] **F036-F037總覽API**：P026總覽按鈕正確調用
- [ ] **F038-F039建立API**：P027建立按鈕各功能正確連結
- [ ] **F040-F043詳情編輯API**：P028-P029管理按鈕正確執行
- [ ] **F044-F045警示API**：P030警示按鈕處理功能正常
- [ ] **F046-F047分析API**：P031分析按鈕正確觸發運算
- [ ] **F048-F055其他API**：P032-P035各功能按鈕API呼叫正確

#### 14.1.3 視覺無障礙驗收標準
- [ ] **WCAG 2.1 AA色彩對比**：所有文字與背景對比度≥4.5:1
- [ ] **觸控目標尺寸**：所有按鈕觸控區域≥44pt×44pt
- [ ] **螢幕閱讀器支援**：所有預算元素有適當語意標籤
- [ ] **鍵盤導航**：Tab鍵可依邏輯順序導航所有預算介面
- [ ] **焦點指示**：所有可互動元素有清晰的焦點視覺指示

### 14.2 視覺設計品質驗收

#### 14.2.1 預算視覺化準確性
- [ ] **進度圓環圖**：進度百分比視覺呈現準確無誤
- [ ] **預算狀態顏色**：健康/警告/危險/超支狀態顏色正確
- [ ] **圖表數據一致性**：所有圖表數據與後端API數據一致
- [ ] **即時更新機制**：預算數據變更時視覺即時更新

#### 14.2.2 四模式視覺差異驗收
- [ ] **資訊密度差異**：各模式預算資訊顯示密度符合設計
- [ ] **視覺複雜度階梯**：Controller > Logger > Struggler > Sleeper
- [ ] **色彩主題一致性**：各模式色彩主題正確應用
- [ ] **字型大小階梯**：14px > 16px > 16px > 18px 符合設計

#### 14.2.3 互動體驗驗收
- [ ] **動畫流暢度**：所有預算動畫在60fps下流暢運行
- [ ] **回饋即時性**：按鈕點擊後100ms內有視覺回饋
- [ ] **載入狀態**：API調用期間有適當的載入視覺指示
- [ ] **錯誤處理**：預算錯誤狀態有清晰的視覺化表達

---

## 15. 版本記錄

| 版本 | 日期 | 修改者 | 修改內容 |
|------|------|--------|----------|
| **v2.1.0** | **2025-01-27** | **LCAS SA Team** | **🔧 重要修正：轉換為產品視覺設計需求文件** |
|  |  |  | **• 移除所有技術實作代碼，專注視覺設計需求** |
|  |  |  | **• 確保API端點對照表與按鈕連結的正確性** |
|  |  |  | **• 強化四模式視覺差異化設計規範** |
|  |  |  | **• 專注於使用者介面與視覺體驗需求** |
|  |  |  | **• 對齊9005 PRD文件的視覺設計定位與原則** |
|  |  |  | **• 詳細定義預算管理專用視覺元件與樣式** |
| **v2.0.0** | **2025-08-07** | **LCAS SA Team** | **🎉 初版：預算管理群組SRS建立** |
|  |  |  | **• 整合P026-P035十個預算管理頁面規格** |
|  |  |  | **• 建立API端點對照表（F036-F055）** |
|  |  |  | **• 設計四模式差異化預算管理體驗** |
|  |  |  | **• 建立完整的預算計算與警示機制** |

### 15.1 v2.1.0修正重點摘要

#### 15.1.1 移除的技術實作內容
- ❌ 刪除所有技術實作代碼與狀態管理邏輯
- ❌ 移除複雜的預算計算演算法實作細節
- ❌ 移除詳細的安全性技術實作
- ❌ 移除BudgetStateController等技術類別

#### 15.1.2 保留並強化的視覺設計內容
- ✅ **API對照表**：確保按鈕與API端點連結正確性
- ✅ **視覺設計規範**：詳細的UI元件與CSS樣式定義
- ✅ **四模式差異**：清晰的視覺差異化設計指引
- ✅ **使用者體驗**：完整的預算管理視覺流程設計

#### 15.1.3 新增的視覺設計重點
- 🎨 詳細的CSS樣式規範與預算視覺元件定義
- 🎨 四模式的預算管理視覺差異化實作指引
- 🎨 完整的預算進度視覺化與警示設計規範
- 🎨 預算分析圖表的視覺設計要求

#### 15.1.4 確保的API連結正確性
- 🔗 所有20個API端點（F036-F055）與對應按鈕功能正確連結
- 🔗 預算總覽、建立、編輯、警示、分析等功能按鈕API呼叫正確
- 🔗 四模式下相同功能按鈕均能正確調用對應API
- 🔗 API調用成功/失敗狀態的視覺回饋設計完整

---

## 備註

### 📌 預算管理群組視覺特色
- **智慧預算視覺化**：AI驅動的個人化預算視覺建議與自動分配
- **主動監控預警視覺**：即時預算狀態監控與智慧警示視覺系統
- **深度分析洞察視覺**：趨勢預測、績效分析、支出模式的視覺識別
- **四模式適配視覺**：針對不同使用者需求的預算管理視覺差異化

### 🎯 視覺設計目標達成度
- ✅ **API連結正確性**：所有按鈕與對應API端點連結準確無誤
- ✅ **四模式差異化**：完整的預算管理視覺差異化設計規範
- ✅ **使用者體驗**：直觀易用的預算管理視覺介面設計
- ✅ **設計一致性**：符合9005 PRD的設計系統要求
- ✅ **視覺無障礙**：完整的WCAG 2.1 AA標準視覺支援

### 🚀 下一步視覺開發重點
1. **預算視覺元件實作**：依據設計規範實作預算專用視覺元件
2. **四模式視覺測試**：驗證各模式的預算管理視覺體驗差異
3. **API整合視覺測試**：確保按鈕功能與API呼叫的視覺回饋正確
4. **預算圖表最佳化**：確保各類預算分析圖表的視覺效能
5. **響應式預算介面**：確保各裝置尺寸下的預算視覺體驗

---

**🎉 預算管理群組SRS v2.1.0 - 專注視覺設計需求，確保API連結正確性！**