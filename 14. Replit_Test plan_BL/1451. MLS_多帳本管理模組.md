# TP_MLS_多帳本管理模組 Test Plan v1.0 [DEPRECATED]

> **⚠️ 重要通知**: 本測試計劃已於 2025-11-10 標記為 DEPRECATED  
> **原因**: 根據DCN-0021，MLS功能已完全整合至CM協作與帳本管理模組  
> **替代方案**: 請參考 `14. Replit_Test plan_BL/1413. CM_協作管理模組.md`  
> **整合完成日期**: 2025-11-10

## 1. 測試範圍
### 1.1 多帳本類型管理
- 1.1.1 支援專案帳本建立/管理
- 1.1.2 支援分類帳本建立/管理
- 1.1.3 支援共享帳本建立/管理
- 1.1.4 帳本型態流暢切換

### 1.2 帳本基本操作
- 1.2.1 新增帳本
- 1.2.2 編輯帳本屬性（名稱/封面/標籤/類型）
- 1.2.3 刪除帳本（含二次確認）
- 1.2.4 歸檔與還原帳本
- 1.2.5 複製帳本資料至新帳本
- 1.2.6 帳本間資料遷移

### 1.3 權限與成員管理
- 1.3.1 設定帳本擁有者、管理員、一般成員、僅檢視者
- 1.3.2 邀請、移除協作者
- 1.3.3 權限驗證與例外處理

### 1.4 帳本屬性設定
- 1.4.1 帳本名稱、封面、標籤自訂
- 1.4.2 類型、屬性、分類規則設定

### 1.5 帳本型態切換與路由
- 1.5.1 介面流暢切換不同帳本
- 1.5.2 API 支援帳本查詢、切換、權限檢查

### 1.6 整合性測試
- 1.6.1 與預算模組整合
- 1.6.2 與協作模組整合
- 1.6.3 與備份模組整合

### 1.7 錯誤處理與異常情境
- 1.7.1 權限不足阻擋
- 1.7.2 重複名稱阻擋
- 1.7.3 資料遷移失敗重試
- 1.7.4 帳本刪除二次確認
- 1.7.5 API/操作異常提示與日誌

---

## 2. 測試環境
### 2.1 系統環境
- Node.js 運行環境（建議LTS版本）
- 測試專用 MongoDB/SQL 或檔案式資料庫（依實作）
- LCAS 2.0 多帳本管理模組 v1.0

### 2.2 測試帳號
- 擁有者、管理員、一般成員、僅檢視者角色帳號各一

### 2.3 其他模組
- 預算、協作、備份模組測試版本

---

## 3. 測試案例（Test Cases 詳細說明）

### TC-001 多帳本建立與類型切換
- 目的：驗證可建立「專案/分類/共享」三種帳本，並於介面/API切換
- 步驟：
  1. 登入不同角色帳號。
  2. 新增各類型帳本。
  3. 於介面/API切換帳本並檢查屬性。
- 驗證點：
  - 各類型帳本建立成功，切換後資料正確。
- 預期結果：
  - 帳本類型、屬性皆符合輸入，切換流暢。

---

### TC-002 帳本屬性編輯
- 目的：確保帳本屬性（名稱/封面/標籤/類型）可正確編輯
- 步驟：
  1. 擁有者/管理員編輯現有帳本屬性
  2. 嘗試重複名稱
  3. 權限不足者編輯
- 驗證點：
  - 屬性更新即時反映
  - 重複名稱跳出提示
  - 權限不足者被禁止操作
- 預期結果：
  - 正確編輯，無權限/重複時有提示

---

### TC-003 帳本刪除與歸檔
- 目的：驗證安全刪除、歸檔帳本（含二次確認）
- 步驟：
  1. 執行帳本刪除、歸檔
  2. 輸入/點擊確認訊息
  3. 驗證刪除/歸檔後資料與狀態
  4. 測試還原功能
- 驗證點：
  - 必須二次確認，誤操作可取消
  - 歸檔帳本可還原
  - 刪除後資料移除，無法還原
- 預期結果：
  - 流程安全，資料可控，異常有提示

---

### TC-004 帳本複製與資料遷移
- 目的：驗證資料複製/遷移功能完整性
- 步驟：
  1. 選取來源帳本執行複製
  2. 指定新帳本名稱與屬性
  3. 選擇複製範圍
  4. 測試遷移時網路/資料異常
  5. 驗證原帳本資料完整
- 驗證點：
  - 新帳本資料、屬性皆正確
  - 異常時有提示且可回滾
- 預期結果：
  - 複製/遷移成功，資料安全，異常可復原

---

### TC-005 權限與成員管理
- 目的：驗證權限分級與成員管理正確性
- 步驟：
  1. 擁有者邀請/移除不同權限成員
  2. 權限異動後切換帳戶測試操作權限
  3. 權限不足者進行管理操作
- 驗證點：
  - 權限設定即時生效
  - 權限不足操作被阻擋
- 預期結果：
  - 權限分級明確，動作受控

---

### TC-006 帳本型態切換與API查詢
- 目的：驗證前端/後端型態切換、查詢、權限控管
- 步驟：
  1. 不同角色登入切換帳本
  2. 用API查詢授權/未授權帳本
- 驗證點：
  - 切換流暢，資料正確
  - 權限不足API回錯誤
- 預期結果：
  - 前後端行為一致，權限嚴謹

---

### TC-007 與其他模組整合
- 目的：驗證與預算、協作、備份模組整合資料一致性
- 步驟：
  1. 建帳本並於預算/協作模組分配/協作
  2. 變更成員/權限檢查資料同步
  3. 執行備份/還原，檢查資料
  4. 模擬異常（權限、網路）
- 驗證點：
  - 跨模組資料同步正確
  - 權限異動各模組皆正確反映
  - 整合異常可回滾
- 預期結果：
  - 整合資料一致，異常提示明確

---

### TC-008 錯誤處理與異常情境
- 目的：驗證權限/名稱重複/API異常處理
- 步驟：
  1. 權限不足用戶操作
  2. 建立重複名稱帳本
  3. 模擬資料遷移/API失敗
- 驗證點：
  - 所有異常有明確提示
  - 日誌完整記錄行為與異常
- 預期結果：
  - 權限、重複、API異常皆妥善處理

---

### TC-009 邊界與壓力測試
- 目的：大數量帳本/成員、極端條件穩定性
- 步驟：
  1. 建立1000本帳本、每本50人
  2. 測試名稱長度/特殊字元/空白
  3. 多人同時操作
- 驗證點：
  - 系統效能、反應時間、正確性
  - 邊界輸入均有驗證
  - 異常時資料不遺失
- 預期結果：
  - 大量/例外時系統穩定資料安全

---

## 4. 測試方法
### 4.1 Node.js 單元測試
- 4.1.1 使用 Jest/Mocha 撰寫 API 單元測試
- 4.1.2 驗證回傳值與資料庫內容
- 4.1.3 使用 console.log 追蹤測試進度

### 4.2 自動化測試
- 4.2.1 寫自動化腳本覆蓋所有 Test Case
- 4.2.2 自動收集並統計通過/失敗率

### 4.3 手動測試
- 4.3.1 針對複雜權限、異常場景進行人工驗證
- 4.3.2 跨模組資料同步、介面一致性

---

## 5. 測試步驟
### 5.1 環境準備
- 5.1.1 建立測試專用資料庫與帳號
- 5.1.2 設定各種帳本型態、成員權限
- 5.1.3 備份原始資料

### 5.2 自動化測試執行
- 5.2.1 執行自動化測試腳本
- 5.2.2 監控測試進度與結果
- 5.2.3 匯出測試報告

### 5.3 手動測試執行
- 5.3.1 針對權限、異常、整合進行人工驗證
- 5.3.2 視覺檢查介面與資料一致性

### 5.4 結果分析與修正
- 5.4.1 分析測試結果，標記缺陷
- 5.4.2 與開發團隊溝通修正
- 5.4.3 回歸測試驗證問題已解決

---

## 6. 驗收標準
### 6.1 功能完整性
- 6.1.1 所有測試案例100%通過
- 6.1.2 多帳本建立、操作、權限管理、資料同步正常

### 6.2 錯誤處理能力
- 6.2.1 權限、資料異常皆可妥善處理
- 6.2.2 錯誤訊息明確，無未捕獲例外

### 6.3 性能標準
- 6.3.1 單次帳本操作回應不超過200ms
- 6.3.2 大量帳本/資料下系統仍穩定

### 6.4 整合效果
- 6.4.1 與預算、協作、備份模組順利整合
- 6.4.2 權限同步不出現資料遺漏或混亂

---

## 7. 備註
### 7.1 測試數據說明
- 7.1.1 測試用帳本/成員請明確標示，避免污染生產環境
- 7.1.2 覆蓋各類型帳本、權限、異常組合

### 7.2 文件管理
- 7.2.1 測試紀錄、缺陷回報、報告請存於專案workbench

### 7.3 開發階段說明
- 7.3.1 適用於MLS模組v1.0
- 7.3.2 模組更新時請同步修訂測試計畫

---