# PRD_Flutter_AP Layer

**æ–‡ä»¶ç·¨è™Ÿ**: 9006  
**ç‰ˆæœ¬**: 2.2.0  
**å»ºç«‹æ—¥æœŸ**: 2025-08-01  
**å»ºç«‹è€…**: LCAS PM Team  
**æœ€å¾Œæ›´æ–°**: 2025-08-08

---

## ç›®æ¬¡

1. [æ¨¡çµ„æ¦‚è¿°](#10-æ¨¡çµ„æ¦‚è¿°module-overview)
2. [ç³»çµ±å±¤ç´šæ¶æ§‹](#20-ç³»çµ±å±¤ç´šæ¶æ§‹system-level-architecture)
3. [AP Layeræ¨¡çµ„æ¶æ§‹](#30-ap-layeræ¨¡çµ„æ¶æ§‹ap-layer-module-architecture)
4. [ç¨‹å¼ç¢¼çµ„ç¹”æ¶æ§‹](#40-ç¨‹å¼ç¢¼çµ„ç¹”æ¶æ§‹code-organization-architecture)
5. [æ¶æ§‹é—œä¿‚å°æ‡‰](#50-æ¶æ§‹é—œä¿‚å°æ‡‰architecture-relationship-mapping)
6. [éåŠŸèƒ½æ€§éœ€æ±‚](#60-éåŠŸèƒ½æ€§éœ€æ±‚non-functional-requirements)

---

## 1.0 æ¨¡çµ„æ¦‚è¿°ï¼ˆModule Overviewï¼‰

### 1.1 ç”¢å“å®šä½
Flutter AP Layerï¼ˆæ‡‰ç”¨é‚è¼¯å±¤ï¼‰æ˜¯LCAS 2.0ç³»çµ±çš„æ ¸å¿ƒä¸­ä»‹å±¤ï¼Œè² è²¬é€£æ¥Presentation Layerèˆ‡Business Layerï¼Œæ•´åˆ32å€‹RESTful APIç«¯é»ï¼Œæä¾›çµ±ä¸€çš„è³‡æ–™å­˜å–ä»‹é¢å’Œæ¥­å‹™é‚è¼¯å°è£ã€‚

### 1.2 æ ¸å¿ƒè·è²¬
- **APIæ•´åˆç®¡ç†**: å°è£32å€‹RESTful APIç«¯é»ï¼Œæä¾›é¡å‹å®‰å…¨çš„èª¿ç”¨ä»‹é¢
- **è³‡æ–™è½‰æ›è™•ç†**: è™•ç†APIæ•¸æ“šèˆ‡UIæ•¸æ“šé–“çš„æ ¼å¼è½‰æ›
- **ç‹€æ…‹ç®¡ç†å”èª¿**: ç®¡ç†æ‡‰ç”¨ç‹€æ…‹ï¼Œç¢ºä¿æ•¸æ“šä¸€è‡´æ€§
- **éŒ¯èª¤è™•ç†çµ±ä¸€**: æä¾›çµ±ä¸€çš„éŒ¯èª¤è™•ç†å’Œç”¨æˆ¶å‹å–„çš„éŒ¯èª¤è¨Šæ¯
- **å¿«å–ç­–ç•¥åŸ·è¡Œ**: å¯¦æ–½æ™ºæ…§å¿«å–ï¼Œæå‡æ‡‰ç”¨æ•ˆèƒ½
- **é›¢ç·šåŠŸèƒ½æ”¯æ´**: æ”¯æ´é›¢ç·šæ“ä½œå’Œæ•¸æ“šåŒæ­¥

### 1.3 åœ¨LCAS 2.0ç³»çµ±ä¸­çš„å®šä½
```
LCAS 2.0 ç³»çµ±æ¶æ§‹
â”œâ”€â”€ Flutter Presentation Layer (å±•ç¤ºå±¤)
â”‚   â”œâ”€â”€ UI Components â†’ ä½¿ç”¨è€…ä»‹é¢å…ƒä»¶
â”‚   â”œâ”€â”€ Screens & Views â†’ ç•«é¢èˆ‡è¦–åœ–
â”‚   â””â”€â”€ User Interactions â†’ ä½¿ç”¨è€…äº’å‹•
â”œâ”€â”€ Flutter AP Layer (æ‡‰ç”¨é‚è¼¯å±¤) â˜… æœ¬æ–‡ä»¶ç¯„åœ â˜…
â”‚   â”œâ”€â”€ 32å€‹APIç«¯é» â†’ F001-F032
â”‚   â”œâ”€â”€ State Management â†’ ç‹€æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ Data Transformation â†’ è³‡æ–™è½‰æ›
â”‚   â””â”€â”€ Cache Management â†’ å¿«å–ç®¡ç†
â”œâ”€â”€ Business Layer (å•†æ¥­é‚è¼¯å±¤)
â”‚   â”œâ”€â”€ API Integration â†’ APIæ•´åˆæœå‹™
â”‚   â””â”€â”€ Business Logic â†’ å•†æ¥­é‚è¼¯
â””â”€â”€ Data Layer (è³‡æ–™å±¤)
    â”œâ”€â”€ Collections â†’ è³‡æ–™é›†åˆ
    â”œâ”€â”€ Documents â†’ æ–‡ä»¶è³‡æ–™
    â””â”€â”€ Security Rules â†’ å®‰å…¨è¦å‰‡
```

---

## 2.0 ç³»çµ±å±¤ç´šæ¶æ§‹ï¼ˆSystem Level Architectureï¼‰

### 2.1 LCAS 2.0ç³»çµ±æ¶æ§‹æ¦‚è¦½

Flutter AP Layeråœ¨æ•´å€‹LCAS 2.0ç³»çµ±ä¸­æ‰®æ¼”**æ‡‰ç”¨é‚è¼¯å±¤**çš„è§’è‰²ï¼Œè² è²¬é€£æ¥å‰ç«¯å±•ç¤ºå±¤èˆ‡å¾Œç«¯å•†æ¥­é‚è¼¯å±¤ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Flutter Presentation Layer       â”‚  â† 9005æ–‡ä»¶ç¯„åœ
â”‚    (UI Components, Screens, Views)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ Widget Events & State Updates
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Flutter AP Layer â˜…              â”‚  â† 9006æ–‡ä»¶ç¯„åœ
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚       9å¤§æœå‹™ç¾¤çµ„ (F001-F032)         â”‚ â”‚
â”‚  â”‚ AuthService | EntryService | ...    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Repository & Use Cases Pattern    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     Cache & Offline Management      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ HTTP/HTTPS Requests
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         RESTful API Layer               â”‚  â† 6001æ–‡ä»¶ç¯„åœ
â”‚         (32å€‹APIç«¯é»)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ Database Operations
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Firestore Database             â”‚  â† 6002æ–‡ä»¶ç¯„åœ
â”‚       (Collections & Documents)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
``` 

### 2.2 è³‡æ–™æµå‘èˆ‡è·è²¬åˆ†é›¢

#### 2.2.1 å‘ä¸Šè³‡æ–™æµï¼ˆå¾€Presentation Layerï¼‰
- **ç‹€æ…‹æ›´æ–°**: Provider/Riverpodç‹€æ…‹è®Šæ›´
- **äº‹ä»¶å›èª¿**: æ“ä½œçµæœé€šçŸ¥
- **éŒ¯èª¤è™•ç†**: ä½¿ç”¨è€…å‹å–„çš„éŒ¯èª¤è¨Šæ¯

#### 2.2.2 å‘ä¸‹è³‡æ–™æµï¼ˆå¾€Business Layerï¼‰
- **APIè«‹æ±‚**: RESTful HTTPè«‹æ±‚
- **è³‡æ–™é©—è­‰**: è«‹æ±‚åƒæ•¸é©—è­‰
- **èªè­‰ç®¡ç†**: JWT Tokenè‡ªå‹•é™„åŠ 

#### 2.2.3 æ©«å‘è³‡æ–™æµï¼ˆAP Layerå…§éƒ¨ï¼‰
- **æœå‹™å”ä½œ**: 9å¤§æœå‹™ç¾¤çµ„é–“çš„å”èª¿
- **å¿«å–ç®¡ç†**: æœ¬åœ°è³‡æ–™å¿«å–èˆ‡åŒæ­¥
- **ç‹€æ…‹åŒæ­¥**: å…¨åŸŸç‹€æ…‹èˆ‡å€åŸŸç‹€æ…‹åŒæ­¥

---

## 3.0 AP Layeræ¨¡çµ„æ¶æ§‹ï¼ˆAP Layer Module Architectureï¼‰

### 3.1 åŠŸèƒ½æ€§åˆ†å±¤æ¶æ§‹

AP Layerå…§éƒ¨æ¡ç”¨åŠŸèƒ½æ€§åˆ†å±¤ï¼ŒåŒ…å«9å¤§æœå‹™ç¾¤çµ„å°æ‡‰32å€‹APIç«¯é»ï¼š

```
Flutter AP Layer åŠŸèƒ½æ€§æ¶æ§‹
â”œâ”€â”€ ğŸ” èªè­‰èˆ‡å¸³æˆ¶ç®¡ç†æœå‹™ (F001-F005)
â”‚   â”œâ”€â”€ F001: ä½¿ç”¨è€…è¨»å†Š â†’ AuthService.registerUser()
â”‚   â”œâ”€â”€ F002: ä½¿ç”¨è€…ç™»å…¥ â†’ AuthService.loginUser()
â”‚   â”œâ”€â”€ F003: ä½¿ç”¨è€…ç™»å‡º â†’ AuthService.logoutUser()
â”‚   â”œâ”€â”€ F004: å¸³è™Ÿåˆªé™¤ â†’ AuthService.deleteAccount()
â”‚   â””â”€â”€ F005: å¯†ç¢¼é‡è¨­ â†’ AuthService.resetPassword()
â”œâ”€â”€ ğŸ’° åŸºç¤è¨˜å¸³æœå‹™ (F006-F009)
â”‚   â”œâ”€â”€ F006: APPè¨˜å¸³åŠŸèƒ½ â†’ EntryService.createEntry()
â”‚   â”œâ”€â”€ F007: APPè¨˜éŒ„æŸ¥è©¢ â†’ EntryService.queryEntries()
â”‚   â”œâ”€â”€ F008: ç§‘ç›®ä»£ç¢¼ç®¡ç† â†’ EntryService.getSubjectsList()
â”‚   â””â”€â”€ F009: ä½¿ç”¨è€…è¨­å®šç®¡ç† â†’ EntryService.updateUserSettings()
â”œâ”€â”€ ğŸ“– å¤šå¸³æœ¬ç®¡ç†æœå‹™ (F010-F015)
â”‚   â”œâ”€â”€ F010: å°ˆæ¡ˆå¸³æœ¬å»ºç«‹ â†’ ProjectLedgerService.createProject()
â”‚   â”œâ”€â”€ F011: å°ˆæ¡ˆå¸³æœ¬ç®¡ç† â†’ ProjectLedgerService.manageProject()
â”‚   â”œâ”€â”€ F012: å°ˆæ¡ˆå¸³æœ¬åˆªé™¤ â†’ ProjectLedgerService.deleteProject()
â”‚   â”œâ”€â”€ F013: åˆ†é¡å¸³æœ¬å»ºç«‹ â†’ ProjectLedgerService.createCategory()
â”‚   â”œâ”€â”€ F014: åˆ†é¡å¸³æœ¬ç®¡ç† â†’ ProjectLedgerService.manageCategory()
â”‚   â””â”€â”€ F015: å¤šå¸³æœ¬åˆ‡æ› â†’ ProjectLedgerService.switchLedger()
â”œâ”€â”€ ğŸ’µ é ç®—ç®¡ç†æœå‹™ (F016-F018)
â”‚   â”œâ”€â”€ F016: é ç®—è¨­å®šå»ºç«‹ â†’ BudgetService.createBudget()
â”‚   â”œâ”€â”€ F017: é ç®—è¿½è¹¤ç›£æ§ â†’ BudgetService.monitorBudget()
â”‚   â””â”€â”€ F018: é ç®—è­¦ç¤ºè¨­å®š â†’ BudgetService.setBudgetAlerts()
â”œâ”€â”€ ğŸ‘¥ å”ä½œæœå‹™ (F019-F021)
â”‚   â”œâ”€â”€ F019: å…±äº«å¸³æœ¬å»ºç«‹ â†’ CollaborationService.createSharedLedger()
â”‚   â”œâ”€â”€ F020: å¤šäººå”ä½œæ¬Šé™ â†’ CollaborationService.setMemberPermissions()
â”‚   â””â”€â”€ F021: å³æ™‚å”ä½œåŒæ­¥ â†’ CollaborationService.realtimeSync()
â”œâ”€â”€ ğŸ“ˆ å ±è¡¨æœå‹™ (F022-F024)
â”‚   â”œâ”€â”€ F022: æ¨™æº–å ±è¡¨ç”¢å‡º â†’ ReportService.generateReport()
â”‚   â”œâ”€â”€ F023: è‡ªå®šç¾©å ±è¡¨è¨­è¨ˆ â†’ ReportService.createCustomReport()
â”‚   â””â”€â”€ F024: å ±è¡¨åŒ¯å‡ºåŠŸèƒ½ â†’ ReportService.exportReport()
â”œâ”€â”€ ğŸ’¾ å‚™ä»½èˆ‡åŒæ­¥æœå‹™ (F025-F028)
â”‚   â”œâ”€â”€ F025: å®šæœŸè‡ªå‹•å‚™ä»½ â†’ SystemService.scheduleBackup()
â”‚   â”œâ”€â”€ F026: æ‰‹å‹•å‚™ä»½é‚„åŸ â†’ SystemService.manualBackup()
â”‚   â”œâ”€â”€ F027: å‚™ä»½æª”æ¡ˆç®¡ç† â†’ SystemService.manageBackup()
â”‚   â””â”€â”€ F028: è³‡æ–™åŒæ­¥æª¢æŸ¥ â†’ SystemService.checkSyncStatus()
â”œâ”€â”€ ğŸ–¥ï¸ ç³»çµ±ç›£æ§æœå‹™ (F029-F030)
â”‚   â”œâ”€â”€ F029: ç³»çµ±å¥åº·ç›£æ§ â†’ SystemService.getSystemHealth()
â”‚   â””â”€â”€ F030: éŒ¯èª¤æ—¥èªŒç®¡ç† â†’ SystemService.getErrorLogs()
â””â”€â”€ â° æ’ç¨‹æé†’æœå‹™ (F031-F032)
    â”œâ”€â”€ F031: æ’ç¨‹æé†’è¨­å®š â†’ SystemService.createReminder()
    â””â”€â”€ F032: æ’ç¨‹æé†’åŸ·è¡Œ â†’ SystemService.executeReminder()
```

### 3.2 æœå‹™ç¾¤çµ„è·è²¬çŸ©é™£

| æœå‹™ç¾¤çµ„ | ä¸»è¦è·è²¬ | APIç«¯é»æ•¸é‡ | æ ¸å¿ƒåŠŸèƒ½ | ç›¸ä¾æ€§ |
|----------|----------|-------------|----------|--------|
| **AuthService** | èªè­‰èˆ‡å¸³æˆ¶æœå‹™ | 5å€‹ (F001-F005) | ç™»å…¥è¨»å†Šã€æ¬Šé™é©—è­‰ã€å¸³æˆ¶ç®¡ç† | ç¨ç«‹æœå‹™ |
| **EntryService** | åŸºç¤è¨˜å¸³æœå‹™ | 4å€‹ (F006-F009) | CRUDè¨˜å¸³è¨˜éŒ„ã€ç§‘ç›®ç®¡ç† | ä¾è³´AuthService |
| **ProjectLedgerService** | å¤šå¸³æœ¬ç®¡ç†æœå‹™ | 6å€‹ (F010-F015) | å°ˆæ¡ˆå¸³æœ¬ã€åˆ†é¡ç®¡ç†ã€å¸³æœ¬åˆ‡æ› | ä¾è³´AuthService |
| **BudgetService** | é ç®—ç®¡ç†æœå‹™ | 3å€‹ (F016-F018) | é ç®—è¨­å®šã€é€²åº¦è¿½è¹¤ã€è­¦ç¤ºç®¡ç† | ä¾è³´EntryService |
| **CollaborationService** | å”ä½œæœå‹™ | 3å€‹ (F019-F021) | å…±äº«å¸³æœ¬ã€æ¬Šé™ç®¡ç†ã€å³æ™‚åŒæ­¥ | ä¾è³´ProjectLedgerService |
| **ReportService** | å ±è¡¨æœå‹™ | 3å€‹ (F022-F024) | æ¨™æº–å ±è¡¨ã€è‡ªå®šç¾©å ±è¡¨ã€åŒ¯å‡ºåŠŸèƒ½ | ä¾è³´EntryService |
| **BackupSyncService** | å‚™ä»½èˆ‡åŒæ­¥æœå‹™ | 4å€‹ (F025-F028) | è‡ªå‹•å‚™ä»½ã€æ‰‹å‹•å‚™ä»½ã€åŒæ­¥æª¢æŸ¥ | ä¾è³´æ‰€æœ‰æœå‹™ |
| **MonitoringService** | ç³»çµ±ç›£æ§æœå‹™ | 2å€‹ (F029-F030) | å¥åº·ç›£æ§ã€éŒ¯èª¤æ—¥èªŒç®¡ç† | ç¨ç«‹æœå‹™ |
| **ScheduleService** | æ’ç¨‹æé†’æœå‹™ | 2å€‹ (F031-F032) | æé†’è¨­å®šã€æ’ç¨‹åŸ·è¡Œ | ä¾è³´AuthService |

---

## 4.0 ç¨‹å¼ç¢¼çµ„ç¹”æ¶æ§‹ï¼ˆCode Organization Architectureï¼‰

### 4.1 Clean Architectureå¯¦ä½œçµæ§‹

AP Layeræ¡ç”¨Clean Architectureæ¨¡å¼ï¼Œç¢ºä¿ç¨‹å¼ç¢¼çš„å¯ç¶­è­·æ€§å’Œå¯æ¸¬è©¦æ€§ï¼š

```dart
lib/  â† Flutter AP Layer ç¨‹å¼ç¢¼æ ¹ç›®éŒ„
â”œâ”€â”€ core/  â† ğŸ—ï¸ åŸºç¤è¨­æ–½å±¤ (Infrastructure Layer)
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ api_client.dart          â†’ çµ±ä¸€APIå®¢æˆ¶ç«¯
â”‚   â”‚   â”œâ”€â”€ api_interceptors.dart    â†’ è«‹æ±‚æ””æˆªå™¨
â”‚   â”‚   â””â”€â”€ api_endpoints.dart       â†’ APIç«¯é»å®šç¾© (F001-F032)
â”‚   â”œâ”€â”€ cache/
â”‚   â”‚   â”œâ”€â”€ cache_manager.dart       â†’ å¿«å–ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ cache_strategies.dart    â†’ å¿«å–ç­–ç•¥
â”‚   â”œâ”€â”€ error/
â”‚   â”‚   â”œâ”€â”€ app_exceptions.dart      â†’ æ‡‰ç”¨ç•°å¸¸å®šç¾©
â”‚   â”‚   â””â”€â”€ error_handler.dart       â†’ éŒ¯èª¤è™•ç†å™¨
â”‚   â”œâ”€â”€ network/
â”‚   â”‚   â”œâ”€â”€ network_info.dart        â†’ ç¶²è·¯ç‹€æ…‹æª¢æ¸¬
â”‚   â”‚   â””â”€â”€ connectivity_service.dart â†’ é€£ç·šæœå‹™
â”‚   â””â”€â”€ di/
â”‚       â””â”€â”€ service_locator.dart     â†’ ä¾è³´æ³¨å…¥è¨­å®š
â”œâ”€â”€ data/  â† ğŸ“Š è³‡æ–™å±¤ (Data Layer)
â”‚   â”œâ”€â”€ datasources/
â”‚   â”‚   â”œâ”€â”€ remote/  â† ğŸŒ 9å¤§æœå‹™ç¾¤çµ„çš„é ç«¯è³‡æ–™æº
â”‚   â”‚   â”‚   â”œâ”€â”€ auth_remote_datasource.dart           â†’ F001-F005
â”‚   â”‚   â”‚   â”œâ”€â”€ entry_remote_datasource.dart          â†’ F006-F009
â”‚   â”‚   â”‚   â”œâ”€â”€ project_ledger_remote_datasource.dart â†’ F010-F015
â”‚   â”‚   â”‚   â”œâ”€â”€ budget_remote_datasource.dart         â†’ F016-F018
â”‚   â”‚   â”‚   â”œâ”€â”€ collaboration_remote_datasource.dart  â†’ F019-F021
â”‚   â”‚   â”‚   â”œâ”€â”€ report_remote_datasource.dart         â†’ F022-F024
â”‚   â”‚   â”‚   â”œâ”€â”€ backup_sync_remote_datasource.dart    â†’ F025-F028
â”‚   â”‚   â”‚   â”œâ”€â”€ monitoring_remote_datasource.dart     â†’ F029-F030
â”‚   â”‚   â”‚   â””â”€â”€ schedule_remote_datasource.dart       â†’ F031-F032
â”‚   â”‚   â””â”€â”€ local/  â† ğŸ’¾ æœ¬åœ°å¿«å–è³‡æ–™æº
â”‚   â”‚       â”œâ”€â”€ auth_local_datasource.dart
â”‚   â”‚       â”œâ”€â”€ entry_local_datasource.dart
â”‚   â”‚       â”œâ”€â”€ project_ledger_local_datasource.dart
â”‚   â”‚       â”œâ”€â”€ budget_local_datasource.dart
â”‚   â”‚       â”œâ”€â”€ collaboration_local_datasource.dart
â”‚   â”‚       â”œâ”€â”€ report_local_datasource.dart
â”‚   â”‚       â”œâ”€â”€ backup_sync_local_datasource.dart
â”‚   â”‚       â”œâ”€â”€ monitoring_local_datasource.dart
â”‚   â”‚       â””â”€â”€ schedule_local_datasource.dart
â”‚   â”œâ”€â”€ models/  â† ğŸ“‹ è³‡æ–™å‚³è¼¸ç‰©ä»¶ (DTO)
â”‚   â”‚   â”œâ”€â”€ user_model.dart
â”‚   â”‚   â”œâ”€â”€ entry_model.dart
â”‚   â”‚   â”œâ”€â”€ project_model.dart
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ repositories/  â† ğŸ”„ Repositoryå¯¦ä½œ
â”‚       â”œâ”€â”€ auth_repository_impl.dart
â”‚       â”œâ”€â”€ entry_repository_impl.dart
â”‚       â”œâ”€â”€ project_ledger_repository_impl.dart
â”‚       â”œâ”€â”€ budget_repository_impl.dart
â”‚       â”œâ”€â”€ collaboration_repository_impl.dart
â”‚       â”œâ”€â”€ report_repository_impl.dart
â”‚       â”œâ”€â”€ backup_sync_repository_impl.dart
â”‚       â”œâ”€â”€ monitoring_repository_impl.dart
â”‚       â””â”€â”€ schedule_repository_impl.dart
â”œâ”€â”€ domain/  â† ğŸ¯ é ˜åŸŸå±¤ (Domain Layer)
â”‚   â”œâ”€â”€ entities/  â† ğŸ’ æ¥­å‹™å¯¦é«”
â”‚   â”‚   â”œâ”€â”€ user.dart
â”‚   â”‚   â”œâ”€â”€ entry.dart
â”‚   â”‚   â”œâ”€â”€ project.dart
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ repositories/  â† ğŸ“œ RepositoryæŠ½è±¡ä»‹é¢
â”‚   â”‚   â”œâ”€â”€ auth_repository.dart
â”‚   â”‚   â”œâ”€â”€ entry_repository.dart
â”‚   â”‚   â”œâ”€â”€ project_ledger_repository.dart
â”‚   â”‚   â”œâ”€â”€ budget_repository.dart
â”‚   â”‚   â”œâ”€â”€ collaboration_repository.dart
â”‚   â”‚   â”œâ”€â”€ report_repository.dart
â”‚   â”‚   â”œâ”€â”€ backup_sync_repository.dart
â”‚   â”‚   â”œâ”€â”€ monitoring_repository.dart
â”‚   â”‚   â””â”€â”€ schedule_repository.dart
â”‚   â””â”€â”€ usecases/  â† âš™ï¸ æ¥­å‹™ç”¨ä¾‹ (Use Cases)
â”‚       â”œâ”€â”€ auth/
â”‚       â”‚   â”œâ”€â”€ login_user.dart      â†’ F002 ç™»å…¥ç”¨ä¾‹
â”‚       â”‚   â”œâ”€â”€ register_user.dart   â†’ F001 è¨»å†Šç”¨ä¾‹
â”‚       â”‚   â””â”€â”€ ...
â”‚       â”œâ”€â”€ entry/
â”‚       â”‚   â”œâ”€â”€ create_entry.dart    â†’ F006 æ–°å¢è¨˜å¸³ç”¨ä¾‹
â”‚       â”‚   â”œâ”€â”€ get_entries.dart     â†’ F007 æŸ¥è©¢è¨˜å¸³ç”¨ä¾‹
â”‚       â”‚   â””â”€â”€ ...
â”‚       â”œâ”€â”€ project_ledger/
â”‚       â”‚   â”œâ”€â”€ create_project.dart  â†’ F010 å»ºç«‹å°ˆæ¡ˆç”¨ä¾‹
â”‚       â”‚   â”œâ”€â”€ switch_ledger.dart   â†’ F015 åˆ‡æ›å¸³æœ¬ç”¨ä¾‹
â”‚       â”‚   â””â”€â”€ ...
â”‚       â”œâ”€â”€ budget/
â”‚       â”‚   â”œâ”€â”€ create_budget.dart   â†’ F016 å»ºç«‹é ç®—ç”¨ä¾‹
â”‚       â”‚   â””â”€â”€ ...
â”‚       â”œâ”€â”€ collaboration/
â”‚       â”‚   â”œâ”€â”€ create_shared_ledger.dart â†’ F019 å»ºç«‹å…±äº«å¸³æœ¬ç”¨ä¾‹
â”‚       â”‚   â””â”€â”€ ...
â”‚       â”œâ”€â”€ report/
â”‚       â”‚   â”œâ”€â”€ generate_report.dart â†’ F022 ç”¢ç”Ÿå ±è¡¨ç”¨ä¾‹
â”‚       â”‚   â””â”€â”€ ...
â”‚       â”œâ”€â”€ backup_sync/
â”‚       â”‚   â”œâ”€â”€ schedule_backup.dart â†’ F025 æ’ç¨‹å‚™ä»½ç”¨ä¾‹
â”‚       â”‚   â””â”€â”€ ...
â”‚       â”œâ”€â”€ monitoring/
â”‚       â”‚   â”œâ”€â”€ check_system_health.dart â†’ F029 ç³»çµ±å¥åº·æª¢æŸ¥ç”¨ä¾‹
â”‚       â”‚   â””â”€â”€ ...
â”‚       â””â”€â”€ schedule/
â”‚           â”œâ”€â”€ create_reminder.dart â†’ F031 å»ºç«‹æé†’ç”¨ä¾‹
â”‚           â””â”€â”€ ...
â””â”€â”€ presentation/  â† ğŸ¨ å±•ç¤ºå±¤æ¥å£ (èˆ‡9005æ–‡ä»¶çš„éŠœæ¥é»)
    â”œâ”€â”€ providers/  â† ğŸ”„ ç‹€æ…‹ç®¡ç†
    â”‚   â”œâ”€â”€ auth_provider.dart            â†’ èªè­‰ç‹€æ…‹ç®¡ç†
    â”‚   â”œâ”€â”€ entry_provider.dart           â†’ è¨˜å¸³ç‹€æ…‹ç®¡ç†
    â”‚   â”œâ”€â”€ project_ledger_provider.dart  â†’ å¤šå¸³æœ¬ç‹€æ…‹ç®¡ç†
    â”‚   â”œâ”€â”€ budget_provider.dart          â†’ é ç®—ç‹€æ…‹ç®¡ç†
    â”‚   â”œâ”€â”€ collaboration_provider.dart   â†’ å”ä½œç‹€æ…‹ç®¡ç†
    â”‚   â”œâ”€â”€ report_provider.dart          â†’ å ±è¡¨ç‹€æ…‹ç®¡ç†
    â”‚   â”œâ”€â”€ backup_sync_provider.dart     â†’ å‚™ä»½åŒæ­¥ç‹€æ…‹ç®¡ç†
    â”‚   â”œâ”€â”€ monitoring_provider.dart      â†’ ç³»çµ±ç›£æ§ç‹€æ…‹ç®¡ç†
    â”‚   â””â”€â”€ schedule_provider.dart        â†’ æ’ç¨‹æé†’ç‹€æ…‹ç®¡ç†
    â””â”€â”€ widgets/  â† ğŸ§© å…±ç”¨UIå…ƒä»¶ (ç”±9005æ–‡ä»¶è©³ç´°å®šç¾©)
        â”œâ”€â”€ common/
        â””â”€â”€ ...
```

### 4.2 ä¾è³´æ–¹å‘èˆ‡åŸå‰‡

Clean Architectureçš„ä¾è³´è¦å‰‡åœ¨AP Layerä¸­çš„å¯¦ä½œï¼š

```
ğŸ¨ Presentation â”€â”€ä¾è³´â”€â”€â–º ğŸ¯ Domain â—„â”€â”€å¯¦ä½œâ”€â”€ ğŸ“Š Data
     â”‚                      â–²                    â”‚
     â””â”€â”€â”€â”€â”€â”€ä¾è³´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
                                                 â–¼
                                            ğŸ—ï¸ Core
                                         (Infrastructure)
```

**ä¾è³´åŸå‰‡**ï¼š
- **Presentation Layer**: ä¾è³´Domainçš„Use Caseså’ŒEntities
- **Data Layer**: å¯¦ä½œDomainçš„Repositoryä»‹é¢
- **Domain Layer**: å®Œå…¨ç¨ç«‹ï¼Œä¸ä¾è³´ä»»ä½•å¤–éƒ¨å±¤
- **Core Layer**: è¢«æ‰€æœ‰å±¤å…±ç”¨ï¼Œæä¾›åŸºç¤è¨­æ–½

---

## 5.0 æ¶æ§‹é—œä¿‚å°æ‡‰ï¼ˆArchitecture Relationship Mappingï¼‰

### 5.1 ä¸‰å±¤æ¶æ§‹å°æ‡‰é—œä¿‚

ä»¥ä¸‹è¡¨æ ¼èªªæ˜**ç³»çµ±å±¤ç´šæ¶æ§‹**ã€**æ¨¡çµ„åŠŸèƒ½æ¶æ§‹**ã€**ç¨‹å¼ç¢¼çµ„ç¹”æ¶æ§‹**ä¹‹é–“çš„å°æ‡‰é—œä¿‚ï¼š

| ç³»çµ±å±¤ç´šæ¶æ§‹ | æ¨¡çµ„åŠŸèƒ½æ¶æ§‹ | ç¨‹å¼ç¢¼çµ„ç¹”æ¶æ§‹ | èªªæ˜ |
|-------------|-------------|---------------|------|
| **Flutter AP Layer** | **9å¤§æœå‹™ç¾¤çµ„** | **lib/** | æ•´å€‹AP Layerçš„ç¯„åœ |
| â†³ Business Logic | â†³ AuthService (F001-F005) | â†³ data/datasources/remote/auth_remote_datasource.dart | èªè­‰æœå‹™å¯¦ä½œ |
| â†³ Business Logic | â†³ EntryService (F006-F009) | â†³ data/datasources/remote/entry_remote_datasource.dart | è¨˜å¸³æœå‹™å¯¦ä½œ |
| â†³ Business Logic | â†³ ProjectLedgerService (F010-F015) | â†³ data/datasources/remote/project_ledger_remote_datasource.dart | å¤šå¸³æœ¬æœå‹™å¯¦ä½œ |
| â†³ Business Logic | â†³ BudgetService (F016-F018) | â†³ data/datasources/remote/budget_remote_datasource.dart | é ç®—æœå‹™å¯¦ä½œ |
| â†³ Business Logic | â†³ CollaborationService (F019-F021) | â†³ data/datasources/remote/collaboration_remote_datasource.dart | å”ä½œæœå‹™å¯¦ä½œ |
| â†³ Business Logic | â†³ ReportService (F022-F024) | â†³ data/datasources/remote/report_remote_datasource.dart | å ±è¡¨æœå‹™å¯¦ä½œ |
| â†³ Business Logic | â†³ BackupSyncService (F025-F028) | â†³ data/datasources/remote/backup_sync_remote_datasource.dart | å‚™ä»½åŒæ­¥æœå‹™å¯¦ä½œ |
| â†³ Business Logic | â†³ MonitoringService (F029-F030) | â†³ data/datasources/remote/monitoring_remote_datasource.dart | ç³»çµ±ç›£æ§æœå‹™å¯¦ä½œ |
| â†³ Business Logic | â†³ ScheduleService (F031-F032) | â†³ data/datasources/remote/schedule_remote_datasource.dart | æ’ç¨‹æé†’æœå‹™å¯¦ä½œ |
| â†³ API Integration | â†³ HTTP Client | â†³ core/api/api_client.dart | çµ±ä¸€APIå®¢æˆ¶ç«¯ |
| â†³ State Management | â†³ Repository Pattern | â†³ domain/repositories/ + data/repositories/ | è³‡æ–™å­˜å–æŠ½è±¡ |
| â†³ Data Transformation | â†³ Data Models | â†³ data/models/ + domain/entities/ | è³‡æ–™æ¨¡å‹è½‰æ› |
| â†³ Cache Management | â†³ Cache Strategies | â†³ core/cache/ + data/datasources/local/ | å¿«å–ç®¡ç† |

### 5.2 APIç«¯é»åˆ°ç¨‹å¼ç¢¼çš„å°æ‡‰

#### 5.2.1 èªè­‰ç®¡ç†ç¾¤çµ„ (F001-F005) å°æ‡‰
```
F001 ä½¿ç”¨è€…è¨»å†Š â”€â”€å°æ‡‰â”€â”€â–º auth_remote_datasource.dart.registerUser()
                   â”œâ”€â”€ domain/usecases/auth/register_user.dart
                   â”œâ”€â”€ data/repositories/auth_repository_impl.dart
                   â””â”€â”€ presentation/providers/auth_provider.dart

F002 ä½¿ç”¨è€…ç™»å…¥ â”€â”€å°æ‡‰â”€â”€â–º auth_remote_datasource.dart.loginUser()
F003 ä½¿ç”¨è€…ç™»å‡º â”€â”€å°æ‡‰â”€â”€â–º auth_remote_datasource.dart.logoutUser()
F004 å¸³è™Ÿåˆªé™¤   â”€â”€å°æ‡‰â”€â”€â–º auth_remote_datasource.dart.deleteAccount()
F005 å¯†ç¢¼é‡è¨­   â”€â”€å°æ‡‰â”€â”€â–º auth_remote_datasource.dart.resetPassword()
```

#### 5.2.2 åŸºç¤è¨˜å¸³ç¾¤çµ„ (F006-F009) å°æ‡‰
```
F006 APPè¨˜å¸³åŠŸèƒ½     â”€â”€å°æ‡‰â”€â”€â–º entry_remote_datasource.dart.createEntry()
F007 APPè¨˜éŒ„æŸ¥è©¢     â”€â”€å°æ‡‰â”€â”€â–º entry_remote_datasource.dart.queryEntries()
F008 ç§‘ç›®ä»£ç¢¼ç®¡ç†    â”€â”€å°æ‡‰â”€â”€â–º entry_remote_datasource.dart.getSubjectsList()
F009 ä½¿ç”¨è€…è¨­å®šç®¡ç†  â”€â”€å°æ‡‰â”€â”€â–º entry_remote_datasource.dart.updateUserSettings()
```

#### 5.2.3 å¤šå¸³æœ¬ç®¡ç†ç¾¤çµ„ (F010-F015) å°æ‡‰
```
F010 å°ˆæ¡ˆå¸³æœ¬å»ºç«‹ â”€â”€å°æ‡‰â”€â”€â–º project_ledger_remote_datasource.dart.createProject()
                   â”œâ”€â”€ domain/usecases/project_ledger/create_project.dart
                   â”œâ”€â”€ data/repositories/project_ledger_repository_impl.dart
                   â””â”€â”€ presentation/providers/project_ledger_provider.dart

F011 å°ˆæ¡ˆå¸³æœ¬ç®¡ç† â”€â”€å°æ‡‰â”€â”€â–º project_ledger_remote_datasource.dart.manageProject()
F012 å°ˆæ¡ˆå¸³æœ¬åˆªé™¤ â”€â”€å°æ‡‰â”€â”€â–º project_ledger_remote_datasource.dart.deleteProject()
F013 åˆ†é¡å¸³æœ¬å»ºç«‹ â”€â”€å°æ‡‰â”€â”€â–º project_ledger_remote_datasource.dart.createCategory()
F014 åˆ†é¡å¸³æœ¬ç®¡ç† â”€â”€å°æ‡‰â”€â”€â–º project_ledger_remote_datasource.dart.manageCategory()
F015 å¤šå¸³æœ¬åˆ‡æ›   â”€â”€å°æ‡‰â”€â”€â–º project_ledger_remote_datasource.dart.switchLedger()
```

#### 5.2.4 é ç®—ç®¡ç†ç¾¤çµ„ (F016-F018) å°æ‡‰
```
F016 é ç®—è¨­å®šå»ºç«‹ â”€â”€å°æ‡‰â”€â”€â–º budget_remote_datasource.dart.createBudget()
                   â”œâ”€â”€ domain/usecases/budget/create_budget.dart
                   â”œâ”€â”€ data/repositories/budget_repository_impl.dart
                   â””â”€â”€ presentation/providers/budget_provider.dart

F017 é ç®—è¿½è¹¤ç›£æ§ â”€â”€å°æ‡‰â”€â”€â–º budget_remote_datasource.dart.monitorBudget()
F018 é ç®—è­¦ç¤ºè¨­å®š â”€â”€å°æ‡‰â”€â”€â–º budget_remote_datasource.dart.setBudgetAlerts()
```

#### 5.2.5 å”ä½œåŠŸèƒ½ç¾¤çµ„ (F019-F021) å°æ‡‰
```
F019 å…±äº«å¸³æœ¬å»ºç«‹ â”€â”€å°æ‡‰â”€â”€â–º collaboration_remote_datasource.dart.createSharedLedger()
                   â”œâ”€â”€ domain/usecases/collaboration/create_shared_ledger.dart
                   â”œâ”€â”€ data/repositories/collaboration_repository_impl.dart
                   â””â”€â”€ presentation/providers/collaboration_provider.dart

F020 å¤šäººå”ä½œæ¬Šé™ â”€â”€å°æ‡‰â”€â”€â–º collaboration_remote_datasource.dart.setMemberPermissions()
F021 å³æ™‚å”ä½œåŒæ­¥ â”€â”€å°æ‡‰â”€â”€â–º collaboration_remote_datasource.dart.realtimeSync()
```

#### 5.2.6 å ±è¡¨åŠŸèƒ½ç¾¤çµ„ (F022-F024) å°æ‡‰
```
F022 æ¨™æº–å ±è¡¨ç”¢å‡º â”€â”€å°æ‡‰â”€â”€â–º report_remote_datasource.dart.generateReport()
                   â”œâ”€â”€ domain/usecases/report/generate_report.dart
                   â”œâ”€â”€ data/repositories/report_repository_impl.dart
                   â””â”€â”€ presentation/providers/report_provider.dart

F023 è‡ªå®šç¾©å ±è¡¨è¨­è¨ˆ â”€â”€å°æ‡‰â”€â”€â–º report_remote_datasource.dart.createCustomReport()
F024 å ±è¡¨åŒ¯å‡ºåŠŸèƒ½   â”€â”€å°æ‡‰â”€â”€â–º report_remote_datasource.dart.exportReport()
```

#### 5.2.7 å‚™ä»½èˆ‡åŒæ­¥ç¾¤çµ„ (F025-F028) å°æ‡‰
```
F025 å®šæœŸè‡ªå‹•å‚™ä»½ â”€â”€å°æ‡‰â”€â”€â–º backup_sync_remote_datasource.dart.scheduleBackup()
                   â”œâ”€â”€ domain/usecases/backup_sync/schedule_backup.dart
                   â”œâ”€â”€ data/repositories/backup_sync_repository_impl.dart
                   â””â”€â”€ presentation/providers/backup_sync_provider.dart

F026 æ‰‹å‹•å‚™ä»½é‚„åŸ â”€â”€å°æ‡‰â”€â”€â–º backup_sync_remote_datasource.dart.manualBackup()
F027 å‚™ä»½æª”æ¡ˆç®¡ç† â”€â”€å°æ‡‰â”€â”€â–º backup_sync_remote_datasource.dart.manageBackup()
F028 è³‡æ–™åŒæ­¥æª¢æŸ¥ â”€â”€å°æ‡‰â”€â”€â–º backup_sync_remote_datasource.dart.checkSyncStatus()
```

#### 5.2.8 ç³»çµ±ç›£æ§ç¾¤çµ„ (F029-F030) å°æ‡‰
```
F029 ç³»çµ±å¥åº·ç›£æ§ â”€â”€å°æ‡‰â”€â”€â–º monitoring_remote_datasource.dart.getSystemHealth()
                   â”œâ”€â”€ domain/usecases/monitoring/check_system_health.dart
                   â”œâ”€â”€ data/repositories/monitoring_repository_impl.dart
                   â””â”€â”€ presentation/providers/monitoring_provider.dart

F030 éŒ¯èª¤æ—¥èªŒç®¡ç† â”€â”€å°æ‡‰â”€â”€â–º monitoring_remote_datasource.dart.getErrorLogs()
```

#### 5.2.9 æ’ç¨‹æé†’ç¾¤çµ„ (F031-F032) å°æ‡‰
```
F031 æ’ç¨‹æé†’è¨­å®š â”€â”€å°æ‡‰â”€â”€â–º schedule_remote_datasource.dart.createReminder()
                   â”œâ”€â”€ domain/usecases/schedule/create_reminder.dart
                   â”œâ”€â”€ data/repositories/schedule_repository_impl.dart
                   â””â”€â”€ presentation/providers/schedule_provider.dart

F032 æ’ç¨‹æé†’åŸ·è¡Œ â”€â”€å°æ‡‰â”€â”€â–º schedule_remote_datasource.dart.executeReminder()
```
---

## 6.0 éåŠŸèƒ½æ€§éœ€æ±‚ï¼ˆNon-Functional Requirementsï¼‰

### 6.1 æ•ˆèƒ½éœ€æ±‚ï¼ˆPerformance Requirementsï¼‰

#### 6.1.1 APIéŸ¿æ‡‰æ™‚é–“è¦æ±‚
- **å¿«é€ŸéŸ¿æ‡‰API**ï¼ˆF002ç™»å…¥ã€F006è¨˜å¸³ã€F015å¸³æœ¬åˆ‡æ›ï¼‰: â‰¤ 500ms
- **æ¨™æº–éŸ¿æ‡‰API**ï¼ˆF007æŸ¥è©¢ã€F010å»ºç«‹å¸³æœ¬ã€F016é ç®—è¨­å®šï¼‰: â‰¤ 1000ms
- **è¤‡é›œè™•ç†API**ï¼ˆF022å ±è¡¨ç”¢ç”Ÿã€F025å‚™ä»½ã€F023è‡ªå®šç¾©å ±è¡¨ï¼‰: â‰¤ 3000ms
- **æ‰¹æ¬¡è™•ç†API**ï¼ˆF027å‚™ä»½ç®¡ç†ã€F028åŒæ­¥æª¢æŸ¥ï¼‰: â‰¤ 5000ms

#### 6.1.2 ä½µç™¼è™•ç†èƒ½åŠ›
- **ç”¨æˆ¶ä½µç™¼é‡**: æ”¯æ´å–®ä¸€ä½¿ç”¨è€…æœ€å¤§10å€‹ä½µç™¼è«‹æ±‚
- **Sessionç®¡ç†**: æ”¯æ´å¤šè¨­å‚™åŒæ™‚ç™»å…¥ï¼Œè‡ªå‹•Tokenæ›´æ–°
- **è³‡æ–™åŒæ­¥**: å³æ™‚å”ä½œåŠŸèƒ½ï¼ˆF021ï¼‰æ”¯æ´æœ€å¤§5äººåŒæ™‚ç·¨è¼¯
- **å¿«å–æ•ˆèƒ½**: æœ¬åœ°å¿«å–å‘½ä¸­ç‡é ˆé”80%ä»¥ä¸Šï¼Œæ¸›å°‘ç¶²è·¯è«‹æ±‚

#### 6.1.3 è¨˜æ†¶é«”èˆ‡å„²å­˜ç®¡ç†
```
Flutter AP Layer æ•ˆèƒ½æ¶æ§‹
â”œâ”€â”€ è¨˜æ†¶é«”ç®¡ç†ç­–ç•¥
â”‚   â”œâ”€â”€ Providerç‹€æ…‹: æœ€å¤§50MBè¨˜æ†¶é«”ä½¿ç”¨
â”‚   â”œâ”€â”€ APIå¿«å–: æœ€å¤§100MBæœ¬åœ°å„²å­˜
â”‚   â””â”€â”€ åœ–ç‰‡å¿«å–: æœ€å¤§200MBæš«å­˜ç©ºé–“
â”œâ”€â”€ ç¶²è·¯æœ€ä½³åŒ–
â”‚   â”œâ”€â”€ HTTPé€£ç·šæ± : æœ€å¤§5å€‹ä½µç™¼é€£ç·š
â”‚   â”œâ”€â”€ è«‹æ±‚å£“ç¸®: Gzipå£“ç¸®ç‡é”70%
â”‚   â””â”€â”€ æ–·ç·šé‡é€£: æŒ‡æ•¸é€€é¿é‡è©¦æ©Ÿåˆ¶
â””â”€â”€ é›»æ± æœ€ä½³åŒ–
    â”œâ”€â”€ èƒŒæ™¯åŒæ­¥: æœ€å¤§30ç§’é–“éš”
    â”œâ”€â”€ é›¢ç·šæ¨¡å¼: è‡ªå‹•é™ä½CPUä½¿ç”¨
    â””â”€â”€ ç¶²è·¯åµæ¸¬: æ™ºæ…§åˆ‡æ›åŒæ­¥é »ç‡
```

### 6.2 å®‰å…¨éœ€æ±‚ï¼ˆSecurity Requirementsï¼‰

#### 6.2.1 JWT Tokenç®¡ç†æ¶æ§‹
```
JWTèªè­‰æµç¨‹æ¶æ§‹
â”œâ”€â”€ Tokenç”Ÿå‘½é€±æœŸç®¡ç†
â”‚   â”œâ”€â”€ Access Token: 15åˆ†é˜éæœŸæ™‚é–“
â”‚   â”œâ”€â”€ Refresh Token: 7å¤©éæœŸæ™‚é–“
â”‚   â””â”€â”€ è‡ªå‹•åˆ·æ–°: TokenéæœŸå‰2åˆ†é˜è‡ªå‹•æ›´æ–°
â”œâ”€â”€ Tokenå„²å­˜ç­–ç•¥
â”‚   â”œâ”€â”€ å®‰å…¨å„²å­˜: ä½¿ç”¨Flutter SecureStorage
â”‚   â”œâ”€â”€ åŠ å¯†ä¿è­·: AES-256åŠ å¯†æœ¬åœ°Token
â”‚   â””â”€â”€ è£ç½®ç¶å®š: Tokenèˆ‡è£ç½®IDé—œè¯
â””â”€â”€ Tokené©—è­‰æ©Ÿåˆ¶
    â”œâ”€â”€ æ¯æ¬¡APIè«‹æ±‚: è‡ªå‹•é™„åŠ Bearer Token
    â”œâ”€â”€ éæœŸè™•ç†: è‡ªå‹•å°å‘é‡æ–°èªè­‰
    â””â”€â”€ æ’¤éŠ·æ©Ÿåˆ¶: ç™»å‡ºæ™‚ä¸»å‹•æ’¤éŠ·Token
```

#### 6.2.2 APIå®‰å…¨ç­–ç•¥
- **å‚³è¼¸å®‰å…¨**: æ‰€æœ‰APIè«‹æ±‚å¼·åˆ¶ä½¿ç”¨HTTPS/TLS 1.3
- **è«‹æ±‚é©—è­‰**: APIè«‹æ±‚åŒ…å«æ™‚é–“æˆ³å’Œéš¨æ©Ÿæ•¸é˜²é‡æ”¾æ”»æ“Š
- **è³‡æ–™åŠ å¯†**: æ•æ„Ÿè³‡æ–™ï¼ˆå¯†ç¢¼ã€è²¡å‹™é‡‘é¡ï¼‰æ¡ç”¨ç«¯åˆ°ç«¯åŠ å¯†
- **æ¬Šé™æ§åˆ¶**: åŸºæ–¼Role-Based Access Control (RBAC)çš„APIæ¬Šé™ç®¡ç†

#### 6.2.3 è³‡æ–™ä¿è­·æ©Ÿåˆ¶
```
è³‡æ–™å®‰å…¨æ¶æ§‹å±¤æ¬¡
â”œâ”€â”€ æ‡‰ç”¨å±¤å®‰å…¨ (AP Layer)
â”‚   â”œâ”€â”€ è¼¸å…¥é©—è­‰: æ‰€æœ‰ä½¿ç”¨è€…è¼¸å…¥é€²è¡Œæ ¼å¼å’Œç¯„åœæª¢æŸ¥
â”‚   â”œâ”€â”€ è¼¸å‡ºç·¨ç¢¼: é˜²æ­¢XSSå’Œæ³¨å…¥æ”»æ“Š
â”‚   â””â”€â”€ éŒ¯èª¤è™•ç†: é¿å…æ´©éœ²ç³»çµ±æ•æ„Ÿè³‡è¨Š
â”œâ”€â”€ å‚³è¼¸å±¤å®‰å…¨
â”‚   â”œâ”€â”€ Certificate Pinning: é˜²æ­¢ä¸­é–“äººæ”»æ“Š
â”‚   â”œâ”€â”€ è«‹æ±‚ç°½å: HMAC-SHA256ç°½åé©—è­‰
â”‚   â””â”€â”€ æµé‡åŠ å¯†: ç«¯åˆ°ç«¯AES-256åŠ å¯†
â””â”€â”€ å„²å­˜å±¤å®‰å…¨
    â”œâ”€â”€ æœ¬åœ°åŠ å¯†: æ•æ„Ÿè³‡æ–™æœ¬åœ°AESåŠ å¯†
    â”œâ”€â”€ Keyç®¡ç†: åŸºæ–¼Android Keystore/iOS Keychain
    â””â”€â”€ è³‡æ–™æ¸…é™¤: ç™»å‡ºæ™‚å®‰å…¨æ¸…é™¤æ•æ„Ÿè³‡æ–™
```

### 6.3 é›¢ç·šç­–ç•¥éœ€æ±‚ï¼ˆOffline Strategy Requirementsï¼‰

#### 6.3.1 æ™ºæ…§å¿«å–æ©Ÿåˆ¶
```
å¤šå±¤å¿«å–æ¶æ§‹ç­–ç•¥
â”œâ”€â”€ L1å¿«å– - è¨˜æ†¶é«”å¿«å– (Provider State)
â”‚   â”œâ”€â”€ å³æ™‚è³‡æ–™: ç•¶å‰å¸³æœ¬ã€ä½¿ç”¨è€…ç‹€æ…‹
â”‚   â”œâ”€â”€ å¿«å–æ™‚æ•ˆ: æ‡‰ç”¨ç”Ÿå‘½é€±æœŸå…§æœ‰æ•ˆ
â”‚   â””â”€â”€ å¿«é€Ÿå­˜å–: æ¯«ç§’ç´šè³‡æ–™è®€å–
â”œâ”€â”€ L2å¿«å– - æœ¬åœ°è³‡æ–™åº«å¿«å– (SQLite)
â”‚   â”œâ”€â”€ æŒä¹…è³‡æ–™: è¨˜å¸³è¨˜éŒ„ã€å¸³æœ¬åˆ—è¡¨ã€ç§‘ç›®ä»£ç¢¼
â”‚   â”œâ”€â”€ å¿«å–æ™‚æ•ˆ: 7å¤©è‡ªå‹•éæœŸ
â”‚   â””â”€â”€ åŒæ­¥æ¨™è¨˜: è¨˜éŒ„è³‡æ–™åŒæ­¥ç‹€æ…‹
â””â”€â”€ L3å¿«å– - æª”æ¡ˆå¿«å– (Local Storage)
    â”œâ”€â”€ éœæ…‹è³‡æº: å ±è¡¨æ¨¡æ¿ã€ä½¿ç”¨è€…è¨­å®š
    â”œâ”€â”€ å¿«å–æ™‚æ•ˆ: 30å¤©è‡ªå‹•æ¸…ç†
    â””â”€â”€ ç‰ˆæœ¬æ§åˆ¶: æ”¯æ´å¿«å–ç‰ˆæœ¬æ›´æ–°
```

#### 6.3.2 é›¢ç·šæ“ä½œæ”¯æ´
- **é›¢ç·šè¨˜å¸³**: æ”¯æ´F006 APPè¨˜å¸³åŠŸèƒ½å®Œå…¨é›¢ç·šæ“ä½œ
- **é›¢ç·šæŸ¥è©¢**: F007è¨˜éŒ„æŸ¥è©¢å¯å­˜å–æœ¬åœ°å¿«å–çš„æ­·å²è³‡æ–™
- **é›¢ç·šå ±è¡¨**: F022æ¨™æº–å ±è¡¨å¯åŸºæ–¼æœ¬åœ°è³‡æ–™ç”¢ç”Ÿ
- **è¡çªè™•ç†**: ä¸Šç·šå¾Œè‡ªå‹•è§£æ±ºè³‡æ–™è¡çªï¼Œæ¡ç”¨"æœ€å¾Œæ›´æ–°è€…å‹åˆ©"ç­–ç•¥

#### 6.3.3 è³‡æ–™åŒæ­¥ç­–ç•¥
```
æ™ºæ…§åŒæ­¥æ¶æ§‹æµç¨‹
â”œâ”€â”€ ç¶²è·¯ç‹€æ…‹åµæ¸¬
â”‚   â”œâ”€â”€ é€£ç·šå“è³ª: ç›£æ§ç¶²è·¯é€Ÿåº¦å’Œç©©å®šæ€§
â”‚   â”œâ”€â”€ æµé‡æ§åˆ¶: Wi-Fiå„ªå…ˆï¼Œè¡Œå‹•ç¶²è·¯é™åˆ¶å¤§æª”å‚³è¼¸
â”‚   â””â”€â”€ é›»é‡ç®¡ç†: ä½é›»é‡æ™‚å»¶å¾Œéç·Šæ€¥åŒæ­¥
â”œâ”€â”€ åŒæ­¥å„ªå…ˆç´šç®¡ç†
â”‚   â”œâ”€â”€ é«˜å„ªå…ˆç´š: èªè­‰ç‹€æ…‹ã€å¸³æœ¬åˆ‡æ›
â”‚   â”œâ”€â”€ ä¸­å„ªå…ˆç´š: è¨˜å¸³æ–°å¢ã€ç·¨è¼¯æ“ä½œ
â”‚   â””â”€â”€ ä½å„ªå…ˆç´š: å ±è¡¨å¿«å–ã€æ­·å²è³‡æ–™
â””â”€â”€ è¡çªè§£æ±ºæ©Ÿåˆ¶
    â”œâ”€â”€ è‡ªå‹•åˆä½µ: éè¡çªæ¬„ä½è‡ªå‹•åˆä½µ
    â”œâ”€â”€ ä½¿ç”¨è€…é¸æ“‡: è¡çªè³‡æ–™æä¾›é¸é …è®“ä½¿ç”¨è€…æ±ºå®š
    â””â”€â”€ ç‰ˆæœ¬ç®¡ç†: ä¿ç•™è¡çªç‰ˆæœ¬ä¾›å¾ŒçºŒåƒè€ƒ
```

#### 6.3.4 é›¢ç·šä½¿ç”¨è€…é«”é©—
- **ç‹€æ…‹æŒ‡ç¤º**: æ¸…æ¥šé¡¯ç¤ºç·šä¸Š/é›¢ç·šç‹€æ…‹å’ŒåŒæ­¥é€²åº¦
- **åŠŸèƒ½é™åˆ¶**: é›¢ç·šæ™‚æ˜ç¢ºå‘ŠçŸ¥å“ªäº›åŠŸèƒ½ä¸å¯ç”¨
- **è³‡æ–™å®Œæ•´æ€§**: ç¢ºä¿é›¢ç·šæ“ä½œä¸æœƒå°è‡´è³‡æ–™éºå¤±
- **åŒæ­¥æé†’**: é‡æ–°é€£ç·šæ™‚ä¸»å‹•æé†’ä½¿ç”¨è€…é€²è¡Œè³‡æ–™åŒæ­¥

---