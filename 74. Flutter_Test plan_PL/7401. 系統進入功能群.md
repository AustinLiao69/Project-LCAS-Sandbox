
# 7401. 系統進入功能群.md

**文件編號**: 7401  
**版本**: v1.0.0  
**建立日期**: 2025-09-12  
**建立者**: LCAS SQA Team  
**最後更新**: 2025-09-12  
**來源文件**: 7201. 系統進入功能群_LLD.md  
**遵循規範**: 7101. 系統進入功能群_SRS.md, 7001. PRD_PL.md, 0026. PL-APL-BL mapping matrix.md  

---

## 📑 目次 (Table of Contents)

1. [測試概覽](#1-測試概覽)
   - 1.1 [測試範圍](#11-測試範圍)
   - 1.2 [測試目標](#12-測試目標)
   - 1.3 [風險評估](#13-風險評估)

2. [測試案例索引表](#2-測試案例索引表)

3. [測試環境與準備](#3-測試環境與準備)
   - 3.1 [系統環境需求](#31-系統環境需求)
   - 3.2 [測試資料準備](#32-測試資料準備)
   - 3.3 [相依模組狀態](#33-相依模組狀態)

4. [功能測試範圍](#4-功能測試範圍)
   - 4.1 [APP啟動與初始化測試](#41-app啟動與初始化測試)
   - 4.2 [使用者註冊功能測試](#42-使用者註冊功能測試)
   - 4.3 [使用者登入功能測試](#43-使用者登入功能測試)
   - 4.4 [密碼重設功能測試](#44-密碼重設功能測試)
   - 4.5 [模式評估與設定測試](#45-模式評估與設定測試)
   - 4.6 [跨平台綁定功能測試](#46-跨平台綁定功能測試)
   - 4.7 [APP推廣展示測試](#47-app推廣展示測試)

5. [詳細測試案例](#5-詳細測試案例)
   - 5.1 [核心功能測試案例](#51-核心功能測試案例)
   - 5.2 [四模式差異化測試案例](#52-四模式差異化測試案例)
   - 5.3 [API整合測試案例](#53-api整合測試案例)
   - 5.4 [異常處理測試案例](#54-異常處理測試案例)
   - 5.5 [效能測試案例](#55-效能測試案例)

6. [測試函數介面規格](#6-測試函數介面規格)

---

## 1. 測試概覽

### 1.1 測試範圍

#### 1.1.1 系統進入功能群核心功能測試
- **APP啟動管理**：品牌展示、版本檢查、載入狀態、初始化流程（4個函數）
- **身份認證流程**：Email註冊、Google OAuth、登入驗證、密碼重設（8個函數）
- **模式評估機制**：5題評估問卷、模式推薦、確認設定（4個函數）
- **跨平台整合**：LINE OA綁定、QR Code掃描、狀態同步（4個函數）
- **錯誤處理機制**：網路異常、認證錯誤、輸入驗證、系統異常（4個函數）
- **四模式主題系統**：模式切換、主題載入、視覺適配（3個函數）
- **本地儲存管理**：Token安全儲存、模式設定持久化（3個函數）
- **導航控制系統**：頁面路由、流程導航、返回處理（3個函數）
- **表單驗證機制**：即時驗證、完整驗證、錯誤提示（2個函數）
- **推廣展示功能**：功能介紹、下載連結、互動追蹤（3個函數）

#### 1.1.2 API整合測試
- **8101 認證服務API**：11個端點完整驗證
- **8102 用戶管理服務API**：模式評估相關端點驗證
- **8111 系統服務API**：版本檢查、系統狀態端點驗證
- **四模式差異化**：Expert、Inertial、Cultivation、Guiding模式測試

#### 1.1.3 Dart語言函數規格測試
- **函數簽名驗證**：40個核心函數版次v1.0.0規格檢查
- **類別設計驗證**：7個主要類別架構完整性
- **介面一致性**：Provider Pattern實作正確性
- **狀態管理**：AuthProvider、ModeProvider、OnboardingProvider正確運作

### 1.2 測試目標

#### 1.2.1 功能完整性目標
- 系統進入功能群40個函數100%功能驗證通過
- 7個畫面(S-102至S-108)完整功能支援驗證
- API端點與8101、8102、8111規格100%一致性驗證
- 四模式差異化體驗100%準確性驗證

#### 1.2.2 效能指標目標
- APP啟動時間 ≤ 3秒（冷啟動）、≤ 1秒（熱啟動）
- 頁面載入時間 ≤ 1秒（本地頁面）、≤ 3秒（API依賴頁面）
- API回應時間 ≤ 2秒（認證相關）、≤ 1秒（模式切換）
- 記憶體使用率維持 ≤ 50MB

#### 1.2.3 穩定性目標
- 系統連續運行24小時無故障
- 認證成功率 > 99%
- 模式評估準確率 = 100%
- 跨平台綁定成功率 > 95%

### 1.3 風險評估

#### 1.3.1 高風險項目
1. **四模式切換複雜性**
   - 風險：模式間切換邏輯複雜，可能導致狀態不一致
   - 影響：使用者體驗混亂，功能異常
   - 緩解：建立完整的模式切換測試與狀態驗證機制

2. **跨平台綁定穩定性**
   - 風險：LINE OA與APP綁定過程複雜，網路依賴性高
   - 影響：使用者無法完成綁定，影響功能完整性
   - 緩解：完整的綁定流程測試與錯誤處理機制

3. **認證安全性**
   - 風險：Token管理、密碼安全、OAuth流程安全漏洞
   - 影響：使用者資料洩漏，系統安全性受損
   - 緩解：建立全面的安全性測試框架

#### 1.3.2 中風險項目
1. **模式評估準確性**
   - 風險：5題評估問卷邏輯複雜，推薦可能不準確
   - 影響：使用者獲得不適合的模式體驗
   - 緩解：完整的評估邏輯測試與驗證

2. **API整合穩定性**
   - 風險：多個API服務整合，網路異常處理複雜
   - 影響：功能不穩定，使用者體驗下降
   - 緩解：完整的API整合測試與重試機制

---

## 2. 測試案例索引表

| 測試案例編號 | 測試案例名稱 | 測試類型 |
|-------------|-------------|----------|
| TC-001 | APP啟動初始化流程測試 | 功能測試 |
| TC-002 | 版本檢查與更新提示測試 | 功能測試 |
| TC-003 | 使用者註冊API正常流程測試 | 功能測試 |
| TC-004 | Google OAuth註冊整合測試 | 功能測試 |
| TC-005 | 使用者登入API驗證測試 | 功能測試 |
| TC-006 | 密碼重設流程完整測試 | 功能測試 |
| TC-007 | 模式評估問卷邏輯測試 | 功能測試 |
| TC-008 | 跨平台綁定QR Code測試 | 功能測試 |
| TC-009 | Expert模式進入流程測試 | 四模式測試 |
| TC-010 | Inertial模式標準流程測試 | 四模式測試 |
| TC-011 | Cultivation模式引導測試 | 四模式測試 |
| TC-012 | Guiding模式簡化流程測試 | 四模式測試 |
| TC-013 | 8101認證服務API一致性測試 | API整合測試 |
| TC-014 | 8102用戶管理服務整合測試 | API整合測試 |
| TC-015 | 8111系統服務版本檢查測試 | API整合測試 |
| TC-016 | 網路連線中斷異常處理測試 | 異常處理測試 |
| TC-017 | 認證失敗重試機制測試 | 異常處理測試 |
| TC-018 | 輸入驗證錯誤處理測試 | 異常處理測試 |
| TC-019 | APP啟動效能基準測試 | 效能測試 |
| TC-020 | 認證API回應時間測試 | 效能測試 |
| TC-021 | 模式切換效能測試 | 效能測試 |
| TC-022 | 記憶體使用監控測試 | 效能測試 |
| TC-023 | 惡意輸入防護測試 | 安全性測試 |
| TC-024 | Token安全儲存測試 | 安全性測試 |
| TC-025 | OAuth流程安全性測試 | 安全性測試 |
| TC-026 | 跨平台資料同步測試 | 整合測試 |

---

## 3. 測試環境與準備

### 3.1 系統環境需求

#### 3.1.1 核心環境
- **Dart SDK**: 3.0.0+ (Flutter 3.13.0+)
- **測試框架**: test ^1.24.0
- **HTTP客戶端**: dio ^5.3.0
- **狀態管理**: provider ^6.0.0
- **安全儲存**: flutter_secure_storage ^9.0.0
- **本地儲存**: shared_preferences ^2.2.0
- **網路檢測**: connectivity_plus ^4.0.0

#### 3.1.2 API測試環境
- **測試伺服器**: https://api-staging.lcas.app/v1
- **認證方式**: Bearer Token (JWT)
- **API版本**: v1.0.0
- **回應格式**: JSON (遵循8088規範)

#### 3.1.3 四模式測試環境
- **Expert模式**: 完整功能、進階選項、詳細資訊
- **Inertial模式**: 標準流程、固定佈局、一致體驗
- **Cultivation模式**: 引導提示、進度追蹤、激勵機制
- **Guiding模式**: 極簡介面、自動填入、最少決策

### 3.2 測試資料準備

#### 3.2.1 使用者測試資料
```dart
// 測試用戶類型 - v1.0.0
const Map<String, TestUser> testUsers = {
  'expertUser': TestUser('test_expert_001', UserMode.expert),
  'inertialUser': TestUser('test_inertial_001', UserMode.inertial),
  'cultivationUser': TestUser('test_cultivation_001', UserMode.cultivation),
  'guidingUser': TestUser('test_guiding_001', UserMode.guiding),
};
```

#### 3.2.2 認證測試資料
```dart
// 認證測試案例 - v1.0.0
const Map<String, AuthTestData> testAuthData = {
  'validRegistration': AuthTestData(
    email: 'test@lcas.app',
    password: 'SecurePass123!',
    confirmPassword: 'SecurePass123!'
  ),
  'invalidEmail': AuthTestData(
    email: 'invalid-email',
    password: 'SecurePass123!',
    confirmPassword: 'SecurePass123!'
  ),
  'weakPassword': AuthTestData(
    email: 'test@lcas.app',
    password: '123',
    confirmPassword: '123'
  ),
};
```

#### 3.2.3 模式評估測試資料
```dart
// 評估問卷測試案例 - v1.0.0
const Map<String, AssessmentTestData> testAssessmentData = {
  'expertProfile': AssessmentTestData(
    answers: [4, 5, 4, 5, 4], // 高分答案傾向Expert
    expectedMode: UserMode.expert,
    confidence: 0.85
  ),
  'guidingProfile': AssessmentTestData(
    answers: [1, 2, 1, 2, 1], // 低分答案傾向Guiding
    expectedMode: UserMode.guiding,
    confidence: 0.90
  ),
};
```

#### 3.2.4 錯誤測試資料
- **無效Email格式**: 不符合RFC規範的Email地址
- **弱密碼**: 少於8位、無特殊字元、純數字
- **網路異常**: 連線超時、DNS解析失敗、503服務不可用
- **API錯誤**: 400驗證錯誤、401認證失敗、409衝突錯誤

### 3.3 相依模組狀態

#### 3.3.1 必要依賴服務
- **8101 認證服務**: v1.0.0+ (註冊、登入、密碼重設)
- **8102 用戶管理服務**: v1.0.0+ (模式評估、個人設定)
- **8111 系統服務**: v1.0.0+ (版本檢查、系統狀態)

#### 3.3.2 外部服務依賴
- **Google OAuth**: Google Cloud Console配置
- **LINE Login**: LINE Developers配置
- **Firebase**: 推播通知、資料同步

---

## 4. 功能測試範圍

### 4.1 APP啟動與初始化測試

#### 4.1.1 initializeApp 測試重點
- **應用初始化**: 核心服務載入、設定檔讀取、狀態初始化
- **版本檢查**: 與伺服器版本比對、更新提示邏輯
- **認證狀態**: Token有效性檢查、自動登入判斷
- **四模式載入**: 用戶模式設定讀取、主題初始化

#### 4.1.2 checkAppVersion 測試重點
- **版本比對**: 本地版本與伺服器版本比較邏輯
- **更新策略**: 強制更新、建議更新、可選更新
- **用戶提示**: 更新對話框、下載連結、跳過選項
- **離線處理**: 無網路時的版本檢查降級處理

#### 4.1.3 loadAuthenticationState 測試重點
- **Token驗證**: JWT Token有效性、過期檢查
- **自動登入**: 記住我選項、生物辨識登入
- **安全儲存**: Token安全讀取、解密驗證
- **狀態同步**: 本地認證狀態與伺服器同步

#### 4.1.4 initializeModeConfiguration 測試重點
- **模式設定**: 用戶模式讀取、預設模式設定
- **主題載入**: 模式對應主題、色彩配置
- **UI適配**: 模式特定UI元素、佈局調整
- **持久化**: 模式設定本地儲存、雲端同步

### 4.2 使用者註冊功能測試

#### 4.2.1 registerWithEmail 測試重點
- **表單驗證**: Email格式、密碼強度、確認密碼一致性
- **重複檢查**: Email重複註冊檢查、錯誤提示
- **API整合**: POST /auth/register端點呼叫
- **成功處理**: 註冊成功後導向模式評估頁面

#### 4.2.2 registerWithGoogle 測試重點
- **OAuth流程**: Google登入授權、Token取得
- **帳號整合**: Google帳號資訊同步、頭像設定
- **錯誤處理**: 授權取消、網路異常、伺服器錯誤
- **安全性**: OAuth Token安全處理、範圍權限檢查

#### 4.2.3 validateEmailFormat 測試重點
- **格式檢查**: RFC 5322標準Email格式驗證
- **邊界測試**: 極長Email、特殊字元、國際化域名
- **即時驗證**: 輸入過程中即時回饋
- **錯誤提示**: 友善的錯誤訊息、修正建議

#### 4.2.4 checkPasswordStrength 測試重點
- **強度計算**: 長度、複雜度、字典攻擊防護
- **視覺回饋**: 強度條、顏色變化、提示訊息
- **規則檢查**: 最小長度、字元類型、禁用密碼清單
- **國際化**: 多語言強度描述、文化適應性

### 4.3 使用者登入功能測試

#### 4.3.1 loginWithEmail 測試重點
- **憑證驗證**: Email/密碼組合驗證
- **錯誤處理**: 帳號不存在、密碼錯誤、帳號鎖定
- **安全機制**: 登入嘗試限制、驗證碼機制
- **成功處理**: Token儲存、用戶資訊載入、導航處理

#### 4.3.2 loginWithGoogle 測試重點
- **OAuth整合**: Google登入流程、Token驗證
- **帳號匹配**: 存在帳號登入、新帳號註冊提示
- **權限管理**: 授權範圍、資料存取權限
- **錯誤復原**: 授權失敗重試、替代登入方式

#### 4.3.3 checkAutoLoginStatus 測試重點
- **Token檢查**: 有效性驗證、過期處理
- **設定讀取**: 記住我選項、自動登入偏好
- **安全考量**: 設備變更檢測、異常活動檢查
- **流程控制**: 自動登入成功/失敗後的導航

#### 4.3.4 saveLoginState 測試重點
- **安全儲存**: Token加密儲存、生物辨識保護
- **設定管理**: 記住我選項、過期時間設定
- **多設備**: 設備識別、同步策略
- **隱私保護**: 敏感資料處理、清除機制

### 4.4 密碼重設功能測試

#### 4.4.1 sendPasswordResetLink 測試重點
- **Email驗證**: 註冊Email檢查、格式驗證
- **郵件發送**: 重設連結生成、郵件模板
- **安全機制**: 頻率限制、Token過期時間
- **用戶回饋**: 發送狀態提示、後續步驟指引

#### 4.4.2 validateResetToken 測試重點
- **Token驗證**: 有效性檢查、過期檢測
- **安全檢查**: 一次性使用、來源驗證
- **錯誤處理**: 無效Token、過期Token處理
- **用戶引導**: 錯誤時重新申請流程

#### 4.4.3 resetPassword 測試重點
- **新密碼驗證**: 強度檢查、規則符合性
- **Token使用**: 一次性消耗、安全驗證
- **成功處理**: 密碼更新、自動登入選項
- **通知機制**: 成功通知、安全提醒

### 4.5 模式評估與設定測試

#### 4.5.1 loadAssessmentQuestionnaire 測試重點
- **問卷載入**: 5題標準問卷、選項內容
- **版本管理**: 問卷版本檢查、更新機制
- **本地化**: 多語言支援、文化適應性
- **錯誤處理**: 載入失敗、網路異常處理

#### 4.5.2 submitAssessmentAnswers 測試重點
- **答案驗證**: 完整性檢查、格式驗證
- **評分計算**: 模式推薦演算法、信心度計算
- **結果處理**: 推薦模式、詳細說明
- **資料儲存**: 評估結果持久化、隱私保護

#### 4.5.3 calculateModeRecommendation 測試重點
- **演算法正確性**: 5題答案到4模式的映射邏輯
- **信心度計算**: 推薦可信度、模糊邊界處理
- **邊界案例**: 極值答案、平均分佈答案
- **一致性**: 相同答案產生相同結果

#### 4.5.4 saveModeConfiguration 測試重點
- **設定儲存**: 本地持久化、雲端同步
- **立即生效**: UI主題切換、功能適配
- **版本管理**: 設定版本、變更追蹤
- **回滾機制**: 設定失敗時的回滾處理

### 4.6 跨平台綁定功能測試

#### 4.6.1 generateLineBindingQRCode 測試重點
- **QR Code生成**: 綁定連結編碼、有效期設定
- **視覺品質**: 清晰度、掃描成功率
- **安全性**: 一次性使用、時效性
- **錯誤處理**: 生成失敗、重新生成

#### 4.6.2 bindLinePlatform 測試重點
- **綁定流程**: LINE授權、帳號關聯
- **資料同步**: 用戶資訊、設定同步
- **衝突處理**: 重複綁定、已綁定帳號
- **成功確認**: 綁定狀態、功能開啟

#### 4.6.3 checkPlatformBindingStatus 測試重點
- **狀態檢查**: 綁定狀態、連結有效性
- **即時更新**: 狀態變更監聽、UI更新
- **錯誤檢測**: 連結失效、帳號異常
- **恢復機制**: 連結修復、重新綁定

#### 4.6.4 syncCrossPlatformData 測試重點
- **資料同步**: 雙向資料同步、衝突解決
- **增量更新**: 變更檢測、效率優化
- **一致性**: 資料完整性、順序保證
- **錯誤恢復**: 同步失敗、重試機制

### 4.7 APP推廣展示測試

#### 4.7.1 loadFeatureShowcaseContent 測試重點
- **內容載入**: 功能介紹、四模式特色
- **媒體處理**: 圖片、影片、動畫載入
- **本地化**: 多語言內容、區域適配
- **快取機制**: 內容快取、更新策略

#### 4.7.2 generateDownloadLinks 測試重點
- **連結生成**: App Store、Google Play連結
- **平台檢測**: 自動平台識別、對應連結
- **追蹤參數**: 下載來源追蹤、統計分析
- **有效性**: 連結有效性、重導向處理

#### 4.7.3 trackPromotionInteraction 測試重點
- **事件追蹤**: 用戶互動記錄、行為分析
- **隱私保護**: 匿名化處理、資料最小化
- **批次上傳**: 本地快取、批次傳送
- **錯誤處理**: 追蹤失敗、離線儲存

---

## 5. 詳細測試案例

### 5.1 核心功能測試案例

#### TC-001: APP啟動初始化流程測試
**測試函數表頭**:
```dart
/**
 * TC-001: APP啟動初始化流程測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testAppStartupInitializationFlow();
```
- **目的**: 驗證APP啟動初始化流程的完整性
- **前置條件**:
  - APP首次安裝或清除資料後啟動
  - 網路連線正常
  - 所有依賴服務可用
- **測試步驟**:
  1. 啟動APP並顯示啟動畫面
  2. 載入LCAS品牌Logo與動畫
  3. 執行initializeApp()初始化
  4. 檢查版本與更新資訊
  5. 載入認證狀態與模式設定
  6. 完成初始化並導向對應頁面
- **驗證點**:
  - 啟動時間 ≤ 3秒
  - 所有服務正常初始化
  - 無記憶體洩漏
  - 導航邏輯正確

#### TC-002: 版本檢查與更新提示測試
**測試函數表頭**:
```dart
/**
 * TC-002: 版本檢查與更新提示測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testAppVersionCheckAndUpdatePrompt();
```
- **目的**: 驗證版本檢查與更新提示機制
- **前置條件**:
  - APP版本為測試版本
  - 伺服器配置了更新版本資訊
- **測試步驟**:
  1. 執行checkAppVersion()檢查版本
  2. 比對本地版本與伺服器版本
  3. 顯示對應的更新提示對話框
  4. 測試強制更新、建議更新情境
  5. 驗證下載連結與跳過邏輯
- **驗證點**:
  - 版本比對邏輯正確
  - 更新提示內容準確
  - 下載連結有效
  - 跳過邏輯符合預期

#### TC-003: 使用者註冊API正常流程測試
**測試函數表頭**:
```dart
/**
 * TC-003: 使用者註冊API正常流程測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testUserRegistrationNormalFlow();
```
- **目的**: 驗證使用者註冊的完整正常流程
- **前置條件**:
  - 使用有效的測試Email帳號
  - 密碼符合強度要求
  - 8101認證服務正常運作
- **測試步驟**:
  1. 開啟註冊頁面(S-103)
  2. 輸入有效Email地址
  3. 設定符合要求的密碼
  4. 確認密碼一致性
  5. 執行registerWithEmail()註冊
  6. 驗證API回應與Token儲存
  7. 導向模式評估頁面(S-106)
- **驗證點**:
  - 表單驗證正確執行
  - API呼叫成功
  - Token安全儲存
  - 頁面導航正確

#### TC-004: Google OAuth註冊整合測試
**測試函數表頭**:
```dart
/**
 * TC-004: Google OAuth註冊整合測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testGoogleOAuthRegistrationIntegration();
```
- **目的**: 驗證Google OAuth註冊整合功能
- **前置條件**:
  - Google OAuth設定完成
  - 測試Google帳號可用
  - 網路連線穩定
- **測試步驟**:
  1. 點擊Google註冊按鈕
  2. 開啟Google OAuth授權頁面
  3. 完成Google帳號登入授權
  4. 執行registerWithGoogle()處理
  5. 取得Google用戶資訊
  6. 建立本地帳號並儲存Token
  7. 導向模式評估頁面
- **驗證點**:
  - OAuth流程順暢執行
  - 用戶資訊正確同步
  - Token安全處理
  - 錯誤情況優雅處理

#### TC-005: 使用者登入API驗證測試
**測試函數表頭**:
```dart
/**
 * TC-005: 使用者登入API驗證測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testUserLoginApiValidation();
```
- **目的**: 驗證使用者登入API驗證功能
- **前置條件**:
  - 已註冊的測試帳號
  - 正確的登入憑證
  - 8101認證服務正常
- **測試步驟**:
  1. 開啟登入頁面(S-104)
  2. 輸入註冊的Email帳號
  3. 輸入正確的密碼
  4. 執行loginWithEmail()登入
  5. 驗證API回應與Token
  6. 檢查自動登入設定
  7. 導向主要功能頁面
- **驗證點**:
  - 憑證驗證正確
  - API整合無誤
  - Token管理安全
  - 導航邏輯正確

#### TC-006: 密碼重設流程完整測試
**測試函數表頭**:
```dart
/**
 * TC-006: 密碼重設流程完整測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testPasswordResetCompleteFlow();
```
- **目的**: 驗證密碼重設的完整流程
- **前置條件**:
  - 已註冊的測試帳號
  - 郵件服務正常運作
  - 重設Token機制可用
- **測試步驟**:
  1. 開啟忘記密碼頁面(S-105)
  2. 輸入註冊的Email地址
  3. 執行sendPasswordResetLink()
  4. 驗證郵件發送狀態
  5. 模擬點擊重設連結
  6. 驗證Token有效性
  7. 設定新密碼並完成重設
- **驗證點**:
  - 郵件發送成功
  - Token驗證正確
  - 密碼更新生效
  - 安全機制有效

#### TC-007: 模式評估問卷邏輯測試
**測試函數表頭**:
```dart
/**
 * TC-007: 模式評估問卷邏輯測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testModeAssessmentQuestionnaireLogic();
```
- **目的**: 驗證模式評估問卷的邏輯正確性
- **前置條件**:
  - 5題評估問卷已載入
  - 評估演算法已配置
  - 四模式定義完整
- **測試步驟**:
  1. 開啟模式評估頁面(S-106)
  2. 載入5題評估問卷
  3. 依序回答所有問題
  4. 執行calculateModeRecommendation()
  5. 驗證推薦結果與信心度
  6. 確認模式選擇並儲存
  7. 套用模式設定到UI
- **驗證點**:
  - 問卷載入正確
  - 評估演算法準確
  - 推薦結果合理
  - 模式套用成功

#### TC-008: 跨平台綁定QR Code測試
**測試函數表頭**:
```dart
/**
 * TC-008: 跨平台綁定QR Code測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testCrossPlatformBindingQRCode();
```
- **目的**: 驗證跨平台綁定QR Code功能
- **前置條件**:
  - LINE OA設定完成
  - QR Code生成服務可用
  - 綁定機制已配置
- **測試步驟**:
  1. 開啟跨平台綁定頁面(S-107)
  2. 執行generateLineBindingQRCode()
  3. 顯示QR Code並提供掃描說明
  4. 模擬LINE掃描綁定流程
  5. 檢查綁定狀態更新
  6. 驗證資料同步機制
  7. 完成綁定並確認功能
- **驗證點**:
  - QR Code生成正確
  - 掃描流程順暢
  - 綁定狀態準確
  - 資料同步無誤

### 5.2 四模式差異化測試案例

#### TC-009: Expert模式進入流程測試
**測試函數表頭**:
```dart
/**
 * TC-009: Expert模式進入流程測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testExpertModeEntryFlow();
```
- **目的**: 驗證Expert模式的進入流程與特性
- **前置條件**:
  - 模式評估推薦Expert模式
  - Expert主題資源可用
- **測試步驟**:
  1. 完成模式評估獲得Expert推薦
  2. 確認選擇Expert模式
  3. 載入Expert模式主題與配置
  4. 驗證進階功能可用性
  5. 檢查詳細資訊顯示
  6. 測試專業控制選項
  7. 確認完整功能權限
- **驗證點**:
  - 模式切換成功
  - 主題載入正確
  - 進階功能可用
  - UI佈局符合Expert設計

#### TC-010: Inertial模式標準流程測試
**測試函數表頭**:
```dart
/**
 * TC-010: Inertial模式標準流程測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testInertialModeStandardFlow();
```
- **目的**: 驗證Inertial模式的標準流程體驗
- **前置條件**:
  - Inertial模式已設定
  - 標準流程配置完成
- **測試步驟**:
  1. 設定為Inertial模式
  2. 驗證固定步驟流程
  3. 檢查一致性介面佈局
  4. 測試可預測操作模式
  5. 確認標準功能可用
  6. 驗證穩定性體驗
- **驗證點**:
  - 流程固定一致
  - 介面佈局穩定
  - 操作可預測
  - 標準功能完整

#### TC-011: Cultivation模式引導測試
**測試函數表頭**:
```dart
/**
 * TC-011: Cultivation模式引導測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testCultivationModeGuidance();
```
- **目的**: 驗證Cultivation模式的引導體驗
- **前置條件**:
  - Cultivation模式已設定
  - 引導內容已準備
  - 進度追蹤機制可用
- **測試步驟**:
  1. 啟動Cultivation模式
  2. 驗證引導式流程
  3. 檢查進度追蹤顯示
  4. 測試激勵性訊息
  5. 確認習慣養成功能
  6. 驗證成就系統整合
- **驗證點**:
  - 引導流程友善
  - 進度追蹤準確
  - 激勵機制有效
  - 習慣養成支援

#### TC-012: Guiding模式簡化流程測試
**測試函數表頭**:
```dart
/**
 * TC-012: Guiding模式簡化流程測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testGuidingModeSimplifiedFlow();
```
- **目的**: 驗證Guiding模式的簡化流程體驗
- **前置條件**:
  - Guiding模式已設定
  - 簡化介面配置完成
  - 自動化機制可用
- **測試步驟**:
  1. 設定為Guiding模式
  2. 驗證極簡介面設計
  3. 測試自動填入功能
  4. 檢查一鍵完成操作
  5. 確認最少決策設計
  6. 驗證智慧建議機制
- **驗證點**:
  - 介面極度簡化
  - 自動化程度高
  - 決策需求最少
  - 智慧建議準確

### 5.3 API整合測試案例

#### TC-013: 8101認證服務API一致性測試
**測試函數表頭**:
```dart
/**
 * TC-013: 8101認證服務API一致性測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testAuthServiceApiConsistency();
```
- **目的**: 驗證與8101認證服務API的一致性
- **前置條件**:
  - 8101認證服務正常運作
  - API規格文件可用
  - 測試環境已配置
- **測試步驟**:
  1. 驗證POST /auth/register端點
  2. 測試POST /auth/login端點
  3. 檢查POST /auth/forgot-password端點
  4. 驗證POST /auth/reset-password端點
  5. 測試Google OAuth相關端點
  6. 確認回應格式一致性
  7. 驗證錯誤處理一致性
- **驗證點**:
  - 所有端點正常回應
  - 請求格式符合規格
  - 回應結構一致
  - 錯誤處理標準化

#### TC-014: 8102用戶管理服務整合測試
**測試函數表頭**:
```dart
/**
 * TC-014: 8102用戶管理服務整合測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testUserManagementServiceIntegration();
```
- **目的**: 驗證與8102用戶管理服務的整合
- **前置條件**:
  - 8102用戶管理服務可用
  - 模式評估功能已實現
  - 用戶資料模型已定義
- **測試步驟**:
  1. 測試POST /users/assessment端點
  2. 驗證GET /users/profile端點
  3. 檢查PUT /users/mode端點
  4. 測試用戶偏好設定端點
  5. 驗證資料同步機制
  6. 確認權限控制正確
- **驗證點**:
  - 評估功能正常
  - 資料同步無誤
  - 權限控制有效
  - 錯誤處理完整

#### TC-015: 8111系統服務版本檢查測試
**測試函數表頭**:
```dart
/**
 * TC-015: 8111系統服務版本檢查測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testSystemServiceVersionCheck();
```
- **目的**: 驗證與8111系統服務的版本檢查功能
- **前置條件**:
  - 8111系統服務正常
  - 版本資訊已配置
  - 更新機制已實現
- **測試步驟**:
  1. 調用GET /system/app-info端點
  2. 解析版本資訊回應
  3. 比對本地與伺服器版本
  4. 測試強制更新邏輯
  5. 驗證建議更新提示
  6. 檢查維護模式處理
- **驗證點**:
  - 版本資訊正確
  - 比對邏輯準確
  - 更新提示適當
  - 維護模式處理正確

### 5.4 異常處理測試案例

#### TC-016: 網路連線中斷異常處理測試
**測試函數表頭**:
```dart
/**
 * TC-016: 網路連線中斷異常處理測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testNetworkDisconnectionHandling();
```
- **目的**: 驗證網路連線中斷時的異常處理
- **前置條件**:
  - 網路監測機制已實現
  - 離線模式已配置
  - 重試機制已實現
- **測試步驟**:
  1. 正常啟動APP建立連線
  2. 模擬網路連線中斷
  3. 驗證網路狀態檢測
  4. 測試離線模式切換
  5. 檢查重試機制運作
  6. 恢復網路連線測試
  7. 驗證資料同步恢復
- **驗證點**:
  - 連線狀態檢測準確
  - 離線模式正常運作
  - 重試機制有效
  - 恢復同步無誤

#### TC-017: 認證失敗重試機制測試
**測試函數表頭**:
```dart
/**
 * TC-017: 認證失敗重試機制測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testAuthenticationFailureRetry();
```
- **目的**: 驗證認證失敗時的重試機制
- **前置條件**:
  - 認證服務可用
  - 重試策略已配置
  - 錯誤處理已實現
- **測試步驟**:
  1. 嘗試使用錯誤憑證登入
  2. 驗證認證失敗處理
  3. 檢查錯誤訊息顯示
  4. 測試重試機制運作
  5. 驗證帳號鎖定邏輯
  6. 測試重試間隔控制
  7. 確認最大重試限制
- **驗證點**:
  - 錯誤識別正確
  - 重試邏輯合理
  - 訊息提示友善
  - 安全機制有效

#### TC-018: 輸入驗證錯誤處理測試
**測試函數表頭**:
```dart
/**
 * TC-018: 輸入驗證錯誤處理測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testInputValidationErrorHandling();
```
- **目的**: 驗證輸入驗證錯誤的處理機制
- **前置條件**:
  - 表單驗證規則已定義
  - 錯誤訊息已本地化
  - 即時驗證已實現
- **測試步驟**:
  1. 輸入無效Email格式
  2. 設定不符合規則的密碼
  3. 測試空值輸入處理
  4. 驗證特殊字元處理
  5. 檢查長度限制驗證
  6. 測試即時錯誤回饋
  7. 確認修正建議提供
- **驗證點**:
  - 驗證規則正確
  - 錯誤訊息清晰
  - 即時回饋及時
  - 修正建議有效

### 5.5 效能測試案例

#### TC-019: APP啟動效能基準測試
**測試函數表頭**:
```dart
/**
 * TC-019: APP啟動效能基準測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testAppStartupPerformanceBenchmark();
```
- **目的**: 驗證APP啟動效能是否符合基準
- **前置條件**:
  - 效能測試工具已配置
  - 基準指標已定義
  - 測試環境已標準化
- **測試步驟**:
  1. 冷啟動APP並記錄時間
  2. 熱啟動APP並記錄時間
  3. 監控記憶體使用量
  4. 測量CPU使用率
  5. 記錄網路請求時間
  6. 分析效能瓶頸
  7. 生成效能報告
- **驗證點**:
  - 冷啟動 ≤ 3秒
  - 熱啟動 ≤ 1秒
  - 記憶體使用 ≤ 50MB
  - CPU使用率合理

#### TC-020: 認證API回應時間測試
**測試函數表頭**:
```dart
/**
 * TC-020: 認證API回應時間測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testAuthenticationApiResponseTime();
```
- **目的**: 驗證認證API的回應時間效能
- **前置條件**:
  - 認證服務穩定運行
  - 網路環境良好
  - 測試資料已準備
- **測試步驟**:
  1. 執行註冊API並記錄時間
  2. 執行登入API並記錄時間
  3. 執行密碼重設API時間記錄
  4. 測試Google OAuth響應時間
  5. 分析各API效能表現
  6. 識別效能瓶頸
  7. 生成效能分析報告
- **驗證點**:
  - 註冊API ≤ 2秒
  - 登入API ≤ 2秒
  - 密碼重設 ≤ 3秒
  - OAuth流程 ≤ 5秒

#### TC-021: 模式切換效能測試
**測試函數表頭**:
```dart
/**
 * TC-021: 模式切換效能測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testModeSwitchingPerformance();
```
- **目的**: 驗證四模式切換的效能表現
- **前置條件**:
  - 四模式資源已載入
  - 切換機制已實現
  - 效能監控已啟用
- **測試步驟**:
  1. 從Expert切換到其他模式
  2. 記錄每次切換的時間
  3. 監控記憶體使用變化
  4. 測試主題載入效能
  5. 驗證UI重建效率
  6. 分析切換過程資源消耗
  7. 最佳化建議提出
- **驗證點**:
  - 模式切換 ≤ 1秒
  - 記憶體增長 ≤ 10MB
  - UI重建流暢
  - 無明顯卡頓

#### TC-022: 記憶體使用監控測試
**測試函數表頭**:
```dart
/**
 * TC-022: 記憶體使用監控測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testMemoryUsageMonitoring();
```
- **目的**: 驗證APP的記憶體使用效率
- **前置條件**:
  - 記憶體監控工具已配置
  - 基準指標已設定
  - 長時間測試環境已準備
- **測試步驟**:
  1. 記錄APP啟動時記憶體使用
  2. 執行完整進入流程
  3. 監控各功能記憶體消耗
  4. 測試長時間運行穩定性
  5. 檢查記憶體洩漏情況
  6. 分析記憶體使用模式
  7. 生成記憶體使用報告
- **驗證點**:
  - 基礎記憶體 ≤ 30MB
  - 完整流程 ≤ 50MB
  - 無記憶體洩漏
  - 長時間穩定

---

## 6. 測試函數介面規格

### 6.1 APP啟動與初始化測試函數

#### 6.1.1 應用程式初始化測試

```dart
/**
 * TC-001: 應用程式初始化測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testInitializeApp();
```

#### 6.1.2 版本檢查測試

```dart
/**
 * TC-002: 版本檢查測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testCheckAppVersion();
```

#### 6.1.3 認證狀態載入測試

```dart
/**
 * TC-003: 認證狀態載入測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testLoadAuthenticationState();
```

#### 6.1.4 四模式初始化測試

```dart
/**
 * TC-004: 四模式初始化測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testInitializeModeConfiguration();
```

### 6.2 使用者註冊測試函數

#### 6.2.1 Email註冊測試

```dart
/**
 * TC-005: Email註冊測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testRegisterWithEmail();
```

#### 6.2.2 Google OAuth註冊測試

```dart
/**
 * TC-006: Google OAuth註冊測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testRegisterWithGoogle();
```

#### 6.2.3 Email格式驗證測試

```dart
/**
 * TC-007: Email格式驗證測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
bool testValidateEmailFormat();
```

#### 6.2.4 密碼強度檢查測試

```dart
/**
 * TC-008: 密碼強度檢查測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
PasswordStrength testCheckPasswordStrength();
```

### 6.3 使用者登入測試函數

#### 6.3.1 Email登入測試

```dart
/**
 * TC-009: Email登入測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testLoginWithEmail();
```

#### 6.3.2 Google OAuth登入測試

```dart
/**
 * TC-010: Google OAuth登入測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testLoginWithGoogle();
```

#### 6.3.3 自動登入檢查測試

```dart
/**
 * TC-011: 自動登入檢查測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testCheckAutoLoginStatus();
```

#### 6.3.4 登入狀態保存測試

```dart
/**
 * TC-012: 登入狀態保存測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testSaveLoginState();
```

### 6.4 密碼重設測試函數

#### 6.4.1 重設連結發送測試

```dart
/**
 * TC-013: 重設連結發送測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testSendPasswordResetLink();
```

#### 6.4.2 重設Token驗證測試

```dart
/**
 * TC-014: 重設Token驗證測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testValidateResetToken();
```

#### 6.4.3 密碼重設測試

```dart
/**
 * TC-015: 密碼重設測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testResetPassword();
```

### 6.5 模式評估測試函數

#### 6.5.1 評估問卷載入測試

```dart
/**
 * TC-016: 評估問卷載入測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testLoadAssessmentQuestionnaire();
```

#### 6.5.2 評估答案提交測試

```dart
/**
 * TC-017: 評估答案提交測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testSubmitAssessmentAnswers();
```

#### 6.5.3 模式推薦計算測試

```dart
/**
 * TC-018: 模式推薦計算測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
ModeRecommendation testCalculateModeRecommendation();
```

#### 6.5.4 模式設定保存測試

```dart
/**
 * TC-019: 模式設定保存測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testSaveModeConfiguration();
```

### 6.6 跨平台綁定測試函數

#### 6.6.1 LINE綁定QR Code生成測試

```dart
/**
 * TC-020: LINE綁定QR Code生成測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testGenerateLineBindingQRCode();
```

#### 6.6.2 LINE平台綁定測試

```dart
/**
 * TC-021: LINE平台綁定測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testBindLinePlatform();
```

#### 6.6.3 平台綁定狀態檢查測試

```dart
/**
 * TC-022: 平台綁定狀態檢查測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testCheckPlatformBindingStatus();
```

#### 6.6.4 跨平台資料同步測試

```dart
/**
 * TC-023: 跨平台資料同步測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testSyncCrossPlatformData();
```

### 6.7 APP推廣展示測試函數

#### 6.7.1 功能展示內容載入測試

```dart
/**
 * TC-024: 功能展示內容載入測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testLoadFeatureShowcaseContent();
```

#### 6.7.2 APP下載連結生成測試

```dart
/**
 * TC-025: APP下載連結生成測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Map<String, String> testGenerateDownloadLinks();
```

#### 6.7.3 推廣互動記錄測試

```dart
/**
 * TC-026: 推廣互動記錄測試
 * @version 2025-09-12 v1.0.0
 * @date 2025-09-12
 * @update: 初始版本
 */
Future<void> testTrackPromotionInteraction();
```

---

**文件版本記錄**:
- v1.0.0 (2025-09-12): 初始版本建立，基於7201 LLD文件制定完整測試計劃，包含26個核心測試案例，涵蓋7個主要功能模組，重點關注四模式差異化測試、API整合驗證、認證安全性、跨平台綁定穩定性，遵循Dart語言規範，嚴格對應7101 SRS、7001 PRD、0026三層架構規範
