ğŸš€ LCAS LINE Bot å•Ÿå‹•ä¸­...
ğŸ“… å•Ÿå‹•æ™‚é–“: 2025/6/28 ä¸‹åˆ5:12:21
 DDæ¨¡çµ„åˆå§‹åŒ–æª¢æŸ¥ [2025-06-28T09:12:21.855Z]
DDæ¨¡çµ„ç‰ˆæœ¬: 2.0.16 (2025-06-28)
åŸ·è¡Œæ™‚é–“: 6/28/2025, 9:12:21 AM
ä¸»è©¦ç®—è¡¨æª¢æŸ¥: æˆåŠŸ
æ—¥èªŒè¡¨æª¢æŸ¥: æˆåŠŸ
ç§‘ç›®è¡¨æª¢æŸ¥: æˆåŠŸ
ç§‘ç›®è¡¨æœ‰ [object Promise] è¡Œæ•¸æ“š
BK_processBookkeepingå‡½æ•¸æª¢æŸ¥: å­˜åœ¨
WHæ¨¡çµ„åˆå§‹åŒ–ï¼Œç‰ˆæœ¬: 2.0.8 (2025-06-28)
 DDæ¨¡çµ„åˆå§‹åŒ–æª¢æŸ¥ 2025-06-28T09:12:21.919Z
DDæ¨¡çµ„ç‰ˆæœ¬: 2.0.16 (2025-06-28)
åŸ·è¡Œæ™‚é–“: 6/28/2025, 9:12:21 AM
ä¸»è©¦ç®—è¡¨æª¢æŸ¥: æˆåŠŸ
æ—¥èªŒè¡¨æª¢æŸ¥: æˆåŠŸ
ç§‘ç›®è¡¨æª¢æŸ¥: æˆåŠŸ
BK_processBookkeepingå‡½æ•¸æª¢æŸ¥: å­˜åœ¨
âœ… WH æ¨¡çµ„å·²è¼‰å…¥ä¸¦å•Ÿå‹•æœå‹™å™¨
ğŸ’¡ æç¤º: WH æ¨¡çµ„æœƒåœ¨ Port 3000 å»ºç«‹æœå‹™å™¨
ğŸ“¡ é æœŸ Webhook URL: https://your-repl-url.replit.dev/webhook
ğŸ‰ LCAS LINE Bot å•Ÿå‹•å®Œæˆï¼
ğŸ’¡ æç¤º: æœå‹™å™¨æœƒæ¯5åˆ†é˜è¼¸å‡ºå¿ƒè·³ï¼Œæ¯25åˆ†é˜è‡ªæˆ‘ ping ä»¥ä¿æŒæ´»èºç‹€æ…‹
ğŸ“± ç¾åœ¨å¯ä»¥ç”¨ LINE ç™¼é€è¨Šæ¯æ¸¬è©¦äº†ï¼
ğŸŒ WH æ¨¡çµ„é‹è¡Œåœ¨ Port 3000ï¼Œé€šé Replit HTTPS ä»£ç†å°å¤–æœå‹™
ğŸš€ WH Webhook Server is running on port 3000
ğŸ“… å•Ÿå‹•æ™‚é–“: 2025-06-28 17:12:21
ğŸŒ Server is accessible at http://0.0.0.0:3000
ğŸ“¡ Webhook endpoint: http://0.0.0.0:3000/webhook
[WH 2.0.7 LOG] WH 2.0.7: æœå‹™å™¨å•Ÿå‹•æˆåŠŸï¼Œç›£è½ç«¯å£ 3000 (INFO)
WH_verifySignature: æ¸¬è©¦æ¨¡å¼ï¼Œè·³éç°½ç« é©—è­‰
[WH 2.0.7 LOG] WH 2.0.7: æ”¶åˆ°LINE Webhookè«‹æ±‚ [4f2b5be5] (INFO)
é–‹å§‹éåŒæ­¥è™•ç†è«‹æ±‚ [4f2b5be5]
[WH 2.0.7 LOG] WH 2.0.7: é–‹å§‹éåŒæ­¥è™•ç†è«‹æ±‚ [4f2b5be5] (INFO)
[WH 2.0.7 LOG] WH 2.0.3: é–‹å§‹è™•ç†äº‹ä»¶: message [4f2b5be5] (INFO)
è™•ç†æ¶ˆæ¯äº‹ä»¶: text [4f2b5be5]
æ”¶åˆ°æ–‡æœ¬æ¶ˆæ¯: "ç¦®ç‰©5555555" [4f2b5be5]
[WH 2.0.7 LOG] WH 2.0.3: æ”¶åˆ°æ–‡æœ¬æ¶ˆæ¯: "ç¦®ç‰©5555555" [4f2b5be5] (INFO)
æº–å‚™è¨Šæ¯æ•¸æ“š: {"text":"ç¦®ç‰©5555555","userId":"Uae47d9d496e4596d70ed724a7d6e2948","timestamp":1751101962096,"replyToken":"081443eef61b49ebbdf7415f469f0d1b"} [4f2b5be5]
æº–å‚™èª¿ç”¨DD_distributeData [4f2b5be5]
[WH 2.0.7 LOG] WH 2.0.3: æº–å‚™èª¿ç”¨DD_distributeData [4f2b5be5] (INFO)
=== DD_distributeDataåŸ·è¡Œåˆå§‹æª¢æŸ¥ ===
DD_MAX_RETRIES: 3
DD_RETRY_DELAY: 1000
DD_TARGET_MODULE_BK: BK
DD_TARGET_MODULE_WH: WH
DD_distributeDataè¢«èª¿ç”¨ï¼Œæ•¸æ“šæº: LINE, ç”¨æˆ¶ID: Uae47d9d496e4596d70ed724a7d6e2948, æ™‚é–“: 2025-06-28T09:12:44.146Z
è™•ç†ID: dfb3d571
[INFO] [DD] é–‹å§‹è™•ç†æ•¸æ“š [dfb3d571]
æ¨™æº–åŒ–ç”¨æˆ¶ID: userId -> user_id = Uae47d9d496e4596d70ed724a7d6e2948
èª¿æ•´æ•¸æ“šä¾†æºå¾ã€ŒLINEã€åˆ°ã€Œä½¿ç”¨è€…è¨Šæ¯ã€
è™•ç†æ•¸æ“š: {"text":"ç¦®ç‰©5555555","userId":"Uae47d9d496e4596d70ed724a7d6e2948","timestamp":1751101962096,"replyTok..., ä¾†æº: ä½¿ç”¨è€…è¨Šæ¯
è™•ç†æ™‚é–“æˆ³: 1751101962096
é–‹å§‹è½‰æ›æ™‚é–“æˆ³: 1751101962096 [19d3d916]
æ™‚é–“æˆ³è½‰æ›çµæœ: 2025/6/28 09:12 [19d3d916]
æ™‚é–“æˆ³è½‰æ›çµæœ: 2025/6/28 09:12
è™•ç†ç”¨æˆ¶è¨Šæ¯: "ç¦®ç‰©5555555"
[INFO] [DD] è™•ç†ç”¨æˆ¶è¨Šæ¯: "ç¦®ç‰©5555555"
[INFO] [DD] è™•ç†ç”¨æˆ¶æ¶ˆæ¯: "ç¦®ç‰©5555555"
DD_processUserMessage: é–‹å§‹è™•ç†ç”¨æˆ¶è¨Šæ¯ "ç¦®ç‰©5555555" [edd14ae0]
DD_CONFIG åˆå§‹åŒ–å®Œæˆ
DD_processUserMessage: æ¸…ç†å¾Œè¨Šæ¯: "ç¦®ç‰©5555555" [edd14ae0]
DD_processUserMessage: èª¿ç”¨DD_parseInputFormat [edd14ae0]
DD_parseInputFormat: é–‹å§‹è§£ææ–‡æœ¬ã€Œç¦®ç‰©5555555ã€[edd14ae0]
DD_parseInputFormat: è­˜åˆ¥æ¨™æº–æ ¼å¼ - ç§‘ç›®:ã€Œç¦®ç‰©ã€, é‡‘é¡:5555555, æ”¯ä»˜æ–¹å¼:ã€Œé è¨­ã€ [edd14ae0]
DD_processUserMessage: DD_parseInputFormatå›å‚³çµæœ: {"subject":"ç¦®ç‰©","amount":5555555,"rawAmount":"5555555","paymentMethod":"é è¨­"} [edd14ae0]
DD_processUserMessage: æˆåŠŸè§£æåŸºæœ¬è³‡è¨Š - ç§‘ç›®="ç¦®ç‰©", é‡‘é¡=5555555, æ”¯ä»˜æ–¹å¼=é è¨­ [edd14ae0]
DD_processUserMessage: é–‹å§‹ç§‘ç›®åŒ¹é…éšæ®µ [edd14ae0]
DD_processUserMessage: å˜—è©¦ç”¨æˆ¶åå¥½åŒ¹é… [edd14ae0]
æŸ¥è©¢ç”¨æˆ¶åå¥½: userId=Uae47d9d496e4596d70ed724a7d6e2948, term="ç¦®ç‰©" [f0df325b]
æœªæ‰¾åˆ°ç”¨æˆ¶åå¥½ [f0df325b]
DD_processUserMessage: å˜—è©¦ç²¾ç¢ºåŒ¹é… [edd14ae0]
[INFO] [DD] å˜—è©¦æŸ¥è©¢ç§‘ç›®ä»£ç¢¼: "ç¦®ç‰©" [edd14ae0]
### ä½¿ç”¨2025-04-30-V4.1.5å¢å¼·ç‰ˆDD_getSubjectCode ###
æŸ¥è©¢ç§‘ç›®ä»£ç¢¼: "ç¦®ç‰©", ID=72ac2578
æ¨™æº–åŒ–å¾Œçš„è¼¸å…¥: "ç¦®ç‰©" [72ac2578]
è®€å–ç§‘ç›®è¡¨: 62è¡Œæ•¸æ“š [72ac2578]
---ç§‘ç›®æŸ¥è©¢è¨ºæ–·ä¿¡æ¯é–‹å§‹---[72ac2578]
å°‹æ‰¾ç§‘ç›®: "ç¦®ç‰©"
æ­£åœ¨é€²è¡Œç²¾ç¢ºåŒ¹é…æŸ¥è©¢ï¼Œæ”¯æŒå…§éƒ¨ç©ºæ ¼...
ç§‘ç›®è¡¨é …ç›® #1: ä»£ç¢¼=101-10101, åç¨±="å­è¦ªè²»"
ç§‘ç›®è¡¨é …ç›® #2: ä»£ç¢¼=101-10102, åç¨±="Helperè–ªè³‡"
ç§‘ç›®è¡¨é …ç›® #3: ä»£ç¢¼=101-10103, åç¨±="ç”Ÿæ´»ç”¨å“"
ç§‘ç›®è¡¨é …ç›® #4: ä»£ç¢¼=101-10105, åç¨±="ç”Ÿé®®é›œè²¨"
ç§‘ç›®è¡¨é …ç›® #5: ä»£ç¢¼=101-10106, åç¨±="è¡£ç‰©é£¾å“"
ç§‘ç›®è¡¨é …ç›® #6: ä»£ç¢¼=101-10107, åç¨±="é›»ä¿¡ç¶²è·¯"
ç§‘ç›®è¡¨é …ç›® #7: ä»£ç¢¼=101-10108, åç¨±="ç†é«®ç†å®¹"
ç§‘ç›®è¡¨é …ç›® #8: ä»£ç¢¼=101-10110, åç¨±="3Cç”¨å“"
ç§‘ç›®è¡¨é …ç›® #9: ä»£ç¢¼=101-10111, åç¨±="åŒ–å¦ä¿é¤Šå“"
é€šéåŒç¾©è©åŒ¹é…æˆåŠŸ: "ç¦®ç‰©" === "ç¦®ç‰©"
[INFO] [DD] é€šéåŒç¾©è©æˆåŠŸæŸ¥è©¢ç§‘ç›®ä»£ç¢¼: 101-10125 äººæƒ…ç¦®å“ [72ac2578]
---ç§‘ç›®æŸ¥è©¢è¨ºæ–·ä¿¡æ¯çµæŸ---[72ac2578]
DD_processUserMessage: ç²¾ç¢ºåŒ¹é…æˆåŠŸ "ç¦®ç‰©" -> äººæƒ…ç¦®å“ [edd14ae0]
[INFO] [DD] ç²¾ç¢ºåŒ¹é…æˆåŠŸ: "ç¦®ç‰©" -> äººæƒ…ç¦®å“, ç§‘ç›®ä»£ç¢¼=101-10125
DD_processUserMessage: æª¢æŸ¥æ˜¯å¦æœ‰å¤šé‡æ˜ å°„ [edd14ae0]
æª¢æŸ¥è©å½™å¤šé‡æ˜ å°„: "ç¦®ç‰©" [57ef63ae]
è©å½™ "ç¦®ç‰©" æ²’æœ‰æ˜ å°„ [57ef63ae]
DD_processUserMessage: ç§‘ç›®åŒ¹é…å®Œæˆï¼Œæº–å‚™å›å‚³çµæœ [edd14ae0]
[INFO] [DD] ç§‘ç›®åŒ¹é…å®Œæˆ: "ç¦®ç‰©" -> äººæƒ…ç¦®å“ (exact_match)
DD_processUserMessage: æ ¹æ“šç§‘ç›®ä»£ç¢¼ 101 åˆ¤æ–·ç‚ºæ”¯å‡º [edd14ae0]
è™•ç†æ–‡å­—ç§»é™¤é‡‘é¡å’Œæ”¯ä»˜æ–¹å¼: åŸå§‹æ–‡å­—="ç¦®ç‰©5555555", é‡‘é¡=5555555, æ”¯ä»˜æ–¹å¼=æœªæŒ‡å®š
ä½¿ç”¨å°¾éƒ¨åŒ¹é…: "ç¦®ç‰©"
DD_processUserMessage: ç”¨æˆ¶æŒ‡å®šäº†æ”¯ä»˜æ–¹å¼: é è¨­ [edd14ae0]
DD_processUserMessage: å›å‚³çµæœ: {"type":"è¨˜å¸³","processed":true,"subject":"ç¦®ç‰©","subjectName":"äººæƒ…ç¦®å“","majorCode":"101","majorName":"ç”Ÿæ´»å®¶ç”¨","subCode":"10125","amount":5555555,"rawAmount":"5555555","paymentMethod":"é è¨­","action":"æ”¯å‡º","confidence":1,"matchMethod":"exact_match","text":"ç¦®ç‰©","originalSubject":"ç¦®ç‰©","processId":"edd14ae0"} [edd14ae0]
DD_processUserMessageè¿”å›: {"type":"è¨˜å¸³","processed":true,"subject":"ç¦®ç‰©","subjectName":"äººæƒ…ç¦®å“","majorCode":"101","majorName":"ç”Ÿæ´»å®¶ç”¨","subCode":"10125","amount":5555555,"rawAmount":"5555555","paymentMethod":"é è¨­","action":"æ”¯å‡º","confidence":1,"matchMethod":"exact_match","text":"ç¦®ç‰©","originalSubject":"ç¦®ç‰©","processId":"edd14ae0"}
æˆåŠŸè§£æè¨Šæ¯: ç§‘ç›®=äººæƒ…ç¦®å“, é‡‘é¡=5555555, æ”¯ä»˜æ–¹å¼=é è¨­
[INFO] [DD] æˆåŠŸè§£æè¨Šæ¯: ç§‘ç›®=äººæƒ…ç¦®å“, é‡‘é¡=5555555, æ”¯ä»˜æ–¹å¼=é è¨­
è¨­ç½®æ”¯ä»˜æ–¹å¼: é è¨­
è¨Šæ¯è§£ææˆåŠŸ: ç§‘ç›®=äººæƒ…ç¦®å“, é‡‘é¡=5555555, æ”¯ä»˜æ–¹å¼=é è¨­
é–‹å§‹åˆ†é¡æ•¸æ“š
[INFO] [DD] é–‹å§‹åˆ†é¡æ•¸æ“š
é–‹å§‹åˆ†é¡ï¼Œä¾†æº: ä½¿ç”¨è€…è¨Šæ¯ [849726f9]
æª¢æ¸¬åˆ°å·²è™•ç†çš„è¨˜å¸³è¨Šæ¯
åˆ†é¡çµæœ: BK [849726f9]
æ•¸æ“šåˆ†é¡çµæœ: BK
[INFO] [DD] æ•¸æ“šåˆ†é¡çµæœ: BK
é–‹å§‹åˆ†ç™¼æ•¸æ“šè‡³ BK
[INFO] [DD] é–‹å§‹åˆ†ç™¼æ•¸æ“šè‡³ BK
é–‹å§‹åˆ†ç™¼æ•¸æ“šè‡³ BK [3118b39a]
[INFO] [DD] é–‹å§‹åˆ†ç™¼æ•¸æ“šè‡³ BK [3118b39a]
è½‰ç™¼åˆ°BKæ¨¡çµ„ [3118b39a]
[INFO] [DD] è½‰ç™¼åˆ°BKæ¨¡çµ„ [3118b39a]
é–‹å§‹èª¿ç”¨DD_processForBK [3118b39a]
[INFO] [DD] é–‹å§‹è™•ç†è¨˜å¸³æ•¸æ“š [e5f73922]
[INFO] [DD] é–‹å§‹èª¿ç”¨BK_processBookkeeping [e5f73922]
[e5f73922] å³å°‡èª¿ç”¨ BK.BK_processBookkeepingï¼Œæ•¸æ“š: {"action":"æ”¯å‡º","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"majorCode":"101","subCode":"10125","majorName":"","paymentMethod":"é è¨­","text":"ç¦®ç‰©5555555","formatId":"","originalSubject":"","userId":"Uae47d9d496...
[e5f73922] BK_processBookkeeping: é–‹å§‹è™•ç†è¨˜å¸³è«‹æ±‚
[2025-06-28T09:12:47.118Z] [INFO] [BK] é–‹å§‹è™•ç†è¨˜å¸³è«‹æ±‚ [e5f73922] | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[e5f73922] BK_processBookkeeping: æ ¼å¼åŒ–æ—¥æœŸ: 2025/06/28 17:12, æ™‚é–“: 17:12
[2025-06-28T09:12:47.119Z] [DEBUG] [BK] é–‹å§‹ç”Ÿæˆæ”¶æ”¯ID [e5f73922] | IDç”Ÿæˆ |  | BK_generateBookkeepingId
è­¦å‘Š: DLæ¨¡çµ„æœªæ‰¾åˆ°ï¼Œå°‡ä½¿ç”¨åŸç”Ÿæ—¥èªŒç³»çµ±
[2025-06-28T09:12:48.874Z] [INFO] [BK] BKæ¨¡çµ„åˆå§‹åŒ–é–‹å§‹ [2025-06-28T09:12:47.119Z] | DLæ¨¡çµ„åˆå§‹åŒ–: å¤±æ•— (æœªæ‰¾åˆ°DLæ¨¡çµ„) | è¨˜å¸³è¡¨æª¢æŸ¥: æˆåŠŸ | ç³»çµ±åˆå§‹åŒ– |  | BK_initialize
[2025-06-28T09:12:50.138Z] [INFO] [BK] ç”Ÿæˆæ”¶æ”¯ID: 20250628-00002 [e5f73922] | IDç”Ÿæˆ |  | BK_generateBookkeepingId
[e5f73922] BK_processBookkeeping: ç”Ÿæˆè¨˜å¸³ID: 20250628-00002
[e5f73922] BK_processBookkeeping: è™•ç†æ”¯å‡ºé‡‘é¡: 5555555ï¼ŒåŸå§‹æ ¼å¼: 5,555,555
[e5f73922] BK_processBookkeeping: ä½¿ç”¨åŸå§‹æ–‡æœ¬ä½œç‚ºå‚™è¨»: "ç¦®ç‰©5555555"
[e5f73922] BK_processBookkeeping: æº–å‚™è¨˜å¸³æ•¸æ“š: ID=20250628-00002, ä½¿ç”¨è€…=Uae47d9d496e4596d70ed724a7d6e2948, é¡å‹=J, æ”¯ä»˜æ–¹å¼=é è¨­, åŸå§‹é‡‘é¡=5,555,555
[2025-06-28T09:12:50.141Z] [INFO] [BK] æº–å‚™è¨˜å¸³æ•¸æ“š [e5f73922] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-06-28T09:12:50.141Z] [INFO] [BK] æ”¶åˆ°æ•¸æ“š: {"id":"20250628-00002","userType":"J","date":"2025/06/28","time":"17:12","majorCode":"101","minorCod... | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-06-28T09:12:50.141Z] [INFO] [BK] å‚™è¨»å…§å®¹: "ç¦®ç‰©5555555" [e5f73922] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-06-28T09:12:50.141Z] [WARNING] [BK] æœªè¨­ç½®actionï¼Œé€€å›åˆ°å‚³çµ±åˆ¤æ–·æ–¹å¼ [e5f73922] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-06-28T09:12:50.141Z] [INFO] [BK] ä½¿ç”¨æ”¯å‡ºé‡‘é¡: 5555555 [e5f73922] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
BK_validatePaymentMethod: é©—è­‰æ”¯ä»˜æ–¹å¼ "é è¨­" å°æ‡‰ç§‘ç›®ä»£ç¢¼ 101
BK_validatePaymentMethod: æœªæŒ‡å®šæ”¯ä»˜æ–¹å¼æˆ–å€¼ç‚º"é è¨­"ï¼Œä½¿ç”¨é»˜èªæ”¯ä»˜æ–¹å¼"åˆ·å¡"
[2025-06-28T09:12:50.142Z] [INFO] [BK] è¨˜å¸³æ•¸æ“šæº–å‚™å®Œæˆ: æ”¶å…¥=, æ”¯å‡º=5555555, æ”¯ä»˜æ–¹å¼=åˆ·å¡, å‚™è¨»="ç¦®ç‰©5555555" [e5f73922] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[e5f73922] BK_processBookkeeping: é–‹å§‹ä¿å­˜æ•¸æ“šåˆ°è©¦ç®—è¡¨
[2025-06-28T09:12:50.142Z] [DEBUG] [BK] é–‹å§‹å„²å­˜æ•¸æ“šåˆ°Google Sheets [e5f73922] | æ•¸æ“šå­˜å„² |  | BK_saveToSpreadsheet
[2025-06-28T09:12:52.221Z] [INFO] [BK] æ•¸æ“šæˆåŠŸå„²å­˜åˆ°è¡Œè™Ÿ: 384 [e5f73922] | æ•¸æ“šå­˜å„² |  | BK_saveToSpreadsheet
[e5f73922] BK_processBookkeeping: æ•¸æ“šæˆåŠŸä¿å­˜åˆ°è©¦ç®—è¡¨ï¼Œè¡Œè™Ÿ: 384
[e5f73922] BK_processBookkeeping: æœ€çµ‚ç¢ºèªçš„æ”¯ä»˜æ–¹å¼: åˆ·å¡
[e5f73922] BK_processBookkeeping: è¨˜å¸³è™•ç†æˆåŠŸ: 20250628-00002, ä½¿ç”¨è€…é¡å‹: J, åŸå§‹é‡‘é¡: 5,555,555, æ”¯ä»˜æ–¹å¼: åˆ·å¡
[2025-06-28T09:12:52.221Z] [INFO] [BK] è¨˜å¸³è™•ç†æˆåŠŸ: 20250628-00002, æ”¯ä»˜æ–¹å¼: åˆ·å¡, ä½¿ç”¨è€…: Uae47d9d496e4596d70ed724a7d6e2948, é¡å‹: J [e5f73922] | è¨˜å¸³å®Œæˆ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[e5f73922] BK.BK_processBookkeeping è¿”å›çµæœ: {"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250628-00002","date":"2025/06/28 17:12","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"rawAmount":"5,555,555","action":"æ”¯å‡º","paymentMethod":"åˆ·å¡","remark":"ç¦®ç‰©5555555","userId":"Uae47d9d496e4596d70ed724a7d6e2948","userType":"J"}}...
[INFO] [DD] BK_processBookkeepingèª¿ç”¨å®Œæˆï¼Œçµæœ: æˆåŠŸ [e5f73922]
[INFO] [DD] è¨˜å¸³æˆåŠŸ: ID=20250628-00002, é‡‘é¡=5555555, ç§‘ç›®=äººæƒ…ç¦®å“, ä½¿ç”¨è€…é¡å‹=J [e5f73922]
[INFO] [DD] ç”Ÿæˆå›è¦†è¨Šæ¯: è¨˜å¸³æˆåŠŸï¼
é‡‘é¡ï¼š5555555å…ƒ (æ”¯å‡º)
æ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡
æ™‚é–“ï¼š2025/06/28 17:12...
DD_processForBKèª¿ç”¨å®Œæˆï¼Œçµæœ: {"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250628-00002","date":"2025/06/28 17:12","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"rawAmount":"5,555,555","action":"æ”¯å‡º","paymentM... [3118b39a]
æ•¸æ“šåˆ†ç™¼å®Œæˆ: {"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250628-00002","date":"2025/06/28 17:12","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"rawAmount":"5,555,555","action":"æ”¯å‡º","paymentM... [3118b39a]
[INFO] [DD] æ•¸æ“šåˆ†ç™¼å®Œæˆï¼Œçµæœ: {"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250628-00002","date":"2025/06/28 17:12","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"rawAmount":"5,555,555","action":"æ”¯å‡º","paymentM... [3118b39a]
æ•¸æ“šåˆ†ç™¼å®Œæˆï¼Œçµæœ: {"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250628-00002","date":"2025/06/28 17:12","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"rawAmount":"5,555,555","action":"æ”¯å‡º","paymentMethod":"åˆ·å¡","remark":"ç¦®ç‰©5555555","userId":"Uae47d9d496e4596d70ed724a7d6e2948","userType":"J"}},"module":"BK","isIncome":false,"majorCode":"101","action":"æ”¯å‡º","responseMessage":"è¨˜å¸³æˆåŠŸï¼\né‡‘é¡ï¼š5555555å…ƒ (æ”¯å‡º)\næ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡\næ™‚é–“ï¼š2025/06/28 17:12\nç§‘ç›®ï¼šäººæƒ…ç¦®å“\næ”¶æ”¯IDï¼š20250628-00002","processId":"e5f73922","userId":"Uae47d9d496e4596d70ed724a7d6e2948","userType":"J"}
[INFO] [DD] æ•¸æ“šåˆ†ç™¼å®Œæˆï¼Œçµæœ: {"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250628-00002","date":"2025/06/28 17:12","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"rawAmount":"5,555,555","action":"æ”¯å‡º","paymentMethod":"åˆ·å¡","remark":"ç¦®ç‰©5555555","userId":"Uae47d9d496e4596d70ed724a7d6e2948","userType":"J"}},"module":"BK","isIncome":false,"majorCode":"101","action":"æ”¯å‡º","responseMessage":"è¨˜å¸³æˆåŠŸï¼\né‡‘é¡ï¼š5555555å…ƒ (æ”¯å‡º)\næ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡\næ™‚é–“ï¼š2025/06/28 17:12\nç§‘ç›®ï¼šäººæƒ…ç¦®å“\næ”¶æ”¯IDï¼š20250628-00002","processId":"e5f73922","userId":"Uae47d9d496e4596d70ed724a7d6e2948","userType":"J"}
DD_formatSystemReplyMessage: é–‹å§‹æ ¼å¼åŒ–è¨Šæ¯ [dfb3d571], æ¨¡çµ„: BK
DD_formatSystemReplyMessage: è¼¸å…¥æ•¸æ“š: {"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250628-00002","date":"2025/06/28 17:12","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"rawAmount":"5,555,555","action":"æ”¯å‡º","paymentMethod":"åˆ·å¡","remark":"ç¦®ç‰©5555555","userId":"Uae47d9d496e4596d70ed724a7d6e2948","userType":"J"}},"modu...
DD_formatSystemReplyMessage: æª¢æ¸¬åˆ°å®Œæ•´responseMessageï¼Œå°‡ç›´æ¥ä½¿ç”¨ [dfb3d571]
DD_formatSystemReplyMessage: ç›´æ¥è¿”å›ç¾æœ‰è¨Šæ¯ï¼Œé•·åº¦=78 [dfb3d571]
DD_distributeDataè™•ç†å®Œæˆï¼Œçµæœé è¦½: {"success":true,"hasResponseMessage":true,"responseMsgLength":78,"errorType":"ç„¡","moduleCode":"BK","hasPartialData":true} [4f2b5be5]
partialDataå…§å®¹: {} [4f2b5be5]
æº–å‚™å›è¦†è¨Šæ¯ [4f2b5be5]
WH_replyMessage: æ”¶åˆ°é¡å‹ object çš„è¨Šæ¯å°è±¡
WH_replyMessage: è¨Šæ¯å°è±¡çµæ§‹: ["success","responseMessage","originalResult","processId","errorType","moduleCode","partialData","error"]
WH_replyMessage: è¨Šæ¯å°è±¡é è¦½: {"success":true,"responseMessage":"è¨˜å¸³æˆåŠŸï¼\né‡‘é¡ï¼š5555555å…ƒ (æ”¯å‡º)\næ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡\næ™‚é–“ï¼š2025/06/28 17:12\nç§‘ç›®ï¼šäººæƒ…ç¦®å“\næ”¶æ”¯IDï¼š20250628-00002","originalResult":{"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","dat...
WH_replyMessage: ç™¼ç¾responseMessageå±¬æ€§ (string), é•·åº¦=78
WH_replyMessage: ä½¿ç”¨responseMessageå±¬æ€§ (è¨˜å¸³æˆåŠŸï¼
é‡‘é¡ï¼š5555555å…ƒ (æ”¯å‡º)
æ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡...)
WH_replyMessage: é–‹å§‹å›è¦†è¨Šæ¯: è¨˜å¸³æˆåŠŸï¼
é‡‘é¡ï¼š5555555å…ƒ (æ”¯å‡º)
æ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡
æ™‚é–“ï¼š2025/06/28 17:12...
[WH 2.0.7 LOG] WH 2.0.3: é–‹å§‹å›è¦†è¨Šæ¯: è¨˜å¸³æˆåŠŸï¼
é‡‘é¡ï¼š5555555å…ƒ (æ”¯å‡º)
æ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡
æ™‚é–“ï¼š2025/06/28 17:12... (INFO)
[WH 2.0.7 LOG] WH 2.0.3: ç™¼é€APIè«‹æ±‚åˆ°LINEå¹³å° (INFO)
è¨Šæ¯å›è¦†çµæœ: {} [4f2b5be5]
éåŒæ­¥è™•ç†å®Œæˆï¼Œå·²æ¸…ç†æ•¸æ“š [4f2b5be5]
[WH 2.0.7 LOG] WH 2.0.7: éåŒæ­¥è™•ç†å®Œæˆ [4f2b5be5] (INFO)
LINE API å›è¦†çµæœ: 200
å›è¦†è¨Šæ¯æˆåŠŸ
[WH 2.0.7 LOG] WH 2.0.3: å›è¦†è¨Šæ¯æˆåŠŸç™¼é€ (INFO)
ğŸ’“ æœå‹™å™¨å¿ƒè·³ - 2025/6/28 ä¸‹åˆ5:17:21 | é‹è¡Œæ™‚é–“: 5 åˆ†é˜
[WH-INFO] æœå‹™å™¨å¿ƒè·³æª¢æŸ¥
[WH 2.0.7 LOG] æœå‹™å™¨å¿ƒè·³æª¢æŸ¥ (INFO)
WH_verifySignature: æ¸¬è©¦æ¨¡å¼ï¼Œè·³éç°½ç« é©—è­‰
[WH 2.0.7 LOG] WH 2.0.7: æ”¶åˆ°LINE Webhookè«‹æ±‚ [be5b52fb] (INFO)
é–‹å§‹éåŒæ­¥è™•ç†è«‹æ±‚ [be5b52fb]
[WH 2.0.7 LOG] WH 2.0.7: é–‹å§‹éåŒæ­¥è™•ç†è«‹æ±‚ [be5b52fb] (INFO)
[WH 2.0.7 LOG] WH 2.0.3: é–‹å§‹è™•ç†äº‹ä»¶: message [be5b52fb] (INFO)
è™•ç†æ¶ˆæ¯äº‹ä»¶: text [be5b52fb]
æ”¶åˆ°æ–‡æœ¬æ¶ˆæ¯: "ç¦®ç‰©5555555" [be5b52fb]
[WH 2.0.7 LOG] WH 2.0.3: æ”¶åˆ°æ–‡æœ¬æ¶ˆæ¯: "ç¦®ç‰©5555555" [be5b52fb] (INFO)
æº–å‚™è¨Šæ¯æ•¸æ“š: {"text":"ç¦®ç‰©5555555","userId":"Uae47d9d496e4596d70ed724a7d6e2948","timestamp":1751102299962,"replyToken":"c1d47099684f4a35b1ff40648ef16876"} [be5b52fb]
æº–å‚™èª¿ç”¨DD_distributeData [be5b52fb]
[WH 2.0.7 LOG] WH 2.0.3: æº–å‚™èª¿ç”¨DD_distributeData [be5b52fb] (INFO)
=== DD_distributeDataåŸ·è¡Œåˆå§‹æª¢æŸ¥ ===
DD_MAX_RETRIES: 3
DD_RETRY_DELAY: 1000
DD_TARGET_MODULE_BK: BK
DD_TARGET_MODULE_WH: WH
DD_distributeDataè¢«èª¿ç”¨ï¼Œæ•¸æ“šæº: LINE, ç”¨æˆ¶ID: Uae47d9d496e4596d70ed724a7d6e2948, æ™‚é–“: 2025-06-28T09:18:21.726Z
è™•ç†ID: ac91d3f4
[INFO] [DD] é–‹å§‹è™•ç†æ•¸æ“š [ac91d3f4]
æ¨™æº–åŒ–ç”¨æˆ¶ID: userId -> user_id = Uae47d9d496e4596d70ed724a7d6e2948
èª¿æ•´æ•¸æ“šä¾†æºå¾ã€ŒLINEã€åˆ°ã€Œä½¿ç”¨è€…è¨Šæ¯ã€
è™•ç†æ•¸æ“š: {"text":"ç¦®ç‰©5555555","userId":"Uae47d9d496e4596d70ed724a7d6e2948","timestamp":1751102299962,"replyTok..., ä¾†æº: ä½¿ç”¨è€…è¨Šæ¯
è™•ç†æ™‚é–“æˆ³: 1751102299962
é–‹å§‹è½‰æ›æ™‚é–“æˆ³: 1751102299962 [cac1b936]
æ™‚é–“æˆ³è½‰æ›çµæœ: 2025/6/28 09:18 [cac1b936]
æ™‚é–“æˆ³è½‰æ›çµæœ: 2025/6/28 09:18
è™•ç†ç”¨æˆ¶è¨Šæ¯: "ç¦®ç‰©5555555"
[INFO] [DD] è™•ç†ç”¨æˆ¶è¨Šæ¯: "ç¦®ç‰©5555555"
[INFO] [DD] è™•ç†ç”¨æˆ¶æ¶ˆæ¯: "ç¦®ç‰©5555555"
DD_processUserMessage: é–‹å§‹è™•ç†ç”¨æˆ¶è¨Šæ¯ "ç¦®ç‰©5555555" [0c611553]
DD_CONFIG åˆå§‹åŒ–å®Œæˆ
DD_processUserMessage: æ¸…ç†å¾Œè¨Šæ¯: "ç¦®ç‰©5555555" [0c611553]
DD_processUserMessage: èª¿ç”¨DD_parseInputFormat [0c611553]
DD_parseInputFormat: é–‹å§‹è§£ææ–‡æœ¬ã€Œç¦®ç‰©5555555ã€[0c611553]
DD_parseInputFormat: è­˜åˆ¥æ¨™æº–æ ¼å¼ - ç§‘ç›®:ã€Œç¦®ç‰©ã€, é‡‘é¡:5555555, æ”¯ä»˜æ–¹å¼:ã€Œé è¨­ã€ [0c611553]
DD_processUserMessage: DD_parseInputFormatå›å‚³çµæœ: {"subject":"ç¦®ç‰©","amount":5555555,"rawAmount":"5555555","paymentMethod":"é è¨­"} [0c611553]
DD_processUserMessage: æˆåŠŸè§£æåŸºæœ¬è³‡è¨Š - ç§‘ç›®="ç¦®ç‰©", é‡‘é¡=5555555, æ”¯ä»˜æ–¹å¼=é è¨­ [0c611553]
DD_processUserMessage: é–‹å§‹ç§‘ç›®åŒ¹é…éšæ®µ [0c611553]
DD_processUserMessage: å˜—è©¦ç”¨æˆ¶åå¥½åŒ¹é… [0c611553]
æŸ¥è©¢ç”¨æˆ¶åå¥½: userId=Uae47d9d496e4596d70ed724a7d6e2948, term="ç¦®ç‰©" [73477d4f]
æœªæ‰¾åˆ°ç”¨æˆ¶åå¥½ [73477d4f]
DD_processUserMessage: å˜—è©¦ç²¾ç¢ºåŒ¹é… [0c611553]
[INFO] [DD] å˜—è©¦æŸ¥è©¢ç§‘ç›®ä»£ç¢¼: "ç¦®ç‰©" [0c611553]
### ä½¿ç”¨2025-04-30-V4.1.5å¢å¼·ç‰ˆDD_getSubjectCode ###
æŸ¥è©¢ç§‘ç›®ä»£ç¢¼: "ç¦®ç‰©", ID=beaa96e8
æ¨™æº–åŒ–å¾Œçš„è¼¸å…¥: "ç¦®ç‰©" [beaa96e8]
è®€å–ç§‘ç›®è¡¨: 62è¡Œæ•¸æ“š [beaa96e8]
---ç§‘ç›®æŸ¥è©¢è¨ºæ–·ä¿¡æ¯é–‹å§‹---[beaa96e8]
å°‹æ‰¾ç§‘ç›®: "ç¦®ç‰©"
æ­£åœ¨é€²è¡Œç²¾ç¢ºåŒ¹é…æŸ¥è©¢ï¼Œæ”¯æŒå…§éƒ¨ç©ºæ ¼...
ç§‘ç›®è¡¨é …ç›® #1: ä»£ç¢¼=101-10101, åç¨±="å­è¦ªè²»"
ç§‘ç›®è¡¨é …ç›® #2: ä»£ç¢¼=101-10102, åç¨±="Helperè–ªè³‡"
ç§‘ç›®è¡¨é …ç›® #3: ä»£ç¢¼=101-10103, åç¨±="ç”Ÿæ´»ç”¨å“"
ç§‘ç›®è¡¨é …ç›® #4: ä»£ç¢¼=101-10105, åç¨±="ç”Ÿé®®é›œè²¨"
ç§‘ç›®è¡¨é …ç›® #5: ä»£ç¢¼=101-10106, åç¨±="è¡£ç‰©é£¾å“"
ç§‘ç›®è¡¨é …ç›® #6: ä»£ç¢¼=101-10107, åç¨±="é›»ä¿¡ç¶²è·¯"
ç§‘ç›®è¡¨é …ç›® #7: ä»£ç¢¼=101-10108, åç¨±="ç†é«®ç†å®¹"
ç§‘ç›®è¡¨é …ç›® #8: ä»£ç¢¼=101-10110, åç¨±="3Cç”¨å“"
ç§‘ç›®è¡¨é …ç›® #9: ä»£ç¢¼=101-10111, åç¨±="åŒ–å¦ä¿é¤Šå“"
é€šéåŒç¾©è©åŒ¹é…æˆåŠŸ: "ç¦®ç‰©" === "ç¦®ç‰©"
[INFO] [DD] é€šéåŒç¾©è©æˆåŠŸæŸ¥è©¢ç§‘ç›®ä»£ç¢¼: 101-10125 äººæƒ…ç¦®å“ [beaa96e8]
---ç§‘ç›®æŸ¥è©¢è¨ºæ–·ä¿¡æ¯çµæŸ---[beaa96e8]
DD_processUserMessage: ç²¾ç¢ºåŒ¹é…æˆåŠŸ "ç¦®ç‰©" -> äººæƒ…ç¦®å“ [0c611553]
[INFO] [DD] ç²¾ç¢ºåŒ¹é…æˆåŠŸ: "ç¦®ç‰©" -> äººæƒ…ç¦®å“, ç§‘ç›®ä»£ç¢¼=101-10125
DD_processUserMessage: æª¢æŸ¥æ˜¯å¦æœ‰å¤šé‡æ˜ å°„ [0c611553]
æª¢æŸ¥è©å½™å¤šé‡æ˜ å°„: "ç¦®ç‰©" [d9e23146]
è©å½™ "ç¦®ç‰©" æ²’æœ‰æ˜ å°„ [d9e23146]
DD_processUserMessage: ç§‘ç›®åŒ¹é…å®Œæˆï¼Œæº–å‚™å›å‚³çµæœ [0c611553]
[INFO] [DD] ç§‘ç›®åŒ¹é…å®Œæˆ: "ç¦®ç‰©" -> äººæƒ…ç¦®å“ (exact_match)
DD_processUserMessage: æ ¹æ“šç§‘ç›®ä»£ç¢¼ 101 åˆ¤æ–·ç‚ºæ”¯å‡º [0c611553]
è™•ç†æ–‡å­—ç§»é™¤é‡‘é¡å’Œæ”¯ä»˜æ–¹å¼: åŸå§‹æ–‡å­—="ç¦®ç‰©5555555", é‡‘é¡=5555555, æ”¯ä»˜æ–¹å¼=æœªæŒ‡å®š
ä½¿ç”¨å°¾éƒ¨åŒ¹é…: "ç¦®ç‰©"
DD_processUserMessage: ç”¨æˆ¶æŒ‡å®šäº†æ”¯ä»˜æ–¹å¼: é è¨­ [0c611553]
DD_processUserMessage: å›å‚³çµæœ: {"type":"è¨˜å¸³","processed":true,"subject":"ç¦®ç‰©","subjectName":"äººæƒ…ç¦®å“","majorCode":"101","majorName":"ç”Ÿæ´»å®¶ç”¨","subCode":"10125","amount":5555555,"rawAmount":"5555555","paymentMethod":"é è¨­","action":"æ”¯å‡º","confidence":1,"matchMethod":"exact_match","text":"ç¦®ç‰©","originalSubject":"ç¦®ç‰©","processId":"0c611553"} [0c611553]
DD_processUserMessageè¿”å›: {"type":"è¨˜å¸³","processed":true,"subject":"ç¦®ç‰©","subjectName":"äººæƒ…ç¦®å“","majorCode":"101","majorName":"ç”Ÿæ´»å®¶ç”¨","subCode":"10125","amount":5555555,"rawAmount":"5555555","paymentMethod":"é è¨­","action":"æ”¯å‡º","confidence":1,"matchMethod":"exact_match","text":"ç¦®ç‰©","originalSubject":"ç¦®ç‰©","processId":"0c611553"}
æˆåŠŸè§£æè¨Šæ¯: ç§‘ç›®=äººæƒ…ç¦®å“, é‡‘é¡=5555555, æ”¯ä»˜æ–¹å¼=é è¨­
[INFO] [DD] æˆåŠŸè§£æè¨Šæ¯: ç§‘ç›®=äººæƒ…ç¦®å“, é‡‘é¡=5555555, æ”¯ä»˜æ–¹å¼=é è¨­
è¨­ç½®æ”¯ä»˜æ–¹å¼: é è¨­
è¨Šæ¯è§£ææˆåŠŸ: ç§‘ç›®=äººæƒ…ç¦®å“, é‡‘é¡=5555555, æ”¯ä»˜æ–¹å¼=é è¨­
é–‹å§‹åˆ†é¡æ•¸æ“š
[INFO] [DD] é–‹å§‹åˆ†é¡æ•¸æ“š
é–‹å§‹åˆ†é¡ï¼Œä¾†æº: ä½¿ç”¨è€…è¨Šæ¯ [81ec80d2]
æª¢æ¸¬åˆ°å·²è™•ç†çš„è¨˜å¸³è¨Šæ¯
åˆ†é¡çµæœ: BK [81ec80d2]
æ•¸æ“šåˆ†é¡çµæœ: BK
[INFO] [DD] æ•¸æ“šåˆ†é¡çµæœ: BK
é–‹å§‹åˆ†ç™¼æ•¸æ“šè‡³ BK
[INFO] [DD] é–‹å§‹åˆ†ç™¼æ•¸æ“šè‡³ BK
é–‹å§‹åˆ†ç™¼æ•¸æ“šè‡³ BK [ebfb5315]
[INFO] [DD] é–‹å§‹åˆ†ç™¼æ•¸æ“šè‡³ BK [ebfb5315]
è½‰ç™¼åˆ°BKæ¨¡çµ„ [ebfb5315]
[INFO] [DD] è½‰ç™¼åˆ°BKæ¨¡çµ„ [ebfb5315]
é–‹å§‹èª¿ç”¨DD_processForBK [ebfb5315]
[INFO] [DD] é–‹å§‹è™•ç†è¨˜å¸³æ•¸æ“š [92fa6035]
[INFO] [DD] é–‹å§‹èª¿ç”¨BK_processBookkeeping [92fa6035]
[92fa6035] å³å°‡èª¿ç”¨ BK.BK_processBookkeepingï¼Œæ•¸æ“š: {"action":"æ”¯å‡º","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"majorCode":"101","subCode":"10125","majorName":"","paymentMethod":"é è¨­","text":"ç¦®ç‰©5555555","formatId":"","originalSubject":"","userId":"Uae47d9d496...
[92fa6035] BK_processBookkeeping: é–‹å§‹è™•ç†è¨˜å¸³è«‹æ±‚
[2025-06-28T09:18:24.223Z] [INFO] [BK] é–‹å§‹è™•ç†è¨˜å¸³è«‹æ±‚ [92fa6035] | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[92fa6035] BK_processBookkeeping: æ ¼å¼åŒ–æ—¥æœŸ: 2025/06/28 17:18, æ™‚é–“: 17:18
[2025-06-28T09:18:24.223Z] [DEBUG] [BK] é–‹å§‹ç”Ÿæˆæ”¶æ”¯ID [92fa6035] | IDç”Ÿæˆ |  | BK_generateBookkeepingId
è­¦å‘Š: DLæ¨¡çµ„æœªæ‰¾åˆ°ï¼Œå°‡ä½¿ç”¨åŸç”Ÿæ—¥èªŒç³»çµ±
[2025-06-28T09:18:26.832Z] [INFO] [BK] BKæ¨¡çµ„åˆå§‹åŒ–é–‹å§‹ [2025-06-28T09:18:24.223Z] | DLæ¨¡çµ„åˆå§‹åŒ–: å¤±æ•— (æœªæ‰¾åˆ°DLæ¨¡çµ„) | è¨˜å¸³è¡¨æª¢æŸ¥: æˆåŠŸ | ç³»çµ±åˆå§‹åŒ– |  | BK_initialize
[2025-06-28T09:18:27.562Z] [INFO] [BK] ç”Ÿæˆæ”¶æ”¯ID: 20250628-00003 [92fa6035] | IDç”Ÿæˆ |  | BK_generateBookkeepingId
[92fa6035] BK_processBookkeeping: ç”Ÿæˆè¨˜å¸³ID: 20250628-00003
[92fa6035] BK_processBookkeeping: è™•ç†æ”¯å‡ºé‡‘é¡: 5555555ï¼ŒåŸå§‹æ ¼å¼: 5,555,555
[92fa6035] BK_processBookkeeping: ä½¿ç”¨åŸå§‹æ–‡æœ¬ä½œç‚ºå‚™è¨»: "ç¦®ç‰©5555555"
[92fa6035] BK_processBookkeeping: æº–å‚™è¨˜å¸³æ•¸æ“š: ID=20250628-00003, ä½¿ç”¨è€…=Uae47d9d496e4596d70ed724a7d6e2948, é¡å‹=J, æ”¯ä»˜æ–¹å¼=é è¨­, åŸå§‹é‡‘é¡=5,555,555
[2025-06-28T09:18:27.562Z] [INFO] [BK] æº–å‚™è¨˜å¸³æ•¸æ“š [92fa6035] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-06-28T09:18:27.562Z] [INFO] [BK] æ”¶åˆ°æ•¸æ“š: {"id":"20250628-00003","userType":"J","date":"2025/06/28","time":"17:18","majorCode":"101","minorCod... | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-06-28T09:18:27.562Z] [INFO] [BK] å‚™è¨»å…§å®¹: "ç¦®ç‰©5555555" [92fa6035] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-06-28T09:18:27.562Z] [WARNING] [BK] æœªè¨­ç½®actionï¼Œé€€å›åˆ°å‚³çµ±åˆ¤æ–·æ–¹å¼ [92fa6035] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-06-28T09:18:27.562Z] [INFO] [BK] ä½¿ç”¨æ”¯å‡ºé‡‘é¡: 5555555 [92fa6035] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
BK_validatePaymentMethod: é©—è­‰æ”¯ä»˜æ–¹å¼ "é è¨­" å°æ‡‰ç§‘ç›®ä»£ç¢¼ 101
BK_validatePaymentMethod: æœªæŒ‡å®šæ”¯ä»˜æ–¹å¼æˆ–å€¼ç‚º"é è¨­"ï¼Œä½¿ç”¨é»˜èªæ”¯ä»˜æ–¹å¼"åˆ·å¡"
[2025-06-28T09:18:27.562Z] [INFO] [BK] è¨˜å¸³æ•¸æ“šæº–å‚™å®Œæˆ: æ”¶å…¥=, æ”¯å‡º=5555555, æ”¯ä»˜æ–¹å¼=åˆ·å¡, å‚™è¨»="ç¦®ç‰©5555555" [92fa6035] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[92fa6035] BK_processBookkeeping: é–‹å§‹ä¿å­˜æ•¸æ“šåˆ°è©¦ç®—è¡¨
[2025-06-28T09:18:27.562Z] [DEBUG] [BK] é–‹å§‹å„²å­˜æ•¸æ“šåˆ°Google Sheets [92fa6035] | æ•¸æ“šå­˜å„² |  | BK_saveToSpreadsheet
[2025-06-28T09:18:29.627Z] [INFO] [BK] æ•¸æ“šæˆåŠŸå„²å­˜åˆ°è¡Œè™Ÿ: 385 [92fa6035] | æ•¸æ“šå­˜å„² |  | BK_saveToSpreadsheet
[92fa6035] BK_processBookkeeping: æ•¸æ“šæˆåŠŸä¿å­˜åˆ°è©¦ç®—è¡¨ï¼Œè¡Œè™Ÿ: 385
[92fa6035] BK_processBookkeeping: æœ€çµ‚ç¢ºèªçš„æ”¯ä»˜æ–¹å¼: åˆ·å¡
[92fa6035] BK_processBookkeeping: è¨˜å¸³è™•ç†æˆåŠŸ: 20250628-00003, ä½¿ç”¨è€…é¡å‹: J, åŸå§‹é‡‘é¡: 5,555,555, æ”¯ä»˜æ–¹å¼: åˆ·å¡
[2025-06-28T09:18:29.627Z] [INFO] [BK] è¨˜å¸³è™•ç†æˆåŠŸ: 20250628-00003, æ”¯ä»˜æ–¹å¼: åˆ·å¡, ä½¿ç”¨è€…: Uae47d9d496e4596d70ed724a7d6e2948, é¡å‹: J [92fa6035] | è¨˜å¸³å®Œæˆ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[92fa6035] BK.BK_processBookkeeping è¿”å›çµæœ: {"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250628-00003","date":"2025/06/28 17:18","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"rawAmount":"5,555,555","action":"æ”¯å‡º","paymentMethod":"åˆ·å¡","remark":"ç¦®ç‰©5555555","userId":"Uae47d9d496e4596d70ed724a7d6e2948","userType":"J"}}...
[INFO] [DD] BK_processBookkeepingèª¿ç”¨å®Œæˆï¼Œçµæœ: æˆåŠŸ [92fa6035]
[INFO] [DD] è¨˜å¸³æˆåŠŸ: ID=20250628-00003, é‡‘é¡=5555555, ç§‘ç›®=äººæƒ…ç¦®å“, ä½¿ç”¨è€…é¡å‹=J [92fa6035]
[INFO] [DD] ç”Ÿæˆå›è¦†è¨Šæ¯: è¨˜å¸³æˆåŠŸï¼
é‡‘é¡ï¼š5555555å…ƒ (æ”¯å‡º)
æ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡
æ™‚é–“ï¼š2025/06/28 17:18...
DD_processForBKèª¿ç”¨å®Œæˆï¼Œçµæœ: {"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250628-00003","date":"2025/06/28 17:18","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"rawAmount":"5,555,555","action":"æ”¯å‡º","paymentM... [ebfb5315]
æ•¸æ“šåˆ†ç™¼å®Œæˆ: {"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250628-00003","date":"2025/06/28 17:18","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"rawAmount":"5,555,555","action":"æ”¯å‡º","paymentM... [ebfb5315]
[INFO] [DD] æ•¸æ“šåˆ†ç™¼å®Œæˆï¼Œçµæœ: {"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250628-00003","date":"2025/06/28 17:18","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"rawAmount":"5,555,555","action":"æ”¯å‡º","paymentM... [ebfb5315]
æ•¸æ“šåˆ†ç™¼å®Œæˆï¼Œçµæœ: {"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250628-00003","date":"2025/06/28 17:18","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"rawAmount":"5,555,555","action":"æ”¯å‡º","paymentMethod":"åˆ·å¡","remark":"ç¦®ç‰©5555555","userId":"Uae47d9d496e4596d70ed724a7d6e2948","userType":"J"}},"module":"BK","isIncome":false,"majorCode":"101","action":"æ”¯å‡º","responseMessage":"è¨˜å¸³æˆåŠŸï¼\né‡‘é¡ï¼š5555555å…ƒ (æ”¯å‡º)\næ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡\næ™‚é–“ï¼š2025/06/28 17:18\nç§‘ç›®ï¼šäººæƒ…ç¦®å“\næ”¶æ”¯IDï¼š20250628-00003","processId":"92fa6035","userId":"Uae47d9d496e4596d70ed724a7d6e2948","userType":"J"}
[INFO] [DD] æ•¸æ“šåˆ†ç™¼å®Œæˆï¼Œçµæœ: {"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250628-00003","date":"2025/06/28 17:18","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"rawAmount":"5,555,555","action":"æ”¯å‡º","paymentMethod":"åˆ·å¡","remark":"ç¦®ç‰©5555555","userId":"Uae47d9d496e4596d70ed724a7d6e2948","userType":"J"}},"module":"BK","isIncome":false,"majorCode":"101","action":"æ”¯å‡º","responseMessage":"è¨˜å¸³æˆåŠŸï¼\né‡‘é¡ï¼š5555555å…ƒ (æ”¯å‡º)\næ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡\næ™‚é–“ï¼š2025/06/28 17:18\nç§‘ç›®ï¼šäººæƒ…ç¦®å“\næ”¶æ”¯IDï¼š20250628-00003","processId":"92fa6035","userId":"Uae47d9d496e4596d70ed724a7d6e2948","userType":"J"}
DD_formatSystemReplyMessage: é–‹å§‹æ ¼å¼åŒ–è¨Šæ¯ [ac91d3f4], æ¨¡çµ„: BK
DD_formatSystemReplyMessage: è¼¸å…¥æ•¸æ“š: {"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250628-00003","date":"2025/06/28 17:18","subjectName":"äººæƒ…ç¦®å“","amount":5555555,"rawAmount":"5,555,555","action":"æ”¯å‡º","paymentMethod":"åˆ·å¡","remark":"ç¦®ç‰©5555555","userId":"Uae47d9d496e4596d70ed724a7d6e2948","userType":"J"}},"modu...
DD_formatSystemReplyMessage: æª¢æ¸¬åˆ°å®Œæ•´responseMessageï¼Œå°‡ç›´æ¥ä½¿ç”¨ [ac91d3f4]
DD_formatSystemReplyMessage: ç›´æ¥è¿”å›ç¾æœ‰è¨Šæ¯ï¼Œé•·åº¦=78 [ac91d3f4]
DD_distributeDataè™•ç†å®Œæˆï¼Œçµæœé è¦½: {"success":true,"hasResponseMessage":true,"responseMsgLength":78,"errorType":"ç„¡","moduleCode":"BK","hasPartialData":true} [be5b52fb]
partialDataå…§å®¹: {} [be5b52fb]
æº–å‚™å›è¦†è¨Šæ¯ [be5b52fb]
WH_replyMessage: æ”¶åˆ°é¡å‹ object çš„è¨Šæ¯å°è±¡
WH_replyMessage: è¨Šæ¯å°è±¡çµæ§‹: ["success","responseMessage","originalResult","processId","errorType","moduleCode","partialData","error"]
WH_replyMessage: è¨Šæ¯å°è±¡é è¦½: {"success":true,"responseMessage":"è¨˜å¸³æˆåŠŸï¼\né‡‘é¡ï¼š5555555å…ƒ (æ”¯å‡º)\næ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡\næ™‚é–“ï¼š2025/06/28 17:18\nç§‘ç›®ï¼šäººæƒ…ç¦®å“\næ”¶æ”¯IDï¼š20250628-00003","originalResult":{"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","dat...
WH_replyMessage: ç™¼ç¾responseMessageå±¬æ€§ (string), é•·åº¦=78
WH_replyMessage: ä½¿ç”¨responseMessageå±¬æ€§ (è¨˜å¸³æˆåŠŸï¼
é‡‘é¡ï¼š5555555å…ƒ (æ”¯å‡º)
æ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡...)
WH_replyMessage: é–‹å§‹å›è¦†è¨Šæ¯: è¨˜å¸³æˆåŠŸï¼
é‡‘é¡ï¼š5555555å…ƒ (æ”¯å‡º)
æ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡
æ™‚é–“ï¼š2025/06/28 17:18...
[WH 2.0.7 LOG] WH 2.0.3: é–‹å§‹å›è¦†è¨Šæ¯: è¨˜å¸³æˆåŠŸï¼
é‡‘é¡ï¼š5555555å…ƒ (æ”¯å‡º)
æ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡
æ™‚é–“ï¼š2025/06/28 17:18... (INFO)
[WH 2.0.7 LOG] WH 2.0.3: ç™¼é€APIè«‹æ±‚åˆ°LINEå¹³å° (INFO)
è¨Šæ¯å›è¦†çµæœ: {} [be5b52fb]
éåŒæ­¥è™•ç†å®Œæˆï¼Œå·²æ¸…ç†æ•¸æ“š [be5b52fb]
[WH 2.0.7 LOG] WH 2.0.7: éåŒæ­¥è™•ç†å®Œæˆ [be5b52fb] (INFO)
LINE API å›è¦†çµæœ: 200
å›è¦†è¨Šæ¯æˆåŠŸ
[WH 2.0.7 LOG] WH 2.0.3: å›è¦†è¨Šæ¯æˆåŠŸç™¼é€ (INFO)
