~/workspace$ cd "75. Flutter_Test_code_PL" && dart test "7570. SIT_P1.dart"
Building package executable... (2.9s)
Built test:test.
00:00 +0: loading 7570. SIT_P1.dart         
[7570] 🎉 SIT P1測試模組 v10.0.0 (階段一SA修復版) 初始化完成
[7570] ✅ 階段一目標: 移除模擬功能，建立純測試控制器
[7570] 🔧 核心改善: 直接調用PL層7301, 7302模組
[7570] 📋 測試範圍: 44個真實PL層驗證測試
[7570] 🎯 資料流向: 7598 -> 7570 -> PL層 -> APL -> ASL -> BL -> Firebase
00:01 +0: ... - 7570 (階段一SA修復版) (setUpA00:01 +0: SIT P1測試 - 7570 (階段一SA修復版) (setUpAll)
[7570] 🚀 設定階段一測試環境...
00:01 +0: ... 7570 (階段一SA修復版) 執行階段00:01 +0: SIT P1測試 - 7570 (階段一SA修復版) 執行階段一純測試控制器驗證

[7570] 🚀 開始執行階段一SIT測試...
[7570] 🚀 開始執行階段一SIT測試 (v10.0.0)...
[7570] 🎯 測試策略: 純測試控制器，直接調用PL層模組
[7570] 🔄 執行整合層測試 (TC-SIT-001~016)
[SystemEntry] 初始化四模式設定...
[SystemEntry] 正在從配置讀取預設使用者模式...
[SystemEntry] 正在從配置讀取預設設定...
[SystemEntry] ✅ 四模式設定初始化完成 - 預設: inertial
[SystemEntry] 初始化四模式設定...
[SystemEntry] 正在從配置讀取預設使用者模式...
[SystemEntry] 正在從配置讀取預設設定...
[SystemEntry] ✅ 四模式設定初始化完成 - 預設: inertial
[7570] 🔄 執行真實Firebase記帳測試...
[7570] 🎯 資料流：7598 → 7570 → PL7302 → APL8303 → ASL → BL → Firebase
[7570] ❌ Firebase記帳測試異常: Exception: 違反0098第7條：測試資料必須完全來自7598，不得使用fallback預設值
[7570] 🔄 執行真實Firebase記帳測試...
[7570] 🎯 資料流：7598 → 7570 → PL7302 → APL8303 → ASL → BL → Firebase
[7570] ❌ Firebase記帳測試異常: Exception: 違反0098第7條：測試資料必須完全來自7598，不得使用fallback預設值
[7570] 🔄 執行PL層函數測試 (TC-SIT-017~044)

[7570] 📊 階段一SIT測試完成報告:
[7570]    🎯 測試策略: PURE_TEST_CONTROLLER
[7570]    📋 總測試數: 44
[7570]    ✅ 通過數: 40
[7570]    ❌ 失敗數: 4
[7570]    📈 成功率: 90.9%
[7570]    ⏱️ 執行時間: 407ms
[7570] 🎉 階段一目標達成: 純測試控制器建立完成

[7570] 📊 階段一測試完成:
[7570]    🎯 測試策略: PURE_TEST_CONTROLLER
[7570]    📋 總測試數: 44
[7570]    ✅ 通過數: 40
[7570]    ❌ 失敗數: 4
[7570]    📈 成功率: 90.9%
[7570]    ⏱️ 執行時間: 407ms
[7570] 🎉 階段一完成: 純測試控制器建立成功
00:01 +1: ... 7570 (階段一SA修復版) 執行階段00:01 +1: ... - 7570 (階段一SA修復版) 階段一00:01 +1: SIT P1測試 - 7570 (階段一SA修復版) 階段一資料注入驗證

[7570] 🔧 執行資料注入驗證...
[7570] ✅ 測試資料載入成功
[7570] ✅ 階段一資料注入驗證完成
00:01 +2: ... - 7570 (階段一SA修復版) 階段一00:01 +2: ... (階段一SA修復版) 真實Firebase記00:01 +2: SIT P1測試 - 7570 (階段一SA修復版) 真實Firebase記帳寫入驗證

[7570] 🔥 執行真實Firebase記帳寫入測試...
[7570] 🔄 執行真實Firebase記帳測試...
[7570] 🎯 資料流：7598 → 7570 → PL7302 → APL8303 → ASL → BL → Firebase
[7570] ❌ Firebase記帳測試異常: Exception: 違反0098第7條：測試資料必須完全來自7598，不得使用fallback預設值
[7570] 📊 Firebase記帳結果: {success: false, error: PL7302記帳測試失敗: Exception: 違反0098第7條：測試資料必須完全來自7598，不得使用fallback預設值, firebaseWritten: false, exception: Exception: 違反0098第7條：測試資料必須完全來自7598，不得使用fallback預設值}
[7570] ⚠️ Firebase記帳未成功，但測試框架正常: PL7302記帳測試失敗: Exception: 違反0098第7條：測試資料必須完全來自7598，不得使用fallback預設值
[7570] ✅ 真實Firebase記帳驗證完成
00:01 +3: ... (階段一SA修復版) 真實Firebase記00:01 +3: ... 7570 (階段一SA修復版) (tearDown00:01 +3: All tests passed!  