------------------------------------------
20251216. 導入LINE quick reply
不要寫code，請根據我的回覆更新提案。提案時請專注解決當前發生的問題就好，不需要優化、強化、驗證、監測、測試等手段，除了列出原因之外也請你提出insight。

問題分析更新 (基於您的回覆)
關鍵Insight: 不需要下載npm LINE SDK
根據您的提問以及現有代碼分析，我發現一個重要的技術洞察：
WH模組已經具備完整的LINE API調用能力，從代碼中可以看到：
•	已使用axios直接調用LINE Messaging API
•	已有CHANNEL_ACCESS_TOKEN和相關配置
•	WH_replyMessage函數已支援quickReply參數處理
問題不在於缺少SDK，而在於資料結構傳遞不完整
根本原因重新分析
技術層面真正原因：
1.	LBK模組輸出結構不完整 - LBK_handleNewSubjectClassification函數只返回純文字message，未包含quickReply物件
2.	WH模組接收邏輯不匹配 - WH_replyMessage雖然支援quickReply參數，但LBK傳遞的結果中沒有此欄位
3.	資料格式轉換缺失 - 需要將0099.json的科目選項轉換為LINE Quick Reply按鈕格式
業務流程問題：
就像餐廳服務員(LBK)準備了菜單內容，但沒有製作成按鈕式菜單卡(Quick Reply格式)，結果傳達給客戶時只能用口述方式

更新後解決方案
階段一：修改LBK模組輸出完整Quick Reply結構
修改目標： LBK_handleNewSubjectClassification函數同時輸出文字訊息和quickReply物件
影響範圍： 1315. LBK.js - 新科目歸類相關函數
Before/After差異：
•	Before: 只返回 {success: true, message: "純文字選單"}
•	After: 返回 {success: true, message: "純文字選單", quickReply: {items: [...]}}
修改內容：
1.	修改LBK_buildClassificationMessage函數，同時生成文字訊息和Quick Reply按鈕陣列
2.	修改LBK_handleNewSubjectClassification函數，在返回物件中包含quickReply欄位
3.	升級LBK模組版本至v1.4.2
=>quick reply的選項按鈕共10個如下：
101 生鮮雜貨
102 生活家用 
103 交通費用
104 餐飲費用
105 娛樂消遣
106 運動嗜好
107 寵物生活
201 財務收入
301 財務支出
000 不歸類



階段二：確保WH模組正確傳遞Quick Reply
修改目標： 確保WH_replyMessage能正確接收和使用LBK傳遞的quickReply資料
影響範圍： 1320. WH.js - WH_replyMessage函數調用邏輯
Before/After差異：
•	Before: WH_replyMessage(replyToken, result.message)
•	After: WH_replyMessage(replyToken, result.message, result.quickReply)
修改內容：
1.	檢查並確保WH_processEventAsync中調用WH_replyMessage時正確傳遞quickReply參數
2.	升級WH模組版本至v2.5.1

階段三：建立postback事件處理機制
修改目標： 處理用戶點擊Quick Reply按鈕後的科目歸類完成流程
影響範圍： WH模組postback事件處理
Before/After差異：
•	Before: 無法處理科目歸類的postback事件
•	After: 能識別科目歸類postback並調用LBK完成記帳
修改內容：
1.	在WH_processEventAsync中強化postback事件處理
2.	建立科目歸類postback識別邏輯(格式如"category_101")
3.	與LBK_processUserSelection函數整合

核心Insight
技術洞察：
現有架構已經完備，問題在於「資料結構組裝」而非「功能缺失」。WH模組的Quick Reply處理能力已存在，只需要LBK正確提供資料格式。
業務洞察：
這是典型的「最後一哩路」問題 - 90%的基礎設施都已就位，只差最後的資料格式對接。
請確認是否Approve此更新後的提案，我將依序進行三階段實施。