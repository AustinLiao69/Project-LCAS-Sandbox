dart"
Building package executable... (1.0(1.2s)
Built test:test.
00:00 +0: SIT P2æ¸¬è©¦ - 7571 (ç´”ç²¹èª¿ç”¨ç‰ˆ-ç„¡æ¨¡æ“¬æ¥­å‹™é‚è¼¯ v2.3.0) (setUpAll)
[7571] ğŸ‰ SIT P2æ¸¬è©¦æ¨¡çµ„ v2.3.0 (ç´”ç²¹èª¿ç”¨ç‰ˆ-ç„¡æ¨¡æ“¬æ¥­å‹™é‚è¼¯) åˆå§‹åŒ–å®Œæˆ
[7571] âœ… ä¿®æ­£ç›®æ¨™ï¼šå®Œå…¨ç§»é™¤æ¨¡æ“¬æ¥­å‹™é‚è¼¯ï¼Œç´”ç²¹èª¿ç”¨PLå±¤å‡½æ•¸
[7571] ğŸ”§ æ ¸å¿ƒæ”¹å–„ï¼šä¸é€²è¡Œä»»ä½•æ¥­å‹™é‚è¼¯åˆ¤æ–·ï¼Œç›´æ¥å›å‚³PLå±¤çµæœ
[7571] ğŸ“‹ æ¸¬è©¦ç¯„åœï¼š25å€‹P2æ¸¬è©¦æ¡ˆä¾‹ï¼ˆç´”ç²¹èª¿ç”¨ï¼‰
[7571] ğŸ¯ è³‡æ–™ä¾†æºï¼š7598 Data warehouse.json
[7571] ğŸš€ é‡é»ï¼šç¬¦åˆ0098è¦ç¯„ç¬¬4-5æ¢ï¼Œç¦æ­¢æ¨¡æ“¬æ¥­å‹™é‚è¼¯
00:00 +0: ... åŸ·è¡ŒSIT P2ç´”ç²¹èª¿ç”¨æ¸¬00:00 +0: SIT P2æ¸¬è©¦ - 7571 (ç´”ç²¹èª¿ç”¨ç‰ˆ-ç„¡æ¨¡æ“¬æ¥­å‹™é‚è¼¯ v2.3.0) åŸ·è¡ŒSIT P2ç´”ç²¹èª¿ç”¨æ¸¬è©¦

[7571] ğŸš€ é–‹å§‹åŸ·è¡Œç´”ç²¹èª¿ç”¨ç‰ˆSIT P2æ¸¬è©¦...
[7571] ğŸš€ é–‹å§‹åŸ·è¡Œç´”ç²¹èª¿ç”¨ç‰ˆSIT P2æ¸¬è©¦ (v2.3.0)...
[7571] ğŸ¯ ä¿®æ­£é‡é»ï¼šå®Œå…¨ç§»é™¤æ¨¡æ“¬æ¥­å‹™é‚è¼¯ï¼Œç´”ç²¹èª¿ç”¨PLå±¤å‡½æ•¸
[7571] ğŸ“‹ æ¸¬è©¦ç­–ç•¥ï¼šç´”ç²¹èª¿ç”¨ï¼Œç„¡ä»»ä½•æ¥­å‹™é‚è¼¯åˆ¤æ–·
[7571] ğŸ—„ï¸ è³‡æ–™ä¾†æºï¼š7598 Data warehouse.json
[7571] ğŸ”„ åŸ·è¡Œé ç®—ç®¡ç†æ¸¬è©¦ (ç´”ç²¹èª¿ç”¨PLå±¤7304)
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-001
[7571] ğŸ“Š éšæ®µä¸€ä¿®æ­£ï¼šé ç®—ç´”ç²¹èª¿ç”¨: TC-001 - ç´”ç²¹èª¿ç”¨ï¼šå»ºç«‹é ç®—æ¸¬è©¦
[7571] âœ… P2æ¸¬è©¦è³‡æ–™è¼‰å…¥å®Œæˆï¼Œä¾†æºï¼š7598 Data warehouse.json
[7571] ğŸ” éšæ®µäºŒä¿®æ­£ï¼šé–‹å§‹æŸ¥è©¢ç”¨æˆ¶ expert.valid@test.lcas.app çš„çœŸå¯¦å¸³æœ¬ID...
[7571] ğŸ“‹ éšæ®µäºŒä¿®æ­£ï¼šé æœŸå¸³æœ¬IDæ ¼å¼: user_expert.valid@test.lcas.app
[7571] âœ… éšæ®µäºŒä¿®æ­£ï¼šç¢ºå®šçœŸå¯¦å¸³æœ¬ID: user_expert.valid@test.lcas.app
[7571] âœ… éšæ®µäºŒä¿®æ­£ï¼šç¦æ­¢7571å¾7582ç›´æ¥å–å¾—è¨»å†Šemail
[7571] âœ… éšæ®µäºŒä¿®æ­£ï¼šä½¿ç”¨ expert.valid@test.lcas.app å–å¾—çœŸå¯¦å¸³æœ¬ID
[7571] ğŸ”„ TC-001çœŸå¯¦ç”¨æˆ¶ä¿®æ­£ï¼šuserId=user_expert_1697363200000, operatorId=user_expert_1697363200000
[7571] ğŸ”„ TC-001çœŸå¯¦å¸³æœ¬ä¿®æ­£ï¼šledgerId=user_expert.valid@test.lcas.app
[7571] ğŸ¯ éšæ®µäºŒç›®æ¨™é”æˆï¼šä½¿ç”¨çœŸå¯¦è¨»å†Šæµç¨‹ç”¢ç”Ÿçš„å¸³æœ¬IDé€²è¡Œbudgetå­é›†åˆæ“ä½œ
[processBudgetCRUD] é–‹å§‹çµ±ä¸€é ç®—CRUDæ“ä½œ - æ“ä½œé¡å‹: create, æ¨¡å¼: Expert
[validateBudgetData] é–‹å§‹è³‡æ–™é©—è­‰ - é©—è­‰é¡å‹: create
[validateBudgetData] é©—è­‰å®Œæˆ - æœ‰æ•ˆ: true, éŒ¯èª¤: 0å€‹, è­¦å‘Š: 0å€‹
[transformBudgetData] é–‹å§‹è³‡æ–™è½‰æ› - è½‰æ›é¡å‹: uiToApi, æ¨¡å¼: Expert
[transformBudgetData] è½‰æ›å®Œæˆ - çµæœæ¬„ä½æ•¸: 8
APLéšæ®µä¸‰é©—è­‰ï¼šledgerId = user_expert.valid@test.lcas.app
APLéšæ®µä¸€èª¿è©¦ï¼šHTTPå›æ‡‰ç‹€æ…‹ = 200
APLéšæ®µä¸€èª¿è©¦ï¼šå›æ‡‰å…§å®¹ = {success: true, data: {id: budget_1762935316898_65q0h70ll, budgetId: budget_1762935316898_65q0h70ll, name: åæœˆç”Ÿæ´»é ç®—, amount: 50000, type: monthly, ledgerId: user_expert.valid@test.lcas.app, firebase_path: ledgers/user_expert.valid@test.lcas.app/budgets/budget_1762935316898_65q0h70ll, collection_path: ledgers/user_expert.valid@test.lcas.app/budgets, architecture: subcollection}, error: null, message: é ç®—å»ºç«‹æˆåŠŸ, metadata: {timestamp: 2025-11-12T08:15:17.312Z, requestId: req_1762935317312_a98sd9, userMode: Expert, apiVersion: v1.0.0, processingTimeMs: 417, modeFeatures: {expertFeatures: {detailedAnalytics: true, advancedOptions: true, performanceMetrics: true, batchOperations: true, exportFeatures: true, dataInsights: true, customReports: true, expertAnalytics: true, professionalTools: true, detailedReports: true, bulkProcessing: true, advancedFiltering: true, customCategories: true, budgetForecasting: true}}}}
APLéšæ®µä¸€ä¿®æ­£ï¼šæˆåŠŸæå–budgetId = budget_1762935316898_65q0h70ll
APLéšæ®µä¸€æœ€çµ‚åˆ¤å®šï¼šsuccess = true
[7571] ğŸ” TC-001 éšæ®µä¸€é™¤éŒ¯ï¼šBudgetOperationResultå…§å®¹ = Instance of 'BudgetOperationResult'
[7571] âš ï¸ TC-001: ç„¡æ³•å¾BudgetOperationResultæå–budgetId
[7571] ğŸ“‹ TC-001éšæ®µäºŒä¿®æ­£ï¼šPLå±¤7304ç´”ç²¹èª¿ç”¨å®Œæˆï¼ˆçœŸå¯¦å¸³æœ¬ï¼‰
[7571] âœ… TC-001 PASS - ç´”ç²¹èª¿ç”¨ï¼šå»ºç«‹é ç®—æ¸¬è©¦
[7571] âœ… æ¸¬è©¦æˆåŠŸï¼ŒPLå±¤å›æ‡‰: Instance of 'BudgetOperationResult'
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-002
[7571] ğŸ“Š éšæ®µä¸€ä¿®æ­£ï¼šé ç®—ç´”ç²¹èª¿ç”¨: TC-002 - ç´”ç²¹èª¿ç”¨ï¼šæŸ¥è©¢é ç®—åˆ—è¡¨æ¸¬è©¦
[7571] âš ï¸ TC-002: æŸ¥è©¢é ç®—å¤±æ•—ï¼Œç¼ºå°‘å‹•æ…‹ç”Ÿæˆçš„é ç®—ID
[7571] ğŸ’¡ æç¤ºï¼šéœ€è¦å…ˆåŸ·è¡ŒTC-001å‰µå»ºé ç®—
[7571] âŒ TC-002 FAIL - ç´”ç²¹èª¿ç”¨ï¼šæŸ¥è©¢é ç®—åˆ—è¡¨æ¸¬è©¦
[7571] âŒ æ¸¬è©¦å¤±æ•—è©³æƒ…:
[7571]    PLå±¤å›æ‡‰: {error: Missing dynamic budget ID, success: false}
[7571]    é—œéµæ­¥é©Ÿ:
[7571]      â€¢ missing_budget_id: Failed to query budget: Missing dynamic budget ID.
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-003
[7571] ğŸ“Š éšæ®µä¸€ä¿®æ­£ï¼šé ç®—ç´”ç²¹èª¿ç”¨: TC-003 - ç´”ç²¹èª¿ç”¨ï¼šæ›´æ–°é ç®—æ¸¬è©¦
[7571] âš ï¸ TC-003: æ›´æ–°é ç®—å¤±æ•—ï¼Œç¼ºå°‘å‹•æ…‹ç”Ÿæˆçš„é ç®—ID
[7571] ğŸ’¡ æç¤ºï¼šéœ€è¦å…ˆåŸ·è¡ŒTC-001å‰µå»ºé ç®—
[7571] âŒ TC-003 FAIL - ç´”ç²¹èª¿ç”¨ï¼šæ›´æ–°é ç®—æ¸¬è©¦
[7571] âŒ æ¸¬è©¦å¤±æ•—è©³æƒ…:
[7571]    PLå±¤å›æ‡‰: {error: Missing dynamic budget ID, success: false}
[7571]    é—œéµæ­¥é©Ÿ:
[7571]      â€¢ missing_budget_id: Failed to update budget: Missing dynamic budget ID.
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-004
[7571] ğŸ“Š éšæ®µä¸€ä¿®æ­£ï¼šé ç®—ç´”ç²¹èª¿ç”¨: TC-004 - ç´”ç²¹èª¿ç”¨ï¼šåˆªé™¤é ç®—æ¸¬è©¦
[7571] âš ï¸ TC-004: åˆªé™¤é ç®—å¤±æ•—ï¼Œç¼ºå°‘å‹•æ…‹ç”Ÿæˆçš„é ç®—ID
[7571] ğŸ’¡ æç¤ºï¼šéœ€è¦å…ˆåŸ·è¡ŒTC-001å‰µå»ºé ç®—
[7571] âŒ TC-004 FAIL - ç´”ç²¹èª¿ç”¨ï¼šåˆªé™¤é ç®—æ¸¬è©¦
[7571] âŒ æ¸¬è©¦å¤±æ•—è©³æƒ…:
[7571]    PLå±¤å›æ‡‰: {error: Missing dynamic budget ID, success: false}
[7571]    é—œéµæ­¥é©Ÿ:
[7571]      â€¢ missing_budget_id: Failed to delete budget: Missing dynamic budget ID.
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-005
[7571] ğŸ“Š éšæ®µä¸€ä¿®æ­£ï¼šé ç®—ç´”ç²¹èª¿ç”¨: TC-005 - ç´”ç²¹èª¿ç”¨ï¼šé ç®—åŸ·è¡Œè¨ˆç®—æ¸¬è©¦
[7571] âš ï¸ TC-005: æ¸¬è©¦è³‡æ–™ä¸­ç¼ºå°‘budget_execution_trackingæˆ–budgetIdç‚ºç©º
[7571] âŒ TC-005 FAIL - ç´”ç²¹èª¿ç”¨ï¼šé ç®—åŸ·è¡Œè¨ˆç®—æ¸¬è©¦
[7571] âŒ æ¸¬è©¦å¤±æ•—è©³æƒ…:
[7571]    PLå±¤å›æ‡‰: {error: Missing budget_execution_tracking data or null budgetId, success: false}
[7571]    é—œéµæ­¥é©Ÿ:
[7571]      â€¢ missing_execution_data: Missing budget_execution_tracking data or null budgetId.
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-006
[7571] ğŸ“Š éšæ®µä¸€ä¿®æ­£ï¼šé ç®—ç´”ç²¹èª¿ç”¨: TC-006 - ç´”ç²¹èª¿ç”¨ï¼šé ç®—è­¦ç¤ºæ¸¬è©¦
[7571] âš ï¸ TC-006: æ¸¬è©¦è³‡æ–™ä¸­ç¼ºå°‘budget_execution_trackingæˆ–budgetIdç‚ºç©º
[7571] âŒ TC-006 FAIL - ç´”ç²¹èª¿ç”¨ï¼šé ç®—è­¦ç¤ºæ¸¬è©¦
[7571] âŒ æ¸¬è©¦å¤±æ•—è©³æƒ…:
[7571]    PLå±¤å›æ‡‰: {error: Missing budget_execution_tracking data or null budgetId, success: false}
[7571]    é—œéµæ­¥é©Ÿ:
[7571]      â€¢ missing_execution_data: Missing budget_execution_tracking data or null budgetId.
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-007
[7571] ğŸ“Š éšæ®µä¸€ä¿®æ­£ï¼šé ç®—ç´”ç²¹èª¿ç”¨: TC-007 - ç´”ç²¹èª¿ç”¨ï¼šé ç®—è³‡æ–™é©—è­‰æ¸¬è©¦
[validateBudgetData] é–‹å§‹è³‡æ–™é©—è­‰ - é©—è­‰é¡å‹: create
[validateBudgetData] é©—è­‰å®Œæˆ - æœ‰æ•ˆ: false, éŒ¯èª¤: 2å€‹, è­¦å‘Š: 0å€‹
[7571] ğŸ“‹ TC-007ç´”ç²¹èª¿ç”¨PLå±¤7304å®Œæˆ
[7571] âœ… TC-007 PASS - ç´”ç²¹èª¿ç”¨ï¼šé ç®—è³‡æ–™é©—è­‰æ¸¬è©¦
[7571] âœ… æ¸¬è©¦æˆåŠŸï¼ŒPLå±¤å›æ‡‰: Instance of 'ValidationResult'
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-008
[7571] ğŸ“Š éšæ®µä¸€ä¿®æ­£ï¼šé ç®—ç´”ç²¹èª¿ç”¨: TC-008 - ç´”ç²¹èª¿ç”¨ï¼šé ç®—æ¨¡å¼å·®ç•°åŒ–æ¸¬è©¦
[transformBudgetData] é–‹å§‹è³‡æ–™è½‰æ› - è½‰æ›é¡å‹: apiToUi, æ¨¡å¼: Expert
[transformBudgetData] è½‰æ›å®Œæˆ - çµæœæ¬„ä½æ•¸: 10
[transformBudgetData] é–‹å§‹è³‡æ–™è½‰æ› - è½‰æ›é¡å‹: apiToUi, æ¨¡å¼: Inertial
[transformBudgetData] è½‰æ›å®Œæˆ - çµæœæ¬„ä½æ•¸: 7
[transformBudgetData] é–‹å§‹è³‡æ–™è½‰æ› - è½‰æ›é¡å‹: apiToUi, æ¨¡å¼: Cultivation
[transformBudgetData] è½‰æ›å®Œæˆ - çµæœæ¬„ä½æ•¸: 9
[transformBudgetData] é–‹å§‹è³‡æ–™è½‰æ› - è½‰æ›é¡å‹: apiToUi, æ¨¡å¼: Guiding
[transformBudgetData] è½‰æ›å®Œæˆ - çµæœæ¬„ä½æ•¸: 9
[7571] ğŸ“‹ TC-008ç´”ç²¹èª¿ç”¨PLå±¤7304å®Œæˆï¼ˆå››æ¨¡å¼æ¸¬è©¦ï¼‰
[7571] âœ… TC-008 PASS - ç´”ç²¹èª¿ç”¨ï¼šé ç®—æ¨¡å¼å·®ç•°åŒ–æ¸¬è©¦
[7571] âœ… æ¸¬è©¦æˆåŠŸï¼ŒPLå±¤å›æ‡‰: {expert: {id: null, name: åæœˆç”Ÿæ´»é ç®—, amount: 50000.0, usedAmount: 0.0, currency: TWD, type: monthly, status: active, details: {}, analytics: {}, metadata: {}}, inertial: {id: null, name: åæœˆç”Ÿæ´»é ç®—, amount: 50000.0, usedAmount: 0.0, currency: TWD, type: monthly, status: active}, cultivation: {id: null, name: åæœˆç”Ÿæ´»é ç®—, amount: 50000.0, usedAmount: 0.0, currency: TWD, type: monthly, status: active, progress: 0.0, achievement: {level: safe, message: é ç®—ä½¿ç”¨åœ¨å®‰å…¨ç¯„åœå…§, icon: âœ…, color: #45B7D1}}, guiding: {id: null, name: åæœˆç”Ÿæ´»é ç®—, amount: 50000.0, usedAmount: 0.0, currency: TWD, type: monthly, status: active, simpleStatus: å……è¶³, nextAction: æŒ‰è¨ˆç•«åŸ·è¡Œ}}
[7571] ğŸ‰ é ç®—ç®¡ç†ç´”ç²¹èª¿ç”¨å®Œæˆ
[7571] ğŸ”„ åŸ·è¡Œå¸³æœ¬å”ä½œæ¸¬è©¦ (ç´”ç²¹èª¿ç”¨PLå±¤7303)
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-009
[7571] ğŸ¤ å”ä½œç´”ç²¹èª¿ç”¨: TC-009 - ç´”ç²¹èª¿ç”¨ï¼šå»ºç«‹å”ä½œå¸³æœ¬æ¸¬è©¦
[7571] ğŸ” TC-009 è¼‰å…¥æ¸¬è©¦è³‡æ–™å®Œæˆ
[7571] ğŸ“Š æˆåŠŸæ¡ˆä¾‹æ•¸é‡: 3
[7571] ğŸ“Š å¤±æ•—æ¡ˆä¾‹æ•¸é‡: 2
[7571] ğŸ¯ TC-009å”ä½œå¸³æœ¬å»ºç«‹æ¸¬è©¦é–‹å§‹ - æ¸¬è©¦çœŸå¯¦CMæ¨¡çµ„è·¯å¾‘
[7571] ğŸ“§ å–å¾—å”ä½œæ¸¬è©¦ç”¨æˆ¶email: collaboration.test@test.lcas.app
[7571] ğŸ“‹ å”ä½œå¸³æœ¬çœŸå¯¦è³‡æ–™æº–å‚™å®Œæˆ - email: collaboration.test@test.lcas.app
[7571] ğŸ”„ èª¿ç”¨PLå±¤7303çœŸå¯¦è·¯å¾‘ï¼šemailâ†’userIdè§£æâ†’APLâ†’ASLâ†’CM_createSharedLedger()
[7303] ğŸš€ TC-009éšæ®µä¸€ï¼šé–‹å§‹å»ºç«‹å¸³æœ¬ï¼Œæª¢æŸ¥å¸³æœ¬é¡å‹
[7303] ğŸ” TC-009éšæ®µä¸€ï¼šå¸³æœ¬é¡å‹=shared, å”ä½œé¡å‹=shared, æ˜¯å¦ç‚ºå”ä½œå¸³æœ¬=true
[7303] ğŸ¤ TC-009éšæ®µä¸€ï¼šå”ä½œå¸³æœ¬ç¢ºèªï¼Œå¼·åˆ¶è·¯ç”±åˆ°CMæ¨¡çµ„
[7303] ğŸ¯ å¼·åˆ¶è·¯å¾‘ï¼š7303 â†’ APL â†’ ASL â†’ CM_createSharedLedger() â†’ Firebase collaborations
[7303] ğŸ¤ TC-009éšæ®µä¸€ï¼šé–‹å§‹å‰µå»ºå”ä½œå¸³æœ¬
[7303] ğŸ¯ éšæ®µä¸€å¼·åŒ–ï¼šç¢ºä¿è·¯å¾‘ 7303 â†’ APL â†’ ASL â†’ CM_createSharedLedger()
[7303] ğŸ”§ éšæ®µä¸€è·¯ç”±æ¨™è¨˜ï¼šisCollaborative=true, requiresCMModule=true, routeToCM=true
APLéšæ®µä¸€èª¿è©¦ï¼šHTTPå›æ‡‰ç‹€æ…‹ = 200
APLéšæ®µä¸€èª¿è©¦ï¼šå›æ‡‰å…§å®¹ = {success: true, data: {success: true, ledgerId: collaboration_1762935317358_qvmjr8og1, memberCount: 1, collaborationType: shared, message: éšæ®µäºŒï¼šå”ä½œå¸³æœ¬å»ºç«‹æˆåŠŸï¼Œå®Œå…¨ç¬¦åˆFSè¦ç¯„}, error: null, message: éšæ®µäºŒï¼šå”ä½œå¸³æœ¬å»ºç«‹æˆåŠŸï¼Œå®Œå…¨ç¬¦åˆFSè¦ç¯„, metadata: {timestamp: 2025-11-12T08:15:18.002Z, requestId: req_1762935318002_xgt01s, userMode: Expert, apiVersion: v1.0.0, processingTimeMs: 646, modeFeatures: {expertFeatures: {detailedAnalytics: true, advancedOptions: true, performanceMetrics: true, batchOperations: true, exportFeatures: true, dataInsights: true, customReports: true, expertAnalytics: true, professionalTools: true, detailedReports: true, bulkProcessing: true, advancedFiltering: true, customCategories: true, budgetForecasting: true}}}}
APLéšæ®µä¸€æœ€çµ‚åˆ¤å®šï¼šsuccess = true
[7303] âœ… TC-009éšæ®µä¸€ï¼šå”ä½œå¸³æœ¬å‰µå»ºæˆåŠŸï¼ŒID: 
[7303] ğŸ¯ éšæ®µä¸€é©—è­‰ï¼šç¢ºèªå·²é€šéCMæ¨¡çµ„è™•ç†å”ä½œåŠŸèƒ½
[7303] âš ï¸ éšæ®µä¸€è­¦å‘Šï¼šå”ä½œå¸³æœ¬é¡å‹å¯èƒ½æœªæ­£ç¢ºè¨­å®š
[7571] âœ… TC-009ï¼šå”ä½œå¸³æœ¬çœŸå¯¦CMæ¨¡çµ„è·¯å¾‘æ¸¬è©¦æˆåŠŸ
[7571] ğŸ“ å¸³æœ¬ID: 
[7571] ğŸ”„ éšæ®µä¸€ä¿®æ­£ï¼šå·²å„²å­˜å‹•æ…‹å”ä½œå¸³æœ¬ID: 
[7571] ğŸ‘¤ æ“æœ‰è€…ID: 
[7571] ğŸ“§ æ¸¬è©¦email: collaboration.test@test.lcas.app
[7571] ğŸ¯ ç¢ºèªè·¯å¾‘ï¼š7571 â†’ 7303 â†’ emailè§£æ â†’ APL â†’ ASL â†’ CMæ¨¡çµ„ â†’ Firebase collaborations
[7571] ğŸ“‹ TC-009å®Œæˆ - çœŸå¯¦CMæ¨¡çµ„è·¯å¾‘æ¸¬è©¦å®Œæˆ
[7571] âœ… TC-009 PASS - ç´”ç²¹èª¿ç”¨ï¼šå»ºç«‹å”ä½œå¸³æœ¬æ¸¬è©¦
[7571] âœ… æ¸¬è©¦æˆåŠŸï¼ŒPLå±¤å›æ‡‰: {success: true, ledger: {id: , name: , type: , ownerId: }, collaboration_initialized: true, cm_module_tested: true, email_to_userid_resolved: true, real_cm_path_used: true, test_email: collaboration.test@test.lcas.app, message: TC-009ï¼šå”ä½œå¸³æœ¬çœŸå¯¦CMæ¨¡çµ„è·¯å¾‘æ¸¬è©¦æˆåŠŸ}
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-010
[7571] ğŸ¤ å”ä½œç´”ç²¹èª¿ç”¨: TC-010 - ç´”ç²¹èª¿ç”¨ï¼šæŸ¥è©¢å¸³æœ¬åˆ—è¡¨æ¸¬è©¦
[7571] ğŸ” TC-010 è¼‰å…¥æ¸¬è©¦è³‡æ–™å®Œæˆ
[7571] ğŸ“Š æˆåŠŸæ¡ˆä¾‹æ•¸é‡: 3
[7571] ğŸ“Š å¤±æ•—æ¡ˆä¾‹æ•¸é‡: 2
[7571] ğŸ” éšæ®µä¸€ä¿®æ­£ï¼šTC-010ä½¿ç”¨å‹•æ…‹å”ä½œå¸³æœ¬ID: 
APLéšæ®µä¸€èª¿è©¦ï¼šHTTPå›æ‡‰ç‹€æ…‹ = 200
APLéšæ®µä¸€èª¿è©¦ï¼šå›æ‡‰å…§å®¹ = {success: true, data: [], error: null, message: å¸³æœ¬åˆ—è¡¨å–å¾—æˆåŠŸ, metadata: {timestamp: 2025-11-12T08:15:18.185Z, requestId: req_1762935318185_5vgu1p, userMode: Expert, apiVersion: v1.0.0, processingTimeMs: 171, modeFeatures: {expertFeatures: {detailedAnalytics: true, advancedOptions: true, performanceMetrics: true, batchOperations: true, exportFeatures: true, dataInsights: true, customReports: true, expertAnalytics: true, professionalTools: true, detailedReports: true, bulkProcessing: true, advancedFiltering: true, customCategories: true, budgetForecasting: true}}}}
[7571] âŒ TC-010 èª¿ç”¨ç•°å¸¸: CollaborationError: æœªçŸ¥éŒ¯èª¤ (Code: UNKNOWN_ERROR)
[7571] ğŸ“š å †ç–Šè¿½è¹¤: #0      LedgerCollaborationManager.processLedgerList (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:466:9)
<asynchronous suspension>
[7571] âŒ TC-010 FAIL - ç´”ç²¹èª¿ç”¨ï¼šæŸ¥è©¢å¸³æœ¬åˆ—è¡¨æ¸¬è©¦
[7571] âŒ æ¸¬è©¦å¤±æ•—è©³æƒ…:
[7571]    PLå±¤å›æ‡‰: {error: TC-010 processLedgerList failed: CollaborationError: æœªçŸ¥éŒ¯èª¤ (Code: UNKNOWN_ERROR), success: false}
[7571]    é—œéµæ­¥é©Ÿ:
[7571]      â€¢ prepare_query_ledger_list: Using dynamic collaboration ID: 
[7571]      â€¢ function_call_error: LedgerCollaborationManager.processLedgerList threw exception: CollaborationError: æœªçŸ¥éŒ¯èª¤ (Code: UNKNOWN_ERROR)
[7571]      â€¢ stack_trace: #0      LedgerCollaborationManager.processLedgerList (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:466:9) | <asynchronous suspension> | #1      SITP2TestController._executeCollaborationPureCall (file:///home/runner/workspace/75.%20Flutter_Test_code_PL/7571.%20SIT_P2.dart:895:26)
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-011
[7571] ğŸ¤ å”ä½œç´”ç²¹èª¿ç”¨: TC-011 - ç´”ç²¹èª¿ç”¨ï¼šæ›´æ–°å¸³æœ¬æ¸¬è©¦
[7571] ğŸ” TC-011 è¼‰å…¥æ¸¬è©¦è³‡æ–™å®Œæˆ
[7571] ğŸ“Š æˆåŠŸæ¡ˆä¾‹æ•¸é‡: 3
[7571] ğŸ“Š å¤±æ•—æ¡ˆä¾‹æ•¸é‡: 2
[7571] ğŸ” éšæ®µä¸€ä¿®æ­£ï¼šTC-011ä½¿ç”¨å‹•æ…‹å”ä½œå¸³æœ¬ID: 
[7571] âŒ TC-011 èª¿ç”¨ç•°å¸¸: CollaborationError: å¸³æœ¬æ›´æ–°è³‡æ–™é©—è­‰å¤±æ•—: å¸³æœ¬é¡å‹ç‚ºå¿…å¡«é …ç›®ä¸”å¿…é ˆç‚ºæœ‰æ•ˆå­—ä¸² (Code: VALIDATION_ERROR)
[7571] ğŸ“š å †ç–Šè¿½è¹¤: #0      LedgerCollaborationManager.processLedgerUpdate (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:632:9)
#1      LedgerCollaborationManager.updateLedger (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:945:13)
[7571] âŒ TC-011 FAIL - ç´”ç²¹èª¿ç”¨ï¼šæ›´æ–°å¸³æœ¬æ¸¬è©¦
[7571] âŒ æ¸¬è©¦å¤±æ•—è©³æƒ…:
[7571]    PLå±¤å›æ‡‰: {error: TC-011 updateLedger failed: CollaborationError: å¸³æœ¬æ›´æ–°è³‡æ–™é©—è­‰å¤±æ•—: å¸³æœ¬é¡å‹ç‚ºå¿…å¡«é …ç›®ä¸”å¿…é ˆç‚ºæœ‰æ•ˆå­—ä¸² (Code: VALIDATION_ERROR), success: false}
[7571]    é—œéµæ­¥é©Ÿ:
[7571]      â€¢ prepare_update_ledger_info: Using dynamic collaboration ID: 
[7571]      â€¢ function_call_error: LedgerCollaborationManager.updateLedger threw exception: CollaborationError: å¸³æœ¬æ›´æ–°è³‡æ–™é©—è­‰å¤±æ•—: å¸³æœ¬é¡å‹ç‚ºå¿…å¡«é …ç›®ä¸”å¿…é ˆç‚ºæœ‰æ•ˆå­—ä¸² (Code: VALIDATION_ERROR)
[7571]      â€¢ stack_trace: #0      LedgerCollaborationManager.processLedgerUpdate (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:632:9) | #1      LedgerCollaborationManager.updateLedger (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:945:13) | #2      SITP2TestController._executeCollaborationPureCall (file:///home/runner/workspace/75.%20Flutter_Test_code_PL/7571.%20SIT_P2.dart:924:48)
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-012
[7571] ğŸ¤ å”ä½œç´”ç²¹èª¿ç”¨: TC-012 - ç´”ç²¹èª¿ç”¨ï¼šåˆªé™¤å¸³æœ¬æ¸¬è©¦
[7571] ğŸ” TC-012 è¼‰å…¥æ¸¬è©¦è³‡æ–™å®Œæˆ
[7571] ğŸ“Š æˆåŠŸæ¡ˆä¾‹æ•¸é‡: 3
[7571] ğŸ“Š å¤±æ•—æ¡ˆä¾‹æ•¸é‡: 2
[7571] ğŸ” éšæ®µä¸€ä¿®æ­£ï¼šTC-012ä½¿ç”¨å‹•æ…‹å”ä½œå¸³æœ¬ID: 
APLéšæ®µä¸€èª¿è©¦ï¼šHTTPå›æ‡‰ç‹€æ…‹ = 404
APLéšæ®µä¸€èª¿è©¦ï¼šå›æ‡‰å…§å®¹ = {success: false, data: null, error: {code: ENDPOINT_NOT_FOUND, message: APIç«¯é»ä¸å­˜åœ¨: DELETE /api/v1/ledgers/, details: null}, message: APIç«¯é»ä¸å­˜åœ¨: DELETE /api/v1/ledgers/, metadata: {timestamp: 2025-11-12T08:15:18.202Z, requestId: req_1762935318202_4r0evc, userMode: Expert, apiVersion: v1.0.0, processingTimeMs: 1, modeFeatures: {expertFeatures: {detailedAnalytics: true, advancedOptions: true, performanceMetrics: true, batchOperations: true, exportFeatures: true, dataInsights: true, customReports: true, expertAnalytics: true, professionalTools: true, detailedReports: true, bulkProcessing: true, advancedFiltering: true, customCategories: true, budgetForecasting: true}}}}
APLéšæ®µä¸€æœ€çµ‚åˆ¤å®šï¼šsuccess = false
APLéšæ®µä¸€éŒ¯èª¤ï¼šAPIç«¯é»ä¸å­˜åœ¨: DELETE /api/v1/ledgers/
[7571] âŒ TC-012 èª¿ç”¨ç•°å¸¸: CollaborationError: APIç«¯é»ä¸å­˜åœ¨: DELETE /api/v1/ledgers/ (Code: ENDPOINT_NOT_FOUND)
[7571] ğŸ“š å †ç–Šè¿½è¹¤: #0      LedgerCollaborationManager.processLedgerDeletion (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:669:9)
<asynchronous suspension>
[7571] âŒ TC-012 FAIL - ç´”ç²¹èª¿ç”¨ï¼šåˆªé™¤å¸³æœ¬æ¸¬è©¦
[7571] âŒ æ¸¬è©¦å¤±æ•—è©³æƒ…:
[7571]    PLå±¤å›æ‡‰: {error: TC-012 processLedgerDeletion failed: CollaborationError: APIç«¯é»ä¸å­˜åœ¨: DELETE /api/v1/ledgers/ (Code: ENDPOINT_NOT_FOUND), success: false}
[7571]    é—œéµæ­¥é©Ÿ:
[7571]      â€¢ prepare_delete_ledger: Using dynamic collaboration ID: 
[7571]      â€¢ function_call_error: LedgerCollaborationManager.processLedgerDeletion threw exception: CollaborationError: APIç«¯é»ä¸å­˜åœ¨: DELETE /api/v1/ledgers/ (Code: ENDPOINT_NOT_FOUND)
[7571]      â€¢ stack_trace: #0      LedgerCollaborationManager.processLedgerDeletion (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:669:9) | <asynchronous suspension> | #1      SITP2TestController._executeCollaborationPureCall (file:///home/runner/workspace/75.%20Flutter_Test_code_PL/7571.%20SIT_P2.dart:951:15)
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-013
[7571] ğŸ¤ å”ä½œç´”ç²¹èª¿ç”¨: TC-013 - ç´”ç²¹èª¿ç”¨ï¼šæŸ¥è©¢å”ä½œè€…åˆ—è¡¨æ¸¬è©¦
[7571] ğŸ” TC-013 è¼‰å…¥æ¸¬è©¦è³‡æ–™å®Œæˆ
[7571] ğŸ“Š æˆåŠŸæ¡ˆä¾‹æ•¸é‡: 3
[7571] ğŸ“Š å¤±æ•—æ¡ˆä¾‹æ•¸é‡: 2
[7571] ğŸ” éšæ®µä¸€ä¿®æ­£ï¼šTC-013ä½¿ç”¨å‹•æ…‹å”ä½œå¸³æœ¬ID: 
[7571] âŒ TC-013 èª¿ç”¨ç•°å¸¸: CollaborationError: å¸³æœ¬IDä¸èƒ½ç‚ºç©º (Code: NULL_LEDGER_ID)
[7571] ğŸ“š å †ç–Šè¿½è¹¤: #0      LedgerCollaborationManager.processCollaboratorList (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:971:9)
#1      SITP2TestController._executeCollaborationPureCall (file:///home/runner/workspace/75.%20Flutter_Test_code_PL/7571.%20SIT_P2.dart:978:59)
[7571] âŒ TC-013 FAIL - ç´”ç²¹èª¿ç”¨ï¼šæŸ¥è©¢å”ä½œè€…åˆ—è¡¨æ¸¬è©¦
[7571] âŒ æ¸¬è©¦å¤±æ•—è©³æƒ…:
[7571]    PLå±¤å›æ‡‰: {error: TC-013 processCollaboratorList failed: CollaborationError: å¸³æœ¬IDä¸èƒ½ç‚ºç©º (Code: NULL_LEDGER_ID), success: false}
[7571]    é—œéµæ­¥é©Ÿ:
[7571]      â€¢ prepare_query_collaborators: Using dynamic collaboration ID: 
[7571]      â€¢ function_call_error: LedgerCollaborationManager.processCollaboratorList threw exception: CollaborationError: å¸³æœ¬IDä¸èƒ½ç‚ºç©º (Code: NULL_LEDGER_ID)
[7571]      â€¢ stack_trace: #0      LedgerCollaborationManager.processCollaboratorList (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:971:9) | #1      SITP2TestController._executeCollaborationPureCall (file:///home/runner/workspace/75.%20Flutter_Test_code_PL/7571.%20SIT_P2.dart:978:59) | <asynchronous suspension>
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-014
[7571] ğŸ¤ å”ä½œç´”ç²¹èª¿ç”¨: TC-014 - ç´”ç²¹èª¿ç”¨ï¼šé‚€è«‹å”ä½œè€…æ¸¬è©¦
[7571] ğŸ” TC-014 è¼‰å…¥æ¸¬è©¦è³‡æ–™å®Œæˆ
[7571] ğŸ“Š æˆåŠŸæ¡ˆä¾‹æ•¸é‡: 3
[7571] ğŸ“Š å¤±æ•—æ¡ˆä¾‹æ•¸é‡: 2
[7571] ğŸ” éšæ®µäºŒä¿®æ­£ï¼šTC-014ä½¿ç”¨å‹•æ…‹å”ä½œå¸³æœ¬ID: 
[7571] ğŸ“§ éšæ®µäºŒä¿®æ­£ï¼šå¾7598è¼‰å…¥email: collaboration.test@test.lcas.app
[7571] ğŸ¯ éšæ®µäºŒä¿®æ­£ï¼šç¢ºä¿ledgerIdå’Œemailåƒæ•¸å®Œæ•´å‚³é
APLéšæ®µä¸€èª¿è©¦ï¼šHTTPå›æ‡‰ç‹€æ…‹ = 404
APLéšæ®µä¸€èª¿è©¦ï¼šå›æ‡‰å…§å®¹ = {success: false, data: null, error: {code: ENDPOINT_NOT_FOUND, message: APIç«¯é»ä¸å­˜åœ¨: POST /api/v1/ledgers//invitations, details: null}, message: APIç«¯é»ä¸å­˜åœ¨: POST /api/v1/ledgers//invitations, metadata: {timestamp: 2025-11-12T08:15:18.212Z, requestId: req_1762935318212_cix0s5, userMode: Expert, apiVersion: v1.0.0, processingTimeMs: 0, modeFeatures: {expertFeatures: {detailedAnalytics: true, advancedOptions: true, performanceMetrics: true, batchOperations: true, exportFeatures: true, dataInsights: true, customReports: true, expertAnalytics: true, professionalTools: true, detailedReports: true, bulkProcessing: true, advancedFiltering: true, customCategories: true, budgetForecasting: true}}}}
APLéšæ®µä¸€æœ€çµ‚åˆ¤å®šï¼šsuccess = false
APLéšæ®µä¸€éŒ¯èª¤ï¼šAPIç«¯é»ä¸å­˜åœ¨: POST /api/v1/ledgers//invitations
[7571] âŒ TC-014 èª¿ç”¨ç•°å¸¸: CollaborationError: APIç«¯é»ä¸å­˜åœ¨: POST /api/v1/ledgers//invitations (Code: ENDPOINT_NOT_FOUND)
[7571] ğŸ“š å †ç–Šè¿½è¹¤: #0      LedgerCollaborationManager.processCollaboratorInvitation (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:1056:9)
<asynchronous suspension>
[7571] âŒ TC-014 FAIL - ç´”ç²¹èª¿ç”¨ï¼šé‚€è«‹å”ä½œè€…æ¸¬è©¦
[7571] âŒ æ¸¬è©¦å¤±æ•—è©³æƒ…:
[7571]    PLå±¤å›æ‡‰: {error: TC-014 inviteCollaborators failed: CollaborationError: APIç«¯é»ä¸å­˜åœ¨: POST /api/v1/ledgers//invitations (Code: ENDPOINT_NOT_FOUND), success: false}
[7571]    é—œéµæ­¥é©Ÿ:
[7571]      â€¢ load_collaboration_test_user: Loaded collaboration test user from 7598: collaboration.test@test.lcas.app
[7571]      â€¢ prepare_invite_collaborator: Using dynamic collaboration ID:  and email: collaboration.test@test.lcas.app
[7571]      â€¢ function_call_error: LedgerCollaborationManager.inviteCollaborators threw exception: CollaborationError: APIç«¯é»ä¸å­˜åœ¨: POST /api/v1/ledgers//invitations (Code: ENDPOINT_NOT_FOUND)
[7571]      â€¢ stack_trace: #0      LedgerCollaborationManager.processCollaboratorInvitation (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:1056:9) | <asynchronous suspension> | #1      LedgerCollaborationManager.inviteCollaborators (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:1217:22)
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-015
[7571] ğŸ¤ å”ä½œç´”ç²¹èª¿ç”¨: TC-015 - ç´”ç²¹èª¿ç”¨ï¼šæ›´æ–°å”ä½œè€…æ¬Šé™æ¸¬è©¦
[7571] ğŸ” TC-015 è¼‰å…¥æ¸¬è©¦è³‡æ–™å®Œæˆ
[7571] ğŸ“Š æˆåŠŸæ¡ˆä¾‹æ•¸é‡: 3
[7571] ğŸ“Š å¤±æ•—æ¡ˆä¾‹æ•¸é‡: 2
[7571] ğŸ” éšæ®µä¸€ä¿®æ­£ï¼šTC-015ä½¿ç”¨å‹•æ…‹å”ä½œå¸³æœ¬ID: 
æ¬Šé™æ›´æ–°å¯©è¨ˆï¼šç”¨æˆ¶ user_collaboration_test_1697363500000 åœ¨å¸³æœ¬  çš„æ¬Šé™å³å°‡å¾èˆŠæ¬Šé™æ›´æ–°ç‚º admin
[7571] âŒ TC-015 èª¿ç”¨ç•°å¸¸: CollaborationError: æ¬Šé™è®Šæ›´é©—è­‰å¤±æ•—: å¸³æœ¬IDä¸èƒ½ç‚ºç©º (Code: PERMISSION_VALIDATION_ERROR)
[7571] ğŸ“š å †ç–Šè¿½è¹¤: #0      LedgerCollaborationManager.processCollaboratorPermissionUpdate (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:1088:9)
#1      LedgerCollaborationManager.updateCollaboratorPermissions (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:1254:13)
[7571] âŒ TC-015 FAIL - ç´”ç²¹èª¿ç”¨ï¼šæ›´æ–°å”ä½œè€…æ¬Šé™æ¸¬è©¦
[7571] âŒ æ¸¬è©¦å¤±æ•—è©³æƒ…:
[7571]    PLå±¤å›æ‡‰: {error: TC-015 updateCollaboratorPermissions failed: CollaborationError: æ¬Šé™è®Šæ›´é©—è­‰å¤±æ•—: å¸³æœ¬IDä¸èƒ½ç‚ºç©º (Code: PERMISSION_VALIDATION_ERROR), success: false}
[7571]    é—œéµæ­¥é©Ÿ:
[7571]      â€¢ prepare_update_permissions: Using dynamic collaboration ID: , collaboratorId: user_collaboration_test_1697363500000, role: admin
[7571]      â€¢ function_call_error: LedgerCollaborationManager.updateCollaboratorPermissions threw exception: CollaborationError: æ¬Šé™è®Šæ›´é©—è­‰å¤±æ•—: å¸³æœ¬IDä¸èƒ½ç‚ºç©º (Code: PERMISSION_VALIDATION_ERROR)
[7571]      â€¢ stack_trace: #0      LedgerCollaborationManager.processCollaboratorPermissionUpdate (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:1088:9) | #1      LedgerCollaborationManager.updateCollaboratorPermissions (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:1254:13) | #2      SITP2TestController._executeCollaborationPureCall (file:///home/runner/workspace/75.%20Flutter_Test_code_PL/7571.%20SIT_P2.dart:1064:48)
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-016
[7571] ğŸ¤ å”ä½œç´”ç²¹èª¿ç”¨: TC-016 - ç´”ç²¹èª¿ç”¨ï¼šç§»é™¤å”ä½œè€…æ¸¬è©¦
[7571] ğŸ” TC-016 è¼‰å…¥æ¸¬è©¦è³‡æ–™å®Œæˆ
[7571] ğŸ“Š æˆåŠŸæ¡ˆä¾‹æ•¸é‡: 3
[7571] ğŸ“Š å¤±æ•—æ¡ˆä¾‹æ•¸é‡: 2
[7571] ğŸ” éšæ®µä¸€ä¿®æ­£ï¼šTC-016ä½¿ç”¨å‹•æ…‹å”ä½œå¸³æœ¬ID: 
æº–å‚™æ¸…ç†ç”¨æˆ¶ user_collaboration_test_1697363500000 åœ¨å¸³æœ¬  ä¸­çš„ç›¸é—œè³‡æ–™
APLéšæ®µä¸€èª¿è©¦ï¼šHTTPå›æ‡‰ç‹€æ…‹ = 404
APLéšæ®µä¸€èª¿è©¦ï¼šå›æ‡‰å…§å®¹ = {success: false, data: null, error: {code: ENDPOINT_NOT_FOUND, message: APIç«¯é»ä¸å­˜åœ¨: DELETE /api/v1/ledgers//collaborators/user_collaboration_test_1697363500000, details: null}, message: APIç«¯é»ä¸å­˜åœ¨: DELETE /api/v1/ledgers//collaborators/user_collaboration_test_1697363500000, metadata: {timestamp: 2025-11-12T08:15:18.218Z, requestId: req_1762935318218_ur8f02, userMode: Expert, apiVersion: v1.0.0, processingTimeMs: 0, modeFeatures: {expertFeatures: {detailedAnalytics: true, advancedOptions: true, performanceMetrics: true, batchOperations: true, exportFeatures: true, dataInsights: true, customReports: true, expertAnalytics: true, professionalTools: true, detailedReports: true, bulkProcessing: true, advancedFiltering: true, customCategories: true, budgetForecasting: true}}}}
APLéšæ®µä¸€æœ€çµ‚åˆ¤å®šï¼šsuccess = false
APLéšæ®µä¸€éŒ¯èª¤ï¼šAPIç«¯é»ä¸å­˜åœ¨: DELETE /api/v1/ledgers//collaborators/user_collaboration_test_1697363500000
[7571] âŒ TC-016 èª¿ç”¨ç•°å¸¸: CollaborationError: APIç«¯é»ä¸å­˜åœ¨: DELETE /api/v1/ledgers//collaborators/user_collaboration_test_1697363500000 (Code: ENDPOINT_NOT_FOUND)
[7571] ğŸ“š å †ç–Šè¿½è¹¤: #0      LedgerCollaborationManager.processCollaboratorRemoval (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:1144:9)
<asynchronous suspension>
[7571] âŒ TC-016 FAIL - ç´”ç²¹èª¿ç”¨ï¼šç§»é™¤å”ä½œè€…æ¸¬è©¦
[7571] âŒ æ¸¬è©¦å¤±æ•—è©³æƒ…:
[7571]    PLå±¤å›æ‡‰: {error: TC-016 removeCollaborator failed: CollaborationError: APIç«¯é»ä¸å­˜åœ¨: DELETE /api/v1/ledgers//collaborators/user_collaboration_test_1697363500000 (Code: ENDPOINT_NOT_FOUND), success: false}
[7571]    é—œéµæ­¥é©Ÿ:
[7571]      â€¢ prepare_remove_collaborator: Using dynamic collaboration ID: , collaboratorId: user_collaboration_test_1697363500000
[7571]      â€¢ function_call_error: LedgerCollaborationManager.removeCollaborator threw exception: CollaborationError: APIç«¯é»ä¸å­˜åœ¨: DELETE /api/v1/ledgers//collaborators/user_collaboration_test_1697363500000 (Code: ENDPOINT_NOT_FOUND)
[7571]      â€¢ stack_trace: #0      LedgerCollaborationManager.processCollaboratorRemoval (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:1144:9) | <asynchronous suspension> | #1      LedgerCollaborationManager.removeCollaborator (file:///home/runner/workspace/73.%20Flutter_Module%20code_PL/7303.%20%E5%B8%B3%E6%9C%AC%E5%8D%94%E4%BD%9C%E5%8A%9F%E8%83%BD%E7%BE%A4.dart:1294:7)
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-017
[7571] ğŸ¤ å”ä½œç´”ç²¹èª¿ç”¨: TC-017 - ç´”ç²¹èª¿ç”¨ï¼šæ¬Šé™çŸ©é™£è¨ˆç®—æ¸¬è©¦
[7571] ğŸ” TC-017 è¼‰å…¥æ¸¬è©¦è³‡æ–™å®Œæˆ
[7571] ğŸ“Š æˆåŠŸæ¡ˆä¾‹æ•¸é‡: 3
[7571] ğŸ“Š å¤±æ•—æ¡ˆä¾‹æ•¸é‡: 2
[7571] ğŸ” éšæ®µä¸€ä¿®æ­£ï¼šTC-017ä½¿ç”¨å‹•æ…‹å”ä½œå¸³æœ¬ID: 
[7571] ğŸ“‹ TC-017ç´”ç²¹èª¿ç”¨PLå±¤7303å®Œæˆ - çµæœ: Instance of 'PermissionMatrix'
[7571] âœ… TC-017 PASS - ç´”ç²¹èª¿ç”¨ï¼šæ¬Šé™çŸ©é™£è¨ˆç®—æ¸¬è©¦
[7571] âœ… æ¸¬è©¦æˆåŠŸï¼ŒPLå±¤å›æ‡‰: Instance of 'PermissionMatrix'
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-018
[7571] ğŸ¤ å”ä½œç´”ç²¹èª¿ç”¨: TC-018 - ç´”ç²¹èª¿ç”¨ï¼šå”ä½œè¡çªæª¢æ¸¬æ¸¬è©¦
[7571] ğŸ” TC-018 è¼‰å…¥æ¸¬è©¦è³‡æ–™å®Œæˆ
[7571] ğŸ“Š æˆåŠŸæ¡ˆä¾‹æ•¸é‡: 3
[7571] ğŸ“Š å¤±æ•—æ¡ˆä¾‹æ•¸é‡: 2
[7571] ğŸ” éšæ®µä¸€ä¿®æ­£ï¼šTC-018ä½¿ç”¨å‹•æ…‹å”ä½œå¸³æœ¬ID: 
[7571] ğŸ“‹ TC-018ç´”ç²¹èª¿ç”¨å®Œæˆ - çµæœ: {conflictCheckResult: PLå±¤å›å‚³çµæœ, ledgerId: , success: true}
[7571] âœ… TC-018 PASS - ç´”ç²¹èª¿ç”¨ï¼šå”ä½œè¡çªæª¢æ¸¬æ¸¬è©¦
[7571] âœ… æ¸¬è©¦æˆåŠŸï¼ŒPLå±¤å›æ‡‰: {conflictCheckResult: PLå±¤å›å‚³çµæœ, ledgerId: , success: true}
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-019
[7571] ğŸ¤ å”ä½œç´”ç²¹èª¿ç”¨: TC-019 - ç´”ç²¹èª¿ç”¨ï¼šAPIæ•´åˆæ¸¬è©¦
[7571] ğŸ” TC-019 è¼‰å…¥æ¸¬è©¦è³‡æ–™å®Œæˆ
[7571] ğŸ“Š æˆåŠŸæ¡ˆä¾‹æ•¸é‡: 3
[7571] ğŸ“Š å¤±æ•—æ¡ˆä¾‹æ•¸é‡: 2
[7571] ğŸ” éšæ®µä¸€ä¿®æ­£ï¼šTC-019ä½¿ç”¨å‹•æ…‹å”ä½œå¸³æœ¬ID: 
[7571] ğŸ“‹ TC-019ç´”ç²¹èª¿ç”¨PLå±¤7303å®Œæˆ - çµæœ: {success: false, data: null, message: Generic GET for ledger endpoints is deprecated. Use specific functions., error: DEPRECATED_ENDPOINT, errorCode: DEPRECATED_ENDPOINT}
[7571] âŒ TC-019 FAIL - ç´”ç²¹èª¿ç”¨ï¼šAPIæ•´åˆæ¸¬è©¦
[7571] âŒ æ¸¬è©¦å¤±æ•—è©³æƒ…:
[7571]    PLå±¤å›æ‡‰: {success: false, data: null, message: Generic GET for ledger endpoints is deprecated. Use specific functions., error: DEPRECATED_ENDPOINT, errorCode: DEPRECATED_ENDPOINT}
[7571]    é—œéµæ­¥é©Ÿ:
[7571]      â€¢ prepare_api_integration_test: Using dynamic collaboration ID: , testType: api_integration
[7571]      â€¢ call_pl_api: Called LedgerCollaborationManager.callAPI successfully.
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-020
[7571] ğŸ¤ å”ä½œç´”ç²¹èª¿ç”¨: TC-020 - ç´”ç²¹èª¿ç”¨ï¼šéŒ¯èª¤è™•ç†æ¸¬è©¦
[7571] ğŸ” TC-020 è¼‰å…¥æ¸¬è©¦è³‡æ–™å®Œæˆ
[7571] ğŸ“Š æˆåŠŸæ¡ˆä¾‹æ•¸é‡: 3
[7571] ğŸ“Š å¤±æ•—æ¡ˆä¾‹æ•¸é‡: 2
[7571] ğŸ” éšæ®µä¸€ä¿®æ­£ï¼šTC-020éŒ¯èª¤è™•ç†æ¸¬è©¦ï¼Œå‹•æ…‹å”ä½œå¸³æœ¬ID: 
[7571] ğŸ“‹ TC-020ç´”ç²¹èª¿ç”¨PLå±¤7303å®Œæˆ - çµæœ: Instance of 'ValidationResult'
[7571] âœ… TC-020 PASS - ç´”ç²¹èª¿ç”¨ï¼šéŒ¯èª¤è™•ç†æ¸¬è©¦
[7571] âœ… æ¸¬è©¦æˆåŠŸï¼ŒPLå±¤å›æ‡‰: Instance of 'ValidationResult'
[7571] ğŸ‰ å¸³æœ¬å”ä½œç´”ç²¹èª¿ç”¨å®Œæˆ
[7571] ğŸ”„ åŸ·è¡Œæ•´åˆé©—è­‰æ¸¬è©¦ (ç´”ç²¹èª¿ç”¨)
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-021
[7571] ğŸŒ æ•´åˆç´”ç²¹èª¿ç”¨: TC-021 - ç´”ç²¹èª¿ç”¨ï¼šAPL.dartçµ±ä¸€Gatewayé©—è­‰
[7571] ğŸ“‹ TC-021ç´”ç²¹èª¿ç”¨å®Œæˆ
[7571] âœ… TC-021 PASS - ç´”ç²¹èª¿ç”¨ï¼šAPL.dartçµ±ä¸€Gatewayé©—è­‰
[7571] âœ… æ¸¬è©¦æˆåŠŸï¼ŒPLå±¤å›æ‡‰: {gatewayTest: completed, userData: {userId: user_expert_1697363200000, email: expert.valid@test.lcas.app, displayName: Expert æ¸¬è©¦ç”¨æˆ¶, userMode: Expert, preferences: {language: zh-TW, currency: TWD, theme: expert}, assessmentAnswers: {Q1: A, Q2: A, Q3: A}, registrationDate: 2025-10-15T08:00:00+08:00, createdAt: 2025-10-15T08:00:00+08:00, testScenario: æ­£å¸¸Expertç”¨æˆ¶è¨»å†Š}}
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-022
[7571] ğŸŒ æ•´åˆç´”ç²¹èª¿ç”¨: TC-022 - ç´”ç²¹èª¿ç”¨ï¼šé ç®—ç®¡ç†APIè½‰ç™¼é©—è­‰
[7571] ğŸ“‹ TC-022ç´”ç²¹èª¿ç”¨å®Œæˆ
[7571] âœ… TC-022 PASS - ç´”ç²¹èª¿ç”¨ï¼šé ç®—ç®¡ç†APIè½‰ç™¼é©—è­‰
[7571] âœ… æ¸¬è©¦æˆåŠŸï¼ŒPLå±¤å›æ‡‰: {apiForwardingTest: completed, budgetDataCount: 4}
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-023
[7571] ğŸŒ æ•´åˆç´”ç²¹èª¿ç”¨: TC-023 - ç´”ç²¹èª¿ç”¨ï¼šå¸³æœ¬å”ä½œAPIè½‰ç™¼é©—è­‰
[7571] ğŸ“‹ TC-023ç´”ç²¹èª¿ç”¨å®Œæˆ
[7571] âœ… TC-023 PASS - ç´”ç²¹èª¿ç”¨ï¼šå¸³æœ¬å”ä½œAPIè½‰ç™¼é©—è­‰
[7571] âœ… æ¸¬è©¦æˆåŠŸï¼ŒPLå±¤å›æ‡‰: {apiForwardingTest: completed, collaborationDataCount: 3}
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-024
[7571] ğŸŒ æ•´åˆç´”ç²¹èª¿ç”¨: TC-024 - ç´”ç²¹èª¿ç”¨ï¼šå››æ¨¡å¼å·®ç•°åŒ–æ¸¬è©¦
[7571] ğŸ“‹ TC-024ç´”ç²¹èª¿ç”¨å®Œæˆï¼ˆå››æ¨¡å¼æ¸¬è©¦ï¼‰
[7571] âœ… TC-024 PASS - ç´”ç²¹èª¿ç”¨ï¼šå››æ¨¡å¼å·®ç•°åŒ–æ¸¬è©¦
[7571] âœ… æ¸¬è©¦æˆåŠŸï¼ŒPLå±¤å›æ‡‰: {modeResults: {Expert: {userId: user_expert_1697363200000, userMode: Expert, preferences: {language: zh-TW, currency: TWD, theme: expert}}, Inertial: {userId: user_inertial_1697363260000, userMode: Inertial, preferences: {language: zh-TW, currency: TWD, theme: inertial}}, Cultivation: {userId: user_cultivation_1697363320000, userMode: Cultivation, preferences: {language: zh-TW, currency: TWD, theme: cultivation}}, Guiding: {userId: user_guiding_1697363380000, userMode: Guiding, preferences: {language: zh-TW, currency: TWD, theme: guiding}}}, totalModes: 4}
[7571] ğŸ”§ ç´”ç²¹èª¿ç”¨ï¼šTC-025
[7571] ğŸŒ æ•´åˆç´”ç²¹èª¿ç”¨: TC-025 - ç´”ç²¹èª¿ç”¨ï¼šçµ±ä¸€å›æ‡‰æ ¼å¼æ¸¬è©¦
[7571] ğŸ“‹ TC-025ç´”ç²¹èª¿ç”¨å®Œæˆ
[7571] âœ… TC-025 PASS - ç´”ç²¹èª¿ç”¨ï¼šçµ±ä¸€å›æ‡‰æ ¼å¼æ¸¬è©¦
[7571] âœ… æ¸¬è©¦æˆåŠŸï¼ŒPLå±¤å›æ‡‰: {formatTest: completed, testId: TC-025, timestamp: 2025-11-12T08:15:18.235594}
[7571] ğŸ‰ æ•´åˆé©—è­‰ç´”ç²¹èª¿ç”¨å®Œæˆ

[7571] ğŸ“Š ç´”ç²¹èª¿ç”¨ç‰ˆ SIT P2æ¸¬è©¦å®Œæˆå ±å‘Š:
[7571]    ğŸ¯ æ¸¬è©¦ç­–ç•¥: P2_PURE_CALL_NO_MOCK_LOGIC
[7571]    ğŸ“‹ ç¸½æ¸¬è©¦æ•¸: 25
[7571]    âœ… é€šéæ•¸: 12
[7571]    âŒ å¤±æ•—æ•¸: 13
[7571]    ğŸ“ˆ æˆåŠŸç‡: 48.0%
[7571]    â±ï¸ åŸ·è¡Œæ™‚é–“: 1485ms
[7571]    ğŸš¨ å¤±æ•—çš„æ¸¬è©¦æ¡ˆä¾‹: TC-002, TC-003, TC-004, TC-005, TC-006, TC-010, TC-011, TC-012, TC-013, TC-014, TC-015, TC-016, TC-019
[7571]    ğŸ“Š åˆ†é¡çµæœ:
[7571]       budget_pure_call: 3/8 (37.5%)
[7571]       collaboration_pure_call: 4/12 (33.3%)
[7571]       integration_pure_call: 5/5 (100.0%)
[7571]    ğŸ”§ åˆè¦ç‹€æ³:
[7571]       âœ… ç„¡æ¨¡æ“¬æ¥­å‹™é‚è¼¯: true
[7571]       âœ… ç´”ç²¹PLå±¤èª¿ç”¨: true
[7571]       âœ… ç„¡æ¥­å‹™é‚è¼¯åˆ¤æ–·: true
[7571]       âœ… å®Œå…¨ä¾è³´7598: true
[7571] ğŸ‰ ç´”ç²¹èª¿ç”¨ç‰ˆ SIT P2æ¸¬è©¦å®Œæˆ
[7571] âœ… 0098æ–‡ä»¶è¦ç¯„ç¬¬4-5æ¢å®Œå…¨åˆè¦ï¼šç§»é™¤æ‰€æœ‰æ¨¡æ“¬æ¥­å‹™é‚è¼¯
[7571] ğŸ—„ï¸ 100%ç´”ç²¹èª¿ç”¨PLå±¤å‡½æ•¸ï¼Œç„¡ä»»ä½•æ¥­å‹™é‚è¼¯åˆ¤æ–·

00:02 +1: ... åŸ·è¡ŒSIT P2ç´”ç²¹èª¿ç”¨æ¸¬00:02 +1: ... v2.3.0) P2æ¸¬è©¦è³‡æ–™è¼‰00:02 +1: SIT P2æ¸¬è©¦ - 7571 (ç´”ç²¹èª¿ç”¨ç‰ˆ-ç„¡æ¨¡æ“¬æ¥­å‹™é‚è¼¯ v2.3.0) P2æ¸¬è©¦è³‡æ–™è¼‰å…¥é©—è­‰

[7571] ğŸ”§ åŸ·è¡ŒP2æ¸¬è©¦è³‡æ–™è¼‰å…¥é©—è­‰...
[7571] âœ… P2æ¸¬è©¦è³‡æ–™è¼‰å…¥æˆåŠŸ
[7571] âœ… å”ä½œæ¸¬è©¦è³‡æ–™é©—è­‰é€šé
[7571] âœ… é ç®—æ¸¬è©¦è³‡æ–™é©—è­‰é€šé
[7571] âœ… P2æ¸¬è©¦è³‡æ–™è¼‰å…¥é©—è­‰å®Œæˆ
00:02 +2: ... v2.3.0) P2æ¸¬è©¦è³‡æ–™è¼‰00:02 +2: ... P2å››æ¨¡å¼è³‡æ–™å®Œæ•´æ€§é©—00:02 +2: SIT P2æ¸¬è©¦ - 7571 (ç´”ç²¹èª¿ç”¨ç‰ˆ-ç„¡æ¨¡æ“¬æ¥­å‹™é‚è¼¯ v2.3.0) P2å››æ¨¡å¼è³‡æ–™å®Œæ•´æ€§é©—è­‰

[7571] ğŸ¯ åŸ·è¡ŒP2å››æ¨¡å¼è³‡æ–™å®Œæ•´æ€§é©—è­‰...
[7571] âœ… Expert æ¨¡å¼è³‡æ–™å®Œæ•´æ€§é©—è­‰é€šé
[7571] âœ… Inertial æ¨¡å¼è³‡æ–™å®Œæ•´æ€§é©—è­‰é€šé
[7571] âœ… Cultivation æ¨¡å¼è³‡æ–™å®Œæ•´æ€§é©—è­‰é€šé
[7571] âœ… Guiding æ¨¡å¼è³‡æ–™å®Œæ•´æ€§é©—è­‰é€šé
[7571] âœ… P2å››æ¨¡å¼è³‡æ–™å®Œæ•´æ€§é©—è­‰å®Œæˆ
00:02 +3: ... P2å››æ¨¡å¼è³‡æ–™å®Œæ•´æ€§é©—00:02 +3: All tests passed!       
~/workspace/75. Flutter_Test_code_PL$ 