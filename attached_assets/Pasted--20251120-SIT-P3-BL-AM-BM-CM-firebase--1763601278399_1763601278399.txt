------------------------------------------
20251120. SIT_P3 前置準備_釐清BL(AM, BM, CM)在firebase建立子集合與文檔問題

不要寫code，請根據我的回覆更新提案。提案時請專注解決當前發生的問題就好，不需要優化、強化、驗證、監測、測試等手段，除了列出原因之外也請你提出insight。

更新提案：SIT_P3 前置準備問題分析與解決方案
基於您的回覆，我重新分析了BL層模組的職責邊界和資料結構管理問題。以下是更新的分析和解決方案：

問題重新分析與Insight
核心問題識別
經過您的指正，真正的問題在於：
1.	職責混亂：AM模組未正確引用0099.json，而是讓FS模組混入了科目範例資料
2.	資料結構與範例混淆：FS模組應該分離「資料結構定義」和「範例資料」兩種功能
3.	模組間依賴錯誤：各BL模組應該調用FS建立結構，但預設資料應該從03資料夾和0099載入

Insight 洞察
這個問題反映了一個關鍵的架構設計原則：資料結構管理與資料內容管理應該分離。就像建築師負責設計房屋結構，但傢俱配置應該由室內設計師處理。FS模組應該只負責「蓋房子」，AM等業務模組負責「放傢俱」。
BL層模組職責盤點與解決方案

階段一：清理FS模組職責邊界
目標：將FS模組的範例資料移除，純化為資料結構管理
修改檔案：13. Replit_Module code_BL/1311. FS.js
版本升級：v2.7.2 → v2.8.0
實施計畫：
1.	移除FS模組中所有科目範例資料
2.	移除FS模組中所有帳戶範例資料
3.	只保留純粹的Firebase集合結構建立功能
4.	提供標準的「空白結構」建立介面
用途：純化FS模組職責，避免資料結構與範例資料混淆
影響範圍：FS模組內部資料建立邏輯
Before/After差異：Before FS建立結構時包含範例資料，After FS只建立空白結構
=>應該是說，我剛剛講的範例資料，指的是為了在firebase建立集合時讓下階子集合不為空的placeholder。請修正

階段二：修正AM模組資料來源
目標：AM模組正確引用0099.json和03. Default_config資料夾
修改檔案：13. Replit_Module code_BL/1309. AM.js
版本升級：v7.4.0 → v7.5.0
實施計畫：
1.	修正AM_load0099SubjectData()函數，確保正確載入0099.json
2.	新增從03. Default_config載入預設帳戶的功能
3.	AM_initializeUserLedger()改為：先調用FS建立空白結構，再填入0099和03的預設資料
4.	移除所有hard-coded的預設資料
用途：確保AM模組從正確的資料源載入預設資料
影響範圍：AM模組資料初始化邏輯
Before/After差異：Before從FS範例載入，After從0099.json和03資料夾載入

階段三：檢查BM模組資料結構建立
目標：確認BM模組是否正確調用FS建立預算子集合結構
檢查檔案：13. Replit_Module code_BL/1312. BM.js
檢查重點：
1.	BM模組建立預算時是否調用FS建立子集合結構
2.	是否有混用FS範例資料的情況
3.	預算範本是否來自正確的配置檔案

階段四：檢查CM模組資料結構建立
目標：確認CM模組是否正確調用FS建立協作子集合結構
檢查檔案：13. Replit_Module code_BL/1313. CM.js
檢查重點：
1.	CM模組建立協作時是否調用FS建立子集合結構
2.	是否有混用FS範例資料的情況
3.	協作預設設定是否來自正確的配置檔案

階段五：統一命名規範
目標：將所有accounts引用改為wallets，符合P3階段規範
修改檔案：
•	13. Replit_Module code_BL/1311. FS.js
•	
xiii.	Replit_Module code_BL/1350. WCM.js
實施計畫：
1.	更新所有集合路徑：ledgers/{ledgerId}/accounts → ledgers/{ledgerId}/wallets
2.	更新所有函數參數和變數名稱
3.	確保與0302. Default_wallet.json的命名一致
標準化的模組間協作模式
建議的標準流程
1.	資料結構建立：各BL模組 → 調用FS建立空白結構
2.	預設資料填入：各BL模組 → 從03資料夾和0099載入標準資料
3.	業務邏輯處理：各BL模組 → 處理特定業務需求
職責清單
•	FS模組：純粹的Firebase結構管理，不包含任何業務資料
•	AM模組：用戶初始化，從0099載入科目，從0302載入預設帳戶
•	BM模組：預算管理，從相關config載入預算範本
•	CM模組：協作管理，從相關config載入協作設定

