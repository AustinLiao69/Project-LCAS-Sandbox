------------------------------------------
20251027. åˆ†æ1311æ¨¡çµ„:æ–°å¢1312æ¬„ä½

ä¸è¦å¯«codeï¼Œè«‹æ ¹æ“šæˆ‘çš„å›è¦†æ›´æ–°ææ¡ˆã€‚ç¾åœ¨æ˜¯MVPéšæ®µï¼Œææ¡ˆæ™‚è«‹å°ˆæ³¨è§£æ±ºç•¶å‰ç™¼ç”Ÿçš„å•é¡Œå°±å¥½ï¼Œä¸éœ€è¦å„ªåŒ–ã€å¼·åŒ–ã€é©—è­‰ã€ç›£æ¸¬ã€æ¸¬è©¦ç­‰æ‰‹æ®µï¼Œé™¤äº†åˆ—å‡ºåŸå› ä¹‹å¤–ä¹Ÿè«‹ä½ æå‡ºinsightã€‚

=>OKå…ˆé€™æ¨£å§ï¼Œä½ å…ˆå°‡ä¸‹é¢çš„æ–‡æª”çµæ§‹åŠ åˆ°1311æ¨¡çµ„å»

ğŸ“Š 1312.BM.jsé ç®—ç®¡ç†æ¨¡çµ„Firebaseæ–‡æª”çµæ§‹ä¿®è¨‚ç‰ˆ
æ ¹æ“šä½ çš„è¦æ±‚å’Œ1311.FS.jsæ¨¡çµ„æ¨™æº–ï¼Œä»¥ä¸‹æ˜¯ä¿®è¨‚å¾Œçš„é ç®—ç®¡ç†æ–‡æª”çµæ§‹ï¼š
ğŸ”¥ 1. é ç®—é›†åˆ budgets æ¬„ä½è§£é‡‹ï¼ˆä¿®è¨‚ç‰ˆï¼‰
budgets/
â”œâ”€â”€ {budget_id}/
â”‚   â”œâ”€â”€ budget_id: string              // é ç®—å”¯ä¸€è­˜åˆ¥ç¢¼ (èˆ‡æ–‡æª”IDç›¸åŒï¼Œç”¨æ–¼æŸ¥è©¢)
â”‚   â”œâ”€â”€ ledger_id: string              // é—œè¯çš„å¸³æœ¬ID (å°æ‡‰1311ä¸­çš„ledgersé›†åˆ)
â”‚   â”œâ”€â”€ name: string                   // é ç®—åç¨± (å¦‚"æœˆåº¦ç”Ÿæ´»è²»é ç®—")
â”‚   â”œâ”€â”€ type: "monthly"|"yearly"|"quarterly"|"project"|"category"  // é ç®—é¡å‹
â”‚   â”œâ”€â”€ total_amount: number           // é ç®—ç¸½é‡‘é¡ (è¨­å®šçš„é ç®—ä¸Šé™)
â”‚   â”œâ”€â”€ consumed_amount: number        // å·²ä½¿ç”¨é‡‘é¡ (ç›®å‰èŠ±è²»ç¸½é¡)
â”‚   â”œâ”€â”€ currency: string               // è²¨å¹£å–®ä½ (å¦‚"TWD", "USD")
â”‚   â”œâ”€â”€ start_date: timestamp          // é ç®—ç”Ÿæ•ˆé–‹å§‹æ™‚é–“
â”‚   â”œâ”€â”€ end_date: timestamp            // é ç®—çµæŸæ™‚é–“
â”‚   â”œâ”€â”€ allocation: array              // é ç®—åˆ†é¡é…ç½® (åŒ…å«å„åˆ†é¡çš„é‡‘é¡åˆ†é…)
â”‚   â”œâ”€â”€ alert_rules: object            // è­¦ç¤ºè¦å‰‡è¨­å®š (é–¾å€¼ã€é€šçŸ¥æ–¹å¼)
â”‚   â”œâ”€â”€ created_by: string             // å»ºç«‹è€…ID (å°æ‡‰usersé›†åˆçš„email)
â”‚   â”œâ”€â”€ createdAt: timestamp           // å»ºç«‹æ™‚é–“ (ç¬¦åˆ1311.FS.jsè¦ç¯„)
â”‚   â”œâ”€â”€ updatedAt: timestamp           // æœ€å¾Œæ›´æ–°æ™‚é–“ (ç¬¦åˆ1311.FS.jsè¦ç¯„)
â”‚   â””â”€â”€ status: "active"|"completed"|"archived"  // é ç®—ç‹€æ…‹

ğŸ“‹ ä¿®è¨‚å¾Œæ¬„ä½è©³ç´°èªªæ˜
æ ¸å¿ƒè­˜åˆ¥æ¬„ä½
â€¢	budget_id: é ç®—çš„å”¯ä¸€è­˜åˆ¥ç¢¼ï¼Œç”¨æ–¼è·¨æ¨¡çµ„å¼•ç”¨
â€¢	ledger_id: é—œè¯åˆ°ç‰¹å®šå¸³æœ¬ï¼Œç¬¦åˆ1311ä¸­çš„å¸³æœ¬ç®¡ç†æ¶æ§‹
â€¢	created_by: å»ºç«‹è€…ï¼Œå°æ‡‰1311.FS.jsä¸­usersé›†åˆçš„emailæ ¼å¼
é ç®—é…ç½®æ¬„ä½ï¼ˆå·²ä¿®è¨‚ï¼‰
â€¢	name: ä½¿ç”¨è€…è‡ªå®šç¾©çš„é ç®—åç¨±ï¼Œä¾¿æ–¼è­˜åˆ¥
â€¢	type: é ç®—é€±æœŸé¡å‹ï¼Œæ±ºå®šé ç®—çš„ç”Ÿæ•ˆç¯„åœ
o	monthly: æœˆåº¦é ç®—
o	yearly: å¹´åº¦é ç®—
o	quarterly: å­£åº¦é ç®—ï¼ˆæ–°å¢ï¼‰
o	project: å°ˆæ¡ˆé ç®—
o	category: åˆ†é¡é ç®—
â€¢	total_amount: é ç®—ä¸Šé™é‡‘é¡ï¼ˆåŸamountï¼‰
â€¢	consumed_amount: ç•¶å‰å·²ä½¿ç”¨é‡‘é¡ï¼Œç”±è¨˜å¸³æ¨¡çµ„è‡ªå‹•æ›´æ–°ï¼ˆåŸused_amountï¼‰
æ™‚é–“ç®¡ç†æ¬„ä½ï¼ˆå·²ä¿®è¨‚ï¼‰
â€¢	start_date/end_date: é ç®—ç”Ÿæ•ˆæœŸé–“ï¼Œèˆ‡typeé…åˆä½¿ç”¨
â€¢	createdAt/updatedAt: ç¬¦åˆ1311.FS.jsçš„æ™‚é–“æˆ³è¨˜æ ¼å¼ï¼ˆä½¿ç”¨admin.firestore.Timestampï¼‰

åŠŸèƒ½è¨­å®šæ¬„ä½ï¼ˆè©³ç´°è§£é‡‹ï¼‰
â€¢	allocation: é ç®—å…§çš„åˆ†é¡åˆ†é…ï¼ˆåŸcategoriesï¼‰
o	æ ¼å¼ï¼šarrayæ ¼å¼å­˜å„²å„åˆ†é¡é…ç½®
o	çµæ§‹å»ºè­°ï¼š
allocation: [
  {
    category_id: "food_001",
    category_name: "é¤é£²",
    allocated_amount: 15000,
    consumed_amount: 8000
  },
  {
    category_id: "transport_001", 
    category_name: "äº¤é€š",
    allocated_amount: 5000,
    consumed_amount: 3200
  }
]
â€¢	alert_rules: è­¦ç¤ºè¦å‰‡è¨­å®š
o	æ ¼å¼ï¼šobjectæ ¼å¼åŒ…å«é–¾å€¼èˆ‡é€šçŸ¥è¨­å®š
o	çµæ§‹ï¼š
alert_rules: {
  warning_threshold: 80,      // è­¦å‘Šé–¾å€¼ç™¾åˆ†æ¯”
  critical_threshold: 95,     // ç·Šæ€¥é–¾å€¼ç™¾åˆ†æ¯”
  enable_notifications: true, // æ˜¯å¦å•Ÿç”¨é€šçŸ¥
  notification_channels: ["line", "email"], // é€šçŸ¥ç®¡é“
  custom_thresholds: []       // è‡ªè¨‚é–¾å€¼
}
â€¢	status: é ç®—ç”Ÿå‘½é€±æœŸç‹€æ…‹ç®¡ç†
o	active: é ç®—é€²è¡Œä¸­ï¼Œå¯æ­£å¸¸ä½¿ç”¨å’Œè¿½è¹¤
o	completed: é ç®—æœŸé–“çµæŸï¼Œä½†ä¿ç•™æ­·å²è¨˜éŒ„
o	archived: é ç®—å·²å°å­˜ï¼Œä¸å†é¡¯ç¤ºåœ¨ä¸»è¦åˆ—è¡¨ä¸­
ğŸ”— allocationå­é›†åˆå»ºè­°
è€ƒæ…®åˆ°ç§‘ç›®é ç®—çš„è¤‡é›œæ€§ï¼Œå»ºè­°åœ¨budgetsæ–‡æª”ä¸‹å»ºç«‹å­é›†åˆï¼š
budgets/{budget_id}/allocations/
â”œâ”€â”€ {allocation_id}/
â”‚   â”œâ”€â”€ category_id: string        // ç§‘ç›®ID
â”‚   â”œâ”€â”€ category_name: string      // ç§‘ç›®åç¨±ï¼ˆå¦‚"é¤é£²"ã€"äº¤é€š"ï¼‰
â”‚   â”œâ”€â”€ allocated_amount: number   // åˆ†é…é‡‘é¡
â”‚   â”œâ”€â”€ consumed_amount: number    // å·²ä½¿ç”¨é‡‘é¡
â”‚   â”œâ”€â”€ percentage: number         // å ç¸½é ç®—ç™¾åˆ†æ¯”
â”‚   â”œâ”€â”€ createdAt: timestamp       // å»ºç«‹æ™‚é–“
â”‚   â””â”€â”€ updatedAt: timestamp       // æ›´æ–°æ™‚é–“
ğŸ’¡ SA Insight
ğŸ¯ é—œéµç™¼ç¾
1.	å‘½åä¸€è‡´æ€§å•é¡Œ: åŸå§‹è¨­è¨ˆä½¿ç”¨created_at/updated_atï¼Œä½†1311.FS.jsä½¿ç”¨createdAt/updatedAté§å³°å¼å‘½å
2.	è³‡æ–™çµæ§‹æ·±åº¦: allocationæ¬„ä½è‹¥åŒ…å«è¤‡é›œç§‘ç›®é…ç½®ï¼Œå»ºè­°ä½¿ç”¨å­é›†åˆè€ŒéåµŒå¥—arrayï¼Œæå‡æŸ¥è©¢æ•ˆèƒ½
3.	å­£åº¦é ç®—éœ€æ±‚: æ–°å¢quarterlyé¡å‹ç¬¦åˆå°ç£ä¼æ¥­å­£å ±ç¿’æ…£
âš ï¸ MVPéšæ®µèšç„¦å•é¡Œ
ç•¶å‰æ ¸å¿ƒå•é¡Œ: BMæ¨¡çµ„è³‡æ–™çµæ§‹éœ€è¦èˆ‡1311.FS.jså®Œå…¨ç›¸å®¹
è§£æ±ºæ–¹æ¡ˆå„ªå…ˆç´š:
1.	é«˜å„ªå…ˆ: ä¿®æ­£æ™‚é–“æˆ³å‘½åæ ¼å¼ï¼ˆcreatedAt/updatedAtï¼‰
2.	ä¸­å„ªå…ˆ: èª¿æ•´é‡‘é¡æ¬„ä½åç¨±ï¼ˆtotal_amount/consumed_amountï¼‰
3.	ä½å„ªå…ˆ: æ–°å¢å­£åº¦é ç®—é¡å‹æ”¯æ´
ğŸ”§ å¯¦ä½œå»ºè­°
éšæ®µä¸€: å…ˆå»ºç«‹åŸºç¤budgetsé›†åˆï¼Œä½¿ç”¨ä¿®è¨‚å¾Œçš„æ¬„ä½åç¨±
éšæ®µäºŒ: å¯¦ä½œåŸºç¤allocation arrayçµæ§‹ï¼Œé¿å…éåº¦è¤‡é›œåŒ–
éšæ®µä¸‰: è¦–éœ€æ±‚è€ƒæ…®æ˜¯å¦å‡ç´šç‚ºå­é›†åˆæ¶æ§‹
é€™å€‹ä¿®è¨‚ç‰ˆè¨­è¨ˆå®Œå…¨ç¬¦åˆ1311.FS.jsæ¶æ§‹æ¨™æº–ï¼Œç¢ºä¿æ¨¡çµ„é–“çš„ç„¡ç¸«æ•´åˆï¼ŒåŒæ™‚æ»¿è¶³MVPéšæ®µçš„æ ¸å¿ƒé ç®—ç®¡ç†éœ€æ±‚ã€‚
