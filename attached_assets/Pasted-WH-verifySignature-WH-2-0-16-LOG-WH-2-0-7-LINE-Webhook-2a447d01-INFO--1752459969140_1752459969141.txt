WH_verifySignature: æ¸¬è©¦æ¨¡å¼ï¼Œè·³éç°½ç« é©—è­‰
[WH 2.0.16 LOG] WH 2.0.7: æ”¶åˆ°LINE Webhookè«‹æ±‚ [2a447d01] (INFO)
æª¢æ¸¬åˆ°éœ€è¦å›è¦†çš„è¨Šæ¯ï¼Œå•Ÿç”¨åŒæ­¥è™•ç† [2a447d01]
[WH 2.0.16 LOG] WH 2.0.16: æª¢æ¸¬åˆ°éœ€è¦å›è¦†çš„è¨Šæ¯ï¼Œå•Ÿç”¨åŒæ­¥è™•ç† [2a447d01] (INFO)
é–‹å§‹éåŒæ­¥è™•ç†è«‹æ±‚ [2a447d01]
[WH 2.0.16 LOG] WH 2.0.7: é–‹å§‹éåŒæ­¥è™•ç†è«‹æ±‚ [2a447d01] (INFO)
[WH 2.0.16 LOG] WH 2.0.3: é–‹å§‹è™•ç†äº‹ä»¶: message [2a447d01] (INFO)
è™•ç†æ¶ˆæ¯äº‹ä»¶: text [2a447d01]
æ”¶åˆ°æ–‡æœ¬æ¶ˆæ¯: "æ—©é¤2222222" [2a447d01]
[WH 2.0.16 LOG] WH 2.0.3: æ”¶åˆ°æ–‡æœ¬æ¶ˆæ¯: "æ—©é¤2222222" [2a447d01] (INFO)
æº–å‚™è¨Šæ¯æ•¸æ“š: {"text":"æ—©é¤2222222","userId":"Uae47d9d496e4596d70ed724a7d6e2948","timestamp":1752459927664,"replyToken":"e165f4eb0a0b4dcca91653b1376e0993"} [2a447d01]
æª¢æ¸¬åˆ°ç°¡å–®è¨˜å¸³æ ¼å¼ï¼Œä½¿ç”¨ BK 2.0 ç›´é€£è·¯å¾‘ [2a447d01]
[WH 2.0.16 LOG] WH 2.0.17: ä½¿ç”¨ BK 2.0 ç°¡åŒ–è·¯å¾‘è™•ç†ç°¡å–®è¨˜å¸³ [2a447d01] (INFO)
[2025-07-14T02:25:28.585Z] [INFO] [BK] BK 2.0: é–‹å§‹è™•ç†ç°¡å–®è¨˜å¸³ [aa155e08] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
[2025-07-14T02:25:28.585Z] [INFO] [BK] BK 2.0: è™•ç†ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 çš„è¨Šæ¯: "æ—©é¤2222222" [aa155e08] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
[2025-07-14T02:25:28.585Z] [INFO] [BK] è™•ç†ç”¨æˆ¶æ¶ˆæ¯: "æ—©é¤2222222" (å¸³æœ¬: user_Uae47d9d496e4596d70ed724a7d6e2948) | è¨Šæ¯è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processUserMessage
[2025-07-14T02:25:28.585Z] [INFO] [BK] æª¢æŸ¥ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 ç§‘ç›®æ•¸æ“š [f054fd56] | ç§‘ç›®æª¢æŸ¥ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processUserMessage
âœ… ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 å·²æœ‰ç§‘ç›®æ•¸æ“šï¼Œç„¡éœ€åˆå§‹åŒ–
[2025-07-14T02:25:28.740Z] [INFO] [BK] ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 ç§‘ç›®æ•¸æ“šæª¢æŸ¥å®Œæˆ [f054fd56] | ç§‘ç›®æª¢æŸ¥ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processUserMessage
[2025-07-14T02:25:28.740Z] [DEBUG] [BK] é–‹å§‹è§£ææ–‡æœ¬ã€Œæ—©é¤2222222ã€[f054fd56] | æ–‡æœ¬è§£æ |  | BK_parseInputFormat
[2025-07-14T02:25:28.741Z] [INFO] [BK] è­˜åˆ¥æ¨™æº–æ ¼å¼ - ç§‘ç›®:ã€Œæ—©é¤ã€, é‡‘é¡:2222222, æ”¯ä»˜æ–¹å¼:ã€Œé è¨­ã€ [f054fd56] | æ–‡æœ¬è§£æ |  | BK_parseInputFormat
[2025-07-14T02:25:28.741Z] [INFO] [BK] æŸ¥è©¢ç§‘ç›®ä»£ç¢¼: "æ—©é¤", ç”¨æˆ¶ID: Uae47d9d496e4596d70ed724a7d6e2948, ID=9ecf9a4f | ç§‘ç›®æŸ¥è©¢ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_getSubjectCode
[2025-07-14T02:25:28.939Z] [INFO] [BK] è®€å–ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 ç§‘ç›®è¡¨: 62ç­†æ•¸æ“š [9ecf9a4f] | ç§‘ç›®æŸ¥è©¢ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_getSubjectCode
[2025-07-14T02:25:28.940Z] [INFO] [BK] é€šéåŒç¾©è©æˆåŠŸæŸ¥è©¢ç§‘ç›®ä»£ç¢¼: 103-10301 é¤é£² [9ecf9a4f] | ç§‘ç›®æŸ¥è©¢ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_getSubjectCode
[2025-07-14T02:25:28.941Z] [INFO] [BK] ç²¾ç¢ºåŒ¹é…æˆåŠŸ "æ—©é¤" -> é¤é£² [f054fd56] | ç§‘ç›®åŒ¹é… | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processUserMessage
[2025-07-14T02:25:28.941Z] [DEBUG] [BK] è™•ç†æ–‡å­—ç§»é™¤é‡‘é¡å’Œæ”¯ä»˜æ–¹å¼: åŸå§‹æ–‡å­—="æ—©é¤2222222", é‡‘é¡=2222222, æ”¯ä»˜æ–¹å¼=æœªæŒ‡å®š | æ–‡æœ¬è™•ç† |  | BK_removeAmountFromText
[2025-07-14T02:25:28.941Z] [INFO] [BK] BK 2.0: è¨Šæ¯è™•ç†çµæœ: {"type":"è¨˜å¸³","processed":true,"subject":"æ—©é¤","subjectName":"é¤é£²","majorCode":"103","majorName":"é¤é£²è²»ç”¨","subCode":"10301","amount":2222222,"rawAmount":"2222222","paymentMethod":"é è¨­","action":"æ”¯å‡º","confidence":1,"matchMethod":"exact_match","text":"æ—©é¤","originalSubject":"æ—©é¤","processId":"f054fd56","ledgerId":"user_Uae47d9d496e4596d70ed724a7d6e2948"} [aa155e08] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
[2025-07-14T02:25:28.941Z] [INFO] [BK] BK 2.0: æº–å‚™èª¿ç”¨ BK_processBookkeeping [aa155e08] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
[2025-07-14T02:25:28.941Z] [INFO] [BK] BK 2.0: æº–å‚™å®Œæ•´è¨˜å¸³æ•¸æ“šï¼Œaction=æ”¯å‡º, income=, expense=2222222 [aa155e08] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
[2025-07-14T02:25:28.942Z] [INFO] [BK] [aa155e08] BK_processBookkeeping: é–‹å§‹è™•ç†è¨˜å¸³è«‹æ±‚ | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:25:28.942Z] [DEBUG] [BK] [aa155e08] BK_processBookkeeping: æ ¼å¼åŒ–æ—¥æœŸ: 2025/07/14 10:25, æ™‚é–“: 10:25 | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:25:28.942Z] [DEBUG] [BK] é–‹å§‹ç”Ÿæˆæ”¶æ”¯ID [aa155e08] | IDç”Ÿæˆ |  | BK_generateBookkeepingId
[2025-07-14T02:25:29.120Z] [INFO] [BK] ç”Ÿæˆæ”¶æ”¯ID: 20250714-00002 [aa155e08] | IDç”Ÿæˆ |  | BK_generateBookkeepingId
[2025-07-14T02:25:29.120Z] [INFO] [BK] [aa155e08] BK_processBookkeeping: ç”Ÿæˆè¨˜å¸³ID: 20250714-00002 | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:25:29.120Z] [INFO] [BK] [aa155e08] BK_processBookkeeping: è™•ç†æ”¯å‡ºé‡‘é¡: 2222222ï¼ŒåŸå§‹æ ¼å¼: 2222222 | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:25:29.120Z] [INFO] [BK] [aa155e08] BK_processBookkeeping: ä½¿ç”¨åŸå§‹æ–‡æœ¬ä½œç‚ºå‚™è¨»: "æ—©é¤" | å‚™è¨»è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:25:29.120Z] [INFO] [BK] [aa155e08] BK_processBookkeeping: æº–å‚™è¨˜å¸³æ•¸æ“š: ID=20250714-00002, ä½¿ç”¨è€…=Uae47d9d496e4596d70ed724a7d6e2948, é¡å‹=J, æ”¯ä»˜æ–¹å¼=é è¨­, åŸå§‹é‡‘é¡=2222222 | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:25:29.121Z] [INFO] [BK] æº–å‚™è¨˜å¸³æ•¸æ“š [aa155e08] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T02:25:29.121Z] [INFO] [BK] æ”¶åˆ°æ•¸æ“š: {"id":"20250714-00002","userType":"J","date":"2025/07/14","time":"10:25","majorCode":"103","minorCod... | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T02:25:29.121Z] [INFO] [BK] å‚™è¨»å…§å®¹: "æ—©é¤" [aa155e08] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T02:25:29.121Z] [WARNING] [BK] æœªè¨­ç½®action (undefined)ï¼Œé€€å›åˆ°å‚³çµ±åˆ¤æ–·æ–¹å¼ [aa155e08] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T02:25:29.121Z] [INFO] [BK] å‚³çµ±æ–¹å¼ï¼šä½¿ç”¨æ”¯å‡ºé‡‘é¡: 2222222 [aa155e08] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T02:25:29.121Z] [DEBUG] [BK] BK_validatePaymentMethod: é©—è­‰æ”¯ä»˜æ–¹å¼ "é è¨­" å°æ‡‰ç§‘ç›®ä»£ç¢¼ 103 | æ”¯ä»˜æ–¹å¼é©—è­‰ |  | BK_validatePaymentMethod
[2025-07-14T02:25:29.121Z] [DEBUG] [BK] BK_validatePaymentMethod: æœªæŒ‡å®šæ”¯ä»˜æ–¹å¼æˆ–å€¼ç‚º"é è¨­"ï¼Œä½¿ç”¨é»˜èªæ”¯ä»˜æ–¹å¼"åˆ·å¡" | æ”¯ä»˜æ–¹å¼é©—è­‰ |  | BK_validatePaymentMethod
[2025-07-14T02:25:29.121Z] [INFO] [BK] è¨˜å¸³æ•¸æ“šæº–å‚™å®Œæˆ: æ”¶å…¥=, æ”¯å‡º=2222222, æ”¯ä»˜æ–¹å¼=åˆ·å¡, å‚™è¨»="æ—©é¤" [aa155e08] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T02:25:29.121Z] [INFO] [BK] [aa155e08] BK_processBookkeeping: é–‹å§‹ä¿å­˜æ•¸æ“šåˆ°Firestore | æ•¸æ“šå­˜å„² | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:25:29.121Z] [DEBUG] [BK] é–‹å§‹å„²å­˜æ•¸æ“šåˆ° Firestore [aa155e08] | Firestoreå­˜å„² |  | BK_saveToFirestore
[2025-07-14T02:25:29.263Z] [INFO] [BK] æ•¸æ“šæˆåŠŸå„²å­˜åˆ° Firestoreï¼Œæ–‡æª”ID: iGtzNUQGq6BCkWkZSJ4J [aa155e08] | Firestoreå­˜å„² |  | BK_saveToFirestore
[2025-07-14T02:25:29.392Z] [INFO] [BK] [aa155e08] BK_processBookkeeping: Firestoreå­˜å„²æˆåŠŸï¼Œæ–‡æª”ID: iGtzNUQGq6BCkWkZSJ4J | æ•¸æ“šå­˜å„² | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:25:29.392Z] [INFO] [BK] [aa155e08] BK_processBookkeeping: æœ€çµ‚ç¢ºèªçš„æ”¯ä»˜æ–¹å¼: åˆ·å¡ | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:25:29.392Z] [INFO] [BK] [aa155e08] BK_processBookkeeping: è¨˜å¸³è™•ç†æˆåŠŸ: 20250714-00002, ä½¿ç”¨è€…é¡å‹: J, åŸå§‹é‡‘é¡: 2222222, æ”¯ä»˜æ–¹å¼: åˆ·å¡ | è¨˜å¸³å®Œæˆ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:25:29.392Z] [INFO] [BK] BK 2.0: è¨˜å¸³çµæœ: æˆåŠŸ [aa155e08] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
DD_distributeDataè™•ç†å®Œæˆï¼Œçµæœé è¦½: {"success":true,"hasResponseMessage":true,"responseMsgLength":90,"errorType":"ç„¡","moduleCode":"ç„¡","hasPartialData":false} [2a447d01]
æº–å‚™å›è¦†è¨Šæ¯ [2a447d01]
WH_replyMessage: æ”¶åˆ°é¡å‹ object çš„è¨Šæ¯å°è±¡
WH_replyMessage: è¨Šæ¯å°è±¡çµæ§‹: ["success","result","module","responseMessage","processId","userId","replyToken"]
WH_replyMessage: è¨Šæ¯å°è±¡é è¦½: {"success":true,"result":{"success":true,"message":"è¨˜å¸³æˆåŠŸï¼","data":{"id":"20250714-00002","date":"2025/07/14 10:25","subjectName":"é¤é£²","amount":2222222,"rawAmount":"2222222","action":"æ”¯å‡º","paymentMetho...
WH_replyMessage: ç™¼ç¾responseMessageå±¬æ€§ (string), é•·åº¦=90
WH_replyMessage: ä½¿ç”¨responseMessageå±¬æ€§ (è¨˜å¸³æˆåŠŸï¼
é‡‘é¡ï¼š2222222å…ƒ (æ”¯å‡º)
æ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡...)
WH_replyMessage: é–‹å§‹å›è¦†è¨Šæ¯: è¨˜å¸³æˆåŠŸï¼
é‡‘é¡ï¼š2222222å…ƒ (æ”¯å‡º)
æ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡
æ™‚é–“ï¼š2025/07/14 10:25...
[WH 2.0.16 LOG] WH 2.0.3: é–‹å§‹å›è¦†è¨Šæ¯: è¨˜å¸³æˆåŠŸï¼
é‡‘é¡ï¼š2222222å…ƒ (æ”¯å‡º)
æ”¯ä»˜æ–¹å¼ï¼šåˆ·å¡
æ™‚é–“ï¼š2025/07/14 10:25... (INFO)
[WH 2.0.16 LOG] WH 2.0.3: ç™¼é€APIè«‹æ±‚åˆ°LINEå¹³å° (INFO)
è¨Šæ¯å›è¦†çµæœ: {} [2a447d01]
éåŒæ­¥è™•ç†å®Œæˆï¼Œå·²æ¸…ç†æ•¸æ“š [2a447d01]
[WH 2.0.16 LOG] WH 2.0.7: éåŒæ­¥è™•ç†å®Œæˆ [2a447d01] (INFO)
WH_replyMessage éŒ¯èª¤: AxiosError: Request failed with status code 400
éŒ¯èª¤éŸ¿æ‡‰: {"message":"Invalid reply token"}
[WH 2.0.16 LOG] WH 2.0.3: å›è¦†è¨Šæ¯ç•°å¸¸: AxiosError: Request failed with status code 400 (ERROR)
^CğŸ›‘ æ”¶åˆ°SIGINTä¿¡è™Ÿï¼Œæ­£åœ¨é—œé–‰æœå‹™å™¨...
[WH 2.0.16 LOG] WH 2.0.7: æ”¶åˆ°SIGINTä¿¡è™Ÿï¼Œæ­£åœ¨é—œé–‰æœå‹™å™¨ (INFO)
