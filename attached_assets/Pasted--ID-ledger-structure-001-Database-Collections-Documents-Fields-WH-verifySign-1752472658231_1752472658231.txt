 å¸³æœ¬ ID: ledger_structure_001
ğŸ‰ Database â†’ Collections â†’ Documents â†’ Fields å®Œæ•´æ¶æ§‹å·²å»ºç«‹ï¼
WH_verifySignature: æ¸¬è©¦æ¨¡å¼ï¼Œè·³éç°½ç« é©—è­‰
[WH 2.0.16 LOG] WH 2.0.7: æ”¶åˆ°LINE Webhookè«‹æ±‚ [8da17a7e] (INFO)
æª¢æ¸¬åˆ°éœ€è¦å›è¦†çš„è¨Šæ¯ï¼Œå•Ÿç”¨åŒæ­¥è™•ç† [8da17a7e]
[WH 2.0.16 LOG] WH 2.0.16: æª¢æ¸¬åˆ°éœ€è¦å›è¦†çš„è¨Šæ¯ï¼Œå•Ÿç”¨åŒæ­¥è™•ç† [8da17a7e] (INFO)
é–‹å§‹éåŒæ­¥è™•ç†è«‹æ±‚ [8da17a7e]
[WH 2.0.16 LOG] WH 2.0.7: é–‹å§‹éåŒæ­¥è™•ç†è«‹æ±‚ [8da17a7e] (INFO)
[WH 2.0.16 LOG] WH 2.0.3: é–‹å§‹è™•ç†äº‹ä»¶: message [8da17a7e] (INFO)
è™•ç†æ¶ˆæ¯äº‹ä»¶: text [8da17a7e]
æ”¶åˆ°æ–‡æœ¬æ¶ˆæ¯: "æ¸¬è©¦æ”¶å…¥99999" [8da17a7e]
[WH 2.0.16 LOG] WH 2.0.3: æ”¶åˆ°æ–‡æœ¬æ¶ˆæ¯: "æ¸¬è©¦æ”¶å…¥99999" [8da17a7e] (INFO)
æº–å‚™è¨Šæ¯æ•¸æ“š: {"text":"æ¸¬è©¦æ”¶å…¥99999","userId":"Uae47d9d496e4596d70ed724a7d6e2948","timestamp":1752472630671,"replyToken":"bee1cd5086e14671966bdd925effad95"} [8da17a7e]
æª¢æ¸¬åˆ°ç°¡å–®è¨˜å¸³æ ¼å¼ï¼Œä½¿ç”¨ BK 2.0 ç›´é€£è·¯å¾‘ [8da17a7e]
[WH 2.0.16 LOG] WH 2.0.17: ä½¿ç”¨ BK 2.0 ç°¡åŒ–è·¯å¾‘è™•ç†ç°¡å–®è¨˜å¸³ [8da17a7e] (INFO)
[2025-07-14T05:57:11.640Z] [INFO] [BK] BK 2.0: é–‹å§‹è™•ç†ç°¡å–®è¨˜å¸³ [45ab7367] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
[2025-07-14T05:57:11.640Z] [INFO] [BK] BK 2.0: è™•ç†ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 çš„è¨Šæ¯: "æ¸¬è©¦æ”¶å…¥99999" [45ab7367] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
[2025-07-14T05:57:11.640Z] [INFO] [BK] è™•ç†ç”¨æˆ¶æ¶ˆæ¯: "æ¸¬è©¦æ”¶å…¥99999" (å¸³æœ¬: user_Uae47d9d496e4596d70ed724a7d6e2948) | è¨Šæ¯è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processUserMessage
[2025-07-14T05:57:11.640Z] [INFO] [BK] æª¢æŸ¥ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 ç§‘ç›®æ•¸æ“š [7e9c46b7] | ç§‘ç›®æª¢æŸ¥ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processUserMessage
âœ… ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 å·²æœ‰ç§‘ç›®æ•¸æ“šï¼Œç„¡éœ€åˆå§‹åŒ–
[2025-07-14T05:57:11.807Z] [INFO] [BK] ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 ç§‘ç›®æ•¸æ“šæª¢æŸ¥å®Œæˆ [7e9c46b7] | ç§‘ç›®æª¢æŸ¥ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processUserMessage
[2025-07-14T05:57:11.807Z] [DEBUG] [BK] é–‹å§‹è§£ææ–‡æœ¬ã€Œæ¸¬è©¦æ”¶å…¥99999ã€[7e9c46b7] | æ–‡æœ¬è§£æ |  | BK_parseInputFormat
[2025-07-14T05:57:11.807Z] [INFO] [BK] è­˜åˆ¥æ¨™æº–æ ¼å¼ - ç§‘ç›®:ã€Œæ¸¬è©¦æ”¶å…¥ã€, é‡‘é¡:99999, æ”¯ä»˜æ–¹å¼:ã€Œé è¨­ã€ [7e9c46b7] | æ–‡æœ¬è§£æ |  | BK_parseInputFormat
[2025-07-14T05:57:11.808Z] [INFO] [BK] æŸ¥è©¢ç§‘ç›®ä»£ç¢¼: "æ¸¬è©¦æ”¶å…¥", ç”¨æˆ¶ID: Uae47d9d496e4596d70ed724a7d6e2948, ID=ec824e8c | ç§‘ç›®æŸ¥è©¢ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_getSubjectCode
[2025-07-14T05:57:12.000Z] [INFO] [BK] è®€å–ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 ç§‘ç›®è¡¨: 62ç­†æ•¸æ“š [ec824e8c] | ç§‘ç›®æŸ¥è©¢ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_getSubjectCode
[2025-07-14T05:57:12.002Z] [INFO] [BK] æˆåŠŸæŸ¥è©¢ç§‘ç›®ä»£ç¢¼: 899-89999 æ¸¬è©¦æ”¶å…¥ [ec824e8c] | ç§‘ç›®æŸ¥è©¢ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_getSubjectCode
[2025-07-14T05:57:12.002Z] [INFO] [BK] ç²¾ç¢ºåŒ¹é…æˆåŠŸ "æ¸¬è©¦æ”¶å…¥" -> æ¸¬è©¦æ”¶å…¥ [7e9c46b7] | ç§‘ç›®åŒ¹é… | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processUserMessage
[2025-07-14T05:57:12.002Z] [DEBUG] [BK] è™•ç†æ–‡å­—ç§»é™¤é‡‘é¡å’Œæ”¯ä»˜æ–¹å¼: åŸå§‹æ–‡å­—="æ¸¬è©¦æ”¶å…¥99999", é‡‘é¡=99999, æ”¯ä»˜æ–¹å¼=æœªæŒ‡å®š | æ–‡æœ¬è™•ç† |  | BK_removeAmountFromText
[2025-07-14T05:57:12.002Z] [INFO] [BK] BK 2.0: è¨Šæ¯è™•ç†çµæœ: {"type":"è¨˜å¸³","processed":true,"subject":"æ¸¬è©¦æ”¶å…¥","subjectName":"æ¸¬è©¦æ”¶å…¥","majorCode":"899","majorName":"æ¸¬è©¦æ”¶å…¥","subCode":"89999","amount":99999,"rawAmount":"99999","paymentMethod":"é è¨­","action":"æ”¶å…¥","confidence":1,"matchMethod":"exact_match","text":"æ¸¬è©¦æ”¶å…¥","originalSubject":"æ¸¬è©¦æ”¶å…¥","processId":"7e9c46b7","ledgerId":"user_Uae47d9d496e4596d70ed724a7d6e2948"} [45ab7367] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
[2025-07-14T05:57:12.002Z] [INFO] [BK] BK 2.0: æº–å‚™èª¿ç”¨ BK_processBookkeeping [45ab7367] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
[2025-07-14T05:57:12.003Z] [INFO] [BK] [45ab7367] BK_processBookkeeping: é–‹å§‹è™•ç†è¨˜å¸³è«‹æ±‚ | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T05:57:12.003Z] [DEBUG] [BK] [45ab7367] BK_processBookkeeping: æ ¼å¼åŒ–æ—¥æœŸ: 2025/07/14 13:57, æ™‚é–“: 13:57 | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T05:57:12.003Z] [DEBUG] [BK] é–‹å§‹ç”Ÿæˆæ”¶æ”¯ID [45ab7367] | IDç”Ÿæˆ |  | BK_generateBookkeepingId
[2025-07-14T05:57:12.145Z] [INFO] [BK] ç”Ÿæˆæ”¶æ”¯ID: 20250714-00024 [45ab7367] | IDç”Ÿæˆ |  | BK_generateBookkeepingId
[2025-07-14T05:57:12.145Z] [INFO] [BK] [45ab7367] BK_processBookkeeping: ç”Ÿæˆè¨˜å¸³ID: 20250714-00024 | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T05:57:12.145Z] [INFO] [BK] [45ab7367] BK_processBookkeeping: è™•ç†æ”¶å…¥é‡‘é¡: 99999ï¼ŒåŸå§‹æ ¼å¼: 99999 | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T05:57:12.145Z] [INFO] [BK] [45ab7367] BK_processBookkeeping: ä½¿ç”¨åŸå§‹æ–‡æœ¬ä½œç‚ºå‚™è¨»: "æ¸¬è©¦æ”¶å…¥" | å‚™è¨»è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T05:57:12.145Z] [INFO] [BK] [45ab7367] BK_processBookkeeping: æº–å‚™è¨˜å¸³æ•¸æ“š: ID=20250714-00024, ä½¿ç”¨è€…=Uae47d9d496e4596d70ed724a7d6e2948, é¡å‹=J, æ”¯ä»˜æ–¹å¼=é è¨­, åŸå§‹é‡‘é¡=99999 | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T05:57:12.146Z] [INFO] [BK] æº–å‚™è¨˜å¸³æ•¸æ“š [45ab7367] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T05:57:12.146Z] [INFO] [BK] æ”¶åˆ°æ•¸æ“š: {"id":"20250714-00024","userType":"J","date":"2025/07/14","time":"13:57","majorCode":"899","minorCod... | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T05:57:12.146Z] [INFO] [BK] å‚™è¨»å…§å®¹: "æ¸¬è©¦æ”¶å…¥" [45ab7367] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T05:57:12.146Z] [WARNING] [BK] æœªè¨­ç½®actionï¼Œé€€å›åˆ°å‚³çµ±åˆ¤æ–·æ–¹å¼ [45ab7367] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T05:57:12.146Z] [INFO] [BK] ä½¿ç”¨æ”¶å…¥é‡‘é¡: 99999 [45ab7367] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T05:57:12.146Z] [DEBUG] [BK] BK_validatePaymentMethod: é©—è­‰æ”¯ä»˜æ–¹å¼ "é è¨­" å°æ‡‰ç§‘ç›®ä»£ç¢¼ 899 | æ”¯ä»˜æ–¹å¼é©—è­‰ |  | BK_validatePaymentMethod
[2025-07-14T05:57:12.146Z] [DEBUG] [BK] BK_validatePaymentMethod: ç§‘ç›®ä»£ç¢¼ 899 ç‚º8æˆ–9é–‹é ­ï¼Œä½¿ç”¨é»˜èªæ”¯ä»˜æ–¹å¼"ç¾é‡‘" | æ”¯ä»˜æ–¹å¼é©—è­‰ |  | BK_validatePaymentMethod
[2025-07-14T05:57:12.146Z] [INFO] [BK] è¨˜å¸³æ•¸æ“šæº–å‚™å®Œæˆ: æ”¶å…¥=99999, æ”¯å‡º=, æ”¯ä»˜æ–¹å¼=ç¾é‡‘, å‚™è¨»="æ¸¬è©¦æ”¶å…¥" [45ab7367] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T05:57:12.146Z] [INFO] [BK] [45ab7367] BK_processBookkeeping: é–‹å§‹ä¿å­˜æ•¸æ“šåˆ°Firestore | æ•¸æ“šå­˜å„² | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T05:57:12.146Z] [DEBUG] [BK] é–‹å§‹å„²å­˜æ•¸æ“šåˆ° Firestore [45ab7367] | Firestoreå­˜å„² |  | BK_saveToFirestore
[2025-07-14T05:57:12.271Z] [INFO] [BK] æ•¸æ“šæˆåŠŸå„²å­˜åˆ° Firestoreï¼Œæ–‡æª”ID: Aao0RQkZs2Xg8wTs5tUm [45ab7367] | Firestoreå­˜å„² |  | BK_saveToFirestore
[2025-07-14T05:57:12.409Z] [INFO] [BK] [45ab7367] BK_processBookkeeping: Firestoreå­˜å„²æˆåŠŸï¼Œæ–‡æª”ID: Aao0RQkZs2Xg8wTs5tUm | æ•¸æ“šå­˜å„² | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T05:57:12.409Z] [INFO] [BK] [45ab7367] BK_processBookkeeping: æœ€çµ‚ç¢ºèªçš„æ”¯ä»˜æ–¹å¼: ç¾é‡‘ | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T05:57:12.410Z] [INFO] [BK] [45ab7367] BK_processBookkeeping: è¨˜å¸³è™•ç†æˆåŠŸ: 20250714-00024, ä½¿ç”¨è€…é¡å‹: J, åŸå§‹é‡‘é¡: 99999, æ”¯ä»˜æ–¹å¼: ç¾é‡‘ | è¨˜å¸³å®Œæˆ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T05:57:12.410Z] [INFO] [BK] BK 2.0: è¨˜å¸³çµæœ: æˆåŠŸ [45ab7367] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
DD_distributeDataè™•ç†å®Œæˆï¼Œçµæœé è¦½: {"success":true,"hasResponseMessage":true,"responseMsgLength":92,"errorType":"ç„¡","moduleCode":"ç„¡","hasPartialData":false} [8da17a7e]
æª¢æ¸¬åˆ°æœªæ ¼å¼åŒ–çš„çµæœï¼Œå¼·åˆ¶ä½¿ç”¨ BK_formatSystemReplyMessage [8da17a7e]
[2025-07-14T05:57:12.410Z] [DEBUG] [BK] é–‹å§‹æ ¼å¼åŒ–è¨Šæ¯ [8da17a7e], æ¨¡çµ„: WH | è¨Šæ¯æ ¼å¼åŒ– | Uae47d9d496e4596d70ed724a7d6e2948 | BK_formatSystemReplyMessage
[2025-07-14T05:57:12.410Z] [DEBUG] [BK] ä½¿ç”¨ç¾æœ‰å›è¦†è¨Šæ¯ [8da17a7e] | è¨Šæ¯æ ¼å¼åŒ– | Uae47d9d496e4596d70ed724a7d6e2948 | BK_formatSystemReplyMessage
[WH 2.0.16 LOG] WH 2.0.17: å¼·åˆ¶æ ¼å¼åŒ–æœªé©—è­‰çš„è¨Šæ¯ [8da17a7e] (WARNING)
æº–å‚™å›è¦†å·²é©—è­‰çš„è¨Šæ¯ [8da17a7e]
WH_replyMessage: æ‹’çµ•æœªç¶“ BK_formatSystemReplyMessage æ ¼å¼åŒ–çš„è¨Šæ¯
[WH 2.0.16 LOG] WH 2.0.17: æ‹’çµ•æœªç¶“æ ¼å¼åŒ–çš„è¨Šæ¯ï¼ŒmoduleCode=WH (ERROR)
è¨Šæ¯å›è¦†çµæœ: {"success":false,"error":"è¨Šæ¯æ ¼å¼ä¸ç¬¦åˆè¦ç¯„"} [8da17a7e]
éåŒæ­¥è™•ç†å®Œæˆï¼Œå·²æ¸…ç†æ•¸æ“š [8da17a7e]
[WH 2.0.16 LOG] WH 2.0.7: éåŒæ­¥è™•ç†å®Œæˆ [8da17a7e] (INFO)
