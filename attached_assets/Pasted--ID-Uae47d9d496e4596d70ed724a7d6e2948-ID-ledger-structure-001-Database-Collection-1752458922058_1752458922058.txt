âœ… ä½¿ç”¨è€… ID: Uae47d9d496e4596d70ed724a7d6e2948
âœ… å¸³æœ¬ ID: ledger_structure_001
ğŸ‰ Database â†’ Collections â†’ Documents â†’ Fields å®Œæ•´æ¶æ§‹å·²å»ºç«‹ï¼
WH_verifySignature: æ¸¬è©¦æ¨¡å¼ï¼Œè·³éç°½ç« é©—è­‰
[WH 2.0.16 LOG] WH 2.0.7: æ”¶åˆ°LINE Webhookè«‹æ±‚ [9da7893f] (INFO)
æª¢æ¸¬åˆ°éœ€è¦å›è¦†çš„è¨Šæ¯ï¼Œå•Ÿç”¨åŒæ­¥è™•ç† [9da7893f]
[WH 2.0.16 LOG] WH 2.0.16: æª¢æ¸¬åˆ°éœ€è¦å›è¦†çš„è¨Šæ¯ï¼Œå•Ÿç”¨åŒæ­¥è™•ç† [9da7893f] (INFO)
é–‹å§‹éåŒæ­¥è™•ç†è«‹æ±‚ [9da7893f]
[WH 2.0.16 LOG] WH 2.0.7: é–‹å§‹éåŒæ­¥è™•ç†è«‹æ±‚ [9da7893f] (INFO)
[WH 2.0.16 LOG] WH 2.0.3: é–‹å§‹è™•ç†äº‹ä»¶: message [9da7893f] (INFO)
è™•ç†æ¶ˆæ¯äº‹ä»¶: text [9da7893f]
æ”¶åˆ°æ–‡æœ¬æ¶ˆæ¯: "æ—©é¤1111111" [9da7893f]
[WH 2.0.16 LOG] WH 2.0.3: æ”¶åˆ°æ–‡æœ¬æ¶ˆæ¯: "æ—©é¤1111111" [9da7893f] (INFO)
æº–å‚™è¨Šæ¯æ•¸æ“š: {"text":"æ—©é¤1111111","userId":"Uae47d9d496e4596d70ed724a7d6e2948","timestamp":1752458797192,"replyToken":"3c5dcba8a26e43c49fcaec5371460988"} [9da7893f]
æª¢æ¸¬åˆ°ç°¡å–®è¨˜å¸³æ ¼å¼ï¼Œä½¿ç”¨ BK 2.0 ç›´é€£è·¯å¾‘ [9da7893f]
[WH 2.0.16 LOG] WH 2.0.17: ä½¿ç”¨ BK 2.0 ç°¡åŒ–è·¯å¾‘è™•ç†ç°¡å–®è¨˜å¸³ [9da7893f] (INFO)
[2025-07-14T02:06:38.305Z] [INFO] [BK] BK 2.0: é–‹å§‹è™•ç†ç°¡å–®è¨˜å¸³ [f98069a5] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
[2025-07-14T02:06:38.305Z] [INFO] [BK] BK 2.0: è™•ç†ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 çš„è¨Šæ¯: "æ—©é¤1111111" [f98069a5] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
[2025-07-14T02:06:38.306Z] [INFO] [BK] è™•ç†ç”¨æˆ¶æ¶ˆæ¯: "æ—©é¤1111111" (å¸³æœ¬: user_Uae47d9d496e4596d70ed724a7d6e2948) | è¨Šæ¯è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processUserMessage
[2025-07-14T02:06:38.306Z] [INFO] [BK] æª¢æŸ¥ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 ç§‘ç›®æ•¸æ“š [d164b99c] | ç§‘ç›®æª¢æŸ¥ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processUserMessage
âœ… ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 å·²æœ‰ç§‘ç›®æ•¸æ“šï¼Œç„¡éœ€åˆå§‹åŒ–
[2025-07-14T02:06:38.510Z] [INFO] [BK] ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 ç§‘ç›®æ•¸æ“šæª¢æŸ¥å®Œæˆ [d164b99c] | ç§‘ç›®æª¢æŸ¥ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processUserMessage
[2025-07-14T02:06:38.510Z] [DEBUG] [BK] é–‹å§‹è§£ææ–‡æœ¬ã€Œæ—©é¤1111111ã€[d164b99c] | æ–‡æœ¬è§£æ |  | BK_parseInputFormat
[2025-07-14T02:06:38.510Z] [INFO] [BK] è­˜åˆ¥æ¨™æº–æ ¼å¼ - ç§‘ç›®:ã€Œæ—©é¤ã€, é‡‘é¡:1111111, æ”¯ä»˜æ–¹å¼:ã€Œé è¨­ã€ [d164b99c] | æ–‡æœ¬è§£æ |  | BK_parseInputFormat
[2025-07-14T02:06:38.511Z] [INFO] [BK] æŸ¥è©¢ç§‘ç›®ä»£ç¢¼: "æ—©é¤", ç”¨æˆ¶ID: Uae47d9d496e4596d70ed724a7d6e2948, ID=fe952111 | ç§‘ç›®æŸ¥è©¢ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_getSubjectCode
[2025-07-14T02:06:38.511Z] [WARNING] [BK] Firestore æœªåˆå§‹åŒ–ï¼Œå˜—è©¦é‡æ–°åˆå§‹åŒ– [fe952111] | ç§‘ç›®æŸ¥è©¢ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_getSubjectCode
[2025-07-14T02:06:38.816Z] [INFO] [BK] Firestoreé€£æ¥åˆå§‹åŒ–æˆåŠŸ | ç³»çµ±åˆå§‹åŒ– |  | initializeFirestore
[2025-07-14T02:06:39.026Z] [INFO] [BK] è®€å–ç”¨æˆ¶ Uae47d9d496e4596d70ed724a7d6e2948 ç§‘ç›®è¡¨: 62ç­†æ•¸æ“š [fe952111] | ç§‘ç›®æŸ¥è©¢ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_getSubjectCode
[2025-07-14T02:06:39.027Z] [INFO] [BK] é€šéåŒç¾©è©æˆåŠŸæŸ¥è©¢ç§‘ç›®ä»£ç¢¼: 103-10301 é¤é£² [fe952111] | ç§‘ç›®æŸ¥è©¢ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_getSubjectCode
[2025-07-14T02:06:39.027Z] [INFO] [BK] ç²¾ç¢ºåŒ¹é…æˆåŠŸ "æ—©é¤" -> é¤é£² [d164b99c] | ç§‘ç›®åŒ¹é… | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processUserMessage
[2025-07-14T02:06:39.027Z] [DEBUG] [BK] è™•ç†æ–‡å­—ç§»é™¤é‡‘é¡å’Œæ”¯ä»˜æ–¹å¼: åŸå§‹æ–‡å­—="æ—©é¤1111111", é‡‘é¡=1111111, æ”¯ä»˜æ–¹å¼=æœªæŒ‡å®š | æ–‡æœ¬è™•ç† |  | BK_removeAmountFromText
[2025-07-14T02:06:39.027Z] [INFO] [BK] BK 2.0: è¨Šæ¯è™•ç†çµæœ: {"type":"è¨˜å¸³","processed":true,"subject":"æ—©é¤","subjectName":"é¤é£²","majorCode":"103","majorName":"é¤é£²è²»ç”¨","subCode":"10301","amount":1111111,"rawAmount":"1111111","paymentMethod":"é è¨­","action":"æ”¯å‡º","confidence":1,"matchMethod":"exact_match","text":"æ—©é¤","originalSubject":"æ—©é¤","processId":"d164b99c","ledgerId":"user_Uae47d9d496e4596d70ed724a7d6e2948"} [f98069a5] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
[2025-07-14T02:06:39.027Z] [INFO] [BK] BK 2.0: æº–å‚™èª¿ç”¨ BK_processBookkeeping [f98069a5] | ç°¡å–®è¨˜å¸³ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processDirectBookkeeping
[2025-07-14T02:06:39.028Z] [INFO] [BK] [f98069a5] BK_processBookkeeping: é–‹å§‹è™•ç†è¨˜å¸³è«‹æ±‚ | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:06:39.029Z] [DEBUG] [BK] [f98069a5] BK_processBookkeeping: æ ¼å¼åŒ–æ—¥æœŸ: 2025/07/14 10:06, æ™‚é–“: 10:06 | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:06:39.029Z] [DEBUG] [BK] é–‹å§‹ç”Ÿæˆæ”¶æ”¯ID [f98069a5] | IDç”Ÿæˆ |  | BK_generateBookkeepingId
[2025-07-14T02:06:39.029Z] [WARNING] [BK] DLæ¨¡çµ„æœªæ‰¾åˆ°ï¼Œå°‡ä½¿ç”¨åŸç”Ÿæ—¥èªŒç³»çµ± | ç³»çµ±åˆå§‹åŒ– |  | BK_initialize
[2025-07-14T02:06:39.029Z] [INFO] [BK] BKæ¨¡çµ„åˆå§‹åŒ–é–‹å§‹ [2025-07-14T02:06:39.029Z] | DLæ¨¡çµ„åˆå§‹åŒ–: å¤±æ•— (æœªæ‰¾åˆ°DLæ¨¡çµ„) | Firestoreåˆå§‹åŒ–: æˆåŠŸ | ç³»çµ±åˆå§‹åŒ– |  | BK_initialize
[2025-07-14T02:06:39.189Z] [INFO] [BK] ç”Ÿæˆæ”¶æ”¯ID: 20250714-00001 [f98069a5] | IDç”Ÿæˆ |  | BK_generateBookkeepingId
[2025-07-14T02:06:39.189Z] [INFO] [BK] [f98069a5] BK_processBookkeeping: ç”Ÿæˆè¨˜å¸³ID: 20250714-00001 | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:06:39.189Z] [INFO] [BK] [f98069a5] BK_processBookkeeping: è™•ç†æ”¯å‡ºé‡‘é¡: 1111111ï¼ŒåŸå§‹æ ¼å¼: 1111111 | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:06:39.189Z] [INFO] [BK] [f98069a5] BK_processBookkeeping: ä½¿ç”¨åŸå§‹æ–‡æœ¬ä½œç‚ºå‚™è¨»: "æ—©é¤" | å‚™è¨»è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:06:39.189Z] [INFO] [BK] [f98069a5] BK_processBookkeeping: æº–å‚™è¨˜å¸³æ•¸æ“š: ID=20250714-00001, ä½¿ç”¨è€…=Uae47d9d496e4596d70ed724a7d6e2948, é¡å‹=J, æ”¯ä»˜æ–¹å¼=é è¨­, åŸå§‹é‡‘é¡=1111111 | è¨˜å¸³è™•ç† | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBookkeeping
[2025-07-14T02:06:39.189Z] [INFO] [BK] æº–å‚™è¨˜å¸³æ•¸æ“š [f98069a5] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T02:06:39.189Z] [INFO] [BK] æ”¶åˆ°æ•¸æ“š: {"id":"20250714-00001","userType":"J","date":"2025/07/14","time":"10:06","majorCode":"103","minorCod... | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T02:06:39.189Z] [INFO] [BK] å‚™è¨»å…§å®¹: "æ—©é¤" [f98069a5] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T02:06:39.189Z] [WARNING] [BK] æœªè¨­ç½®actionï¼Œé€€å›åˆ°å‚³çµ±åˆ¤æ–·æ–¹å¼ [f98069a5] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T02:06:39.189Z] [INFO] [BK] ä½¿ç”¨æ”¯å‡ºé‡‘é¡: 1111111 [f98069a5] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T02:06:39.189Z] [DEBUG] [BK] BK_validatePaymentMethod: é©—è­‰æ”¯ä»˜æ–¹å¼ "é è¨­" å°æ‡‰ç§‘ç›®ä»£ç¢¼ 103 | æ”¯ä»˜æ–¹å¼é©—è­‰ |  | BK_validatePaymentMethod
[2025-07-14T02:06:39.189Z] [DEBUG] [BK] BK_validatePaymentMethod: æœªæŒ‡å®šæ”¯ä»˜æ–¹å¼æˆ–å€¼ç‚º"é è¨­"ï¼Œä½¿ç”¨é»˜èªæ”¯ä»˜æ–¹å¼"åˆ·å¡" | æ”¯ä»˜æ–¹å¼é©—è­‰ |  | BK_validatePaymentMethod
[2025-07-14T02:06:39.189Z] [INFO] [BK] è¨˜å¸³æ•¸æ“šæº–å‚™å®Œæˆ: æ”¶å…¥=, æ”¯å‡º=1111111, æ”¯ä»˜æ–¹å¼=åˆ·å¡, å‚™è¨»="æ—©é¤" [f98069a5] | æ•¸æ“šæº–å‚™ | Uae47d9d496e4596d70ed724a7d6e2948 | BK_prepareBookkeepingData
[2025-07-14T02:06:39.189Z] [INFO] [BK] [f98069a5] BK_processBookkeeping: é–‹å§‹ä¿å­˜æ•¸æ“šåˆ°Firestore | æ•¸æ“šå­˜å„² | Uae47d9d496e4596d70ed724a7d6e2948 | BK_processBoo