
# Wireflow Design - LCAS 2.0 頁面流程設計

## 1. 文件基本資訊
- **文件名稱**：LCAS 2.0 四模式頁面流程與互動設計
- **版本編號**：v1.0.0
- **撰寫日期**：2025-07-31
- **撰寫者**：LCAS PM Team
- **關聯文件**：
  - 基礎流程：7003. Flutter_User_Flow.md
  - 使用者故事：7001. Flutter_User story.md
  - 使用情境：7002. Flutter_User_Scenarios.md
  - API規格：01. Replit_Module code_Business layer

---

## 2. 頁面架構總覽

### 2.1 平台頁面分佈
```
LCAS 2.0 頁面生態系統
├── LINE OA 頁面
│   ├── 歡迎頁面 (Welcome)
│   ├── Rich Menu 主控台
│   ├── 快速記帳介面
│   └── 提醒設定頁面
│
└── Flutter APP 頁面
    ├── 註冊/登入頁面群組
    ├── 模式選擇/切換頁面群組
    ├── 四模式專屬主頁群組
    ├── 記帳功能頁面群組
    ├── 分析報表頁面群組
    └── 設定管理頁面群組
```

### 2.2 四模式頁面差異化設計

| 頁面類型 | 精準控制者 | 紀錄習慣者 | 轉型挑戰者 | 潛在覺醒者 |
|----------|------------|------------|------------|------------|
| **主頁風格** | 專業儀表板 | 美感卡片式 | 目標進度式 | 極簡引導式 |
| **導航複雜度** | 多層級選單 | 扁平化設計 | 中等結構 | 單一路徑 |
| **功能展示** | 全功能展示 | 精選功能 | 階段性解鎖 | 基礎功能優先 |
| **視覺語言** | 商業專業 | 溫馨美感 | 活力激勵 | 友善親和 |

---

## 3. 頁面流程地圖 (Page Flow Map)

### 3.1 使用者入口頁面流程

```
[LINE掃描QR]
     ↓
   快速註冊
     ↓
[歡迎頁面]
     ↓
 第三方登入
     ↓
[身份驗證頁面]
     ↓
 5道簡易問題
     ↓
[模式測評頁面]
     ↓
 AI智慧推薦
     ↓
[模式推薦頁面]
     ↓
 使用者確認
     ↓
[模式確認頁面]
     ↓
   功能導覽
     ↓
[引導完成頁面]
     ↓
 個人化首頁
     ↓
[對應模式主頁]
```

**頁面元件設計**：
- **歡迎頁面**：品牌Logo + 註冊選項 + 一句話價值主張
- **身份驗證頁面**：社群登入按鈕 + 隱私政策連結
- **模式測評頁面**：進度條 + 問題卡片 + 跳過選項
- **模式推薦頁面**：模式特色圖示 + 匹配度百分比 + 手動調整
- **模式確認頁面**：模式預覽 + 功能清單 + 確認按鈕
- **引導完成頁面**：功能亮點 + 開始使用按鈕

### 3.2 精準控制者模式 - 頁面架構

```
[專案管理主頁]
     ↓
  專案清單視圖
     ↓
[專案建立精靈]
     ↓
   引導式建立
     ↓
[專案設定頁面]
     ↓
  詳細參數設定
     ↓
[預算分配頁面]
     ↓
   視覺化分配
     ↓
[成員邀請頁面]
     ↓
  協作成員管理
     ↓
[專案確認頁面]
     ↓
  最終確認檢視
     ↓
[專案儀表板]
     ↓
  即時數據中心
     ↓
[記帳操作頁面]
     ↓
[報表匯出頁面]
     ↓
[多維分析頁面]
     ↓
[深度分析頁面]
```

**頁面設計特色**：
- **專案管理主頁**：Grid佈局專案卡片 + 新建專案FAB + 搜尋過濾器
- **專案建立精靈**：步驟導航 + 進度指示器 + 前進/後退按鈕
- **專案儀表板**：多圖表並列 + 即時數據更新 + 快速操作區
- **深度分析頁面**：可拖拽圖表組件 + 自訂時間範圍 + 匯出功能

### 3.3 紀錄習慣者模式 - 頁面架構

```
[個人化主頁]
     ↓
  溫馨歡迎介面
     ↓
[主題選擇頁面]
     ↓
  視覺主題庫
     ↓
[提醒設定頁面]
     ↓
  溫和提醒配置
     ↓
[美感記帳頁面]
     ↓
  優雅輸入介面
     ↓
[科目選擇頁面]
     ↓
  美感圖示選擇
     ↓
[記帳確認頁面]
     ↓
   儀式感確認
     ↓
[完成動畫頁面]
     ↓
   成就感回饋
     ↓
[自動備份頁面]
     ↓
[美感圖表頁面]
     ↓
[月度檢視頁面]
```

**頁面設計特色**：
- **個人化主頁**：大型Hero圖片 + 柔和色彩 + 情感化文案
- **主題選擇頁面**：主題預覽卡片 + 即時預覽 + 季節性主題
- **美感記帳頁面**：大型數字輸入 + 動畫過渡 + 觸覺回饋
- **月度檢視頁面**：美感數據視覺化 + 故事化呈現 + 心情記錄

### 3.4 轉型挑戰者模式 - 頁面架構

```
[挑戰主頁]
     ↓
  進度追蹤中心
     ↓
[目標設定頁面]
     ↓
   SMART目標
     ↓
[預算分配頁面]
     ↓
  預算輪盤設計
     ↓
[提醒配置頁面]
     ↓
  多重提醒系統
     ↓
[快速記帳頁面]
     ↓
  極速輸入介面
     ↓
[即時回饋頁面]
     ↓
   立即成就感
     ↓
[社群支持頁面]
     ↓
  協作激勵空間
     ↓
[週報頁面]
     ↓
[預算警示頁面]
     ↓
[成就頁面]
```

**頁面設計特色**：
- **挑戰主頁**：大型進度環 + 目標倒數計時 + 今日任務清單
- **目標設定頁面**：滑動設定器 + 目標視覺化 + 里程碑設定
- **即時回饋頁面**：成就徽章 + 進度條動畫 + 鼓勵文案
- **社群支持頁面**：好友進度對比 + 互相打氣功能 + 團隊挑戰

### 3.5 潛在覺醒者模式 - 頁面架構

```
[極簡歡迎頁]
     ↓
  友善第一印象
     ↓
[零門檻記帳頁]
     ↓
   一鍵式操作
     ↓
[驚喜回應頁]
     ↓
  正向鼓勵設計
     ↓
[溫和分析頁]
     ↓
  非侵入式洞察
     ↓
[覺醒時刻頁]
     ↓
   視覺化覺醒
     ↓
[目標引導頁]
     ↓
   漸進式引導
     ↓
[習慣建立頁]
     ↓
  成功強化迴路
```

**頁面設計特色**：
- **極簡歡迎頁**：單一CTA按鈕 + 零認知負擔 + 友善吉祥物
- **零門檻記帳頁**：超大輸入框 + 一鍵確認 + 即時儲存
- **覺醒時刻頁**：驚喜動畫 + 數據故事化 + 「原來如此」時刻
- **習慣建立頁**：習慣追蹤器 + 連續記錄視覺化 + 成長軌跡

---

## 4. 跨平台頁面銜接設計

### 4.1 LINE OA ↔ Flutter APP 頁面流轉

```
LINE Rich Menu → Flutter APP 對應頁面
├── 📊 查看報表 → [分析報表頁面群組]
├── 💰 快速記帳 → [記帳功能頁面群組] 
├── 🎯 設定目標 → [預算管理頁面群組]
├── 👥 協作帳本 → [共享功能頁面群組]
└── ⚙️ 系統設定 → [設定管理頁面群組]
```

**深度連結設計**：
- **統一參數傳遞**：使用URL Scheme確保數據無縫傳遞
- **狀態同步機制**：即時同步用戶操作狀態與偏好設定
- **回流機制設計**：從APP返回LINE時保持操作連續性

### 4.2 頁面狀態管理

```
頁面狀態層級：
├── 全域狀態 (Global State)
│   ├── 使用者認證狀態
│   ├── 選擇模式狀態  
│   └── 設定偏好狀態
├── 功能狀態 (Feature State) 
│   ├── 記帳操作狀態
│   ├── 預算追蹤狀態
│   └── 協作狀態
└── 頁面狀態 (Page State)
    ├── 輸入表單狀態
    ├── 載入動畫狀態  
    └── 錯誤處理狀態
```

---

## 5. 互動設計規格 (Interaction Specifications)

### 5.1 頁面轉場動畫

| 轉場情境 | 動畫類型 | 持續時間 | 緩動函數 |
|----------|----------|----------|----------|
| 頁面前進 | Slide Right | 300ms | ease-out |
| 頁面後退 | Slide Left | 250ms | ease-in |
| 模態彈出 | Scale + Fade | 200ms | ease-out |
| 確認操作 | Bounce | 400ms | bounce |
| 錯誤提示 | Shake | 500ms | ease-in-out |

### 5.2 觸控互動規範

- **點擊反饋**：所有可點擊元素提供觸覺回饋
- **滑動手勢**：支援左右滑動切換頁面/標籤
- **長按操作**：用於快速操作與內容預覽
- **拖拽功能**：支援拖拽排序與自訂佈局

### 5.3 響應式斷點設計

```css
/* 手機直立 */
@media (max-width: 480px) {
  .page-layout { grid-template-columns: 1fr; }
}

/* 手機橫向/小平板 */
@media (min-width: 481px) and (max-width: 768px) {
  .page-layout { grid-template-columns: 1fr 1fr; }
}

/* 平板/小筆電 */
@media (min-width: 769px) and (max-width: 1024px) {
  .page-layout { grid-template-columns: repeat(3, 1fr); }
}

/* 桌面裝置 */
@media (min-width: 1025px) {
  .page-layout { grid-template-columns: repeat(4, 1fr); }
}
```

---

## 6. 頁面組件庫設計

### 6.1 通用頁面組件

```
共用組件 (Shared Components)
├── 導航組件
│   ├── AppBar (應用頂部欄)
│   ├── TabBar (標籤導航列) 
│   ├── BottomNavigation (底部導航)
│   └── Drawer (側滑選單)
├── 輸入組件
│   ├── AmountInput (金額輸入器)
│   ├── CategoryPicker (科目選擇器)
│   ├── DateTimePicker (日期時間選擇)
│   └── TextInput (通用文字輸入)
├── 展示組件  
│   ├── Chart (圖表組件群)
│   ├── Card (卡片容器)
│   ├── List (清單組件)
│   └── Badge (徽章標籤)
└── 回饋組件
    ├── Toast (快速提示)
    ├── Dialog (對話框)
    ├── Loading (載入指示器)
    └── Empty (空狀態頁面)
```

### 6.2 模式專屬組件

| 組件名稱 | 精準控制者 | 紀錄習慣者 | 轉型挑戰者 | 潛在覺醒者 |
|----------|------------|------------|------------|------------|
| **主頁Hero** | 專案儀表板 | 美感問候卡 | 挑戰進度環 | 友善歡迎圖 |
| **記帳輸入** | 多欄位表單 | 美感輸入卡 | 快速輸入條 | 極簡輸入框 |
| **數據展示** | 專業圖表群 | 美感資訊圖 | 進度視覺化 | 簡潔數字卡 |
| **操作按鈕** | 功能按鈕組 | 美感圓角鈕 | 激勵CTA鈕 | 大型操作鈕 |

---

## 7. API調用與頁面整合

### 7.1 頁面載入流程

```
頁面載入生命週期：
[頁面初始化]
     ↓
   設定預設值
     ↓
[顯示骨架屏]
     ↓
  減少白屏時間
     ↓
[調用API]
     ↓
   非同步請求
     ↓
[數據處理]
     ↓
    錯誤處理
     ↓
[渲染內容]
     ↓
    動畫過渡
     ↓
[載入完成]
     ↓
    互動就緒
```

### 7.2 關鍵API調用節點

| 頁面 | 載入時API | 互動時API | 離開時API |
|------|-----------|-----------|-----------|
| **登入頁** | F009-使用者驗證 | F001-註冊 | - |
| **主頁** | F043-報表查詢 | F007-快速記帳 | - |
| **記帳頁** | F010-科目清單 | F007-記帳儲存 | - |
| **分析頁** | F043-報表生成 | F045-報表匯出 | - |
| **設定頁** | F011-偏好查詢 | F011-設定更新 | F051-自動備份 |

---

## 8. 錯誤處理與邊界情況

### 8.1 頁面錯誤狀態設計

```
錯誤處理頁面階層：
├── 網路錯誤頁面
│   ├── 無網路連線 → 離線模式引導
│   ├── 連線超時 → 重試機制
│   └── 伺服器錯誤 → 友善錯誤訊息
├── 資料錯誤頁面  
│   ├── 空資料狀態 → 引導建立內容
│   ├── 載入失敗 → 重新載入選項
│   └── 同步衝突 → 衝突解決介面
└── 權限錯誤頁面
    ├── 未登入狀態 → 登入引導頁面
    ├── 權限不足 → 升級提示頁面  
    └── 帳號異常 → 客服聯繫頁面
```

### 8.2 邊界操作處理

- **長時間無操作**：自動儲存 + 溫和提醒
- **快速重複操作**：防抖機制 + 操作確認
- **大量資料載入**：分頁載入 + 虛擬滾動
- **跨平台切換**：狀態保持 + 無縫銜接

---

## 9. 效能優化策略

### 9.1 頁面載入優化

```
載入優化策略：
├── 首屏優化
│   ├── 關鍵資源優先載入
│   ├── 骨架屏佔位
│   └── 漸進式增強
├── 圖片資源優化
│   ├── WebP格式支援  
│   ├── 響應式圖片
│   └── 懶載入機制
└── 快取策略
    ├── 頁面狀態快取
    ├── API響應快取
    └── 圖片資源快取
```

### 9.2 記憶體管理

- **頁面回收機制**：非活躍頁面自動回收
- **事件監聽清理**：頁面銷毀時清理監聽器
- **大型清單虛擬化**：只渲染可見區域項目
- **圖片記憶體控制**：適時釋放非必要圖片資源

---

## 10. 無障礙設計

### 10.1 視覺無障礙

- **色彩對比度**：符合WCAG 2.1 AA標準
- **字體大小**：支援系統字體放大
- **色盲友善**：重要資訊不僅依賴顏色區分
- **高對比模式**：支援系統高對比主題

### 10.2 操作無障礙

- **鍵盤導航**：支援Tab鍵順序導航
- **螢幕閱讀器**：提供適當的語意標籤
- **語音控制**：支援語音輸入記帳
- **手勢替代**：提供觸控手勢的按鈕替代方案

---

## 11. 版本升級與相關函數

### 11.1 模組版本升級計畫

| 模組名稱 | 原版本 | 新版本 | 升級內容 |
|----------|---------|---------|----------|
| **WH_Webhook處理模組** | v2.0.14 | v2.1.0 | 新增頁面路由參數處理 |
| **FS_Firestore模組** | v1.0.3 | v1.1.0 | 支援頁面狀態同步 |
| **DD_智慧處理模組** | v2.0.22 | v2.1.0 | 頁面個人化推薦 |
| **AM_帳號管理模組** | v1.0.0 | v1.1.0 | 跨平台身份認證 |

### 11.2 關聯函數版本升級

- **F007_APP記帳功能** → v2.1.0：支援頁面內即時驗證
- **F043_標準報表產出** → v2.1.0：頁面互動式圖表
- **F040_共享帳本建立** → v2.1.0：協作頁面即時同步
- **F049_排程提醒設定** → v2.1.0：頁面內提醒預覽

---

## 12. 補充說明

### 12.1 設計原則

- **一致性原則**：跨平台保持視覺與操作一致性
- **漸進式揭露**：根據用戶熟練度逐步展示功能
- **情感化設計**：每個模式都有獨特的情感體驗
- **性能優先**：確保頁面載入與互動的流暢性

### 12.2 與其他文件關聯

- **7003文件**：提供基礎流程邏輯，本文件專注頁面實現
- **API文件**：定義後端服務，本文件規範前端調用
- **測試計畫**：本文件為UI/UX測試提供規格依據

### 12.3 未來擴展考量

- **多語系支援**：預留國際化頁面結構
- **主題系統**：支援用戶自訂頁面主題
- **插件化架構**：允許第三方頁面組件整合
- **AI助手整合**：預留智慧助手頁面交互接口

---

## 13. 版本紀錄

| 版本 | 日期 | 編輯者 | 說明 |
|------|------|--------|------|
| v1.0.0 | 2025/01/24 | LCAS PM Team | 初版 - 基於7003文件創建頁面導向Wireflow設計 |
