
# SRS_認證流程群組_P001-P005

**文件編號**: 8701  
**版本**: 1.0.0  
**建立日期**: 2025-01-26  
**建立者**: LCAS PM Team  
**最後更新**: 2025-01-26 12:00:00 UTC+8

---

## 📋 目次

1. [群組概述](#10-群組概述)
2. [功能需求規格](#20-功能需求規格)
3. [非功能需求](#30-非功能需求)
4. [API整合需求](#40-api整合需求)
5. [四模式適應性](#50-四模式適應性)
6. [測試驗收標準](#60-測試驗收標準)

---

## 1.0 群組概述

### 1.1 業務目標與價值
認證流程群組負責處理使用者進入 LCAS 2.0 系統的完整身份驗證流程，包含歡迎引導、登入註冊、密碼管理等核心功能。

### 1.2 包含頁面清單
- **P001**: 歡迎頁面 - App啟動引導，模式選擇
- **P002**: 登入頁面 - LINE OAuth / Email登入  
- **P003**: 註冊頁面 - 新使用者註冊流程
- **P004**: 密碼重設頁面 - 忘記密碼重設功能
- **P005**: 登出確認頁面 - 安全登出確認

### 1.3 使用者流程概述
```
P001 歡迎頁面 → P002 登入頁面 / P003 註冊頁面 → P010 首頁儀表板
     ↓              ↓                ↓
   模式選擇      忘記密碼？        登入成功
     ↓              ↓                ↓
   模式說明      P004 密碼重設     進入主功能區
```

---

## 2.0 功能需求規格

### 2.1 P001 - 歡迎頁面

#### 2.1.1 功能描述
應用程式啟動後的首頁，提供模式選擇與功能介紹。

#### 2.1.2 輸入/輸出規格
**輸入**：
- 使用者點擊模式選擇按鈕
- 系統檢測是否已有登入狀態

**輸出**：
- 顯示四種使用者模式選項
- 導航至對應的登入/註冊頁面
- 已登入用戶直接進入首頁

#### 2.1.3 業務規則
- 首次安裝必須選擇使用者模式
- 已登入用戶自動跳轉至首頁
- 模式選擇後可在設定中修改

#### 2.1.4 四模式差異
- **精準控制者**: 展示完整功能介紹
- **紀錄習慣者**: 強調美觀易用特色
- **轉型挑戰者**: 突出目標達成功能
- **潛在覺醒者**: 簡化的大按鈕設計

### 2.2 P002 - 登入頁面

#### 2.2.1 功能描述
支援 LINE OAuth 和 Email/Password 雙重登入方式。

#### 2.2.2 輸入/輸出規格
**輸入**：
- LINE 授權（LINE OAuth）
- Email + Password（傳統登入）
- 記住登入狀態選項

**輸出**：
- 登入成功：導航至 P010 首頁儀表板
- 登入失敗：顯示錯誤訊息
- 首次登入：導航至使用者模式選擇

#### 2.2.3 業務規則
- LINE 登入為主要推薦方式
- Email 登入作為備用選項
- 最多允許 5 次登入嘗試後鎖定 15 分鐘
- 記住登入狀態有效期 30 天

#### 2.2.4 四模式差異
- **精準控制者**: 顯示 Email 登入選項
- **紀錄習慣者**: 優雅動畫效果
- **轉型挑戰者**: 激勵文字提示
- **潛在覺醒者**: 僅顯示 LINE 登入大按鈕

### 2.3 P003 - 註冊頁面

#### 2.3.1 功能描述
新使用者註冊流程，支援多種註冊方式。

#### 2.3.2 輸入/輸出規格
**輸入**：
- 顯示名稱（必填）
- Email（Email註冊時必填）
- 密碼（Email註冊時必填）
- LINE 授權（LINE註冊時）
- 使用者模式選擇

**輸出**：
- 註冊成功：導航至 P010 首頁儀表板
- 註冊失敗：顯示錯誤訊息與修正建議
- 帳號已存在：導航至 P002 登入頁面

#### 2.3.3 業務規則
- 顯示名稱長度 2-20 字元
- Email 格式驗證
- 密碼強度要求：8 字元以上，包含數字與字母
- LINE 註冊自動取得使用者資訊

#### 2.3.4 四模式差異
- **精準控制者**: 完整註冊表單
- **紀錄習慣者**: 簡化美觀表單
- **轉型挑戰者**: 目標設定引導
- **潛在覺醒者**: 極簡快速註冊

### 2.4 P004 - 密碼重設頁面

#### 2.4.1 功能描述
忘記密碼時的重設流程。

#### 2.4.2 輸入/輸出規格
**輸入**：
- Email 地址
- 重設驗證碼（第二步）
- 新密碼（第二步）

**輸出**：
- 發送重設郵件確認
- 密碼重設成功訊息
- 重設失敗錯誤處理

#### 2.4.3 業務規則
- 重設郵件有效期 30 分鐘
- 一天最多發送 3 次重設郵件
- 新密碼不可與舊密碼相同

#### 2.4.4 四模式差異
- **精準控制者**: 詳細步驟說明
- **紀錄習慣者**: 簡潔優雅界面
- **轉型挑戰者**: 鼓勵性提示文字
- **潛在覺醒者**: 簡化流程步驟

### 2.5 P005 - 登出確認頁面

#### 2.5.1 功能描述
安全登出確認機制。

#### 2.5.2 輸入/輸出規格
**輸入**：
- 登出確認選擇
- 是否登出所有裝置選項

**輸出**：
- 登出成功：清除本地資料，導航至 P001
- 取消登出：返回上一頁面

#### 2.5.3 業務規則
- 登出前確認是否有未同步資料
- 可選擇僅登出當前裝置或所有裝置
- 清除本地快取與敏感資料

#### 2.5.4 四模式差異
- **精準控制者**: 詳細登出選項
- **紀錄習慣者**: 優雅確認對話框
- **轉型挑戰者**: 目標提醒訊息
- **潛在覺醒者**: 簡單確認按鈕

---

## 3.0 非功能需求

### 3.1 效能需求
- 頁面載入時間 < 2 秒
- 登入響應時間 < 3 秒
- 支援離線快取功能

### 3.2 安全需求
- 所有密碼必須加密傳輸（HTTPS）
- 本地不儲存明文密碼
- 支援生物識別登入（Face ID / Touch ID）

### 3.3 相容性需求
- 支援 iOS 12+ 和 Android 8+
- 響應式設計適應不同螢幕尺寸
- 支援深色模式

---

## 4.0 API整合需求

### 4.1 對應API端點
- **F001**: POST /auth/register - 使用者註冊
- **F002**: POST /auth/login - 使用者登入
- **F003**: POST /auth/logout - 使用者登出
- **F004**: DELETE /auth/account - 帳號刪除
- **F005**: POST /auth/reset-password - 密碼重設

### 4.2 資料格式規格
所有API呼叫使用 JSON 格式，包含錯誤處理機制。

### 4.3 錯誤處理
- 網路錯誤：顯示重試選項
- 認證失敗：清楚的錯誤訊息
- 服務器錯誤：友善的使用者提示

---

## 5.0 四模式適應性

### 5.1 視覺差異需求
參考 9005 文件第 3 章四模式視覺差異設計。

### 5.2 功能複雜度調整
- **精準控制者**: 100% 功能開放
- **紀錄習慣者**: 美觀導向簡化
- **轉型挑戰者**: 目標導向功能
- **潛在覺醒者**: 極簡化操作

### 5.3 使用者體驗差異
每個模式都有專屬的引導流程與視覺風格。

---

## 6.0 測試驗收標準

### 6.1 功能測試cases
- 新使用者完整註冊流程
- 現有使用者登入驗證
- 密碼重設完整流程
- 模式選擇與切換
- 登出確認機制

### 6.2 整合測試scenarios
- 與 AuthService 的 API 整合
- 四模式切換的狀態管理
- 網路異常時的錯誤處理

### 6.3 使用者驗收criteria
- 新使用者能在 3 分鐘內完成註冊並開始使用
- 登入成功率 > 99.5%
- 密碼重設成功率 > 95%
- 四模式視覺差異明顯且一致

---

**文件維護記錄**

| 版本 | 日期 | 修改者 | 修改內容 |
|------|------|--------|----------|
| v1.0.0 | 2025-01-26 | LCAS PM Team | 初版建立：認證流程群組完整需求規格 |
