
# LCAS 2.0 åŠŸèƒ½åˆ—è¡¨æ–‡ä»¶ (Feature List)
**ç‰ˆæœ¬**: 2.2.3 
**å»ºç«‹æ—¥æœŸ**: 2025-07-23  
**å»ºç«‹è€…**: AustinLiao69  
**æœ€å¾Œæ›´æ–°**: 2025-07-23 16:30:00 UTC+8  
**åŸºæ–¼è¦æ ¼**: 0015. Product_SPEC_LCAS_2.0.md v1.3

---

## ğŸ“‹ æ–‡ä»¶æ¦‚è¿°

æœ¬æ–‡ä»¶æ ¹æ“š LCAS 2.0 ç”¢å“è¦æ ¼æ›¸è¨­è¨ˆï¼Œæ¶µè“‹é›™å¹³å°ï¼ˆLINE OA + Mobile APPï¼‰çš„å®Œæ•´åŠŸèƒ½è¦åŠƒï¼Œæä¾›æ¸…æ™°çš„ API è·¯å¾‘èˆ‡æ¨¡çµ„å°æ‡‰é—œä¿‚ã€‚

## ğŸ—ï¸ æ¶æ§‹ç¸½è¦½

```
LCAS 2.0 åŠŸèƒ½æ¶æ§‹èˆ‡æ¨¡çµ„ç¾¤åˆ†é¡
â”œâ”€â”€ èªè­‰èˆ‡å¸³æˆ¶ç®¡ç† (F001-F011) - é›™å¹³å°å…±ç”¨
â”œâ”€â”€ APP é€²éšåŠŸèƒ½ (F031-F058) - å°ˆæ¥­ç‰ˆ
â””â”€â”€ ç³»çµ±ç®¡ç†åŠŸèƒ½ (F051-F058) - å¾Œå°ç®¡ç†

æ¨¡çµ„ç¾¤åˆ†é¡:
â”œâ”€â”€ LINE OAæ¨¡çµ„ç¾¤: WH, LBK
â”œâ”€â”€ APPæ¨¡çµ„ç¾¤: BK, MLS, BM, BS, DD1/DD2/DD3
â””â”€â”€ å…±ç”¨æ¨¡çµ„ç¾¤: FS, DL, AM, SR, CM, MRA
```

---

## ğŸ“Š åŠŸèƒ½ç¸½è¦½è¡¨

| åŠŸèƒ½ç·¨è™Ÿ | åŠŸèƒ½åç¨± | å¹³å°æ”¯æ´ | API è·¯å¾‘ | å°æ‡‰æ¨¡çµ„ | æ¨¡çµ„ç¾¤ | å„ªå…ˆç´š |
|----------|----------|----------|----------|----------|--------|--------|
| **èªè­‰èˆ‡å¸³æˆ¶ç®¡ç† (é›™å¹³å°å…±ç”¨)** |
| F001 | ä½¿ç”¨è€…è¨»å†Š | LINE OA + APP | POST /auth/register | 2009. AM.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P0 |
| F002 | ä½¿ç”¨è€…ç™»å…¥ | LINE OA + APP | POST /auth/login | 2009. AM.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P0 |
| F003 | ä½¿ç”¨è€…ç™»å‡º | LINE OA + APP | POST /auth/logout | 2009. AM.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P1 |
| F004 | å¸³è™Ÿåˆªé™¤ | APP | DELETE /auth/account | 2009. AM.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P2 |
| F005 | å¯†ç¢¼é‡è¨­ | APP | POST /auth/reset-password | 2009. AM.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P2 |
| **åŸºç¤è¨˜å¸³åŠŸèƒ½** |
| F007 | APP è¨˜å¸³åŠŸèƒ½ | APP | POST /app/ledger/entry | 2001. BK.js | APPæ¨¡çµ„ç¾¤ | P0 |
| F009 | APP è¨˜éŒ„æŸ¥è©¢ | APP | GET /app/ledger/query | 2001. BK.js | APPæ¨¡çµ„ç¾¤ | P0 |
| F010 | ç§‘ç›®ä»£ç¢¼ç®¡ç† | APP | GET /app/subjects/list | 2031. DD1.js | APPæ¨¡çµ„ç¾¤ | P1 |
| F011 | ä½¿ç”¨è€…è¨­å®šç®¡ç† | APP | PUT /app/user/settings | 2009. AM.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P1 |
| **APP é€²éšåŠŸèƒ½** |
| F031 | å°ˆæ¡ˆå¸³æœ¬å»ºç«‹ | APP | POST /app/projects/create | 2051. MLS.js | APPæ¨¡çµ„ç¾¤ | P1 |
| F032 | å°ˆæ¡ˆå¸³æœ¬ç®¡ç† | APP | PUT /app/projects/manage | 2051. MLS.js | APPæ¨¡çµ„ç¾¤ | P1 |
| F033 | å°ˆæ¡ˆå¸³æœ¬åˆªé™¤ | APP | DELETE /app/projects/delete | 2051. MLS.js | APPæ¨¡çµ„ç¾¤ | P2 |
| F034 | åˆ†é¡å¸³æœ¬å»ºç«‹ | APP | POST /app/categories/create | 2051. MLS.js | APPæ¨¡çµ„ç¾¤ | P1 |
| F035 | åˆ†é¡å¸³æœ¬ç®¡ç† | APP | PUT /app/categories/manage | 2051. MLS.js | APPæ¨¡çµ„ç¾¤ | P1 |
| F036 | å¤šå¸³æœ¬åˆ‡æ› | APP | GET /app/ledgers/switch | 2051. MLS.js | APPæ¨¡çµ„ç¾¤ | P1 |
| F037 | é ç®—è¨­å®šå»ºç«‹ | APP | POST /app/budgets/create | 2012. BM.js | APPæ¨¡çµ„ç¾¤ | P2 |
| F038 | é ç®—è¿½è¹¤ç›£æ§ | APP | GET /app/budgets/monitor | 2012. BM.js | APPæ¨¡çµ„ç¾¤ | P2 |
| F039 | é ç®—è­¦ç¤ºè¨­å®š | APP | PUT /app/budgets/alerts | 2012. BM.js | APPæ¨¡çµ„ç¾¤ | P2 |
| F040 | å…±äº«å¸³æœ¬å»ºç«‹ | APP | POST /app/shared/create | 2013. CM.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P2 |
| F041 | å¤šäººå”ä½œæ¬Šé™ | APP | PUT /app/shared/permissions | 2013. CM.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P2 |
| F042 | å³æ™‚å”ä½œåŒæ­¥ | APP | WebSocket /app/sync/realtime | 2013. CM.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P2 |
| F043 | æ¨™æº–å ±è¡¨ç”¢å‡º | APP | POST /app/reports/generate | 2041. MRA.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P2 |
| F044 | è‡ªå®šç¾©å ±è¡¨è¨­è¨ˆ | APP | POST /app/reports/custom | 2041. MRA.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P3 |
| F045 | å ±è¡¨åŒ¯å‡ºåŠŸèƒ½ | APP | GET /app/reports/export | 2041. MRA.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P2 |
| **ç³»çµ±ç®¡ç†åŠŸèƒ½** |
| F051 | å®šæœŸè‡ªå‹•å‚™ä»½ | ç³»çµ± | POST /system/backup/schedule | 2014. BS.js | APPæ¨¡çµ„ç¾¤ | P1 |
| F052 | æ‰‹å‹•å‚™ä»½é‚„åŸ | APP | POST /app/backup/manual | 2014. BS.js | APPæ¨¡çµ„ç¾¤ | P2 |
| F053 | å‚™ä»½æª”æ¡ˆç®¡ç† | APP | GET /app/backup/list | 2014. BS.js | APPæ¨¡çµ„ç¾¤ | P2 |
| F054 | è³‡æ–™åŒæ­¥æª¢æŸ¥ | ç³»çµ± | GET /system/sync/status | 2011. FS.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P1 |
| F055 | ç³»çµ±å¥åº·ç›£æ§ | ç³»çµ± | GET /system/health/check | 2010. DL.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P0 |
| F056 | éŒ¯èª¤æ—¥èªŒç®¡ç† | ç³»çµ± | GET /system/logs/errors | 2010. DL.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P1 |
| F057 | æ’ç¨‹æé†’è¨­å®š | LINE OA + APP | POST /schedule/reminder | 2005. SR.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P1 |
| F058 | æ’ç¨‹æé†’åŸ·è¡Œ | ç³»çµ± | POST /schedule/execute | 2005. SR.js | å…±ç”¨æ¨¡çµ„ç¾¤ | P1 |

---

##  è©³ç´°åŠŸèƒ½è¦æ ¼

### F001 ä½¿ç”¨è€…è¨»å†Š

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºæ–°ä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦å¿«é€Ÿè¨»å†Šå¸³è™Ÿï¼Œä»¥ä¾¿é–‹å§‹ä½¿ç”¨LCASè¨˜å¸³åŠŸèƒ½ã€‚

**æ¥­å‹™éœ€æ±‚**
- æ”¯æ´LINE OAè‡ªå‹•è¨»å†Šèˆ‡APPæ‰‹å‹•è¨»å†Š
- è‡ªå‹•ç”Ÿæˆçµ±ä¸€UIDä¸¦åˆå§‹åŒ–ç”¨æˆ¶è³‡æ–™
- é è¨­ç§‘ç›®è‡ªå‹•å°å…¥ï¼ˆ9999å€‹æ¨™æº–ç§‘ç›®ï¼‰
- è·¨å¹³å°å¸³è™Ÿé—œè¯æº–å‚™

**å±•ç¤ºå±¤å…ƒä»¶**
- **LINE OAå¹³å°**ï¼š
  - æ­¡è¿è¨Šæ¯å¡ç‰‡ï¼ˆRich Messageï¼‰
  - å¿«é€Ÿå…¥é–€é¸å–®ï¼ˆQuick Replyï¼‰
  - è‡ªå‹•å›è¦†æŒ‡å¼•è¨Šæ¯
  
- **APPå¹³å°**ï¼š
  - è¨»å†ŠæŒ‰éˆ•çµ„ï¼ˆEmail/Google/Appleç™»å…¥ï¼‰
  - ç”¨æˆ¶è³‡æ–™è¼¸å…¥è¡¨å–®ï¼ˆæš±ç¨±ã€æ™‚å€è¨­å®šï¼‰
  - è¨»å†Šé€²åº¦æŒ‡ç¤ºå™¨
  - æœå‹™æ¢æ¬¾ç¢ºèªæ¡†

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **LINE OAè·¯å¾‘**ï¼š
   - ä½¿ç”¨è€…æƒæQR Codeæˆ–æœå°‹åŠ å…¥LINE OA
   - ç³»çµ±æ¥æ”¶followäº‹ä»¶ä¸¦æå–LINE UID
   - æª¢æŸ¥æ˜¯å¦ç‚ºæ–°ç”¨æˆ¶ï¼Œè‹¥æ˜¯å‰‡è‡ªå‹•è¨»å†Š
   - è‡ªå‹•å»ºç«‹å¸³è™Ÿä¸¦åˆå§‹åŒ–ç§‘ç›®æ•¸æ“š
   - ç™¼é€æ­¡è¿è¨Šæ¯ï¼šã€ŒğŸ‰ æ­¡è¿ä½¿ç”¨LCASï¼å¸³è™Ÿå·²è‡ªå‹•å»ºç«‹ã€
   - æä¾›å¿«é€Ÿå…¥é–€é¸å–®

2. **APPè·¯å¾‘**ï¼š
   - ä½¿ç”¨è€…ä¸‹è¼‰APPä¸¦é»æ“Šã€Œé–‹å§‹ä½¿ç”¨ã€
   - é¸æ“‡è¨»å†Šæ–¹å¼ï¼ˆEmail/Google/Appleï¼‰
   - å®Œæˆç¬¬ä¸‰æ–¹å¹³å°èªè­‰æµç¨‹
   - å¡«å¯«åŸºæœ¬è³‡æ–™ï¼ˆæš±ç¨±ã€æ™‚å€ç­‰ï¼‰
   - é»æ“Šã€Œå®Œæˆè¨»å†Šã€æŒ‰éˆ•
   - é¡¯ç¤ºè¨»å†ŠæˆåŠŸç•«é¢ä¸¦è‡ªå‹•å°å‘ä¸»é 

**API è·¯å¾‘**
POST /auth/register

**API å‚³é€æ ¼å¼**
```json
{
  "platform": "line_oa|mobile_app",
  "line_uid": "Uxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
  "device_info": {
    "device_type": "ios|android",
    "app_version": "1.0.0"
  },
  "display_name": "ä½¿ç”¨è€…æš±ç¨±",
  "timezone": "Asia/Taipei",
  "auth_provider": "email|google|apple"
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "unified_uid": "LCAS_UID_xxxxxxxxxx",
  "user_type": "S",
  "subjects_initialized": true,
  "created_at": "2025-07-23T15:30:00+08:00",
  "welcome_message": "æ­¡è¿ä½¿ç”¨LCASè¨˜å¸³ç³»çµ±"
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **è¨»å†ŠæˆåŠŸ**ï¼šã€ŒğŸ‰ å¸³è™Ÿå»ºç«‹æˆåŠŸï¼å·²ç‚ºæ‚¨åˆå§‹åŒ–9999å€‹è¨˜å¸³ç§‘ç›®ã€
- **LINE OAæ­¡è¿**ï¼šã€ŒğŸ‘‹ æ­¡è¿åŠ å…¥LCASï¼ç¾åœ¨å¯ä»¥é–‹å§‹è¨˜å¸³äº†ã€
- **APPè¨»å†Šå®Œæˆ**ï¼šã€Œâœ… è¨»å†Šå®Œæˆï¼ç«‹å³é–‹å§‹æ‚¨çš„è¨˜å¸³ä¹‹æ—…ã€

**éŒ¯èª¤è™•ç†**
- é‡è¤‡è¨»å†Š â†’ é¡¯ç¤ºï¼šã€Œæ­¤å¸³è™Ÿå·²å­˜åœ¨ï¼Œè«‹ç›´æ¥ç™»å…¥ã€
- å¹³å°é©—è­‰å¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œç¬¬ä¸‰æ–¹ç™»å…¥å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€
- ç§‘ç›®åˆå§‹åŒ–ç•°å¸¸ â†’ é¡¯ç¤ºï¼šã€Œç³»çµ±åˆå§‹åŒ–ä¸­ï¼Œè«‹ç¨å¾Œã€
- ç¶²è·¯é€£ç·šå•é¡Œ â†’ é¡¯ç¤ºï¼šã€Œç¶²è·¯é€£ç·šç•°å¸¸ï¼Œè«‹æª¢æŸ¥ç¶²è·¯è¨­å®šã€

**å°æ‡‰æ¨¡çµ„**: 2009. AM.js  
**æ ¸å¿ƒå‡½æ•¸**: `AM_registerUser()`

---

### F002 ä½¿ç”¨è€…ç™»å…¥

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºå·²è¨»å†Šç”¨æˆ¶ï¼Œæˆ‘æƒ³è¦å¿«é€Ÿç™»å…¥ç³»çµ±ï¼Œä»¥ä¾¿å­˜å–æˆ‘çš„è¨˜å¸³è³‡æ–™ã€‚

**æ¥­å‹™éœ€æ±‚**
- æ”¯æ´å¤šå¹³å°ç™»å…¥é©—è­‰
- è¨˜ä½ç™»å…¥ç‹€æ…‹ï¼ˆTOKENæ©Ÿåˆ¶ï¼‰
- è·¨å¹³å°è³‡æ–™åŒæ­¥æª¢æŸ¥
- å®‰å…¨æ€§é©—è­‰èˆ‡ç•°å¸¸åµæ¸¬

**å±•ç¤ºå±¤å…ƒä»¶**
- **LINE OAå¹³å°**ï¼š
  - è‡ªå‹•ç™»å…¥ï¼ˆåŸºæ–¼LINE UIDï¼‰
  - èº«ä»½ç¢ºèªè¨Šæ¯
  - ä¸»é¸å–®Quick ReplyæŒ‰éˆ•
  
- **APPå¹³å°**ï¼š
  - ç™»å…¥è¡¨å–®ï¼ˆå¸³è™Ÿå¯†ç¢¼/ç¬¬ä¸‰æ–¹ç™»å…¥ï¼‰
  - ã€Œè¨˜ä½æˆ‘ã€å‹¾é¸æ¡†
  - å¿˜è¨˜å¯†ç¢¼é€£çµ
  - ç”Ÿç‰©è¾¨è­˜ç™»å…¥é¸é …ï¼ˆæŒ‡ç´‹/Face IDï¼‰

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **LINE OAè·¯å¾‘**ï¼š
   - ä½¿ç”¨è€…ç™¼é€ä»»ä½•è¨Šæ¯çµ¦LINE OA
   - ç³»çµ±è‡ªå‹•è­˜åˆ¥LINE UID
   - æª¢æŸ¥ç”¨æˆ¶è¨»å†Šç‹€æ…‹
   - è‡ªå‹•ç™»å…¥ä¸¦è¼‰å…¥ç”¨æˆ¶è³‡æ–™
   - å›è¦†ï¼šã€Œæ­¡è¿å›ä¾†ï¼ã€ä¸¦é¡¯ç¤ºä¸»é¸å–®

2. **APPè·¯å¾‘**ï¼š
   - é–‹å•ŸAPPï¼Œé¡¯ç¤ºç™»å…¥ç•«é¢
   - è¼¸å…¥å¸³è™Ÿå¯†ç¢¼æˆ–é¸æ“‡ç¬¬ä¸‰æ–¹ç™»å…¥
   - é»æ“Šã€Œç™»å…¥ã€æŒ‰éˆ•
   - ç³»çµ±é©—è­‰èº«ä»½ä¸¦ç”ŸæˆTOKEN
   - ç™»å…¥æˆåŠŸå¾Œå°å‘ä¸»é é¢

**API è·¯å¾‘**
POST /auth/login

**API å‚³é€æ ¼å¼**
```json
{
  "platform": "line_oa|mobile_app",
  "line_uid": "Uxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
  "email": "user@example.com",
  "password": "hashed_password",
  "auth_provider": "email|google|apple|line",
  "device_info": {
    "device_id": "unique_device_id",
    "fcm_token": "firebase_token"
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "access_token": "jwt_token_here",
  "refresh_token": "refresh_token_here",
  "user_info": {
    "unified_uid": "LCAS_UID_xxxxxxxxxx",
    "display_name": "ä½¿ç”¨è€…åç¨±",
    "user_type": "S",
    "last_login": "2025-07-23T15:30:00+08:00"
  },
  "expires_in": 3600
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **ç™»å…¥æˆåŠŸ**ï¼šã€Œâœ… ç™»å…¥æˆåŠŸï¼æ­¡è¿å›ä¾†ã€
- **LINE OAè‡ªå‹•ç™»å…¥**ï¼šã€ŒğŸ‘‹ æ­¡è¿å›ä¾†ï¼æ‚¨çš„è¨˜å¸³æ•¸æ“šå·²åŒæ­¥ã€
- **é¦–æ¬¡ç™»å…¥**ï¼šã€ŒğŸ‰ é¦–æ¬¡ç™»å…¥æˆåŠŸï¼ç³»çµ±å·²ç‚ºæ‚¨æº–å‚™å°±ç·’ã€

**éŒ¯èª¤è™•ç†**
- å¸³è™Ÿä¸å­˜åœ¨ â†’ é¡¯ç¤ºï¼šã€Œå¸³è™Ÿä¸å­˜åœ¨ï¼Œè«‹å…ˆè¨»å†Šã€
- å¯†ç¢¼éŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œå¯†ç¢¼éŒ¯èª¤ï¼Œè«‹é‡æ–°è¼¸å…¥ã€
- TOKENéæœŸ â†’ è‡ªå‹•é‡æ–°æ•´ç†TOKENæˆ–è¦æ±‚é‡æ–°ç™»å…¥
- å¤šé‡ç™»å…¥æª¢æ¸¬ â†’ é¡¯ç¤ºï¼šã€Œå¸³è™Ÿå·²åœ¨å…¶ä»–è£ç½®ç™»å…¥ã€

**å°æ‡‰æ¨¡çµ„**: 2009. AM.js  
**æ ¸å¿ƒå‡½æ•¸**: `AM_authenticateUser()`

---

### F003 ä½¿ç”¨è€…ç™»å‡º

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦å®‰å…¨ç™»å‡ºç³»çµ±ï¼Œä»¥ä¿è­·å€‹äººè³‡æ–™å®‰å…¨ã€‚

**æ¥­å‹™éœ€æ±‚**
- æ¸…é™¤æœ¬åœ°TOKENèˆ‡å¿«å–
- ä¼ºæœå™¨ç«¯SESSIONå¤±æ•ˆ
- åŒæ­¥ç‹€æ…‹æ¸…ç†
- å®‰å…¨æ€§æ—¥èªŒè¨˜éŒ„

**å±•ç¤ºå±¤å…ƒä»¶**
- **LINE OAå¹³å°**ï¼š
  - ç™»å‡ºç¢ºèªè¨Šæ¯
  - é‡æ–°é–‹å§‹å¼•å°é¸å–®
  
- **APPå¹³å°**ï¼š
  - è¨­å®šé é¢ã€Œç™»å‡ºã€æŒ‰éˆ•
  - ç™»å‡ºç¢ºèªå°è©±æ¡†
  - ç™»å‡ºæˆåŠŸæç¤º

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **LINE OAè·¯å¾‘**ï¼š
   - ä½¿ç”¨è€…è¼¸å…¥ã€Œç™»å‡ºã€æˆ–é»æ“Šç›¸é—œé¸å–®
   - ç³»çµ±ç¢ºèªç™»å‡ºæ“ä½œ
   - æ¸…é™¤ä¼ºæœå™¨ç«¯SESSION
   - å›è¦†ç¢ºèªè¨Šæ¯ï¼šã€Œå·²å®‰å…¨ç™»å‡ºã€

2. **APPè·¯å¾‘**ï¼š
   - é€²å…¥ã€Œè¨­å®šã€é é¢
   - é»æ“Šã€Œç™»å‡ºã€æŒ‰éˆ•
   - å½ˆå‡ºç¢ºèªå°è©±æ¡†ï¼šã€Œç¢ºå®šè¦ç™»å‡ºå—ï¼Ÿã€
   - ç¢ºèªå¾ŒåŸ·è¡Œç™»å‡ºæµç¨‹
   - è¿”å›ç™»å…¥ç•«é¢

**API è·¯å¾‘**
POST /auth/logout

**API å‚³é€æ ¼å¼**
```json
{
  "platform": "line_oa|mobile_app",
  "access_token": "current_jwt_token",
  "device_info": {
    "device_id": "unique_device_id"
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "message": "ç™»å‡ºæˆåŠŸ",
  "logout_time": "2025-07-23T15:30:00+08:00"
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **ç™»å‡ºæˆåŠŸ**ï¼šã€ŒğŸ‘‹ å·²å®‰å…¨ç™»å‡ºï¼Œæ„Ÿè¬ä½¿ç”¨LCASã€
- **LINE OAç™»å‡º**ï¼šã€Œâœ… ç™»å‡ºå®Œæˆï¼å¦‚éœ€ä½¿ç”¨è«‹é‡æ–°ç™¼é€è¨Šæ¯ã€
- **APPç™»å‡º**ï¼šã€ŒğŸ”’ å·²å®‰å…¨ç™»å‡ºï¼Œæ‚¨çš„è³‡æ–™å·²å—ä¿è­·ã€

**éŒ¯èª¤è™•ç†**
- TOKENç„¡æ•ˆ â†’ å¼·åˆ¶ç™»å‡ºä¸¦æ¸…é™¤æœ¬åœ°è³‡æ–™
- ç¶²è·¯ç•°å¸¸ â†’ æœ¬åœ°å¼·åˆ¶ç™»å‡ºï¼Œæç¤ºã€Œç¶²è·¯ç•°å¸¸ï¼Œå·²æœ¬åœ°ç™»å‡ºã€
- ä¼ºæœå™¨éŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œç³»çµ±ç¹å¿™ï¼Œè«‹ç¨å¾Œå†è©¦ã€

**å°æ‡‰æ¨¡çµ„**: 2009. AM.js  
**æ ¸å¿ƒå‡½æ•¸**: `AM_logoutUser()`

---

### F004 å¸³è™Ÿåˆªé™¤

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦å®Œå…¨åˆªé™¤æˆ‘çš„å¸³è™Ÿå’Œæ‰€æœ‰ç›¸é—œè³‡æ–™ï¼Œä»¥è¡Œä½¿è³‡æ–™è‡ªä¸»æ¬Šã€‚

**æ¥­å‹™éœ€æ±‚**
- åƒ…é™APPå¹³å°æä¾›æ­¤åŠŸèƒ½
- å®Œæ•´è³‡æ–™æ¸…é™¤ï¼ˆè¨˜å¸³è¨˜éŒ„ã€è¨­å®šã€å‚™ä»½ï¼‰
- ä¸å¯é€†æ“ä½œï¼Œéœ€å¤šé‡ç¢ºèª
- ç¬¦åˆGDPRè³‡æ–™ä¿è­·è¦ç¯„

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - å¸³è™Ÿè¨­å®šé é¢ã€Œåˆªé™¤å¸³è™Ÿã€é¸é …
  - å¤šå±¤ç´šç¢ºèªå°è©±æ¡†
  - æœ€çµ‚ç¢ºèªè¼¸å…¥æ¡†ï¼ˆè¼¸å…¥ã€ŒDELETEã€ç¢ºèªï¼‰
  - åˆªé™¤é€²åº¦æŒ‡ç¤ºå™¨

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **APPè·¯å¾‘**ï¼š
   - é€²å…¥ã€Œå¸³è™Ÿè¨­å®šã€â†’ã€Œéš±ç§èˆ‡å®‰å…¨ã€
   - é»æ“Šã€Œåˆªé™¤å¸³è™Ÿã€é¸é …
   - ç¬¬ä¸€å±¤ç¢ºèªï¼šã€Œé€™å°‡æ°¸ä¹…åˆªé™¤æ‚¨çš„æ‰€æœ‰è³‡æ–™ã€
   - ç¬¬äºŒå±¤ç¢ºèªï¼šè¼¸å…¥å¯†ç¢¼é©—è­‰èº«ä»½
   - ç¬¬ä¸‰å±¤ç¢ºèªï¼šè¼¸å…¥ã€ŒDELETEã€æ–‡å­—ç¢ºèª
   - åŸ·è¡Œåˆªé™¤æµç¨‹ï¼Œé¡¯ç¤ºé€²åº¦
   - å®Œæˆå¾Œè¿”å›æ­¡è¿é é¢

**API è·¯å¾‘**
DELETE /auth/account

**API å‚³é€æ ¼å¼**
```json
{
  "platform": "mobile_app",
  "confirmation_code": "DELETE",
  "password": "user_password_hash",
  "delete_reason": "user_selected_reason"
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "deleted_uid": "LCAS_UID_xxxxxxxxxx",
  "deletion_time": "2025-07-23T15:30:00+08:00",
  "cleanup_status": {
    "ledger_records": "deleted",
    "user_settings": "deleted",
    "backup_files": "deleted"
  }
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **åˆªé™¤ç¢ºèª**ï¼šã€Œâš ï¸ æ­¤æ“ä½œå°‡æ°¸ä¹…åˆªé™¤æ‰€æœ‰è¨˜å¸³è³‡æ–™ï¼Œä¸”ç„¡æ³•å¾©åŸã€
- **åˆªé™¤é€²è¡Œä¸­**ï¼šã€ŒğŸ”„ æ­£åœ¨åˆªé™¤æ‚¨çš„è³‡æ–™ï¼Œè«‹ç¨å€™...ã€
- **åˆªé™¤å®Œæˆ**ï¼šã€Œâœ… å¸³è™Ÿå·²å®Œå…¨åˆªé™¤ï¼Œæ„Ÿè¬æ‚¨æ›¾ç¶“ä½¿ç”¨LCASã€

**éŒ¯èª¤è™•ç†**
- å¯†ç¢¼é©—è­‰å¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œå¯†ç¢¼éŒ¯èª¤ï¼Œç„¡æ³•åŸ·è¡Œåˆªé™¤æ“ä½œã€
- ç¢ºèªç¢¼éŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œè«‹æ­£ç¢ºè¼¸å…¥ã€DELETEã€ä»¥ç¢ºèªåˆªé™¤ã€
- ç³»çµ±éŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œåˆªé™¤éç¨‹ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹è¯ç¹«å®¢æœã€
- æ¬Šé™ä¸è¶³ â†’ é¡¯ç¤ºï¼šã€Œæ“ä½œæ¬Šé™ä¸è¶³ï¼Œè«‹é‡æ–°ç™»å…¥ã€

**å°æ‡‰æ¨¡çµ„**: 2009. AM.js  
**æ ¸å¿ƒå‡½æ•¸**: `AM_deleteUserAccount()`

---

### F005 å¯†ç¢¼é‡è¨­

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºå¿˜è¨˜å¯†ç¢¼çš„ä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦å®‰å…¨åœ°é‡è¨­å¯†ç¢¼ï¼Œä»¥ä¾¿é‡æ–°å­˜å–æˆ‘çš„å¸³è™Ÿã€‚

**æ¥­å‹™éœ€æ±‚**
- åƒ…é™APPå¹³å°ï¼ˆLINE OAç„¡å¯†ç¢¼æ¦‚å¿µï¼‰
- é€éEmailç™¼é€é‡è¨­é€£çµ
- è‡¨æ™‚TOKENæ©Ÿåˆ¶ç¢ºä¿å®‰å…¨æ€§
- æ”¯æ´å¤šç¨®èº«ä»½é©—è­‰æ–¹å¼

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - ç™»å…¥é é¢ã€Œå¿˜è¨˜å¯†ç¢¼ï¼Ÿã€é€£çµ
  - å¯†ç¢¼é‡è¨­ç”³è«‹è¡¨å–®ï¼ˆEmailè¼¸å…¥ï¼‰
  - é©—è­‰ç¢¼è¼¸å…¥ä»‹é¢
  - æ–°å¯†ç¢¼è¨­å®šè¡¨å–®
  - å¯†ç¢¼å¼·åº¦æŒ‡ç¤ºå™¨

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **APPè·¯å¾‘**ï¼š
   - åœ¨ç™»å…¥é é¢é»æ“Šã€Œå¿˜è¨˜å¯†ç¢¼ï¼Ÿã€
   - è¼¸å…¥è¨»å†Šæ™‚ä½¿ç”¨çš„Email
   - é»æ“Šã€Œç™¼é€é‡è¨­é€£çµã€
   - æª¢æŸ¥Emailä¸¦é»æ“Šé‡è¨­é€£çµ
   - è¼¸å…¥æ”¶åˆ°çš„é©—è­‰ç¢¼
   - è¨­å®šæ–°å¯†ç¢¼ï¼ˆéœ€ç¬¦åˆå®‰å…¨è¦å‰‡ï¼‰
   - ç¢ºèªæ–°å¯†ç¢¼ä¸¦æäº¤
   - é‡è¨­æˆåŠŸï¼Œè‡ªå‹•å°å‘ç™»å…¥é é¢

**API è·¯å¾‘**
POST /auth/reset-password

**API å‚³é€æ ¼å¼**
```json
{
  "step": "request|verify|reset",
  "email": "user@example.com",
  "verification_code": "123456",
  "new_password": "new_hashed_password",
  "reset_token": "temporary_reset_token"
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "step_completed": "request|verify|reset",
  "message": "æ“ä½œæˆåŠŸ",
  "reset_token": "temporary_token_for_next_step",
  "expires_in": 900
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **é‡è¨­ç”³è«‹æˆåŠŸ**ï¼šã€ŒğŸ“§ é‡è¨­é€£çµå·²ç™¼é€è‡³æ‚¨çš„Emailï¼Œè«‹æª¢æŸ¥æ”¶ä»¶åŒ£ã€
- **é©—è­‰æˆåŠŸ**ï¼šã€Œâœ… é©—è­‰æˆåŠŸï¼è«‹è¨­å®šæ–°å¯†ç¢¼ã€
- **å¯†ç¢¼é‡è¨­å®Œæˆ**ï¼šã€ŒğŸ” å¯†ç¢¼é‡è¨­æˆåŠŸï¼è«‹ä½¿ç”¨æ–°å¯†ç¢¼ç™»å…¥ã€

**éŒ¯èª¤è™•ç†**
- Emailä¸å­˜åœ¨ â†’ é¡¯ç¤ºï¼šã€Œæ­¤Emailæœªè¨»å†Šå¸³è™Ÿã€
- é©—è­‰ç¢¼éŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œé©—è­‰ç¢¼éŒ¯èª¤æˆ–å·²éæœŸï¼Œè«‹é‡æ–°ç”³è«‹ã€
- å¯†ç¢¼å¼·åº¦ä¸è¶³ â†’ é¡¯ç¤ºï¼šã€Œå¯†ç¢¼éœ€åŒ…å«å¤§å°å¯«å­—æ¯ã€æ•¸å­—åŠç‰¹æ®Šç¬¦è™Ÿã€
- TOKENéæœŸ â†’ é¡¯ç¤ºï¼šã€Œé‡è¨­é€£çµå·²éæœŸï¼Œè«‹é‡æ–°ç”³è«‹ã€
- é »ç¹ç”³è«‹é™åˆ¶ â†’ é¡¯ç¤ºï¼šã€Œç”³è«‹éæ–¼é »ç¹ï¼Œè«‹5åˆ†é˜å¾Œå†è©¦ã€

**å°æ‡‰æ¨¡çµ„**: 2009. AM.js  
**æ ¸å¿ƒå‡½æ•¸**: `AM_resetPassword()`

---

### F007 APPè¨˜å¸³åŠŸèƒ½

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºAPPä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦å¿«é€Ÿæ–°å¢è¨˜å¸³è¨˜éŒ„ï¼Œä»¥ä¾¿æº–ç¢ºè¿½è¹¤æˆ‘çš„æ”¶æ”¯ç‹€æ³ã€‚

**æ¥­å‹™éœ€æ±‚**
- æ”¯æ´æ”¶å…¥ã€æ”¯å‡ºã€è½‰å¸³ä¸‰ç¨®è¨˜å¸³é¡å‹
- è‡ªå‹•ç§‘ç›®ä»£ç¢¼åŒ¹é…èˆ‡å»ºè­°
- æ”¯æ´å¤šå¸³æœ¬è¨˜å¸³ï¼ˆé è¨­å¸³æœ¬ + å°ˆæ¡ˆå¸³æœ¬ï¼‰
- é›¢ç·šè¨˜å¸³æš«å­˜ï¼Œè¯ç¶²å¾Œè‡ªå‹•åŒæ­¥
- é‡è¤‡è¨˜å¸³æ¨¡æ¿åŠŸèƒ½

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - è¨˜å¸³ä¸»é é¢ï¼ˆæµ®å‹•æ–°å¢æŒ‰éˆ•ï¼‰
  - è¨˜å¸³è¡¨å–®ï¼ˆé‡‘é¡è¼¸å…¥ã€ç§‘ç›®é¸æ“‡ã€å‚™è¨»ï¼‰
  - ç§‘ç›®é¸æ“‡å™¨ï¼ˆæœå°‹ + å¿«é€Ÿé¸æ“‡ï¼‰
  - æ—¥æœŸæ™‚é–“é¸æ“‡å™¨
  - å¸³æœ¬åˆ‡æ›ä¸‹æ‹‰é¸å–®
  - è¨˜å¸³é¡å‹æ¨™ç±¤ï¼ˆæ”¶å…¥/æ”¯å‡º/è½‰å¸³ï¼‰

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **å¿«é€Ÿè¨˜å¸³è·¯å¾‘**ï¼š
   - é»æ“Šä¸»é é¢ã€Œ+ã€æµ®å‹•æŒ‰éˆ•
   - é¸æ“‡è¨˜å¸³é¡å‹ï¼ˆæ”¶å…¥/æ”¯å‡º/è½‰å¸³ï¼‰
   - è¼¸å…¥é‡‘é¡ï¼ˆæ•¸å­—éµç›¤ï¼‰
   - é¸æ“‡ç§‘ç›®ï¼ˆæ™ºæ…§æœå°‹æˆ–å¿«é€Ÿé¸é …ï¼‰
   - å¯é¸å¡«å‚™è¨»èªªæ˜
   - é»æ“Šã€Œå„²å­˜ã€å®Œæˆè¨˜å¸³

2. **è©³ç´°è¨˜å¸³è·¯å¾‘**ï¼š
   - é€²å…¥è¨˜å¸³è¡¨å–®å®Œæ•´æ¨¡å¼
   - è¨­å®šè¨˜å¸³æ—¥æœŸæ™‚é–“
   - é¸æ“‡ç›®æ¨™å¸³æœ¬ï¼ˆå¦‚æœ‰å¤šå¸³æœ¬ï¼‰
   - å¡«å¯«å®Œæ•´è¨˜å¸³è³‡è¨Š
   - ç¢ºèªå¾Œæäº¤å„²å­˜

**API è·¯å¾‘**
POST /app/ledger/entry

**API å‚³é€æ ¼å¼**
```json
{
  "entry_type": "income|expense|transfer",
  "amount": 1500.00,
  "subject_code": "1001",
  "subject_name": "è–ªè³‡æ”¶å…¥",
  "ledger_id": "default|project_xxx",
  "entry_date": "2025-07-23T15:30:00+08:00",
  "description": "ä¸ƒæœˆä»½è–ªè³‡",
  "tags": ["å·¥ä½œ", "å›ºå®šæ”¶å…¥"],
  "location": {
    "latitude": 25.0330,
    "longitude": 121.5654
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "entry_id": "entry_xxxxxxxxxx",
  "unified_uid": "LCAS_UID_xxxxxxxxxx",
  "created_at": "2025-07-23T15:30:00+08:00",
  "balance_update": {
    "previous_balance": 45000.00,
    "new_balance": 46500.00,
    "change_amount": 1500.00
  },
  "auto_backup": true
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **è¨˜å¸³æˆåŠŸ**ï¼šã€Œâœ… è¨˜å¸³å®Œæˆï¼ç›®å‰é¤˜é¡ï¼š$46,500ã€
- **é›¢ç·šæš«å­˜**ï¼šã€ŒğŸ“± ç¶²è·¯é›¢ç·šï¼Œè¨˜éŒ„å·²æš«å­˜ï¼Œé€£ç·šå¾Œè‡ªå‹•åŒæ­¥ã€
- **ç§‘ç›®å»ºè­°**ï¼šã€ŒğŸ’¡ ç³»çµ±å»ºè­°ç§‘ç›®ï¼šè–ªè³‡æ”¶å…¥ï¼ˆ1001ï¼‰ã€

**éŒ¯èª¤è™•ç†**
- é‡‘é¡æ ¼å¼éŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œè«‹è¼¸å…¥æ­£ç¢ºçš„é‡‘é¡æ ¼å¼ã€
- ç§‘ç›®ä»£ç¢¼ç„¡æ•ˆ â†’ é¡¯ç¤ºï¼šã€Œæ‰¾ä¸åˆ°æ­¤ç§‘ç›®ï¼Œè«‹é‡æ–°é¸æ“‡ã€
- å¸³æœ¬ä¸å­˜åœ¨ â†’ é¡¯ç¤ºï¼šã€Œç›®æ¨™å¸³æœ¬ä¸å­˜åœ¨ï¼Œå·²åˆ‡æ›è‡³é è¨­å¸³æœ¬ã€
- å„²å­˜å¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œè¨˜å¸³å¤±æ•—ï¼Œå·²æš«å­˜è‡³æœ¬åœ°å¾…é‡è©¦ã€

**å°æ‡‰æ¨¡çµ„**: 2001. BK.js  
**æ ¸å¿ƒå‡½æ•¸**: `BK_processBookkeeping()`

---

### F009 APPè¨˜éŒ„æŸ¥è©¢

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºAPPä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦å¿«é€ŸæŸ¥è©¢å’Œç€è¦½æˆ‘çš„è¨˜å¸³è¨˜éŒ„ï¼Œä»¥ä¾¿äº†è§£æ”¯å‡ºæ¨¡å¼å’Œè²¡å‹™ç‹€æ³ã€‚

**æ¥­å‹™éœ€æ±‚**
- æ”¯æ´å¤šç¶­åº¦ç¯©é¸ï¼ˆæ™‚é–“ã€ç§‘ç›®ã€é‡‘é¡ç¯„åœã€å¸³æœ¬ï¼‰
- æä¾›çµ±è¨ˆåœ–è¡¨èˆ‡è¶¨å‹¢åˆ†æ
- æ”¯æ´è¨˜éŒ„ç·¨è¼¯èˆ‡åˆªé™¤åŠŸèƒ½
- åŒ¯å‡ºåŠŸèƒ½ï¼ˆCSVã€PDFå ±è¡¨ï¼‰
- æœå°‹è¨˜éŒ„å‚™è¨»å…§å®¹

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - è¨˜éŒ„åˆ—è¡¨é é¢ï¼ˆæ™‚é–“æ’åºï¼‰
  - ç¯©é¸å™¨é¢æ¿ï¼ˆæ—¥æœŸã€ç§‘ç›®ã€é‡‘é¡ï¼‰
  - æœå°‹æ¡†ï¼ˆå‚™è¨»é—œéµå­—æœå°‹ï¼‰
  - è¨˜éŒ„å¡ç‰‡ï¼ˆé¡¯ç¤ºè©³ç´°è³‡è¨Šï¼‰
  - çµ±è¨ˆæ‘˜è¦å€å¡Šï¼ˆæœ¬æœˆæ”¶æ”¯ã€é¤˜é¡ï¼‰
  - åœ–è¡¨å±•ç¤ºï¼ˆæ”¶æ”¯è¶¨å‹¢ã€ç§‘ç›®åˆ†å¸ƒï¼‰

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **å¿«é€ŸæŸ¥è©¢è·¯å¾‘**ï¼š
   - é€²å…¥è¨˜éŒ„é é¢ï¼Œé¡¯ç¤ºæœ€è¿‘è¨˜éŒ„
   - ä½¿ç”¨é ‚éƒ¨æœå°‹æ¡†è¼¸å…¥é—œéµå­—
   - å³æ™‚é¡¯ç¤ºæœå°‹çµæœ
   - é»æ“Šè¨˜éŒ„æŸ¥çœ‹è©³ç´°è³‡è¨Š

2. **é€²éšç¯©é¸è·¯å¾‘**ï¼š
   - é»æ“Šç¯©é¸æŒ‰éˆ•é–‹å•Ÿç¯©é¸é¢æ¿
   - è¨­å®šæ—¥æœŸç¯„åœï¼ˆæœ¬æœˆ/ä¸Šæœˆ/è‡ªè¨‚ï¼‰
   - é¸æ“‡ç§‘ç›®åˆ†é¡æˆ–ç‰¹å®šç§‘ç›®
   - è¨­å®šé‡‘é¡ç¯„åœ
   - æ‡‰ç”¨ç¯©é¸æ¢ä»¶æŸ¥çœ‹çµæœ

**API è·¯å¾‘**
GET /app/ledger/query

**API å‚³é€æ ¼å¼**
```json
{
  "filters": {
    "date_range": {
      "start_date": "2025-07-01",
      "end_date": "2025-07-31"
    },
    "subject_codes": ["1001", "2003"],
    "amount_range": {
      "min_amount": 100.00,
      "max_amount": 5000.00
    },
    "entry_types": ["income", "expense"],
    "ledger_ids": ["default", "project_abc"],
    "search_keyword": "é¤å»³"
  },
  "pagination": {
    "page": 1,
    "limit": 50
  },
  "sort": {
    "field": "entry_date",
    "order": "desc"
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "data": {
    "entries": [
      {
        "entry_id": "entry_xxxxxxxxxx",
        "entry_type": "expense",
        "amount": 350.00,
        "subject_code": "2003",
        "subject_name": "é¤é£²è²»",
        "entry_date": "2025-07-23T12:30:00+08:00",
        "description": "åˆé¤ - æ—¥å¼é¤å»³",
        "ledger_name": "å€‹äººå¸³æœ¬"
      }
    ],
    "summary": {
      "total_entries": 156,
      "total_income": 65000.00,
      "total_expense": 23500.00,
      "net_amount": 41500.00
    },
    "pagination": {
      "current_page": 1,
      "total_pages": 4,
      "has_next": true
    }
  }
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **æŸ¥è©¢æˆåŠŸ**ï¼šã€ŒğŸ“Š æ‰¾åˆ°156ç­†è¨˜éŒ„ï¼Œæœ¬æœˆæ·¨æ”¶å…¥ $41,500ã€
- **ç„¡çµæœ**ï¼šã€ŒğŸ” æŸ¥ç„¡ç¬¦åˆæ¢ä»¶çš„è¨˜éŒ„ï¼Œè«‹èª¿æ•´ç¯©é¸æ¢ä»¶ã€
- **è¼‰å…¥æ›´å¤š**ï¼šã€Œâ¬‡ï¸ æ­£åœ¨è¼‰å…¥æ›´å¤šè¨˜éŒ„...ã€

**éŒ¯èª¤è™•ç†**
- æ—¥æœŸç¯„åœç„¡æ•ˆ â†’ é¡¯ç¤ºï¼šã€Œè«‹é¸æ“‡æ­£ç¢ºçš„æ—¥æœŸç¯„åœã€
- æŸ¥è©¢è¶…æ™‚ â†’ é¡¯ç¤ºï¼šã€ŒæŸ¥è©¢è¶…æ™‚ï¼Œè«‹ç¸®å°æŸ¥è©¢ç¯„åœé‡è©¦ã€
- ç¶²è·¯éŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œç¶²è·¯é€£ç·šç•°å¸¸ï¼Œé¡¯ç¤ºæœ¬åœ°å¿«å–è¨˜éŒ„ã€
- æ¬Šé™ä¸è¶³ â†’ é¡¯ç¤ºï¼šã€Œç„¡æ¬Šé™æŸ¥çœ‹æ­¤å¸³æœ¬è¨˜éŒ„ã€

**å°æ‡‰æ¨¡çµ„**: 2001. BK.js  
**æ ¸å¿ƒå‡½æ•¸**: `BK_queryLedgerEntries()`

---

### F010 ç§‘ç›®ä»£ç¢¼ç®¡ç†

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºAPPä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦ç®¡ç†å’Œè‡ªè¨‚è¨˜å¸³ç§‘ç›®ï¼Œä»¥ä¾¿å»ºç«‹ç¬¦åˆå€‹äººéœ€æ±‚çš„åˆ†é¡ç³»çµ±ã€‚

**æ¥­å‹™éœ€æ±‚**
- ç€è¦½é è¨­9999å€‹æ¨™æº–ç§‘ç›®
- æ–°å¢è‡ªè¨‚ç§‘ç›®ä»£ç¢¼
- ç·¨è¼¯ç§‘ç›®åç¨±èˆ‡åŒç¾©è©
- è¨­å®šå¸¸ç”¨ç§‘ç›®å¿«é€Ÿé¸æ“‡
- ç§‘ç›®ä½¿ç”¨é »ç‡çµ±è¨ˆ
- ç§‘ç›®åˆ†é¡éšå±¤ç®¡ç†

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - ç§‘ç›®åˆ†é¡æ¨¹ç‹€çµæ§‹
  - ç§‘ç›®æœå°‹èˆ‡ç¯©é¸ä»‹é¢
  - ç§‘ç›®ç·¨è¼¯è¡¨å–®
  - å¸¸ç”¨ç§‘ç›®è¨­å®šé¢æ¿
  - ç§‘ç›®ä½¿ç”¨çµ±è¨ˆåœ–è¡¨
  - æ–°å¢è‡ªè¨‚ç§‘ç›®å°è©±æ¡†

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **ç€è¦½ç§‘ç›®è·¯å¾‘**ï¼š
   - é€²å…¥ç§‘ç›®ç®¡ç†é é¢
   - ç€è¦½åˆ†é¡æ¨¹ç‹€çµæ§‹
   - æœå°‹ç‰¹å®šç§‘ç›®åç¨±
   - æŸ¥çœ‹ç§‘ç›®è©³ç´°è³‡è¨Šå’Œä½¿ç”¨æ¬¡æ•¸

2. **ç®¡ç†ç§‘ç›®è·¯å¾‘**ï¼š
   - é»æ“Šã€Œæ–°å¢ç§‘ç›®ã€æŒ‰éˆ•
   - å¡«å¯«ç§‘ç›®ä»£ç¢¼ã€åç¨±ã€æ‰€å±¬åˆ†é¡
   - è¨­å®šåŒç¾©è©æ–¹ä¾¿æœå°‹
   - å„²å­˜å¾Œå¯ç«‹å³ä½¿ç”¨æ–¼è¨˜å¸³

**API è·¯å¾‘**
GET /app/subjects/list

**API å‚³é€æ ¼å¼**
```json
{
  "filters": {
    "category": "æ”¶å…¥|æ”¯å‡º|è³‡ç”¢|è² å‚µ",
    "search_keyword": "é¤é£²",
    "custom_only": false,
    "frequently_used": true
  },
  "pagination": {
    "page": 1,
    "limit": 100
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "data": {
    "subjects": [
      {
        "subject_code": "2003",
        "subject_name": "é¤é£²è²»",
        "category": "æ”¯å‡º",
        "parent_code": "2000",
        "parent_name": "ç”Ÿæ´»è²»ç”¨",
        "synonyms": ["åƒé£¯", "ç”¨é¤", "é£²é£Ÿ"],
        "is_custom": false,
        "usage_count": 45,
        "is_frequently_used": true,
        "created_at": "2025-01-01T00:00:00+08:00"
      }
    ],
    "categories": [
      {
        "category_code": "2000",
        "category_name": "ç”Ÿæ´»è²»ç”¨",
        "subject_count": 156
      }
    ],
    "statistics": {
      "total_subjects": 9999,
      "custom_subjects": 12,
      "frequently_used": 20
    }
  }
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **è¼‰å…¥æˆåŠŸ**ï¼šã€ŒğŸ“‹ å·²è¼‰å…¥9999å€‹æ¨™æº–ç§‘ç›® + 12å€‹è‡ªè¨‚ç§‘ç›®ã€
- **æ–°å¢æˆåŠŸ**ï¼šã€Œâœ… è‡ªè¨‚ç§‘ç›®ã€æˆ¿ç§Ÿæ”¯å‡ºã€æ–°å¢æˆåŠŸã€
- **æœå°‹çµæœ**ï¼šã€ŒğŸ” æ‰¾åˆ°15å€‹åŒ…å«ã€é¤é£²ã€çš„ç§‘ç›®ã€

**éŒ¯èª¤è™•ç†**
- ç§‘ç›®ä»£ç¢¼é‡è¤‡ â†’ é¡¯ç¤ºï¼šã€Œç§‘ç›®ä»£ç¢¼å·²å­˜åœ¨ï¼Œè«‹ä½¿ç”¨å…¶ä»–ä»£ç¢¼ã€
- å¿…å¡«æ¬„ä½ç©ºç™½ â†’ é¡¯ç¤ºï¼šã€Œè«‹å¡«å¯«ç§‘ç›®åç¨±ã€
- åˆ†é¡ä¸å­˜åœ¨ â†’ é¡¯ç¤ºï¼šã€Œæ‰€é¸åˆ†é¡ä¸å­˜åœ¨ï¼Œè«‹é‡æ–°é¸æ“‡ã€
- æ¬Šé™ä¸è¶³ â†’ é¡¯ç¤ºï¼šã€Œç„¡æ¬Šé™ä¿®æ”¹é è¨­ç§‘ç›®ã€

**å°æ‡‰æ¨¡çµ„**: 2031. DD1.js  
**æ ¸å¿ƒå‡½æ•¸**: `DD_getSubjectsList()`

---

### F011 ä½¿ç”¨è€…è¨­å®šç®¡ç†

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºAPPä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦è‡ªè¨‚æ‡‰ç”¨ç¨‹å¼è¨­å®šï¼Œä»¥ä¾¿ç²å¾—å€‹äººåŒ–çš„ä½¿ç”¨é«”é©—ã€‚

**æ¥­å‹™éœ€æ±‚**
- å€‹äººè³‡æ–™ç®¡ç†ï¼ˆæš±ç¨±ã€é ­åƒã€æ™‚å€ï¼‰
- è¨˜å¸³åå¥½è¨­å®šï¼ˆé è¨­ç§‘ç›®ã€å¿«é€Ÿé‡‘é¡ï¼‰
- é€šçŸ¥è¨­å®šï¼ˆæé†’æ™‚é–“ã€æ¨æ’­é–‹é—œï¼‰
- éš±ç§èˆ‡å®‰å…¨è¨­å®šï¼ˆç”Ÿç‰©è¾¨è­˜ã€å¯†ç¢¼ï¼‰
- è³‡æ–™åŒæ­¥è¨­å®šï¼ˆè‡ªå‹•å‚™ä»½ã€åŒæ­¥é »ç‡ï¼‰
- ä»‹é¢ä¸»é¡Œè¨­å®šï¼ˆæ·±è‰²/æ·ºè‰²æ¨¡å¼ï¼‰

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - è¨­å®šä¸»é é¢ï¼ˆåˆ†é¡é¸å–®ï¼‰
  - å€‹äººè³‡æ–™ç·¨è¼¯é é¢
  - è¨˜å¸³åå¥½è¨­å®šé é¢
  - é€šçŸ¥è¨­å®šé–‹é—œé é¢
  - å®‰å…¨è¨­å®šé é¢
  - ä¸»é¡Œèˆ‡å¤–è§€è¨­å®šé é¢

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **åŸºæœ¬è¨­å®šè·¯å¾‘**ï¼š
   - é€²å…¥ã€Œè¨­å®šã€é é¢
   - é¸æ“‡ã€Œå€‹äººè³‡æ–™ã€åˆ†é¡
   - ç·¨è¼¯æš±ç¨±ã€æ›´æ›é ­åƒ
   - è¨­å®šæ™‚å€å’Œèªè¨€åå¥½
   - å„²å­˜è®Šæ›´

2. **è¨˜å¸³åå¥½è·¯å¾‘**ï¼š
   - é€²å…¥ã€Œè¨˜å¸³åå¥½ã€åˆ†é¡
   - è¨­å®šé è¨­è¨˜å¸³ç§‘ç›®
   - è¨­å®šå¿«é€Ÿé‡‘é¡æŒ‰éˆ•ï¼ˆ100ã€500ã€1000ï¼‰
   - é¸æ“‡é è¨­å¸³æœ¬
   - å•Ÿç”¨è‡ªå‹•ç§‘ç›®å»ºè­°

**API è·¯å¾‘**
PUT /app/user/settings

**API å‚³é€æ ¼å¼**
```json
{
  "user_profile": {
    "display_name": "å°æ˜",
    "avatar_url": "https://example.com/avatar.jpg",
    "timezone": "Asia/Taipei",
    "language": "zh-TW"
  },
  "bookkeeping_preferences": {
    "default_subjects": {
      "income": "1001",
      "expense": "2003"
    },
    "quick_amounts": [100, 500, 1000, 2000],
    "default_ledger": "default",
    "auto_subject_suggestion": true
  },
  "notification_settings": {
    "daily_reminder": {
      "enabled": true,
      "time": "21:00"
    },
    "budget_alerts": true,
    "push_notifications": true
  },
  "security_settings": {
    "biometric_login": true,
    "auto_lock_timeout": 300
  },
  "sync_settings": {
    "auto_backup": true,
    "sync_frequency": "daily"
  },
  "ui_preferences": {
    "theme": "light|dark|auto",
    "currency_symbol": "NT$"
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "updated_settings": {
    "user_profile": { /* æ›´æ–°å¾Œçš„è¨­å®š */ },
    "last_updated": "2025-07-23T15:30:00+08:00"
  },
  "sync_status": "synced",
  "validation_errors": []
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **è¨­å®šæˆåŠŸ**ï¼šã€Œâœ… è¨­å®šå·²å„²å­˜ä¸¦åŒæ­¥è‡³é›²ç«¯ã€
- **åŒæ­¥ä¸­**ï¼šã€ŒğŸ”„ æ­£åœ¨åŒæ­¥è¨­å®šè‡³å…¶ä»–è£ç½®...ã€
- **é©—è­‰æˆåŠŸ**ï¼šã€ŒğŸ” ç”Ÿç‰©è¾¨è­˜è¨­å®šæˆåŠŸã€

**éŒ¯èª¤è™•ç†**
- æš±ç¨±æ ¼å¼éŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œæš±ç¨±é•·åº¦éœ€åœ¨2-20å­—å…ƒä¹‹é–“ã€
- æ™‚å€è¨­å®šç„¡æ•ˆ â†’ é¡¯ç¤ºï¼šã€Œç„¡æ•ˆçš„æ™‚å€è¨­å®šï¼Œå·²æ¢å¾©é è¨­å€¼ã€
- é ­åƒä¸Šå‚³å¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œé ­åƒä¸Šå‚³å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šã€
- ç”Ÿç‰©è¾¨è­˜è¨­å®šå¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œç”Ÿç‰©è¾¨è­˜è¨­å®šå¤±æ•—ï¼Œè«‹ç¢ºèªè£ç½®æ”¯æ´ã€

**å°æ‡‰æ¨¡çµ„**: 2009. AM.js  
**æ ¸å¿ƒå‡½æ•¸**: `AM_updateUserSettings()`

---

### F031 å°ˆæ¡ˆå¸³æœ¬å»ºç«‹

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºé€²éšä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦å»ºç«‹å°ˆæ¡ˆå¸³æœ¬ï¼Œä»¥ä¾¿åˆ†åˆ¥ç®¡ç†ä¸åŒå°ˆæ¡ˆæˆ–ç”¨é€”çš„è²¡å‹™è¨˜éŒ„ã€‚

**æ¥­å‹™éœ€æ±‚**
- å»ºç«‹ç¨ç«‹çš„å°ˆæ¡ˆå¸³æœ¬
- è¨­å®šå°ˆæ¡ˆé ç®—èˆ‡ç›®æ¨™
- å°ˆæ¡ˆæˆå“¡æ¬Šé™ç®¡ç†
- å°ˆæ¡ˆè²¡å‹™å ±è¡¨ç”¢å‡º
- å°ˆæ¡ˆå¸³æœ¬é–“è½‰å¸³åŠŸèƒ½
- å°ˆæ¡ˆå®Œæˆå¾Œçš„å°å­˜åŠŸèƒ½

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - å°ˆæ¡ˆå¸³æœ¬åˆ—è¡¨é é¢
  - æ–°å»ºå°ˆæ¡ˆè¡¨å–®é é¢
  - å°ˆæ¡ˆè¨­å®šé é¢
  - å°ˆæ¡ˆæˆå“¡ç®¡ç†ä»‹é¢
  - å°ˆæ¡ˆé ç®—è¨­å®šé¢æ¿
  - å°ˆæ¡ˆå ±è¡¨å±•ç¤ºé é¢

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **å»ºç«‹å°ˆæ¡ˆè·¯å¾‘**ï¼š
   - é€²å…¥ã€Œå°ˆæ¡ˆç®¡ç†ã€é é¢
   - é»æ“Šã€Œæ–°å»ºå°ˆæ¡ˆã€æŒ‰éˆ•
   - å¡«å¯«å°ˆæ¡ˆåç¨±ã€æè¿°ã€é ç®—
   - è¨­å®šå°ˆæ¡ˆæœŸé–“å’Œè² è²¬äºº
   - é¸æ“‡å°ˆæ¡ˆç¯„æœ¬ï¼ˆå¯é¸ï¼‰
   - ç¢ºèªå»ºç«‹ä¸¦é–‹å§‹ä½¿ç”¨

2. **ç®¡ç†å°ˆæ¡ˆè·¯å¾‘**ï¼š
   - é¸æ“‡æ—¢æœ‰å°ˆæ¡ˆé€²å…¥ç®¡ç†
   - ç·¨è¼¯å°ˆæ¡ˆåŸºæœ¬è³‡è¨Š
   - é‚€è«‹æˆå“¡åŠ å…¥å°ˆæ¡ˆ
   - è¨­å®šæˆå“¡æ¬Šé™ï¼ˆæŸ¥çœ‹/è¨˜å¸³/ç®¡ç†ï¼‰
   - æŸ¥çœ‹å°ˆæ¡ˆè²¡å‹™å ±è¡¨

**API è·¯å¾‘**
POST /app/projects/create

**API å‚³é€æ ¼å¼**
```json
{
  "project_info": {
    "project_name": "2025å¹´åº¦æ—…éŠè¨ˆç•«",
    "description": "æ—¥æœ¬è‡ªç”±è¡Œé ç®—ç®¡ç†",
    "start_date": "2025-08-01",
    "end_date": "2025-08-15",
    "currency": "TWD",
    "project_type": "travel|business|personal|investment"
  },
  "budget_settings": {
    "total_budget": 100000.00,
    "budget_categories": [
      {
        "category": "äº¤é€šè²»",
        "budget_amount": 30000.00
      },
      {
        "category": "ä½å®¿è²»",
        "budget_amount": 40000.00
      }
    ],
    "alert_threshold": 0.8
  },
  "access_settings": {
    "visibility": "private|shared|public",
    "default_permissions": "read|write|admin"
  },
  "template_settings": {
    "use_template": true,
    "template_id": "travel_template_001"
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "project_info": {
    "project_id": "proj_xxxxxxxxxx",
    "ledger_id": "ledger_proj_xxxxxxxxxx",
    "project_name": "2025å¹´åº¦æ—…éŠè¨ˆç•«",
    "created_at": "2025-07-23T15:30:00+08:00",
    "owner_uid": "LCAS_UID_xxxxxxxxxx",
    "status": "active"
  },
  "initial_setup": {
    "default_subjects_imported": true,
    "budget_categories_created": 2,
    "initial_balance": 0.00
  },
  "access_info": {
    "project_code": "PROJ2025JAPAN",
    "share_link": "https://lcas.app/project/PROJ2025JAPAN"
  }
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **å»ºç«‹æˆåŠŸ**ï¼šã€ŒğŸ‰ å°ˆæ¡ˆã€2025å¹´åº¦æ—…éŠè¨ˆç•«ã€å»ºç«‹æˆåŠŸï¼ã€
- **ç¯„æœ¬å¥—ç”¨**ï¼šã€ŒğŸ“‹ å·²å¥—ç”¨æ—…éŠå°ˆæ¡ˆç¯„æœ¬ï¼ŒåŒ…å«å¸¸ç”¨ç§‘ç›®åˆ†é¡ã€
- **é ç®—è¨­å®š**ï¼šã€ŒğŸ’° å°ˆæ¡ˆé ç®— $100,000 å·²è¨­å®šï¼Œè­¦ç¤ºé»ç‚º $80,000ã€

**éŒ¯èª¤è™•ç†**
- å°ˆæ¡ˆåç¨±é‡è¤‡ â†’ é¡¯ç¤ºï¼šã€Œå°ˆæ¡ˆåç¨±å·²å­˜åœ¨ï¼Œè«‹ä½¿ç”¨å…¶ä»–åç¨±ã€
- é ç®—é‡‘é¡ç„¡æ•ˆ â†’ é¡¯ç¤ºï¼šã€Œè«‹è¼¸å…¥æ­£ç¢ºçš„é ç®—é‡‘é¡ã€
- æ—¥æœŸè¨­å®šéŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€ŒçµæŸæ—¥æœŸä¸èƒ½æ—©æ–¼é–‹å§‹æ—¥æœŸã€
- æ¬Šé™ä¸è¶³ â†’ é¡¯ç¤ºï¼šã€Œæ‚¨çš„å¸³æˆ¶é¡å‹ä¸æ”¯æ´å»ºç«‹å°ˆæ¡ˆï¼Œè«‹å‡ç´šè‡³å°ˆæ¥­ç‰ˆã€
- å°ˆæ¡ˆæ•¸é‡è¶…é™ â†’ é¡¯ç¤ºï¼šã€Œå…è²»ç‰ˆæœ€å¤šå»ºç«‹3å€‹å°ˆæ¡ˆï¼Œè«‹å‡ç´šæˆ–åˆªé™¤æ—¢æœ‰å°ˆæ¡ˆã€

**å°æ‡‰æ¨¡çµ„**: 2051. MLS.js  
**æ ¸å¿ƒå‡½æ•¸**: `MLS_createProjectLedger()`

---

### F032 å°ˆæ¡ˆå¸³æœ¬ç®¡ç†

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºå°ˆæ¡ˆè² è²¬äººï¼Œæˆ‘æƒ³è¦ç®¡ç†å°ˆæ¡ˆå¸³æœ¬çš„å„é …è¨­å®šï¼Œä»¥ä¾¿éˆæ´»èª¿æ•´å°ˆæ¡ˆéœ€æ±‚å’Œæˆå“¡æ¬Šé™ã€‚

**æ¥­å‹™éœ€æ±‚**
- ç·¨è¼¯å°ˆæ¡ˆåŸºæœ¬è³‡è¨Šï¼ˆåç¨±ã€æè¿°ã€æœŸé–“ï¼‰
- èª¿æ•´å°ˆæ¡ˆé ç®—èˆ‡åˆ†é…
- ç®¡ç†å°ˆæ¡ˆæˆå“¡èˆ‡æ¬Šé™
- è¨­å®šå°ˆæ¡ˆé‡Œç¨‹ç¢‘èˆ‡ç›®æ¨™
- å°ˆæ¡ˆé€²åº¦è¿½è¹¤èˆ‡ç‹€æ…‹æ›´æ–°
- å°ˆæ¡ˆè²¡å‹™å ±è¡¨è‡ªå‹•ç”¢å‡º

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - å°ˆæ¡ˆç®¡ç†ä¸»æ§å°
  - å°ˆæ¡ˆè³‡è¨Šç·¨è¼¯è¡¨å–®
  - é ç®—èª¿æ•´èˆ‡åˆ†é…ä»‹é¢
  - æˆå“¡ç®¡ç†é¢æ¿
  - æ¬Šé™è¨­å®šé¸æ“‡å™¨
  - é‡Œç¨‹ç¢‘é€²åº¦è¿½è¹¤å™¨
  - å°ˆæ¡ˆçµ±è¨ˆå„€è¡¨æ¿

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **åŸºæœ¬ç®¡ç†è·¯å¾‘**ï¼š
   - é€²å…¥å°ˆæ¡ˆåˆ—è¡¨ï¼Œé¸æ“‡ç›®æ¨™å°ˆæ¡ˆ
   - é»æ“Šã€Œå°ˆæ¡ˆè¨­å®šã€é€²å…¥ç®¡ç†é é¢
   - ç·¨è¼¯å°ˆæ¡ˆåç¨±ã€æè¿°ã€æ™‚é–“ç¯„åœ
   - èª¿æ•´ç¸½é ç®—èˆ‡å„é¡åˆ¥é ç®—åˆ†é…
   - å„²å­˜è®Šæ›´ä¸¦åŒæ­¥è‡³æ‰€æœ‰æˆå“¡

2. **æˆå“¡ç®¡ç†è·¯å¾‘**ï¼š
   - é€²å…¥ã€Œæˆå“¡ç®¡ç†ã€åˆ†é 
   - æŸ¥çœ‹ç•¶å‰æˆå“¡åˆ—è¡¨èˆ‡æ¬Šé™
   - æ–°å¢æˆå“¡ï¼ˆé€éEmailæˆ–ä½¿ç”¨è€…IDï¼‰
   - è¨­å®šæˆå“¡æ¬Šé™ç­‰ç´šï¼ˆç®¡ç†å“¡/è¨˜å¸³è€…/æª¢è¦–è€…ï¼‰
   - ç§»é™¤ä¸å†åƒèˆ‡çš„æˆå“¡

**API è·¯å¾‘**
PUT /app/projects/manage

**API å‚³é€æ ¼å¼**
```json
{
  "project_id": "proj_xxxxxxxxxx",
  "updates": {
    "basic_info": {
      "project_name": "2025å¹´åº¦æ—…éŠè¨ˆç•«ï¼ˆæ›´æ–°ç‰ˆï¼‰",
      "description": "æ—¥æœ¬è‡ªç”±è¡Œé ç®—ç®¡ç†ï¼Œå·²åŠ å…¥é—œè¥¿è¡Œç¨‹",
      "start_date": "2025-08-01",
      "end_date": "2025-08-20",
      "status": "active|planning|completed|archived"
    },
    "budget_updates": {
      "total_budget": 120000.00,
      "budget_categories": [
        {
          "category": "äº¤é€šè²»",
          "budget_amount": 35000.00,
          "spent_amount": 15000.00,
          "remaining": 20000.00
        },
        {
          "category": "ä½å®¿è²»", 
          "budget_amount": 45000.00,
          "spent_amount": 0.00,
          "remaining": 45000.00
        }
      ],
      "alert_threshold": 0.85
    },
    "member_updates": {
      "add_members": [
        {
          "user_id": "LCAS_UID_yyyyyyyyyy",
          "permission_level": "member",
          "invited_by": "LCAS_UID_xxxxxxxxxx"
        }
      ],
      "update_permissions": [
        {
          "user_id": "LCAS_UID_zzzzzzzzzz",
          "new_permission": "admin"
        }
      ],
      "remove_members": ["LCAS_UID_wwwwwwwwww"]
    },
    "milestone_updates": {
      "milestones": [
        {
          "milestone_id": "ms_001",
          "name": "æ©Ÿç¥¨è¨‚è³¼",
          "target_date": "2025-07-15",
          "status": "completed",
          "budget_impact": 30000.00
        }
      ]
    }
  },
  "notification_settings": {
    "notify_members": true,
    "notification_message": "å°ˆæ¡ˆé ç®—å·²èª¿æ•´ï¼Œè«‹æŸ¥çœ‹æœ€æ–°è³‡è¨Š"
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "project_info": {
    "project_id": "proj_xxxxxxxxxx",
    "updated_fields": ["basic_info", "budget_updates", "member_updates"],
    "current_status": "active",
    "last_updated": "2025-07-23T16:30:00+08:00"
  },
  "budget_summary": {
    "total_budget": 120000.00,
    "total_spent": 15000.00,
    "remaining_budget": 105000.00,
    "budget_utilization": 0.125
  },
  "member_summary": {
    "total_members": 4,
    "admins": 2,
    "members": 1,
    "viewers": 1,
    "members_notified": true
  },
  "sync_status": "completed"
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **æ›´æ–°æˆåŠŸ**ï¼šã€Œâœ… å°ˆæ¡ˆè¨­å®šå·²æ›´æ–°ï¼å·²é€šçŸ¥æ‰€æœ‰æˆå“¡ã€
- **é ç®—èª¿æ•´**ï¼šã€ŒğŸ’° å°ˆæ¡ˆé ç®—å·²èª¿æ•´è‡³ $120,000ï¼Œç›®å‰ä½¿ç”¨ç‡ 12.5%ã€
- **æˆå“¡è®Šæ›´**ï¼šã€ŒğŸ‘¥ æˆå“¡æ¬Šé™å·²æ›´æ–°ï¼Œå…±4ä½æˆå“¡åƒèˆ‡å°ˆæ¡ˆã€

**éŒ¯èª¤è™•ç†**
- æ¬Šé™ä¸è¶³ â†’ é¡¯ç¤ºï¼šã€Œåƒ…å°ˆæ¡ˆç®¡ç†å“¡å¯ä¿®æ”¹æ­¤è¨­å®šã€
- é ç®—è¨­å®šéŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œç¸½é ç®—ä¸èƒ½ä½æ–¼å·²æ”¯å‡ºé‡‘é¡ $15,000ã€
- æˆå“¡é‚€è«‹å¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œç„¡æ³•æ‰¾åˆ°æŒ‡å®šä½¿ç”¨è€…ï¼Œè«‹ç¢ºèªä½¿ç”¨è€…IDã€
- æ—¥æœŸè¡çª â†’ é¡¯ç¤ºï¼šã€ŒçµæŸæ—¥æœŸä¸èƒ½æ—©æ–¼é–‹å§‹æ—¥æœŸã€

**å°æ‡‰æ¨¡çµ„**: 2051. MLS.js  
**æ ¸å¿ƒå‡½æ•¸**: `MLS_editLedger()`, `MLS_setLedgerPermissions()`, `MLS_inviteMember()`

---

### F033 å°ˆæ¡ˆå¸³æœ¬åˆªé™¤

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºå°ˆæ¡ˆæ“æœ‰è€…ï¼Œæˆ‘æƒ³è¦å®‰å…¨åœ°åˆªé™¤å·²å®Œæˆæˆ–å–æ¶ˆçš„å°ˆæ¡ˆå¸³æœ¬ï¼Œä»¥ä¾¿æ¸…ç†ä¸éœ€è¦çš„è³‡æ–™ä¸¦ä¿è­·é‡è¦è³‡è¨Šã€‚

**æ¥­å‹™éœ€æ±‚**
- åƒ…é™å°ˆæ¡ˆæ“æœ‰è€…åŸ·è¡Œåˆªé™¤æ“ä½œ
- å¤šå±¤ç´šç¢ºèªæ©Ÿåˆ¶é˜²æ­¢èª¤åˆª
- åˆªé™¤å‰è‡ªå‹•è³‡æ–™å‚™ä»½
- æˆå“¡é€šçŸ¥èˆ‡è³‡æ–™å°å‡ºé¸é …
- é—œè¯è¨˜å¸³è³‡æ–™è™•ç†é¸æ“‡
- åˆªé™¤æ“ä½œå®Œæ•´ç¨½æ ¸è¨˜éŒ„

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - å°ˆæ¡ˆè¨­å®šé é¢ã€Œåˆªé™¤å°ˆæ¡ˆã€é¸é …
  - ä¸‰å±¤ç´šç¢ºèªå°è©±æ¡†
  - è³‡æ–™å‚™ä»½ç¢ºèªä»‹é¢
  - åˆªé™¤åŸå› é¸æ“‡è¡¨å–®
  - æœ€çµ‚ç¢ºèªè¼¸å…¥æ¡†ï¼ˆå°ˆæ¡ˆåç¨±ç¢ºèªï¼‰
  - åˆªé™¤é€²åº¦æŒ‡ç¤ºå™¨

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **åˆªé™¤æº–å‚™è·¯å¾‘**ï¼š
   - é€²å…¥å°ˆæ¡ˆç®¡ç†é é¢
   - æ»‘å‹•è‡³åº•éƒ¨ã€Œå±éšªæ“ä½œå€ã€
   - é»æ“Šã€Œåˆªé™¤å°ˆæ¡ˆã€ç´…è‰²æŒ‰éˆ•
   - ç³»çµ±é¡¯ç¤ºç¬¬ä¸€å±¤è­¦å‘Šï¼šå°ˆæ¡ˆåŸºæœ¬è³‡è¨Š

2. **ç¢ºèªæµç¨‹è·¯å¾‘**ï¼š
   - ç¬¬ä¸€å±¤ç¢ºèªï¼šã€Œç¢ºå®šè¦åˆªé™¤æ­¤å°ˆæ¡ˆå—ï¼Ÿã€
   - ç¬¬äºŒå±¤ç¢ºèªï¼šé¸æ“‡åˆªé™¤åŸå› ä¸¦è¼¸å…¥å¯†ç¢¼
   - ç¬¬ä¸‰å±¤ç¢ºèªï¼šè¼¸å…¥å°ˆæ¡ˆå®Œæ•´åç¨±
   - æœ€çµ‚ç¢ºèªï¼šé»æ“Šã€Œæˆ‘äº†è§£é¢¨éšªï¼Œç¢ºå®šåˆªé™¤ã€
   - åŸ·è¡Œåˆªé™¤ä¸¦é¡¯ç¤ºé€²åº¦

**API è·¯å¾‘**
DELETE /app/projects/delete

**API å‚³é€æ ¼å¼**
```json
{
  "project_id": "proj_xxxxxxxxxx",
  "confirmation_steps": {
    "step1_acknowledged": true,
    "step2_password": "user_password_hash",
    "step2_reason": "project_completed|project_cancelled|data_cleanup|privacy_concern",
    "step2_reason_detail": "å°ˆæ¡ˆå·²å®Œæˆï¼Œä¸å†éœ€è¦æ­¤å¸³æœ¬",
    "step3_project_name": "2025å¹´åº¦æ—…éŠè¨ˆç•«",
    "final_confirmation": "DELETE_CONFIRMED"
  },
  "deletion_options": {
    "backup_before_delete": true,
    "export_data_format": "csv|pdf|json",
    "notify_members": true,
    "transfer_data_to": null,
    "delete_associated_records": "keep|archive|delete"
  },
  "confirmation_token": "delete_proj_xxxxxxxxxx_1234567890"
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "deletion_info": {
    "project_id": "proj_xxxxxxxxxx",
    "project_name": "2025å¹´åº¦æ—…éŠè¨ˆç•«",
    "deleted_at": "2025-07-23T16:30:00+08:00",
    "deleted_by": "LCAS_UID_xxxxxxxxxx"
  },
  "cleanup_summary": {
    "records_processed": 45,
    "backup_created": true,
    "backup_location": "backups/proj_xxxxxxxxxx_20250723.zip",
    "members_notified": 3,
    "associated_data": "archived"
  },
  "recovery_info": {
    "recovery_possible": true,
    "recovery_deadline": "2025-08-23T16:30:00+08:00",
    "recovery_token": "recover_proj_xxxxxxxxxx_abcdef"
  }
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **ç¬¬ä¸€å±¤è­¦å‘Š**ï¼šã€Œâš ï¸ æ‚¨å³å°‡åˆªé™¤å°ˆæ¡ˆã€2025å¹´åº¦æ—…éŠè¨ˆç•«ã€åŠå…¶45ç­†è¨˜å¸³è¨˜éŒ„ã€
- **å‚™ä»½ç¢ºèª**ï¼šã€ŒğŸ’¾ ç³»çµ±å°‡è‡ªå‹•å‚™ä»½æ‰€æœ‰è³‡æ–™ï¼Œå‚™ä»½æª”æ¡ˆå°‡ä¿å­˜30å¤©ã€
- **åˆªé™¤å®Œæˆ**ï¼šã€ŒğŸ—‘ï¸ å°ˆæ¡ˆå·²å®‰å…¨åˆªé™¤ï¼Œå·²é€šçŸ¥3ä½æˆå“¡ï¼Œå‚™ä»½å·²å»ºç«‹ã€

**éŒ¯èª¤è™•ç†**
- æ¬Šé™ä¸è¶³ â†’ é¡¯ç¤ºï¼šã€Œåƒ…å°ˆæ¡ˆæ“æœ‰è€…å¯åˆªé™¤å°ˆæ¡ˆã€
- å°ˆæ¡ˆåç¨±éŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œè«‹æ­£ç¢ºè¼¸å…¥å°ˆæ¡ˆåç¨±ï¼šã€2025å¹´åº¦æ—…éŠè¨ˆç•«ã€ã€
- å¯†ç¢¼é©—è­‰å¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œå¯†ç¢¼éŒ¯èª¤ï¼Œç„¡æ³•åŸ·è¡Œåˆªé™¤æ“ä½œã€
- ç³»çµ±å‚™ä»½å¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œå‚™ä»½å»ºç«‹å¤±æ•—ï¼Œåˆªé™¤æ“ä½œå·²å–æ¶ˆã€
- ç¢ºèªTOKENç„¡æ•ˆ â†’ é¡¯ç¤ºï¼šã€Œç¢ºèªæ†‘è­‰å·²éæœŸï¼Œè«‹é‡æ–°é€²è¡Œåˆªé™¤æµç¨‹ã€

**å°æ‡‰æ¨¡çµ„**: 2051. MLS.js  
**æ ¸å¿ƒå‡½æ•¸**: `MLS_deleteLedger()`, `MLS_handlePermissionError()`

---

### F034 åˆ†é¡å¸³æœ¬å»ºç«‹

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºæœ‰åˆ†é¡è¨˜å¸³éœ€æ±‚çš„ä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦å»ºç«‹ä¸»é¡Œåˆ†é¡å¸³æœ¬ï¼Œä»¥ä¾¿å°‡ä¸åŒç”¨é€”çš„æ”¯å‡ºåˆ†é–‹ç®¡ç†å’Œåˆ†æã€‚

**æ¥­å‹™éœ€æ±‚**
- å»ºç«‹ä¸»é¡Œå°å‘çš„åˆ†é¡å¸³æœ¬
- é è¨­ç§‘ç›®è‡ªå‹•é…ç½®
- æ™ºæ…§æ¨™ç±¤èˆ‡åˆ†é¡è¦å‰‡
- è‡ªå‹•åˆ†é¡å»ºè­°æ©Ÿåˆ¶
- ç¯„æœ¬å¿«é€Ÿå¥—ç”¨åŠŸèƒ½
- åˆ†é¡å ±è¡¨è‡ªå‹•ç”¢å‡º

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - åˆ†é¡å¸³æœ¬å»ºç«‹ç²¾éˆ
  - åˆ†é¡é¡å‹é¸æ“‡å™¨
  - ç¯„æœ¬é è¦½èˆ‡é¸æ“‡ä»‹é¢
  - æ¨™ç±¤è¼¸å…¥èˆ‡å»ºè­°ç³»çµ±
  - ç§‘ç›®è‡ªå‹•é…ç½®é è¦½
  - åˆ†é¡è¦å‰‡è¨­å®šé¢æ¿
  - å»ºç«‹ç¢ºèªèˆ‡æ‘˜è¦é é¢

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **å¿«é€Ÿå»ºç«‹è·¯å¾‘**ï¼š
   - é€²å…¥ã€Œå¸³æœ¬ç®¡ç†ã€â†’ã€Œæ–°å¢å¸³æœ¬ã€
   - é¸æ“‡ã€Œåˆ†é¡å¸³æœ¬ã€é¡å‹
   - é¸æ“‡é è¨­ç¯„æœ¬ï¼ˆæ—…éŠ/æŠ•è³‡/å­¸ç¿’ç­‰ï¼‰
   - è¼¸å…¥åˆ†é¡åç¨±èˆ‡ç°¡çŸ­æè¿°
   - ç¢ºèªå»ºç«‹ï¼Œç³»çµ±è‡ªå‹•é…ç½®

2. **è‡ªè¨‚å»ºç«‹è·¯å¾‘**ï¼š
   - é¸æ“‡ã€Œè‡ªè¨‚åˆ†é¡å¸³æœ¬ã€
   - è¨­å®šåˆ†é¡åç¨±èˆ‡è©³ç´°æè¿°
   - æ–°å¢ç›¸é—œæ¨™ç±¤ï¼ˆç”¨æ–¼è‡ªå‹•åˆ†é¡ï¼‰
   - é¸æ“‡é è¨­ç§‘ç›®èˆ‡åˆ†é¡è¦å‰‡
   - è¨­å®šè‡ªå‹•åˆ†é¡é–€æª»èˆ‡æ¢ä»¶
   - é è¦½è¨­å®šä¸¦ç¢ºèªå»ºç«‹

**API è·¯å¾‘**
POST /app/categories/create

**API å‚³é€æ ¼å¼**
```json
{
  "category_info": {
    "category_name": "2025æŠ•è³‡ç†è²¡",
    "description": "æŠ•è³‡è‚¡ç¥¨ã€åŸºé‡‘ã€åŠ å¯†è²¨å¹£çš„æ”¶æ”¯ç®¡ç†",
    "category_type": "investment|travel|food|education|shopping|healthcare|entertainment|custom",
    "icon": "investment_icon.png",
    "color_theme": "#2E7D32"
  },
  "template_settings": {
    "use_template": true,
    "template_id": "investment_template_001",
    "custom_modifications": {
      "additional_subjects": ["è‚¡æ¯æ”¶å…¥", "æ‰‹çºŒè²»", "æŠ•è³‡æå¤±"],
      "removed_subjects": []
    }
  },
  "classification_rules": {
    "auto_classify": true,
    "tags": ["è‚¡ç¥¨", "åŸºé‡‘", "ETF", "åŠ å¯†è²¨å¹£", "æŠ•è³‡"],
    "keywords": ["è‚¡æ¯", "é…æ¯", "æ‰‹çºŒè²»", "è­‰åˆ¸", "æŠ•è³‡"],
    "amount_rules": [
      {
        "condition": "amount > 10000",
        "action": "require_confirmation",
        "subject_suggestion": "å¤§é¡æŠ•è³‡"
      }
    ],
    "description_patterns": [
      {
        "pattern": "è­‰åˆ¸|è‚¡ç¥¨",
        "suggested_subject": "è‚¡ç¥¨æŠ•è³‡",
        "confidence": 0.9
      }
    ]
  },
  "default_settings": {
    "default_subjects": {
      "income": ["è‚¡æ¯æ”¶å…¥", "æŠ•è³‡ç²åˆ©"],
      "expense": ["æŠ•è³‡æˆæœ¬", "æ‰‹çºŒè²»", "ç®¡ç†è²»"]
    },
    "budget_tracking": {
      "enable_budget": true,
      "monthly_budget": 50000.00,
      "alert_percentage": 0.8
    },
    "reporting": {
      "auto_generate": true,
      "frequency": "monthly",
      "include_performance": true
    }
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "category_info": {
    "category_id": "cat_investment_xxxxxxxxxx",
    "ledger_id": "ledger_cat_xxxxxxxxxx",
    "category_name": "2025æŠ•è³‡ç†è²¡",
    "category_type": "investment",
    "created_at": "2025-07-23T16:30:00+08:00",
    "owner_uid": "LCAS_UID_xxxxxxxxxx"
  },
  "initial_setup": {
    "template_applied": "investment_template_001",
    "subjects_configured": 15,
    "classification_rules": {
      "auto_tags": 5,
      "keyword_patterns": 8,
      "amount_rules": 3
    },
    "default_subjects_set": true
  },
  "intelligence_features": {
    "smart_categorization": true,
    "auto_tagging": true,
    "duplicate_detection": true,
    "spending_insights": true
  },
  "integration_status": {
    "budget_tracking": "enabled",
    "report_automation": "configured",
    "analytics_ready": true
  }
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **å»ºç«‹æˆåŠŸ**ï¼šã€ŒğŸ¯ åˆ†é¡å¸³æœ¬ã€2025æŠ•è³‡ç†è²¡ã€å»ºç«‹æˆåŠŸï¼å·²é…ç½®15å€‹ç›¸é—œç§‘ç›®ã€
- **ç¯„æœ¬å¥—ç”¨**ï¼šã€ŒğŸ“‹ å·²å¥—ç”¨æŠ•è³‡ç†è²¡ç¯„æœ¬ï¼ŒåŒ…å«æ™ºæ…§åˆ†é¡è¦å‰‡ã€
- **æ™ºæ…§åŠŸèƒ½**ï¼šã€ŒğŸ¤– æ™ºæ…§åˆ†é¡å·²å•Ÿç”¨ï¼Œç³»çµ±å°‡è‡ªå‹•å»ºè­°åˆé©ç§‘ç›®ã€

**éŒ¯èª¤è™•ç†**
- åˆ†é¡åç¨±é‡è¤‡ â†’ é¡¯ç¤ºï¼šã€Œåˆ†é¡å¸³æœ¬åç¨±å·²å­˜åœ¨ï¼Œè«‹ä½¿ç”¨å…¶ä»–åç¨±ã€
- ç¯„æœ¬è¼‰å…¥å¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œç¯„æœ¬è¼‰å…¥å¤±æ•—ï¼Œå°‡ä½¿ç”¨åŸºç¤è¨­å®šå»ºç«‹ã€
- æ¨™ç±¤æ ¼å¼éŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œæ¨™ç±¤é•·åº¦éœ€åœ¨2-10å­—å…ƒä¹‹é–“ã€
- åˆ†é¡è¦å‰‡è¡çª â†’ é¡¯ç¤ºï¼šã€Œåˆ†é¡è¦å‰‡è¨­å®šè¡çªï¼Œè«‹æª¢æŸ¥æ¢ä»¶è¨­å®šã€
- ç§‘ç›®é…ç½®å¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œç§‘ç›®è‡ªå‹•é…ç½®å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¨­å®šé è¨­ç§‘ç›®ã€

**å°æ‡‰æ¨¡çµ„**: 2051. MLS.js  
**æ ¸å¿ƒå‡½æ•¸**: `MLS_createCategoryLedger()`, `MLS_configureLedgerType()`

---

### F035 åˆ†é¡å¸³æœ¬ç®¡ç†

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºåˆ†é¡å¸³æœ¬ä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦ç®¡ç†åˆ†é¡å¸³æœ¬çš„å„é …è¨­å®šï¼Œä»¥ä¾¿å„ªåŒ–åˆ†é¡è¦å‰‡å’Œæå‡è¨˜å¸³æ•ˆç‡ã€‚

**æ¥­å‹™éœ€æ±‚**
- ç·¨è¼¯åˆ†é¡åŸºæœ¬è³‡è¨Šèˆ‡å¤–è§€
- èª¿æ•´åˆ†é¡è¦å‰‡èˆ‡æ¢ä»¶
- ç®¡ç†æ¨™ç±¤èˆ‡é—œéµå­—å­—å…¸
- è¨­å®šè‡ªå‹•åˆ†é¡ä¿¡å¿ƒåº¦é–€æª»
- åˆ†æåˆ†é¡æ•ˆæœèˆ‡æº–ç¢ºç‡
- åŒ¯å‡ºåˆ†é¡çµ±è¨ˆå ±è¡¨

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - åˆ†é¡å¸³æœ¬ç®¡ç†å„€è¡¨æ¿
  - åˆ†é¡è³‡è¨Šç·¨è¼¯è¡¨å–®
  - æ™ºæ…§è¦å‰‡è¨­å®šé¢æ¿
  - æ¨™ç±¤ç®¡ç†ä»‹é¢
  - åˆ†é¡æ•ˆæœåˆ†æåœ–è¡¨
  - è¦å‰‡æ¸¬è©¦èˆ‡é è¦½å·¥å…·
  - åˆ†é¡å ±è¡¨ç”¢å‡ºå™¨

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **åŸºæœ¬ç®¡ç†è·¯å¾‘**ï¼š
   - é€²å…¥åˆ†é¡å¸³æœ¬åˆ—è¡¨
   - é¸æ“‡ç›®æ¨™åˆ†é¡å¸³æœ¬
   - é»æ“Šã€Œåˆ†é¡è¨­å®šã€é€²å…¥ç®¡ç†é é¢
   - ç·¨è¼¯åˆ†é¡åç¨±ã€æè¿°ã€å¤–è§€è¨­å®š
   - èª¿æ•´åˆ†é¡åœ–ç¤ºèˆ‡é¡è‰²ä¸»é¡Œ
   - å„²å­˜è®Šæ›´ä¸¦é è¦½æ•ˆæœ

2. **æ™ºæ…§è¦å‰‡ç®¡ç†è·¯å¾‘**ï¼š
   - é€²å…¥ã€Œæ™ºæ…§åˆ†é¡ã€è¨­å®šé é¢
   - æŸ¥çœ‹ç•¶å‰åˆ†é¡è¦å‰‡æ•ˆæœçµ±è¨ˆ
   - æ–°å¢æˆ–ç·¨è¼¯é—œéµå­—æ¨¡å¼
   - èª¿æ•´è‡ªå‹•åˆ†é¡ä¿¡å¿ƒåº¦é–€æª»
   - æ¸¬è©¦è¦å‰‡ä¸¦æŸ¥çœ‹åˆ†é¡é è¦½
   - å•Ÿç”¨æˆ–åœç”¨ç‰¹å®šè¦å‰‡

**API è·¯å¾‘**
PUT /app/categories/manage

**API å‚³é€æ ¼å¼**
```json
{
  "category_id": "cat_investment_xxxxxxxxxx",
  "updates": {
    "basic_info": {
      "category_name": "2025æŠ•è³‡ç†è²¡Plus",
      "description": "å¢å¼·ç‰ˆæŠ•è³‡ç†è²¡ç®¡ç†ï¼ŒåŒ…å«é¢¨éšªè©•ä¼°",
      "icon": "investment_plus_icon.png",
      "color_theme": "#1B5E20",
      "visibility": "private|public",
      "tags": ["æŠ•è³‡", "ç†è²¡", "è‚¡ç¥¨", "åŸºé‡‘", "é¢¨éšªç®¡ç†"]
    },
    "classification_rules": {
      "update_existing": [
        {
          "rule_id": "rule_001",
          "pattern": "è­‰åˆ¸|è‚¡ç¥¨|ETF",
          "suggested_subject": "è‚¡ç¥¨æŠ•è³‡",
          "confidence": 0.95,
          "active": true
        }
      ],
      "add_new": [
        {
          "pattern": "é…æ¯|è‚¡æ¯",
          "suggested_subject": "è‚¡æ¯æ”¶å…¥",
          "confidence": 0.9,
          "active": true
        }
      ],
      "remove_rules": ["rule_old_002"]
    },
    "threshold_settings": {
      "auto_classify_threshold": 0.85,
      "manual_confirm_threshold": 0.6,
      "reject_threshold": 0.3
    },
    "advanced_settings": {
      "enable_machine_learning": true,
      "learning_from_corrections": true,
      "cross_category_learning": false,
      "duplicate_detection_sensitivity": "high"
    }
  },
  "optimization_requests": {
    "analyze_performance": true,
    "suggest_improvements": true,
    "update_frequency": "weekly"
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "category_info": {
    "category_id": "cat_investment_xxxxxxxxxx",
    "updated_fields": ["basic_info", "classification_rules", "threshold_settings"],
    "last_updated": "2025-07-23T16:30:00+08:00"
  },
  "rule_analysis": {
    "total_rules": 12,
    "active_rules": 10,
    "performance_metrics": {
      "accuracy_rate": 0.89,
      "auto_classification_rate": 0.76,
      "manual_intervention_rate": 0.13,
      "rejection_rate": 0.11
    },
    "recent_improvements": [
      {
        "rule_pattern": "é…æ¯|è‚¡æ¯",
        "before_accuracy": 0.82,
        "after_accuracy": 0.94,
        "impact": "positive"
      }
    ]
  },
  "suggestions": {
    "recommended_rules": [
      {
        "pattern": "æ‰‹çºŒè²»|ç®¡ç†è²»",
        "suggested_subject": "æŠ•è³‡æˆæœ¬",
        "confidence": 0.88,
        "based_on": "user_behavior_analysis"
      }
    ],
    "optimization_tips": [
      "å»ºè­°å°‡ã€è‚¡æ¯ã€ç›¸é—œé—œéµå­—çš„ä¿¡å¿ƒåº¦æå‡è‡³0.95",
      "å¯è€ƒæ…®æ–°å¢ã€åŸºé‡‘ç”³è³¼ã€è‡ªå‹•åˆ†é¡è¦å‰‡"
    ]
  }
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **æ›´æ–°æˆåŠŸ**ï¼šã€Œâœ… åˆ†é¡è¨­å®šå·²æ›´æ–°ï¼åˆ†é¡æº–ç¢ºç‡æå‡è‡³89%ã€
- **è¦å‰‡å„ªåŒ–**ï¼šã€ŒğŸ¯ æ–°å¢2æ¢åˆ†é¡è¦å‰‡ï¼Œè‡ªå‹•åˆ†é¡ç‡æå‡è‡³76%ã€
- **æ•ˆæœåˆ†æ**ï¼šã€ŒğŸ“Š æœ¬æœˆè‡ªå‹•åˆ†é¡æˆåŠŸ145ç­†ï¼Œæ‰‹å‹•ç¢ºèª18ç­†ï¼Œæ‹’çµ•16ç­†ã€

**éŒ¯èª¤è™•ç†**
- è¦å‰‡è¡çª â†’ é¡¯ç¤ºï¼šã€Œæ–°è¦å‰‡èˆ‡ç¾æœ‰è¦å‰‡ã€rule_001ã€è¡çªï¼Œè«‹èª¿æ•´æ¨¡å¼ã€
- ä¿¡å¿ƒåº¦è¨­å®šéŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œä¿¡å¿ƒåº¦é–€æª»éœ€ä»‹æ–¼0.1-1.0ä¹‹é–“ã€
- é—œéµå­—æ ¼å¼éŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œé—œéµå­—ä¸å¯åŒ…å«ç‰¹æ®Šç¬¦è™Ÿï¼Œè«‹é‡æ–°è¼¸å…¥ã€
- è¦å‰‡æ¸¬è©¦å¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œè¦å‰‡æ¸¬è©¦å¤±æ•—ï¼Œå¯èƒ½å½±éŸ¿åˆ†é¡æ•ˆæœã€
- æ©Ÿå™¨å­¸ç¿’æ¨¡çµ„ç•°å¸¸ â†’ é¡¯ç¤ºï¼šã€Œæ™ºæ…§å­¸ç¿’åŠŸèƒ½æš«æ™‚ç„¡æ³•ä½¿ç”¨ï¼Œå·²åˆ‡æ›è‡³è¦å‰‡æ¨¡å¼ã€

**å°æ‡‰æ¨¡çµ„**: 2051. MLS.js  
**æ ¸å¿ƒå‡½æ•¸**: `MLS_editLedger()`, `MLS_configureLedgerType()`, `MLS_setLedgerAttributes()`

---

### F036 å¤šå¸³æœ¬åˆ‡æ›

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºæ“æœ‰å¤šå€‹å¸³æœ¬çš„ä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦å¿«é€Ÿåˆ‡æ›ä¸åŒå¸³æœ¬ï¼Œä»¥ä¾¿åœ¨ä¸åŒæƒ…å¢ƒä¸‹é«˜æ•ˆé€²è¡Œè¨˜å¸³å’ŒæŸ¥è©¢ã€‚

**æ¥­å‹™éœ€æ±‚**
- æµæš¢çš„å¸³æœ¬åˆ‡æ›é«”é©—
- å¤šå¸³æœ¬ç‹€æ…‹åŒæ­¥é¡¯ç¤º
- å¿«é€Ÿé è¦½å¸³æœ¬æ‘˜è¦è³‡è¨Š
- æœ€è¿‘ä½¿ç”¨å¸³æœ¬å¿«é€Ÿå­˜å–
- å¸³æœ¬æœå°‹èˆ‡ç¯©é¸åŠŸèƒ½
- åˆ‡æ›æ­·å²è¨˜éŒ„è¿½è¹¤

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - é ‚éƒ¨å¸³æœ¬åˆ‡æ›ä¸‹æ‹‰é¸å–®
  - å¸³æœ¬é è¦½å¡ç‰‡
  - å´æ»‘å¸³æœ¬é¸æ“‡å™¨
  - å¸³æœ¬æœå°‹æ¡†
  - æœ€è¿‘ä½¿ç”¨å¸³æœ¬å¿«æ·åˆ—
  - å¸³æœ¬é¡å‹ç¯©é¸æ¨™ç±¤
  - å¸³æœ¬ç‹€æ…‹æŒ‡ç¤ºå™¨

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **å¿«é€Ÿåˆ‡æ›è·¯å¾‘**ï¼š
   - é»æ“Šé ‚éƒ¨ç•¶å‰å¸³æœ¬åç¨±
   - ä¸‹æ‹‰é¸å–®é¡¯ç¤ºå¯ç”¨å¸³æœ¬åˆ—è¡¨
   - é»æ“Šç›®æ¨™å¸³æœ¬åç¨±
   - ç³»çµ±ç«‹å³åˆ‡æ›ä¸¦è¼‰å…¥è³‡æ–™
   - é¡¯ç¤ºåˆ‡æ›æˆåŠŸæç¤º

2. **é€²éšé¸æ“‡è·¯å¾‘**ï¼š
   - å´æ»‘æˆ–é»æ“Šã€Œæ›´å¤šå¸³æœ¬ã€
   - é€²å…¥å®Œæ•´å¸³æœ¬é¸æ“‡ä»‹é¢
   - ä½¿ç”¨æœå°‹æ¡†æˆ–ç¯©é¸æ¨™ç±¤
   - é è¦½å¸³æœ¬æ‘˜è¦è³‡è¨Š
   - é¸æ“‡ç›®æ¨™å¸³æœ¬ä¸¦ç¢ºèªåˆ‡æ›

**API è·¯å¾‘**
GET /app/ledgers/switch

**API å‚³é€æ ¼å¼**
```json
{
  "user_id": "LCAS_UID_xxxxxxxxxx",
  "switch_request": {
    "target_ledger_id": "ledger_proj_yyyyyyyyyy",
    "current_ledger_id": "ledger_default_xxxxxxxxxx",
    "platform": "mobile_app|web_app",
    "switch_reason": "manual|auto_suggestion|recent_activity"
  },
  "context_info": {
    "current_screen": "ledger_entry|ledger_query|dashboard",
    "device_info": {
      "device_type": "ios|android",
      "app_version": "2.0.1"
    },
    "location": {
      "latitude": 25.0330,
      "longitude": 121.5654
    }
  },
  "preferences": {
    "remember_last_used": true,
    "sync_across_devices": true,
    "load_recent_data": true
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "switch_info": {
    "switched_to": {
      "ledger_id": "ledger_proj_yyyyyyyyyy",
      "ledger_name": "2025å¹´åº¦æ—…éŠè¨ˆç•«",
      "ledger_type": "project",
      "owner": "LCAS_UID_xxxxxxxxxx",
      "member_role": "owner|admin|member|viewer"
    },
    "switched_from": {
      "ledger_id": "ledger_default_xxxxxxxxxx",
      "ledger_name": "å€‹äººå¸³æœ¬"
    },
    "switch_time": "2025-07-23T16:30:00+08:00"
  },
  "ledger_summary": {
    "total_entries": 28,
    "current_balance": 85000.00,
    "recent_activity": {
      "last_entry_date": "2025-07-22T18:45:00+08:00",
      "entries_this_week": 5,
      "total_this_month": {
        "income": 120000.00,
        "expense": 35000.00
      }
    },
    "budget_status": {
      "has_budget": true,
      "budget_total": 100000.00,
      "budget_used": 35000.00,
      "budget_remaining": 65000.00,
      "usage_percentage": 0.35
    }
  },
  "available_ledgers": [
    {
      "ledger_id": "ledger_default_xxxxxxxxxx",
      "name": "å€‹äººå¸³æœ¬",
      "type": "default",
      "last_used": "2025-07-23T15:20:00+08:00",
      "entry_count": 156,
      "is_recent": true
    },
    {
      "ledger_id": "ledger_cat_zzzzzzzzz",
      "name": "2025æŠ•è³‡ç†è²¡",
      "type": "category",
      "last_used": "2025-07-20T10:30:00+08:00",
      "entry_count": 23,
      "is_recent": false
    }
  ],
  "quick_actions": [
    "æ–°å¢è¨˜å¸³",
    "æŸ¥çœ‹å ±è¡¨",
    "é ç®—æª¢æŸ¥",
    "æˆå“¡ç®¡ç†"
  ]
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **åˆ‡æ›æˆåŠŸ**ï¼šã€ŒğŸ“‹ å·²åˆ‡æ›è‡³ã€2025å¹´åº¦æ—…éŠè¨ˆç•«ã€ï¼Œç›®å‰é¤˜é¡ $85,000ã€
- **å¸³æœ¬æ‘˜è¦**ï¼šã€ŒğŸ“Š æœ¬é€±æ–°å¢5ç­†è¨˜éŒ„ï¼Œæœ¬æœˆé ç®—ä½¿ç”¨ç‡35%ã€
- **å¿«é€Ÿæç¤º**ï¼šã€ŒğŸ’¡ é€™æ˜¯æ‚¨çš„å°ˆæ¡ˆå¸³æœ¬ï¼Œå¯é‚€è«‹æˆå“¡å”ä½œè¨˜å¸³ã€

**éŒ¯èª¤è™•ç†**
- å¸³æœ¬ä¸å­˜åœ¨ â†’ é¡¯ç¤ºï¼šã€Œç›®æ¨™å¸³æœ¬ä¸å­˜åœ¨æˆ–å·²è¢«åˆªé™¤ã€
- æ¬Šé™ä¸è¶³ â†’ é¡¯ç¤ºï¼šã€Œæ‚¨æ²’æœ‰æ¬Šé™å­˜å–æ­¤å¸³æœ¬ã€
- ç¶²è·¯ç•°å¸¸ â†’ é¡¯ç¤ºï¼šã€Œç¶²è·¯é€£ç·šç•°å¸¸ï¼Œå·²åˆ‡æ›è‡³é›¢ç·šæ¨¡å¼ã€
- è³‡æ–™åŒæ­¥å¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œå¸³æœ¬è³‡æ–™åŒæ­¥ä¸­ï¼Œè«‹ç¨å€™...ã€
- å¸³æœ¬è¢«æ­¸æª” â†’ é¡¯ç¤ºï¼šã€Œæ­¤å¸³æœ¬å·²æ­¸æª”ï¼Œåƒ…èƒ½æª¢è¦–ä¸å¯ç·¨è¼¯ã€

**å°æ‡‰æ¨¡çµ„**: 2051. MLS.js  
**æ ¸å¿ƒå‡½æ•¸**: `MLS_switchLedger()`, `MLS_getLedgerList()`, `MLS_validateLedgerAccess()`

---

### F037 é ç®—è¨­å®šå»ºç«‹

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºé ç®—ç®¡ç†ä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦å»ºç«‹å€‹äººæˆ–å°ˆæ¡ˆé ç®—ç›®æ¨™ï¼Œä»¥ä¾¿æ§åˆ¶æ”¯å‡ºä¸¦é”æˆè²¡å‹™è¦åŠƒç›®æ¨™ã€‚

**æ¥­å‹™éœ€æ±‚**
- æ”¯æ´å¤šç¨®é ç®—é¡å‹ï¼ˆæœˆåº¦ã€å¹´åº¦ã€å°ˆæ¡ˆã€åˆ†é¡é ç®—ï¼‰
- æ™ºæ…§é ç®—åˆ†é…å»ºè­°
- é ç®—ç¯„æœ¬å¿«é€Ÿå¥—ç”¨
- å¤šå¹£åˆ¥é ç®—æ”¯æ´
- é ç®—éšå±¤ç®¡ç†ï¼ˆç¸½é ç®—â†’åˆ†é¡é ç®—ï¼‰
- é ç®—ä¿®è¨‚æ­·å²è¨˜éŒ„

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - é ç®—å»ºç«‹ç²¾éˆ
  - é ç®—é¡å‹é¸æ“‡å™¨
  - é ç®—é‡‘é¡è¼¸å…¥ä»‹é¢
  - åˆ†é¡é ç®—åˆ†é…å™¨
  - é ç®—æœŸé–“è¨­å®šé¢æ¿
  - è­¦ç¤ºé–€æª»è¨­å®šå™¨
  - ç¯„æœ¬é¸æ“‡èˆ‡é è¦½

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **å¿«é€Ÿå»ºç«‹è·¯å¾‘**ï¼š
   - é€²å…¥ã€Œé ç®—ç®¡ç†ã€é é¢
   - é»æ“Šã€Œæ–°å¢é ç®—ã€æŒ‰éˆ•
   - é¸æ“‡é ç®—é¡å‹ï¼ˆæœˆåº¦/å¹´åº¦/å°ˆæ¡ˆï¼‰
   - è¼¸å…¥é ç®—é‡‘é¡å’ŒæœŸé–“
   - é¸æ“‡é—œè¯å¸³æœ¬
   - ç¢ºèªå»ºç«‹ä¸¦å•Ÿç”¨

2. **é€²éšå»ºç«‹è·¯å¾‘**ï¼š
   - ä½¿ç”¨é ç®—å»ºç«‹ç²¾éˆ
   - è¨­å®šè©³ç´°é ç®—åƒæ•¸
   - é…ç½®åˆ†é¡é ç®—åˆ†é…
   - è¨­å®šè­¦ç¤ºè¦å‰‡èˆ‡é€šçŸ¥
   - é¸æ“‡é ç®—ç¯„æœ¬æˆ–è‡ªè¨‚
   - é è¦½è¨­å®šä¸¦ç¢ºèªå»ºç«‹

**API è·¯å¾‘**
POST /app/budgets/create

**API å‚³é€æ ¼å¼**
```json
{
  "budget_info": {
    "budget_name": "2025å¹´1æœˆç”Ÿæ´»é ç®—",
    "budget_type": "monthly|yearly|project|category",
    "total_amount": 50000.00,
    "currency": "TWD",
    "start_date": "2025-01-01",
    "end_date": "2025-01-31",
    "description": "æ¯æœˆç”Ÿæ´»æ”¯å‡ºæ§åˆ¶é ç®—"
  },
  "linked_ledger": {
    "ledger_id": "ledger_default_xxxxxxxxxx",
    "ledger_name": "å€‹äººå¸³æœ¬"
  },
  "category_allocation": [
    {
      "category_name": "é¤é£²è²»",
      "allocated_amount": 15000.00,
      "percentage": 30.0,
      "subject_codes": ["2003", "2004"]
    },
    {
      "category_name": "äº¤é€šè²»",
      "allocated_amount": 8000.00,
      "percentage": 16.0,
      "subject_codes": ["2005", "2006"]
    }
  ],
  "alert_settings": {
    "warning_threshold": 80,
    "critical_threshold": 95,
    "enable_notifications": true,
    "notification_channels": ["line", "app_push"],
    "daily_tracking": true
  },
  "template_settings": {
    "use_template": false,
    "template_id": null,
    "save_as_template": true,
    "template_name": "æ¨™æº–æœˆåº¦é ç®—"
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "budget_info": {
    "budget_id": "budget_xxxxxxxxxx",
    "budget_name": "2025å¹´1æœˆç”Ÿæ´»é ç®—",
    "total_amount": 50000.00,
    "allocated_amount": 23000.00,
    "remaining_allocation": 27000.00,
    "created_at": "2025-01-01T00:00:00+08:00",
    "status": "active"
  },
  "category_summary": {
    "total_categories": 2,
    "allocated_percentage": 46.0,
    "unallocated_amount": 27000.00
  },
  "tracking_setup": {
    "auto_tracking_enabled": true,
    "alert_rules_active": true,
    "integration_status": "connected"
  },
  "quick_actions": [
    "æŸ¥çœ‹é ç®—é€²åº¦",
    "ç·¨è¼¯é ç®—è¨­å®š",
    "æ–°å¢è¨˜å¸³è¨˜éŒ„"
  ]
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **å»ºç«‹æˆåŠŸ**ï¼šã€ŒğŸ’° é ç®—ã€2025å¹´1æœˆç”Ÿæ´»é ç®—ã€å»ºç«‹æˆåŠŸï¼ç¸½é ç®— $50,000ã€
- **åˆ†é…å®Œæˆ**ï¼šã€ŒğŸ“Š å·²è¨­å®š2å€‹åˆ†é¡é ç®—ï¼Œåˆ†é…46%ï¼Œå‰©é¤˜ $27,000 å¯èª¿æ•´ã€
- **è­¦ç¤ºå•Ÿç”¨**ï¼šã€ŒğŸ”” é ç®—è­¦ç¤ºå·²å•Ÿç”¨ï¼Œ80%æ™‚æœƒæé†’æ‚¨æ³¨æ„æ”¯å‡ºã€

**éŒ¯èª¤è™•ç†**
- é ç®—é‡‘é¡ç„¡æ•ˆ â†’ é¡¯ç¤ºï¼šã€Œè«‹è¼¸å…¥æœ‰æ•ˆçš„é ç®—é‡‘é¡ï¼ˆå¤§æ–¼0ï¼‰ã€
- æ—¥æœŸè¨­å®šéŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€ŒçµæŸæ—¥æœŸä¸èƒ½æ—©æ–¼é–‹å§‹æ—¥æœŸã€
- åˆ†é…é‡‘é¡è¶…é™ â†’ é¡¯ç¤ºï¼šã€Œåˆ†é¡é ç®—ç¸½é¡ä¸èƒ½è¶…éç¸½é ç®— $50,000ã€
- å¸³æœ¬ä¸å­˜åœ¨ â†’ é¡¯ç¤ºï¼šã€Œé¸æ“‡çš„å¸³æœ¬ä¸å­˜åœ¨ï¼Œè«‹é‡æ–°é¸æ“‡ã€
- æ¨¡æ¿è¼‰å…¥å¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œé ç®—ç¯„æœ¬è¼‰å…¥å¤±æ•—ï¼Œå·²åˆ‡æ›ç‚ºè‡ªè¨‚æ¨¡å¼ã€

**å°æ‡‰æ¨¡çµ„**: 2012. BM.js  
**æ ¸å¿ƒå‡½æ•¸**: `BM_createBudget()`, `BM_allocateBudgetToCategories()`

---

### F038 é ç®—è¿½è¹¤ç›£æ§

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºé ç®—ä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦å³æ™‚è¿½è¹¤é ç®—ä½¿ç”¨æƒ…æ³ï¼Œä»¥ä¾¿æŒæ¡æ”¯å‡ºé€²åº¦ä¸¦é©æ™‚èª¿æ•´æ¶ˆè²»è¡Œç‚ºã€‚

**æ¥­å‹™éœ€æ±‚**
- å³æ™‚é ç®—ä½¿ç”¨é€²åº¦é¡¯ç¤º
- å¤šç¶­åº¦é ç®—åˆ†æï¼ˆæ™‚é–“ã€åˆ†é¡ã€è¶¨å‹¢ï¼‰
- é ç®—åŸ·è¡Œæ•ˆç‡è©•ä¼°
- æ”¯å‡ºæ¨¡å¼åˆ†æèˆ‡å»ºè­°
- é ç®—é”æˆç‡é æ¸¬
- æ­·å²é ç®—æ¯”è¼ƒåˆ†æ

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - é ç®—ç›£æ§å„€è¡¨æ¿
  - é€²åº¦ç’°å½¢åœ–è¡¨
  - åˆ†é¡ä½¿ç”¨æ˜ç´°
  - è¶¨å‹¢åˆ†æåœ–è¡¨
  - å³æ™‚é¤˜é¡é¡¯ç¤º
  - æ•ˆç‡è©•ä¼°æŒ‡æ¨™
  - é æ¸¬åˆ†æé¢æ¿

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **å¿«é€Ÿç›£æ§è·¯å¾‘**ï¼š
   - é€²å…¥é ç®—ç®¡ç†ä¸»é 
   - æŸ¥çœ‹é ç®—ç¸½è¦½å¡ç‰‡
   - é»æ“Šç›®æ¨™é ç®—æª¢è¦–è©³æƒ…
   - å³æ™‚æŸ¥çœ‹ä½¿ç”¨é€²åº¦å’Œé¤˜é¡
   - æŸ¥çœ‹æœ¬é€±/æœ¬æœˆä½¿ç”¨è¶¨å‹¢

2. **è©³ç´°åˆ†æè·¯å¾‘**ï¼š
   - é€²å…¥ç‰¹å®šé ç®—ç›£æ§é é¢
   - æŸ¥çœ‹åˆ†é¡åˆ¥ä½¿ç”¨åˆ†æ
   - æª¢è¦–æ”¯å‡ºè¶¨å‹¢è®ŠåŒ–
   - æŸ¥çœ‹é ç®—é”æˆç‡é æ¸¬
   - å°æ¯”æ­·å²åŒæœŸè¡¨ç¾
   - æŸ¥çœ‹ç³»çµ±æ”¹å–„å»ºè­°

**API è·¯å¾‘**
GET /app/budgets/monitor

**API å‚³é€æ ¼å¼**
```json
{
  "budget_id": "budget_xxxxxxxxxx",
  "monitor_options": {
    "include_predictions": true,
    "include_trends": true,
    "include_categories": true,
    "include_comparisons": true,
    "time_range": "current_period|custom",
    "custom_range": {
      "start_date": "2025-01-01",
      "end_date": "2025-01-31"
    }
  },
  "analysis_depth": "basic|detailed|comprehensive",
  "comparison_periods": [
    "previous_month",
    "same_month_last_year"
  ]
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "budget_status": {
    "budget_id": "budget_xxxxxxxxxx",
    "budget_name": "2025å¹´1æœˆç”Ÿæ´»é ç®—",
    "current_progress": {
      "total_budget": 50000.00,
      "used_amount": 32500.00,
      "remaining_amount": 17500.00,
      "usage_percentage": 65.0,
      "days_elapsed": 18,
      "days_remaining": 13,
      "daily_average": 1805.56,
      "status": "on_track|ahead|behind|exceeded"
    }
  },
  "category_breakdown": [
    {
      "category_name": "é¤é£²è²»",
      "budgeted": 15000.00,
      "spent": 12800.00,
      "remaining": 2200.00,
      "usage_rate": 85.3,
      "status": "warning",
      "trend": "increasing"
    },
    {
      "category_name": "äº¤é€šè²»",
      "budgeted": 8000.00,
      "spent": 4200.00,
      "remaining": 3800.00,
      "usage_rate": 52.5,
      "status": "normal",
      "trend": "stable"
    }
  ],
  "trend_analysis": {
    "spending_velocity": "moderate",
    "peak_spending_days": ["2025-01-15", "2025-01-20"],
    "average_daily_spending": 1805.56,
    "predicted_month_end": {
      "estimated_total": 48500.00,
      "confidence_level": 0.85,
      "likely_outcome": "under_budget"
    }
  },
  "performance_insights": [
    "é¤é£²æ”¯å‡ºè¼ƒé æœŸé«˜15%ï¼Œå»ºè­°æ³¨æ„æ§åˆ¶",
    "äº¤é€šè²»ç”¨è‰¯å¥½ï¼Œé è¨ˆå¯ç¯€çœ $3,800",
    "æ•´é«”é ç®—åŸ·è¡Œè‰¯å¥½ï¼Œé æ¸¬ç¯€é¤˜ $1,500"
  ],
  "recommendations": [
    {
      "type": "spending_adjustment",
      "message": "å»ºè­°æœ¬æœˆå‰©é¤˜å¤©æ•¸æ¯æ—¥é¤é£²æ§åˆ¶åœ¨ $169 ä»¥å…§",
      "priority": "medium"
    }
  ]
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **é€²åº¦æ­£å¸¸**ï¼šã€Œâœ… é ç®—åŸ·è¡Œè‰¯å¥½ï¼å·²ä½¿ç”¨65%ï¼Œé è¨ˆç¯€é¤˜ $1,500ã€
- **éœ€è¦æ³¨æ„**ï¼šã€Œâš ï¸ é¤é£²è²»å·²ç”¨85%ï¼Œå»ºè­°å‰©é¤˜13å¤©æ¯æ—¥æ§åˆ¶åœ¨ $169ã€
- **è¶¨å‹¢è‰¯å¥½**ï¼šã€ŒğŸ“ˆ æ”¯å‡ºè¶¨å‹¢ç©©å®šï¼Œé ç®—é”æˆç‡85%ï¼Œè¡¨ç¾å„ªç§€ã€

**éŒ¯èª¤è™•ç†**
- é ç®—ä¸å­˜åœ¨ â†’ é¡¯ç¤ºï¼šã€Œæ‰¾ä¸åˆ°æŒ‡å®šé ç®—ï¼Œå¯èƒ½å·²è¢«åˆªé™¤ã€
- è³‡æ–™è¨ˆç®—éŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œé ç®—è¨ˆç®—ç•°å¸¸ï¼Œè«‹ç¨å¾Œé‡è©¦ã€
- æ¬Šé™ä¸è¶³ â†’ é¡¯ç¤ºï¼šã€Œæ‚¨æ²’æœ‰æ¬Šé™æŸ¥çœ‹æ­¤é ç®—è³‡è¨Šã€
- ç¶²è·¯ç•°å¸¸ â†’ é¡¯ç¤ºï¼šã€Œç¶²è·¯é€£ç·šç•°å¸¸ï¼Œé¡¯ç¤ºå¿«å–è³‡æ–™ã€

**å°æ‡‰æ¨¡çµ„**: 2012. BM.js  
**æ ¸å¿ƒå‡½æ•¸**: `BM_calculateBudgetProgress()`, `BM_getBudgetReport()`, `BM_analyzeBudgetTrend()`

---

### F039 é ç®—è­¦ç¤ºè¨­å®š

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºé‡è¦–è²¡å‹™æ§åˆ¶çš„ä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦è¨­å®šæ™ºæ…§é ç®—è­¦ç¤ºï¼Œä»¥ä¾¿åœ¨æ”¯å‡ºæ¥è¿‘æˆ–è¶…éé ç®—æ™‚åŠæ™‚æ”¶åˆ°é€šçŸ¥ã€‚

**æ¥­å‹™éœ€æ±‚**
- å¤šå±¤ç´šè­¦ç¤ºè¨­å®šï¼ˆæé†’ã€è­¦å‘Šã€ç·Šæ€¥ï¼‰
- æ™ºæ…§è­¦ç¤ºæ¢ä»¶ï¼ˆç™¾åˆ†æ¯”ã€é‡‘é¡ã€æ™‚é–“ï¼‰
- å¤šé€šé“é€šçŸ¥ç™¼é€ï¼ˆLINEã€APPæ¨æ’­ã€Emailï¼‰
- å€‹äººåŒ–è­¦ç¤ºé »ç‡æ§åˆ¶
- åˆ†é¡åˆ¥ç¨ç«‹è­¦ç¤ºè¨­å®š
- é æ¸¬æ€§è­¦ç¤ºåŠŸèƒ½

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - è­¦ç¤ºè¨­å®šä¸»é é¢
  - è­¦ç¤ºè¦å‰‡ç·¨è¼¯å™¨
  - é€šçŸ¥ç®¡é“é¸æ“‡å™¨
  - è­¦ç¤ºé »ç‡è¨­å®šé¢æ¿
  - è­¦ç¤ºæ­·å²è¨˜éŒ„
  - æ™ºæ…§å»ºè­°è¨­å®š
  - æ¸¬è©¦é€šçŸ¥åŠŸèƒ½

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **åŸºæœ¬è¨­å®šè·¯å¾‘**ï¼š
   - é€²å…¥é ç®—ç®¡ç†é é¢
   - é¸æ“‡ç›®æ¨™é ç®—é»æ“Šã€Œè­¦ç¤ºè¨­å®šã€
   - é–‹å•Ÿè­¦ç¤ºåŠŸèƒ½é–‹é—œ
   - è¨­å®šè­¦ç¤ºé–¾å€¼ï¼ˆ80%è­¦å‘Šã€95%ç·Šæ€¥ï¼‰
   - é¸æ“‡é€šçŸ¥æ–¹å¼ï¼ˆLINE/APPæ¨æ’­ï¼‰
   - å„²å­˜è¨­å®šä¸¦æ¸¬è©¦é€šçŸ¥

2. **é€²éšè¨­å®šè·¯å¾‘**ï¼š
   - é€²å…¥è­¦ç¤ºè¨­å®šè©³ç´°é é¢
   - è¨­å®šå¤šå±¤ç´šè­¦ç¤ºæ¢ä»¶
   - é…ç½®åˆ†é¡åˆ¥ç¨ç«‹è­¦ç¤º
   - è¨­å®šæ™ºæ…§é æ¸¬è­¦ç¤º
   - è‡ªè¨‚é€šçŸ¥è¨Šæ¯æ¨¡æ¿
   - è¨­å®šå‹¿æ“¾æ™‚æ®µå’Œé »ç‡é™åˆ¶

**API è·¯å¾‘**
PUT /app/budgets/alerts

**API å‚³é€æ ¼å¼**
```json
{
  "budget_id": "budget_xxxxxxxxxx",
  "alert_configuration": {
    "global_settings": {
      "enable_alerts": true,
      "default_channels": ["line", "app_push"],
      "quiet_hours": {
        "start": "22:00",
        "end": "08:00"
      },
      "frequency_limit": {
        "max_per_day": 3,
        "cooldown_minutes": 120
      }
    },
    "threshold_alerts": [
      {
        "alert_level": "warning",
        "trigger_type": "percentage",
        "trigger_value": 80.0,
        "message_template": "âš ï¸ é ç®—è­¦ç¤ºï¼šæ‚¨çš„{budget_name}å·²ä½¿ç”¨{percentage}%",
        "channels": ["line"],
        "enabled": true
      },
      {
        "alert_level": "critical",
        "trigger_type": "percentage", 
        "trigger_value": 95.0,
        "message_template": "ğŸš¨ ç·Šæ€¥è­¦ç¤ºï¼šé ç®—å³å°‡ç”¨å®Œï¼å‰©é¤˜{remaining_amount}å…ƒ",
        "channels": ["line", "app_push"],
        "enabled": true
      }
    ],
    "category_alerts": [
      {
        "category_name": "é¤é£²è²»",
        "threshold": 85.0,
        "custom_message": "ğŸ½ï¸ é¤é£²é ç®—å·²é”85%ï¼Œå»ºè­°æ§åˆ¶å¤–é£Ÿæ”¯å‡º",
        "enabled": true
      }
    ],
    "predictive_alerts": {
      "enable_trend_alerts": true,
      "days_ahead_warning": 7,
      "confidence_threshold": 0.8,
      "message_template": "ğŸ“Š é æ¸¬è­¦ç¤ºï¼šä¾ç›®å‰è¶¨å‹¢ï¼Œé ç®—å¯èƒ½åœ¨{predicted_date}ç”¨å®Œ"
    },
    "smart_suggestions": {
      "enable_spending_tips": true,
      "enable_saving_recommendations": true,
      "adaptive_thresholds": true
    }
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "alert_config": {
    "budget_id": "budget_xxxxxxxxxx",
    "total_alert_rules": 5,
    "active_channels": ["line", "app_push"],
    "last_updated": "2025-01-18T10:30:00+08:00"
  },
  "validation_results": {
    "valid_rules": 5,
    "invalid_rules": 0,
    "warnings": [
      "é¤é£²è²»è­¦ç¤ºé–¾å€¼(85%)é«˜æ–¼å…¨åŸŸè­¦å‘Šé–¾å€¼(80%)ï¼Œå»ºè­°èª¿æ•´"
    ]
  },
  "test_notification": {
    "sent": true,
    "channels_tested": ["line"],
    "delivery_status": {
      "line": "delivered",
      "app_push": "pending"
    }
  },
  "estimated_notifications": {
    "daily_average": 1.2,
    "peak_alert_periods": ["month_end", "weekend"]
  }
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **è¨­å®šæˆåŠŸ**ï¼šã€ŒğŸ”” è­¦ç¤ºè¨­å®šå·²å„²å­˜ï¼å·²è¨­å®š5æ¢è­¦ç¤ºè¦å‰‡ï¼Œæ¸¬è©¦é€šçŸ¥å·²ç™¼é€ã€
- **æ™ºæ…§å»ºè­°**ï¼šã€ŒğŸ’¡ ç³»çµ±å»ºè­°ï¼šé¤é£²è²»è­¦ç¤ºè¨­ç‚º85%ï¼Œè¼ƒç¬¦åˆæ‚¨çš„æ¶ˆè²»ç¿’æ…£ã€
- **æ¸¬è©¦é€šçŸ¥**ï¼šã€ŒğŸ“± æ¸¬è©¦é€šçŸ¥å·²ç™¼é€è‡³LINEï¼Œè«‹ç¢ºèªæ˜¯å¦æ”¶åˆ°ã€

**éŒ¯èª¤è™•ç†**
- é–¾å€¼è¨­å®šéŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œè­¦ç¤ºé–¾å€¼éœ€åœ¨1-100ä¹‹é–“ï¼Œä¸”è­¦å‘Š<ç·Šæ€¥ã€
- é€šçŸ¥ç®¡é“å¤±æ•— â†’ é¡¯ç¤ºï¼šã€ŒLINEé€šçŸ¥è¨­å®šå¤±æ•—ï¼Œè«‹æª¢æŸ¥å¸³è™Ÿç¶å®šç‹€æ…‹ã€
- è¨Šæ¯æ¨¡æ¿éŒ¯èª¤ â†’ é¡¯ç¤ºï¼šã€Œè‡ªè¨‚è¨Šæ¯æ¨¡æ¿æ ¼å¼éŒ¯èª¤ï¼Œå·²æ¢å¾©é è¨­æ¨¡æ¿ã€
- é »ç‡é™åˆ¶è¡çª â†’ é¡¯ç¤ºï¼šã€Œé€šçŸ¥é »ç‡è¨­å®šèˆ‡ç³»çµ±é™åˆ¶è¡çªï¼Œå·²è‡ªå‹•èª¿æ•´ã€

**å°æ‡‰æ¨¡çµ„**: 2012. BM.js  
**æ ¸å¿ƒå‡½æ•¸**: `BM_setBudgetAlertRules()`, `BM_checkBudgetAlert()`, `BM_triggerBudgetAlert()`

---

### F040 å…±äº«å¸³æœ¬å»ºç«‹

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºéœ€è¦èˆ‡å®¶äººæˆ–åœ˜éšŠå”ä½œè¨˜å¸³çš„ä½¿ç”¨è€…ï¼Œæˆ‘æƒ³è¦å»ºç«‹å…±äº«å¸³æœ¬ï¼Œä»¥ä¾¿å¤šäººå…±åŒç®¡ç†è²¡å‹™è¨˜éŒ„ã€‚

**æ¥­å‹™éœ€æ±‚**
- å»ºç«‹å¤šäººå…±äº«è¨˜å¸³ç©ºé–“
- æˆå“¡é‚€è«‹èˆ‡æ¬Šé™ç®¡ç†
- å³æ™‚è³‡æ–™åŒæ­¥æ©Ÿåˆ¶
- å”ä½œè¨˜å¸³è¡çªè™•ç†
- å…±äº«å¸³æœ¬éš±ç§è¨­å®š
- å”ä½œæ­·å²è¨˜éŒ„è¿½è¹¤

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - å…±äº«å¸³æœ¬å»ºç«‹ç²¾éˆ
  - å”ä½œé¡å‹é¸æ“‡å™¨
  - æˆå“¡é‚€è«‹ä»‹é¢
  - æ¬Šé™è¨­å®šé¢æ¿
  - éš±ç§ç­‰ç´šé¸æ“‡å™¨
  - å”ä½œè¦å‰‡è¨­å®šå™¨
  - å»ºç«‹ç¢ºèªèˆ‡æ‘˜è¦

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **å¿«é€Ÿå»ºç«‹è·¯å¾‘**ï¼š
   - é€²å…¥ã€Œå¸³æœ¬ç®¡ç†ã€â†’ã€Œå»ºç«‹å¸³æœ¬ã€
   - é¸æ“‡ã€Œå…±äº«å¸³æœ¬ã€é¡å‹
   - è¼¸å…¥å¸³æœ¬åç¨±èˆ‡æè¿°
   - é¸æ“‡å”ä½œç¯„æœ¬ï¼ˆå®¶åº­/åœ˜éšŠ/å°ˆæ¡ˆï¼‰
   - è¨­å®šåŸºæœ¬æ¬Šé™è¦å‰‡
   - ç«‹å³å»ºç«‹ä¸¦é–‹å§‹é‚€è«‹æˆå“¡

2. **å®Œæ•´è¨­å®šè·¯å¾‘**ï¼š
   - ä½¿ç”¨å…±äº«å¸³æœ¬å»ºç«‹ç²¾éˆ
   - è©³ç´°è¨­å®šå”ä½œåƒæ•¸
   - é…ç½®æˆå“¡æ¬Šé™çŸ©é™£
   - è¨­å®šå”ä½œè¦å‰‡èˆ‡é™åˆ¶
   - é¸æ“‡éš±ç§èˆ‡å®‰å…¨ç­‰ç´š
   - é è¦½è¨­å®šä¸¦ç¢ºèªå»ºç«‹

**API è·¯å¾‘**
POST /app/shared/create

**API å‚³é€æ ¼å¼**
```json
{
  "shared_ledger_info": {
    "ledger_name": "å¼µå®¶å®¶åº­å¸³æœ¬",
    "description": "å®¶åº­å…±åŒæ”¶æ”¯ç®¡ç†",
    "collaboration_type": "family|team|project|friend_group",
    "privacy_level": "private|protected|public",
    "template_id": "family_template_001"
  },
  "collaboration_settings": {
    "max_members": 6,
    "auto_approval": false,
    "require_verification": true,
    "allow_guest_view": false,
    "data_retention_days": 365
  },
  "default_permissions": {
    "member_default": "editor",
    "guest_default": "viewer",
    "permission_inheritance": true,
    "custom_permissions": {
      "can_invite": false,
      "can_export": true,
      "can_delete": false,
      "can_modify_budget": false
    }
  },
  "collaboration_rules": {
    "entry_approval_required": false,
    "modification_window_hours": 24,
    "large_amount_threshold": 5000.00,
    "large_amount_approval": true,
    "comment_required_amount": 1000.00
  },
  "notification_settings": {
    "notify_on_entry": true,
    "notify_on_member_join": true,
    "notify_on_large_transaction": true,
    "daily_summary": true,
    "weekly_report": true
  },
  "initial_setup": {
    "import_existing_data": false,
    "source_ledger_id": null,
    "create_default_categories": true,
    "set_initial_budget": false
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "shared_ledger": {
    "ledger_id": "shared_xxxxxxxxxx",
    "ledger_name": "å¼µå®¶å®¶åº­å¸³æœ¬",
    "collaboration_type": "family",
    "owner_uid": "LCAS_UID_xxxxxxxxxx",
    "created_at": "2025-01-18T10:30:00+08:00",
    "share_code": "FAMILY2025ZHANG",
    "invite_link": "https://lcas.app/join/FAMILY2025ZHANG"
  },
  "collaboration_setup": {
    "max_members": 6,
    "current_members": 1,
    "permission_levels": 4,
    "active_rules": 5,
    "auto_sync_enabled": true
  },
  "integration_status": {
    "real_time_sync": "enabled",
    "notification_system": "connected",
    "backup_service": "activated",
    "conflict_resolution": "automatic"
  },
  "next_steps": [
    {
      "action": "invite_members",
      "description": "é‚€è«‹å®¶åº­æˆå“¡åŠ å…¥å”ä½œ",
      "url": "/app/shared/invite/shared_xxxxxxxxxx"
    },
    {
      "action": "setup_budget",
      "description": "è¨­å®šå®¶åº­é ç®—ç®¡ç†",
      "url": "/app/budgets/create?ledger=shared_xxxxxxxxxx"
    }
  ],
  "quick_actions": [
    "é‚€è«‹æˆå“¡",
    "æ–°å¢è¨˜å¸³",
    "è¨­å®šé ç®—",
    "æŸ¥çœ‹å ±è¡¨"
  ]
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **å»ºç«‹æˆåŠŸ**ï¼šã€ŒğŸ  å…±äº«å¸³æœ¬ã€å¼µå®¶å®¶åº­å¸³æœ¬ã€å»ºç«‹æˆåŠŸï¼é‚€è«‹ç¢¼ï¼šFAMILY2025ZHANGã€
- **å”ä½œå°±ç·’**ï¼šã€ŒğŸ‘¥ å”ä½œç’°å¢ƒå·²è¨­å®šå®Œæˆï¼Œæ”¯æ´6äººåŒæ™‚è¨˜å¸³ï¼Œå³æ™‚åŒæ­¥ã€
- **é‚€è«‹æç¤º**ï¼šã€ŒğŸ’Œ ç¾åœ¨å¯ä»¥é‚€è«‹å®¶åº­æˆå“¡åŠ å…¥ï¼Œä»–å€‘å°‡è‡ªå‹•ç²å¾—ç·¨è¼¯æ¬Šé™ã€

**éŒ¯èª¤è™•ç†**
- å¸³æœ¬åç¨±é‡è¤‡ â†’ é¡¯ç¤ºï¼šã€Œå¸³æœ¬åç¨±å·²å­˜åœ¨ï¼Œè«‹ä½¿ç”¨å…¶ä»–åç¨±ã€
- æ¬Šé™è¨­å®šè¡çª â†’ é¡¯ç¤ºï¼šã€Œæ¬Šé™è¨­å®šæœ‰è¡çªï¼Œé è¨­æ¬Šé™ä¸èƒ½é«˜æ–¼æ“æœ‰è€…ã€
- ç¯„æœ¬è¼‰å…¥å¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œå®¶åº­ç¯„æœ¬è¼‰å…¥å¤±æ•—ï¼Œå·²ä½¿ç”¨åŸºç¤è¨­å®šã€
- å”ä½œæœå‹™ç•°å¸¸ â†’ é¡¯ç¤ºï¼šã€Œå”ä½œæœå‹™æš«æ™‚ä¸å¯ç”¨ï¼Œå·²å»ºç«‹é›¢ç·šå¸³æœ¬ã€
- é‚€è«‹ç¢¼ç”Ÿæˆå¤±æ•— â†’ é¡¯ç¤ºï¼šã€Œé‚€è«‹ç¢¼ç”Ÿæˆå¤±æ•—ï¼Œè«‹æ‰‹å‹•åˆ†äº«é‚€è«‹é€£çµã€

**å°æ‡‰æ¨¡çµ„**: 2013. CM.js  
**æ ¸å¿ƒå‡½æ•¸**: `CM_createSharedLedger()`, `CM_setupCollaboration()`, `CM_generateInviteCode()`

---

### F041 å¤šäººå”ä½œæ¬Šé™

**ä½¿ç”¨è€…æ•…äº‹**  
ä½œç‚ºå…±äº«å¸³æœ¬ç®¡ç†è€…ï¼Œæˆ‘æƒ³è¦ç²¾ç´°æ§åˆ¶æˆå“¡æ¬Šé™ï¼Œä»¥ä¾¿ç¢ºä¿è³‡æ–™å®‰å…¨ä¸¦å»ºç«‹æœ‰æ•ˆçš„å”ä½œè¦å‰‡ã€‚

**æ¥­å‹™éœ€æ±‚**
- åˆ†ç´šæ¬Šé™ç®¡ç†ï¼ˆæ“æœ‰è€…ã€ç®¡ç†å“¡ã€æˆå“¡ã€æª¢è¦–è€…ï¼‰
- åŠŸèƒ½ç´°åˆ†æ¬Šé™æ§åˆ¶
- å‹•æ…‹æ¬Šé™èª¿æ•´æ©Ÿåˆ¶
- æ¬Šé™ç¹¼æ‰¿èˆ‡è¦†å¯«è¦å‰‡
- æ¬Šé™è®Šæ›´æ­·å²è¿½è¹¤
- æ‰¹é‡æ¬Šé™ç®¡ç†åŠŸèƒ½

**å±•ç¤ºå±¤å…ƒä»¶**
- **APPå¹³å°**ï¼š
  - æ¬Šé™ç®¡ç†ä¸»æ§å°
  - æˆå“¡æ¬Šé™çŸ©é™£
  - æ¬Šé™ç­‰ç´šé¸æ“‡å™¨
  - åŠŸèƒ½æ¬Šé™ç´°é …é–‹é—œ
  - æ¬Šé™ç¯„æœ¬ç®¡ç†å™¨
  - æ¬Šé™è®Šæ›´æ­·å²è¨˜éŒ„
  - æ‰¹é‡æ“ä½œå·¥å…·

**ä½¿ç”¨è€…æ“ä½œæµç¨‹**
1. **åŸºæœ¬æ¬Šé™ç®¡ç†è·¯å¾‘**ï¼š
   - é€²å…¥å…±äº«å¸³æœ¬è¨­å®šé é¢
   - é»æ“Šã€Œæˆå“¡æ¬Šé™ç®¡ç†ã€
   - æŸ¥çœ‹ç•¶å‰æˆå“¡åˆ—è¡¨èˆ‡æ¬Šé™
   - é¸æ“‡æˆå“¡èª¿æ•´æ¬Šé™ç­‰ç´š
   - ç¢ºèªæ¬Šé™è®Šæ›´ä¸¦é€šçŸ¥æˆå“¡

2. **é€²éšæ¬Šé™è¨­å®šè·¯å¾‘**ï¼š
   - é€²å…¥æ¬Šé™ç®¡ç†è©³ç´°é é¢
   - è¨­å®šåŠŸèƒ½ç´šåˆ¥ç´°åˆ†æ¬Šé™
   - é…ç½®æ¬Šé™ç¯„æœ¬èˆ‡ç¹¼æ‰¿è¦å‰‡
   - è¨­å®šç‰¹æ®Šæ¬Šé™èˆ‡ä¾‹å¤–æƒ…æ³
   - å»ºç«‹æ¬Šé™è®Šæ›´å¯©æ‰¹æµç¨‹
   - æ‰¹é‡èª¿æ•´å¤šæˆå“¡æ¬Šé™

**API è·¯å¾‘**
PUT /app/shared/permissions

**API å‚³é€æ ¼å¼**
```json
{
  "ledger_id": "shared_xxxxxxxxxx",
  "permission_updates": {
    "individual_updates": [
      {
        "user_id": "LCAS_UID_yyyyyyyyyy",
        "action": "update_level|grant_specific|revoke_specific",
        "new_permission_level": "admin|member|viewer",
        "specific_permissions": {
          "can_add_entry": true,
          "can_edit_entry": true,
          "can_delete_entry": false,
          "can_view_all": true,
          "can_export_data": false,
          "can_invite_member": false,
          "can_manage_budget": false,
          "can_view_reports": true,
          "can_modify_categories": false,
          "can_access_history": true
        },
        "permission_scope": {
          "date_range_limit": null,
          "amount_limit": 5000.00,
          "category_restrictions": [],
          "view_only_own": false
        },
        "reason": "èª¿æ•´ç‚ºç®¡ç†å“¡æ¬Šé™ï¼Œè² è²¬é ç®—ç®¡ç†"
      }
    ],
    "bulk_updates": {
      "apply_to_users": ["LCAS_UID_zzzzzzzzzz", "LCAS_UID_wwwwwwwwww"],
      "template_id": "member_standard",
      "override_existing": false
    }
  },
  "notification_settings": {
    "notify_affected_users": true,
    "notification_message": "æ‚¨åœ¨å¼µå®¶å®¶åº­å¸³æœ¬çš„æ¬Šé™å·²æ›´æ–°",
    "include_permission_summary": true
  },
  "audit_settings": {
    "log_change_reason": true,
    "require_approval": false,
    "effective_date": "immediate|scheduled",
    "scheduled_date": null
  }
}
```

**API å›å‚³æ ¼å¼**
```json
{
  "success": true,
  "permission_changes": {
    "total_users_affected": 3,
    "successful_updates": 3,
    "failed_updates": 0,
    "permission_conflicts": []
  },
  "updated_permissions": [
    {
      "user_id": "LCAS_UID_yyyyyyyyyy",
      "display_name": "ç‹å°æ˜",
      "old_level": "member",
      "new_level": "admin",
      "effective_permissions": {
        "can_add_entry": true,
        "can_edit_entry": true,
        "can_delete_entry": false,
        "can_view_all": true,
        "can_export_data": false,
        "can_invite_member": false,
        "can_manage_budget": false,
        "can_view_reports": true,
        "can_modify_categories": false,
        "can_access_history": true
      },
      "permission_summary": "ç®¡ç†å“¡æ¬Šé™ï¼ˆé™åˆ¶åˆªé™¤å’Œé‚€è«‹ï¼‰"
    }
  ],
  "collaboration_status": {
    "total_members": 4,
    "permission_distribution": {
      "owner": 1,
      "admin": 1,
      "member": 1,
      "viewer": 1
    },
    "active_restrictions": 2,
    "pending_approvals": 0
  },
  "notifications_sent": {
    "total_sent": 3,
    "delivery_status": {
      "line": 2,
      "app_push": 3,
      "email": 0
    }
  }
}
```

**é¡¯ç¤ºæç¤ºè¨Šæ¯**
- **æ¬Šé™æ›´æ–°æˆåŠŸ**ï¼šã€Œâœ… å·²æ›´æ–°3ä½æˆå“¡æ¬Šé™ï¼Œç‹å°æ˜æ™‰å‡ç‚ºç®¡ç†å“¡ã€
- **æ¬Šé™é™åˆ¶æé†’**ï¼šã€ŒğŸ”’ å·²ç‚ºæ–°ç®¡ç†å“¡è¨­å®šé‡‘é¡é™åˆ¶ $5,000ï¼Œç¢ºä¿å¸³æœ¬å®‰å…¨ã€
- **é€šçŸ¥ç™¼é€ç¢ºèª**ï¼šã€ŒğŸ“« æ¬Šé™è®Šæ›´é€šçŸ¥å·²ç™¼é€ï¼Œ3ä½æˆå“¡å·²æ”¶åˆ°æ›´æ–°è³‡è¨Šã€

**éŒ¯èª¤è™•ç†**
- æ¬Šé™ç­‰ç´šç„¡æ•ˆ â†’ é¡¯ç¤ºï¼šã€Œç„¡æ•ˆçš„æ¬Šé™ç­‰ç´šï¼Œè«‹é¸æ“‡æœ‰æ•ˆé¸é …ã€
- æ¬Šé™è¡çª â†’ é¡¯ç¤ºï¼šã€Œæ¬Šé™è¨­å®šè¡çªï¼šç®¡ç†å“¡ä¸èƒ½é™åˆ¶æª¢è¦–å…¨éƒ¨è³‡æ–™ã€
- ç”¨æˆ¶ä¸å­˜åœ¨ â†’ é¡¯ç¤ºï¼šã€ŒæŒ‡å®šç”¨æˆ¶ä¸åœ¨æ­¤å¸³æœ¬ä¸­ï¼Œè«‹å…ˆé‚€è«‹åŠ å…¥ã€
- æ¬Šé™ä¸è¶³ â†’ é¡¯ç¤ºï¼šã€Œæ‚¨æ²’æœ‰æ¬Šé™ä¿®æ”¹å…¶ä»–ç®¡ç†å“¡çš„æ¬Šé™è¨­å®šã€
- æœ€å¾Œæ“æœ‰è€…é™åˆ¶ â†’ é¡¯ç¤ºï¼šã€Œä¸èƒ½ç§»é™¤æœ€å¾Œä¸€ä½æ“æœ‰è€…çš„æ¬Šé™ã€

**å°æ‡‰æ¨¡çµ„**: 2013. CM.js  
**æ ¸å¿ƒå‡½æ•¸**: `CM_setMemberPermission()`, `CM_validatePermission()`, `CM_getPermissionMatrix()`

---

## ğŸ“ˆ é–‹ç™¼å„ªå…ˆç´šèªªæ˜

- **P0 (å¿…è¦)**: æ ¸å¿ƒåŠŸèƒ½ï¼Œå½±éŸ¿åŸºæœ¬å¯ç”¨æ€§
- **P1 (é‡è¦)**: ä¸»è¦åŠŸèƒ½ï¼Œå½±éŸ¿ä½¿ç”¨è€…é«”é©—
- **P2 (æœ‰ç”¨)**: é€²éšåŠŸèƒ½ï¼Œæå‡ç”¢å“åƒ¹å€¼
- **P3 (å¯é¸)**: å»¶ä¼¸åŠŸèƒ½ï¼Œæœªä¾†æ“´å±•æ–¹å‘

---
